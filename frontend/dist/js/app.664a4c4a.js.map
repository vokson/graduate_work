{"version":3,"file":"js/app.664a4c4a.js","mappings":"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C3BzF,KAAM,QACNS,MAAO,CAAET,KAAM,aAIrB9e,KAAM,CAAEyf,KAAM,CAAC,OAAQ,SACvBngB,kBAAmB,CAAEwf,KAAM,QAASS,MAAO,CAAET,KAAM,YAErDI,SAAU,CACR,yBACA,gBACA,gBACA,mBACA,uBAEFC,sBAAsB,GCtRlBC,GAAS,CACbN,KAAM,SACNC,WAAY,CACVppB,GAAI,CACFmpB,KAAM,UAERlpB,KAAM,CACJkpB,KAAM,UAER/gB,aAAc,CACZ+gB,KAAM,UAER9gB,sBAAuB,CACrB8gB,KAAM,UAER7gB,aAAc,CACZ6gB,KAAM,UAER5gB,SAAUglB,IAEZhE,SAAU,CAAC,KAAM,OAAQ,eAAgB,wBAAyB,eAAgB,YAClFC,sBAAsB,GAGlBG,GAAO,CACXR,KAAM,QACNS,MAAOH,IC5BHA,GAAS,CACbN,KAAM,SACNC,WAAY,CACVnpB,KAAM,CACJkpB,KAAM,SACNW,KAAM,CACJ,kBACA,oBACA,kBACA,iBACA,oBACA,oBACA,gBACA,kBACA,kBACA,gBACA,sBACA,wBACA,eACA,kBACA,kBACA,oBACA,mBACA,sBACA,sBACA,gBACA,eACA,kBACA,kBACA,6BACA,4BACA,+BACA,+BACA,qBACA,oBACA,uBACA,uBACA,mBACA,gBACA,eACA,kBACA,kBACA,oBACA,mBACA,sBACA,sBACA,wBACA,4BACA,2BACA,8BACA,8BACA,gCACA,8BACA,iBACA,gBACA,kBACA,uBACA,2BACA,0BACA,6BACA,wBACA,0BACA,0BACA,gCACA,kCACA,kCACA,yBACA,2BACA,mBACA,kBACA,qBACA,qBACA,uBACA,sBACA,yBACA,yBACA,wBACA,gBACA,kBACA,mBACA,kBACA,qBACA,qBACA,oBACA,uBACA,sBACA,yBACA,yBACA,8BACA,6BACA,gCACA,yBAGJ+E,cAAe,CACb1F,KAAM,YAGVI,SAAU,CAAC,OAAQ,kBAGfI,GAAO,CACXR,KAAM,QACNS,MAAOH,ICrGHA,GAAS,CACbN,KAAM,SACNC,WAAY,CACVppB,GAAI,CACFmpB,KAAM,UAERlpB,KAAM,CACJkpB,KAA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","sources":["webpack://vue_project/./src/logic/domain/model.js","webpack://vue_project/./src/App.vue","webpack://vue_project/./src/views/BasePage.vue","webpack://vue_project/./src/components/navigation/NavigationComponent.vue","webpack://vue_project/./src/logic/domain/command.js","webpack://vue_project/./src/logic/domain/event.js","webpack://vue_project/./src/logic/domain/dataclass.js","webpack://vue_project/./src/logic/adapters/api_responses/models/info.js","webpack://vue_project/./src/logic/adapters/api_responses/models/user.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/attribute_regex_validation_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/attribute_together_regex_validation_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/unique_together_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/attribute_has_previous_value_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/has_file_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/has_approval_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/single_union_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/validation/filename_match_pattern_constraint.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/context/document_attributes_context.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/context/previous_documents_attribute_context.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/context/users_emails_context.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_date_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_email_to_address_field.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_email_to_address_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_html_field.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_html_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_text_field.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_text_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_hidden_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_select_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/form/field/form_filtered_select_input.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder/folder_settings.js","webpack://vue_project/./src/logic/adapters/api_responses/models/folder.js","webpack://vue_project/./src/logic/adapters/api_responses/models/permission.js","webpack://vue_project/./src/logic/adapters/api_responses/models/role.js","webpack://vue_project/./src/logic/adapters/api_responses/models/search_schema.js","webpack://vue_project/./src/logic/adapters/api_responses/models/user_folder_setting.js","webpack://vue_project/./src/logic/adapters/api_responses/models/file.js","webpack://vue_project/./src/logic/adapters/api_responses/models/document.js","webpack://vue_project/./src/logic/adapters/api_responses/models/document_approval.js","webpack://vue_project/./src/logic/adapters/api_responses/models/approval_flow.js","webpack://vue_project/./src/logic/adapters/api_responses/models/pdf_merge_file.js","webpack://vue_project/./src/logic/adapters/api_responses/models/usergroup.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/finished_before_item.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/division_by_zero_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/if_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/create_variable_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_user_created_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_created_or_updated_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_approval_created_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_approval_updated_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_approval_deleted_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_approval_flow_started_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_approval_flow_stopped_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_approval_flow_executed_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_email_document_created_from_mail_message_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/dispatch_emails_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_user_by_id_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_user_by_username_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_usergroup_by_id_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_folder_by_id_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_document_by_id_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_document_by_approval_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/update_document_attributes_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/update_document_files_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_mailbox_by_id_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/get_mailchannel_by_id_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/fetch_mail_messages_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/send_mail_message_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/fetch_mail_channel_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/fetch_all_mail_channels_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/create_document_from_mail_message_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/extract_html_portion_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/fetch_counter.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/confirm_counter.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/actions/copy_document_to_usergroup_action.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/flow_process_001.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_process/flow_process.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_item.js","webpack://vue_project/./src/logic/adapters/api_responses/models/flow_item_step.js","webpack://vue_project/./src/logic/adapters/api_responses/models/server_setting.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_channel/parser/attribute_processors/check_mandatory_attribute_processor.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_channel/parser/attribute_processors/datetime_to_timestamp_attribute_processor.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_channel/parser/attribute_processors/set_if_none_attribute_processor.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_channel/parser/simple_parser.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_channel/mail_channel_settings.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_channel.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mailbox.js","webpack://vue_project/./src/logic/adapters/api_responses/models/mail_message.js","webpack://vue_project/./src/logic/adapters/api_responses/models/counter.js","webpack://vue_project/./src/logic/adapters/api.js","webpack://vue_project/./src/logic/service_layer/command_handlers/common_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/user_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/usergroup_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/permission_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/role_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/folder_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/document_handlers.js","webpack://vue_project/./src/logic/service_layer/utils/filename.js","webpack://vue_project/./src/logic/service_layer/utils/file_download.js","webpack://vue_project/./src/logic/service_layer/command_handlers/document_action_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/document_approval_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/document_approval_flow_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/cart_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/server_settings_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/mail_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/file_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/service_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/counter_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/flow_handlers.js","webpack://vue_project/./src/logic/service_layer/command_handlers/validation_handlers.js","webpack://vue_project/./src/logic/service_layer/event_handlers.js","webpack://vue_project/./src/logic/service_layer/message_bus.js","webpack://vue_project/./src/logic/adapters/base_repository.js","webpack://vue_project/./src/logic/adapters/flat_repository.js","webpack://vue_project/./src/logic/adapters/box_repository.js","webpack://vue_project/./src/logic/adapters/mixins/current.js","webpack://vue_project/./src/logic/adapters/user_repository.js","webpack://vue_project/./src/logic/adapters/usergroup_repository.js","webpack://vue_project/./src/logic/adapters/token_repository.js","webpack://vue_project/./src/logic/adapters/folder_repository.js","webpack://vue_project/./src/logic/adapters/mixins/count.js","webpack://vue_project/./src/logic/adapters/doc_repository.js","webpack://vue_project/./src/logic/adapters/file_box_repository.js","webpack://vue_project/./src/logic/adapters/file_flat_repository.js","webpack://vue_project/./src/logic/adapters/user_folder_settings_repository.js","webpack://vue_project/./src/logic/adapters/permission_repository.js","webpack://vue_project/./src/logic/adapters/role_permissions_repository.js","webpack://vue_project/./src/logic/adapters/flat_current_repository.js","webpack://vue_project/./src/logic/adapters/api_http.js","webpack://vue_project/./src/logic/adapters/api_provider.js","webpack://vue_project/./src/logic/adapters/notificator.js","webpack://vue_project/./src/logic/adapters/timer.js","webpack://vue_project/./src/logic/adapters/folder_settings.js","webpack://vue_project/./src/logic/adapters/info_repository.js","webpack://vue_project/./src/logic/adapters/cart_repository.js","webpack://vue_project/./src/logic/adapters/countable_flat_repository.js","webpack://vue_project/./src/logic/service_layer/uow.js","webpack://vue_project/./src/views/LoginPage.vue","webpack://vue_project/./src/components/buttons/BtnComponent.vue","webpack://vue_project/./src/components/buttons/BtnComponent.vue?3d80","webpack://vue_project/./src/components/HeadingComponent.vue","webpack://vue_project/./src/components/HeadingComponent.vue?fb86","webpack://vue_project/./src/components/fields/FormTextInput.vue","webpack://vue_project/./src/components/fields/FormTextInput.vue?cd20","webpack://vue_project/./src/views/LoginPage.vue?fce3","webpack://vue_project/./src/views/SearchDocumentPage.vue","webpack://vue_project/./src/components/document/DocumentRow.vue","webpack://vue_project/./src/components/document/DocumentAttributeRow.vue","webpack://vue_project/./src/components/SizedDiv.vue","webpack://vue_project/./src/components/SizedDiv.vue?f107","webpack://vue_project/./src/components/fields/FormTextField.vue","webpack://vue_project/./src/components/fields/FormTextField.vue?8ba2","webpack://vue_project/./src/components/fields/FormDateInput.vue","webpack://vue_project/./src/components/fields/FormDateInput.vue?fc74","webpack://vue_project/./src/components/fields/FormBooleanInput.vue","webpack://vue_project/./src/components/fields/FormBooleanInput.vue?b978","webpack://vue_project/./src/components/document/DocumentAttributeRow.vue?0dac","webpack://vue_project/./src/components/document/DocumentButtonsRow.vue","webpack://vue_project/./src/components/buttons/TextButton.vue","webpack://vue_project/./src/components/buttons/TextButton.vue?2665","webpack://vue_project/./src/components/document/DocumentButtonsRow.vue?427d","webpack://vue_project/./src/components/document/DocumentErrorsRow.vue","webpack://vue_project/./src/components/document/DocumentErrorsRow.vue?04a1","webpack://vue_project/./src/components/document/DocumentFilesRow.vue","webpack://vue_project/./src/components/file/FileBlock.vue","webpack://vue_project/./src/components/buttons/ToggleTextButton.vue","webpack://vue_project/./src/components/buttons/ToggleTextButton.vue?7a9c","webpack://vue_project/./src/components/file/FileBlock.vue?e3ec","webpack://vue_project/./src/components/document/DocumentFilesRow.vue?91a5","webpack://vue_project/./src/components/document/DocumentRow.vue?0baa","webpack://vue_project/./src/components/document/DocumentPageButtonsRow.vue","webpack://vue_project/./src/components/document/DocumentPageButtonsRow.vue?33eb","webpack://vue_project/./src/components/document/DocumentPageSearchRow.vue","webpack://vue_project/./src/components/fields/FormSelectInput.vue","webpack://vue_project/./src/components/fields/FormSelectInput.vue?f7b0","webpack://vue_project/./src/components/fields/FormFilteredSelectInput.vue","webpack://vue_project/./src/components/fields/FormFilteredSelectInput.vue?5112","webpack://vue_project/./src/components/document/TuningItem.vue","webpack://vue_project/./src/components/buttons/IconButton.vue","webpack://vue_project/./src/components/buttons/IconButton.vue?929d","webpack://vue_project/./src/components/document/TuningItem.vue?ad77","webpack://vue_project/./src/components/document/DocumentPageSearchRow.vue?9ce3","webpack://vue_project/./src/components/document/DocumentPageSortRow.vue","webpack://vue_project/./src/components/buttons/ArrowSwitch.vue","webpack://vue_project/./src/components/buttons/ArrowSwitch.vue?3deb","webpack://vue_project/./src/components/document/DocumentPageSortRow.vue?0147","webpack://vue_project/./src/components/file/FileList.vue","webpack://vue_project/./src/components/file/FileList.vue?1d44","webpack://vue_project/./src/components/file/JsonFileDropZone.vue","webpack://vue_project/./src/components/file/JsonFileDropZone.vue?46e0","webpack://vue_project/./src/components/file/FileDropZone.vue","webpack://vue_project/./src/components/file/FileDropZone.vue?4a60","webpack://vue_project/./src/components/document/DocumentPageDownloadProgressRow.vue","webpack://vue_project/./src/components/document/DocumentPageDownloadProgressRow.vue?ef8b","webpack://vue_project/./src/components/document/DocumentPaginationRow.vue","webpack://vue_project/./src/components/document/DocumentPaginationRow.vue?2669","webpack://vue_project/./src/views/SearchDocumentPage.vue?1b4e","webpack://vue_project/./src/views/ApprovalsPage.vue","webpack://vue_project/./src/views/ApprovalsPage.vue?728f","webpack://vue_project/./src/views/DocumentPage.vue","webpack://vue_project/./src/components/document/DocumentAttributeBlock.vue","webpack://vue_project/./src/components/document/DocumentAttributeBlock.vue?8155","webpack://vue_project/./src/components/approval/ApprovalRow.vue","webpack://vue_project/./src/components/approval/ApprovalRow.vue?8d74","webpack://vue_project/./src/components/approval/ApprovalFlow.vue","webpack://vue_project/./src/components/approval/ApprovalFlowStep.vue","webpack://vue_project/./src/components/approval/ApprovalFlowStepItem.vue","webpack://vue_project/./src/components/approval/ApprovalFlowStepItem.vue?7c83","webpack://vue_project/./src/components/approval/ApprovalFlowStep.vue?dacf","webpack://vue_project/./src/components/approval/ApprovalFlow.vue?975a","webpack://vue_project/./src/components/forms/BaseForm.vue","webpack://vue_project/./src/components/fields/FormHtmlField.vue","webpack://vue_project/./src/components/fields/FormHtmlField.vue?f02c","webpack://vue_project/./src/components/fields/FormMultilineTextInput.vue","webpack://vue_project/./src/components/fields/FormMultilineTextInput.vue?3dee","webpack://vue_project/./src/components/fields/FormEmailToAddressField.vue","webpack://vue_project/./src/components/fields/FormEmailToAddressField.vue?4174","webpack://vue_project/./src/components/fields/FormEmailToAddressInput.vue","webpack://vue_project/./src/components/fields/FormEmailToAddressInput.vue?3c92","webpack://vue_project/./src/components/fields/FormHtmlInput.vue","webpack://vue_project/./src/components/fields/FormHtmlInput.vue?6f9c","webpack://vue_project/./src/components/fields/FormHiddenInput.vue","webpack://vue_project/./src/components/fields/FormHiddenInput.vue?80b5","webpack://vue_project/./src/components/forms/BaseForm.vue?93a1","webpack://vue_project/./src/views/DocumentPage.vue?8cac","webpack://vue_project/./src/views/FoldersPage.vue","webpack://vue_project/./src/components/folder/FolderTreeNode.vue","webpack://vue_project/./src/components/folder/FolderTreeNode.vue?ffbf","webpack://vue_project/./src/views/FoldersPage.vue?16a5","webpack://vue_project/./src/views/CartPage.vue","webpack://vue_project/./src/views/CartPage.vue?115c","webpack://vue_project/./src/views/ProfilePage.vue","webpack://vue_project/./src/views/ProfilePage.vue?ccbe","webpack://vue_project/./src/views/settings/SettingsPage.vue","webpack://vue_project/./src/views/settings/SettingsPage.vue?1d87","webpack://vue_project/./src/views/settings/UserSettingsPage.vue","webpack://vue_project/./src/components/SearchComponent.vue","webpack://vue_project/./src/components/document/DocumentSearchStatusRow.vue","webpack://vue_project/./src/components/document/DocumentSearchStatusRow.vue?3de7","webpack://vue_project/./src/components/SearchComponent.vue?c49b","webpack://vue_project/./src/views/settings/UserSettingsPage.vue?5fdc","webpack://vue_project/./src/views/settings/UserReplacementsPage.vue","webpack://vue_project/./src/components/user/UserItem.vue","webpack://vue_project/./src/components/user/UserItem.vue?76ba","webpack://vue_project/./src/views/settings/UserReplacementsPage.vue?7767","webpack://vue_project/./src/views/settings/UserFolderSettingsPage.vue","webpack://vue_project/./src/views/settings/UserFolderSettingsPage.vue?b00d","webpack://vue_project/./src/views/settings/FolderSettingsPage.vue","webpack://vue_project/./src/views/settings/FolderSettingsPage.vue?d8cb","webpack://vue_project/./src/views/settings/PermissionSettingsPage.vue","webpack://vue_project/./src/views/settings/PermissionSettingsPage.vue?9312","webpack://vue_project/./src/views/settings/UserGroupSettingsPage.vue","webpack://vue_project/./src/views/settings/UserGroupSettingsPage.vue?7053","webpack://vue_project/./src/views/settings/UsersInUserGroupsSettingsPage.vue","webpack://vue_project/./src/views/settings/UsersInUserGroupsSettingsPage.vue?70ef","webpack://vue_project/./src/views/settings/ServerSettingsPage.vue","webpack://vue_project/./src/views/settings/ServerSettingsPage.vue?53ea","webpack://vue_project/./src/views/settings/CounterSettingsPage.vue","webpack://vue_project/./src/views/settings/CounterSettingsPage.vue?c008","webpack://vue_project/./src/views/settings/MailBoxSettingsPage.vue","webpack://vue_project/./src/views/settings/MailBoxSettingsPage.vue?cf57","webpack://vue_project/./src/views/settings/MailChannelSettingsPage.vue","webpack://vue_project/./src/views/settings/MailChannelSettingsPage.vue?6a3c","webpack://vue_project/./src/views/settings/MailChannelsInMailBoxesSettingsPage.vue","webpack://vue_project/./src/components/GroupItem.vue","webpack://vue_project/./src/components/GroupItem.vue?a350","webpack://vue_project/./src/views/settings/MailChannelsInMailBoxesSettingsPage.vue?da1e","webpack://vue_project/./src/views/settings/MailMessagesPage.vue","webpack://vue_project/./src/views/settings/MailMessagesPage.vue?6532","webpack://vue_project/./src/views/service/ServicePage.vue","webpack://vue_project/./src/views/service/ServicePage.vue?6e60","webpack://vue_project/./src/views/service/PdfMergeToolPage.vue","webpack://vue_project/./src/components/PdfDocumentRow.vue","webpack://vue_project/./src/components/PdfDocumentRow.vue?47ca","webpack://vue_project/./src/views/service/PdfMergeToolPage.vue?36a7","webpack://vue_project/./src/views/service/ShareFilePage.vue","webpack://vue_project/./src/views/service/ShareFilePage.vue?bff7","webpack://vue_project/./src/views/service/SelfTestingPage.vue","webpack://vue_project/./src/components/QuestionBlock.vue","webpack://vue_project/./src/components/QuestionBlock.vue?845f","webpack://vue_project/./src/views/service/SelfTestingPage.vue?4f05","webpack://vue_project/./src/views/service/MessagePage.vue","webpack://vue_project/./src/views/service/MessagePage.vue?3696","webpack://vue_project/./src/views/service/DocumentApprovalSearchPage.vue","webpack://vue_project/./src/views/service/DocumentApprovalSearchPage.vue?ea57","webpack://vue_project/./src/views/download/DownloadFileFromFolderPage.vue","webpack://vue_project/./src/views/download/DownloadFilePage.vue","webpack://vue_project/./src/views/download/DownloadFilePage.vue?7238","webpack://vue_project/./src/views/download/DownloadFileFromFolderPage.vue?2065","webpack://vue_project/./src/views/download/DownloadShareFilePage.vue","webpack://vue_project/./src/views/download/DownloadShareFilePage.vue?4bb3","webpack://vue_project/./src/views/download/DownloadMailMessageFilePage.vue","webpack://vue_project/./src/views/download/DownloadMailMessageFilePage.vue?5183","webpack://vue_project/./src/views/settings/FlowsPage.vue","webpack://vue_project/./src/views/settings/FlowsPage.vue?e680","webpack://vue_project/./src/views/settings/FlowItemPage.vue","webpack://vue_project/./src/components/flow/FlowItemStep.vue","webpack://vue_project/./src/components/flow/FlowItemStep.vue?fa50","webpack://vue_project/./src/views/settings/FlowItemPage.vue?61b8","webpack://vue_project/./src/views/settings/FlowItemsPage.vue","webpack://vue_project/./src/views/settings/FlowItemsPage.vue?c78e","webpack://vue_project/./src/router/index.js","webpack://vue_project/./src/logic/service_layer/use_modules.js","webpack://vue_project/./src/components/navigation/NavigationComponent.vue?1434","webpack://vue_project/./src/views/BasePage.vue?a8b8","webpack://vue_project/./src/App.vue?7ccd","webpack://vue_project/./src/main.js","webpack://vue_project/webpack/bootstrap","webpack://vue_project/webpack/runtime/chunk loaded","webpack://vue_project/webpack/runtime/compat get default export","webpack://vue_project/webpack/runtime/define property getters","webpack://vue_project/webpack/runtime/global","webpack://vue_project/webpack/runtime/hasOwnProperty shorthand","webpack://vue_project/webpack/runtime/jsonp chunk loading","webpack://vue_project/webpack/startup"],"sourcesContent":["import { v4 as uuidv4 } from \"uuid\";\r\n\r\n// const construct = (init_arr, values, targetObj) => {\r\n//   let i = 0;\r\n//   let to_dict_keys = [];\r\n\r\n//   init_arr.forEach((init) => {\r\n//     const [is_getter_required, should_be_include_to_dict, key, default_value] =\r\n//       init;\r\n\r\n//     if (default_value === null || default_value === undefined) {\r\n//       targetObj[\"_\" + key] = values[i];\r\n//       i++;\r\n//     } else {\r\n//       targetObj[\"_\" + key] = default_value;\r\n//     }\r\n\r\n//     if (is_getter_required) add_getter_to_object(targetObj, key);\r\n//     if (should_be_include_to_dict) to_dict_keys.push(key);\r\n//   });\r\n\r\n//   targetObj[\"_to_dict_getters\"] = to_dict_keys;\r\n// };\r\n\r\n// const add_getter_to_object = (obj, property) =>\r\n//   Object.defineProperty(obj, property, {\r\n//     get() {\r\n//       return obj[\"_\" + property];\r\n//     },\r\n//   });\r\n\r\n// const subsetObject = (obj, keys) => {\r\n//   let result = {};\r\n//   keys.forEach((key) => (result[key] = obj[key]));\r\n//   return result;\r\n// };\r\n\r\nconst evaluate_pattern = (pattern, attributes, escape_regex_symbols = true) => {\r\n  const arr = [...pattern.matchAll(new RegExp(\"{%([^{}%]*)%}\", \"g\"))];\r\n  let result = pattern;\r\n\r\n  arr.forEach((e) => {\r\n    const part_to_be_replaced = e[0];\r\n    let expression = e[1];\r\n\r\n    // Ищем в выражении все имена атрибутов и заменяем их на значения\r\n    Object.keys(attributes).forEach((key) => {\r\n      // Получаем значение с экранированными спецсимволами рег выражений\r\n      // const change_with = escapeRegExp(attributes[key]);\r\n      const change_with = attributes[key];\r\n      expression = expression.replace(\r\n        \"$$\" + key + \"$$\",\r\n        // Нужно, чтобы не работало экранирование внутри значения\r\n        \"String.raw`\" + change_with + \"`\"\r\n      );\r\n    });\r\n\r\n    // Пытаемся выполнить выражение\r\n    let evaluated_expression = \"\";\r\n    try {\r\n      evaluated_expression = eval(expression);\r\n    } catch (e) {\r\n      console.log(`Error during evaluation of pattern \"${pattern}\".`);\r\n      console.log(e);\r\n    }\r\n\r\n    // Экранируем спецсимволы регулярных выражений\r\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions\r\n    // $& means the whole matched string\r\n    if (escape_regex_symbols) {\r\n      const escapeRegExp = (s) => s.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\r\n      evaluated_expression = escapeRegExp(evaluated_expression);\r\n    }\r\n\r\n    while (result.indexOf(part_to_be_replaced) !== -1)\r\n      result = result.replace(part_to_be_replaced, evaluated_expression);\r\n  });\r\n\r\n  return result;\r\n};\r\n\r\n// class Model {\r\n//   constructor(init, params) {\r\n//     this._to_dict_getters = [];\r\n//     construct(init, params, this);\r\n//   }\r\n\r\n//   get to_dict() {\r\n//     return subsetObject(this, this._to_dict_getters);\r\n//   }\r\n// }\r\n\r\nclass User {\r\n  constructor(\r\n    username,\r\n    email,\r\n    first_name,\r\n    last_name,\r\n    patronomic,\r\n    position,\r\n    department,\r\n    is_active,\r\n    access_group_regex,\r\n    role,\r\n    role_inside_group,\r\n    role_outside_group,\r\n    on_behalf\r\n  ) {\r\n    this._username = username;\r\n    this._email = email;\r\n    this._first_name = first_name;\r\n    this._last_name = last_name;\r\n    this._patronomic = patronomic;\r\n    this._position = position;\r\n    this._department = department;\r\n    this._is_active = is_active;\r\n    this._access_group_regex = access_group_regex;\r\n    this._role = role;\r\n    this._role_inside_group = role_inside_group;\r\n    this._role_outside_group = role_outside_group;\r\n    this._on_behalf = on_behalf;\r\n  }\r\n\r\n  reset() {\r\n    this._username = \"\";\r\n    this._email = \"\";\r\n    this._first_name = \"\";\r\n    this._last_name = \"\";\r\n    this._patronomic = \"\";\r\n    this._position = \"\";\r\n    this._department = \"\";\r\n    this._is_active = \"\";\r\n    this._access_group_regex = \"^$\";\r\n    this._role = \"\";\r\n    this._role_inside_group = \"\";\r\n    this._role_outside_group = \"\";\r\n    this._on_behalf = null;\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      username: this._username,\r\n      email: this._email,\r\n      first_name: this._first_name,\r\n      last_name: this._last_name,\r\n      patronomic: this._patronomic,\r\n      position: this._position,\r\n      department: this._department,\r\n      is_active: this._is_active,\r\n      access_group_regex: this._access_group_regex,\r\n      role: this._role,\r\n      role_inside_group: this._role_inside_group,\r\n      role_outside_group: this._role_outside_group,\r\n      on_behalf: this._on_behalf,\r\n    };\r\n  }\r\n\r\n  get username() {\r\n    return this._username;\r\n  }\r\n\r\n  set username(value) {\r\n    this._username = value;\r\n  }\r\n\r\n  get email() {\r\n    return this._email;\r\n  }\r\n\r\n  set email(value) {\r\n    this._email = value;\r\n  }\r\n\r\n  get first_name() {\r\n    return this._first_name;\r\n  }\r\n\r\n  set first_name(value) {\r\n    this._first_name = value;\r\n  }\r\n\r\n  get last_name() {\r\n    return this._last_name;\r\n  }\r\n\r\n  set last_name(value) {\r\n    this._last_name = value;\r\n  }\r\n\r\n  get patronomic() {\r\n    return this._patronomic;\r\n  }\r\n\r\n  set patronomic(value) {\r\n    this._patronomic = value;\r\n  }\r\n\r\n  get position() {\r\n    return this._position;\r\n  }\r\n\r\n  set position(value) {\r\n    this._position = value;\r\n  }\r\n\r\n  get department() {\r\n    return this._department;\r\n  }\r\n\r\n  set department(value) {\r\n    this._department = value;\r\n  }\r\n\r\n  get is_active() {\r\n    return this._is_active;\r\n  }\r\n\r\n  set is_active(value) {\r\n    this._is_active = value;\r\n  }\r\n\r\n  get access_group_regex() {\r\n    return this._access_group_regex;\r\n  }\r\n\r\n  set access_group_regex(value) {\r\n    this._access_group_regex = value;\r\n  }\r\n\r\n  get role() {\r\n    return this._role;\r\n  }\r\n\r\n  set role(value) {\r\n    this._role = value;\r\n  }\r\n\r\n  get role_inside_group() {\r\n    return this._role_inside_group;\r\n  }\r\n\r\n  set role_inside_group(value) {\r\n    this._role_inside_group = value;\r\n  }\r\n\r\n  get role_outside_group() {\r\n    return this._role_outside_group;\r\n  }\r\n\r\n  set role_outside_group(value) {\r\n    this._role_outside_group = value;\r\n  }\r\n\r\n  get on_behalf() {\r\n    return this._on_behalf;\r\n  }\r\n\r\n  set on_behalf(value) {\r\n    this._on_behalf = value;\r\n  }\r\n}\r\n\r\nclass UserGroup {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, true, \"id\"],\r\n  //       [true, true, \"name\"],\r\n  //       [true, true, \"slug\"],\r\n  //       [true, true, \"is_private\"],\r\n  //       [true, false, \"users\", []],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(id, name, slug, is_private) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._slug = slug;\r\n    this._is_private = is_private;\r\n    this._users = [];\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this._id,\r\n      name: this._name,\r\n      slug: this._slug,\r\n      is_private: this._is_private,\r\n      users: this._users,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get slug() {\r\n    return this._slug;\r\n  }\r\n\r\n  get is_private() {\r\n    return this._is_private;\r\n  }\r\n\r\n  get users() {\r\n    return this._users;\r\n  }\r\n\r\n  add_user(user) {\r\n    this._users.push(user);\r\n  }\r\n\r\n  has_username(name) {\r\n    return this._users.map((x) => x.username).includes(name);\r\n  }\r\n}\r\n\r\nclass Document {\r\n  constructor(\r\n    id,\r\n    folder_id,\r\n    usergroup_id,\r\n    is_created_first_time,\r\n    union,\r\n    created_at = new Date(),\r\n    updated_at = new Date()\r\n  ) {\r\n    this._id = id;\r\n    this._folder_id = folder_id;\r\n    this._usergroup_id = usergroup_id;\r\n    this._union = union;\r\n    this._raw_attributes = {};\r\n    this._attributes = {};\r\n    this._description = \"\";\r\n    this._description_pattern = \"\";\r\n    this._files = {};\r\n    this._errors = [];\r\n    this._is_saved = true;\r\n    this._is_deleted = false;\r\n    this._is_created_first_time = is_created_first_time;\r\n    this._is_blocked = true;\r\n    this._created_at = created_at;\r\n    this._updated_at = updated_at;\r\n\r\n    this._approvals = [];\r\n\r\n    this._errors_container_id = uuidv4();\r\n    this._started_checks_count = 0;\r\n    this._finished_checks_count = 0;\r\n    this._is_once_validated = false;\r\n\r\n    this._clones = [];\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get folder_id() {\r\n    return this._folder_id;\r\n  }\r\n\r\n  get usergroup_id() {\r\n    return this._usergroup_id;\r\n  }\r\n\r\n  get union() {\r\n    return this._union;\r\n  }\r\n\r\n  set union(value) {\r\n    this._union = value;\r\n  }\r\n\r\n  get raw_attributes() {\r\n    return this._raw_attributes;\r\n  }\r\n\r\n  get attributes() {\r\n    return this._attributes;\r\n  }\r\n\r\n  get errors() {\r\n    return this._errors;\r\n  }\r\n\r\n  set_attribute(name, value) {\r\n    this._raw_attributes[name] = value;\r\n    this._attributes[name] = this._decode_attribute(name, value);\r\n    this._is_once_validated = false;\r\n  }\r\n\r\n  get_raw_attribute(name) {\r\n    if (Object.prototype.hasOwnProperty.call(this._raw_attributes, name))\r\n      return this._raw_attributes[name];\r\n    return null;\r\n  }\r\n\r\n  get_attribute(name) {\r\n    if (Object.prototype.hasOwnProperty.call(this._attributes, name))\r\n      return this._attributes[name];\r\n    return null;\r\n  }\r\n\r\n  add_file(id, value) {\r\n    this._files[id] = value;\r\n    this._is_once_validated = false;\r\n  }\r\n\r\n  remove_file(id) {\r\n    delete this._files[id];\r\n    this._is_once_validated = false;\r\n  }\r\n\r\n  get_file(id) {\r\n    return Object.prototype.hasOwnProperty.call(this._files, id)\r\n      ? this._files[id]\r\n      : null;\r\n  }\r\n\r\n  get files() {\r\n    return Object.values(this._files);\r\n  }\r\n\r\n  add_approval(value) {\r\n    this._approvals.push(value);\r\n  }\r\n\r\n  get approvals() {\r\n    return this._approvals;\r\n  }\r\n\r\n  add_error(container_id, value) {\r\n    if (\r\n      container_id === this._errors_container_id &&\r\n      !this._errors.includes(value)\r\n    )\r\n      this._errors.push(value);\r\n  }\r\n\r\n  reset_errors() {\r\n    this._errors = [];\r\n    this._errors_container_id = uuidv4();\r\n    this._started_checks_count = 0;\r\n    this._finished_checks_count = 0;\r\n    this._is_validation_in_progress = false;\r\n  }\r\n\r\n  get errors_container_id() {\r\n    return this._errors_container_id;\r\n  }\r\n\r\n  get is_saved() {\r\n    return this._is_saved;\r\n  }\r\n\r\n  save() {\r\n    this._is_saved = true;\r\n    this._is_created_first_time = false;\r\n  }\r\n\r\n  modify() {\r\n    this._is_saved = false;\r\n  }\r\n\r\n  get is_deleted() {\r\n    return this._is_deleted;\r\n  }\r\n\r\n  delete() {\r\n    this._is_deleted = true;\r\n  }\r\n\r\n  recover() {\r\n    this._is_deleted = false;\r\n  }\r\n\r\n  get is_created_first_time() {\r\n    return this._is_created_first_time;\r\n  }\r\n\r\n  _decode_attribute = (name, value) => {\r\n    if (name.toLowerCase().includes(\"date\")) {\r\n      // Если дата не назначена\r\n      if (value === \"\" || value === 0) return \"\";\r\n      const date = new Date(value * 1000);\r\n\r\n      if (isNaN(date.getTime())) return value;\r\n\r\n      return [date.getDate(), date.getMonth() + 1, date.getFullYear()]\r\n        .map((n) => (n < 10 ? `0${n}` : `${n}`))\r\n        .join(\".\");\r\n    }\r\n\r\n    return value;\r\n  };\r\n\r\n  get raw_description() {\r\n    return this._description;\r\n  }\r\n\r\n  set description(value) {\r\n    if (value === undefined) return;\r\n    this._description = value;\r\n  }\r\n\r\n  get description() {\r\n    // Не нужно экранировать спецсимволы (false)\r\n    return evaluate_pattern(this._description_pattern, this._attributes, false);\r\n  }\r\n\r\n  get description_pattern() {\r\n    return this._description_pattern;\r\n  }\r\n\r\n  set description_pattern(value) {\r\n    if (value === undefined) return;\r\n    this._description_pattern = value;\r\n  }\r\n\r\n  get is_blocked() {\r\n    return this._is_blocked;\r\n  }\r\n\r\n  set is_blocked(value) {\r\n    if (value === undefined) return;\r\n    this._is_blocked = value;\r\n  }\r\n\r\n  get created_at() {\r\n    return this._created_at;\r\n  }\r\n\r\n  get updated_at() {\r\n    return this._updated_at;\r\n  }\r\n\r\n  start_validation(count = 1) {\r\n    this._started_checks_count += count;\r\n    this._is_once_validated = true;\r\n  }\r\n\r\n  stop_validation() {\r\n    this._finished_checks_count++;\r\n  }\r\n\r\n  get is_validation_in_progress() {\r\n    return this._started_checks_count > this._finished_checks_count;\r\n  }\r\n\r\n  get is_once_validated() {\r\n    return this._is_once_validated;\r\n  }\r\n\r\n  add_clone(doc) {\r\n    this._clones.push(doc);\r\n  }\r\n\r\n  get clones() {\r\n    return this._clones;\r\n  }\r\n}\r\n\r\nclass Folder {\r\n  constructor(id) {\r\n    this._id = id;\r\n    this._name = null;\r\n    this._storage_path = \"\";\r\n    this._master_usergroup_slug = \"\";\r\n    this._access_group = \"\";\r\n\r\n    this._version = \"\";\r\n    this._search_schema = null;\r\n    this._form_schema = null;\r\n    this._max_file_size = null;\r\n    this._validation_constraints = null;\r\n    this._user_search_schema = null;\r\n    this._filename_pattern = null;\r\n    this._description_pattern = \"\";\r\n    this._is_empty_search_allowed = null;\r\n    this._is_list_container_required = true;\r\n    this._is_doc_container_required = true;\r\n    this._doc_container_parsers = [];\r\n    this._is_necessary_validate = false;\r\n    this._default_sort_attribute = null;\r\n    this._default_sort_order = true;\r\n    this._default_mode = \"view\";\r\n    this._group_by = null;\r\n\r\n    this._strict_validation = []\r\n    this._action_buttons = []\r\n    this._search_action_buttons = []\r\n    this._approval_rules = null\r\n\r\n    // Расширяем прототип String\r\n\r\n    // Функция заменяет вхождения символов \\ | / : * ? < > + % ! @\r\n    String.prototype.replaceBadSymbols = function (replacement = \"_\") {\r\n      return this.replace(/\\\\|\\||\\/|:|\\*|\\?|<|>|\\+|%|!|@/g, replacement);\r\n    };\r\n\r\n    // Функция дополняет строку с разделителем до нужной длины,\r\n    // Длина указывается до разделителя\r\n    // 1.12 до длины 3 => 001.12\r\n    // 1 до длины 3 => 001\r\n    String.prototype.padStartBeforeSeparator = function (\r\n      length,\r\n      symbol,\r\n      separator = \".\"\r\n    ) {\r\n      const pos = this.indexOf(separator);\r\n      const zeroCount = pos === -1 ? length : length + this.length - pos;\r\n      return this.padStart(zeroCount, symbol);\r\n    };\r\n\r\n    // Функция дополняет строку с разделителем до нужной длины,\r\n    // Длина указывается до не цифрового символа\r\n    // 1.12 до длины 3 => 001.12\r\n    // 1 до длины 3 => 001\r\n    // 1а до длины 3 => 001а\r\n    String.prototype.padStartBeforeNonDigitSymbol = function (length, symbol) {\r\n      const match = this.match(/[^0-9]/);\r\n      const zeroCount =\r\n        match === null ? length : length + this.length - match[\"index\"];\r\n\r\n      // console.log(this.padStart(zeroCount, symbol));\r\n      return this.padStart(zeroCount, symbol);\r\n    };\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      storage_path: this.storage_path,\r\n      master_usergroup_slug: this.master_usergroup_slug,\r\n      access_group: this.access_group,\r\n      settings: this.settings,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get version() {\r\n    return this._version;\r\n  }\r\n\r\n  set version(value) {\r\n    this._version = value;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  set name(value) {\r\n    this._name = value;\r\n  }\r\n\r\n  get search_schema() {\r\n    return this._search_schema;\r\n  }\r\n\r\n  set search_schema(value) {\r\n    this._search_schema = value;\r\n  }\r\n\r\n  get form_schema() {\r\n    return this._form_schema;\r\n  }\r\n\r\n  set form_schema(value) {\r\n    this._form_schema = value;\r\n  }\r\n\r\n  get user_search_schema() {\r\n    return this._user_search_schema === null\r\n      ? this.search_schema\r\n      : this._user_search_schema;\r\n  }\r\n\r\n  set user_search_schema(value) {\r\n    this._user_search_schema = value;\r\n  }\r\n\r\n  get validation_constraints() {\r\n    return this._validation_constraints;\r\n  }\r\n\r\n  set validation_constraints(value) {\r\n    if (value === undefined) this._validation_constraints = [];\r\n    else this._validation_constraints = value;\r\n  }\r\n\r\n  get is_necessary_validate() {\r\n    return this._is_necessary_validate;\r\n  }\r\n\r\n  set is_necessary_validate(value) {\r\n    this._is_necessary_validate = value;\r\n  }\r\n\r\n  get max_file_size() {\r\n    return this._max_file_size;\r\n  }\r\n\r\n  set max_file_size(value) {\r\n    this._max_file_size = value;\r\n  }\r\n\r\n  get storage_path() {\r\n    return this._storage_path;\r\n  }\r\n\r\n  set storage_path(value) {\r\n    this._storage_path = value;\r\n  }\r\n\r\n  get is_empty_search_allowed() {\r\n    return this._is_empty_search_allowed;\r\n  }\r\n\r\n  set is_empty_search_allowed(value) {\r\n    if (value === undefined) this._is_empty_search_allowed = false;\r\n    else this._is_empty_search_allowed = value;\r\n  }\r\n\r\n  get is_list_container_required() {\r\n    return this._is_list_container_required;\r\n  }\r\n\r\n  set is_list_container_required(value) {\r\n    if (value === undefined) return;\r\n    this._is_list_container_required = value;\r\n  }\r\n\r\n  get is_doc_container_required() {\r\n    return this._is_doc_container_required;\r\n  }\r\n\r\n  set is_doc_container_required(value) {\r\n    if (value === undefined) return;\r\n    this._is_doc_container_required = value;\r\n  }\r\n\r\n  get default_sort_attribute() {\r\n    return this._default_sort_attribute;\r\n  }\r\n\r\n  set default_sort_attribute(value) {\r\n    if (value === undefined) return;\r\n    this._default_sort_attribute = value;\r\n  }\r\n\r\n  get default_sort_order() {\r\n    return this._default_sort_order;\r\n  }\r\n\r\n  set default_sort_order(value) {\r\n    if (value === undefined) return;\r\n    this._default_sort_order = value;\r\n  }\r\n\r\n  get default_mode() {\r\n    return this._default_mode;\r\n  }\r\n\r\n  set default_mode(value) {\r\n    if (value === undefined) return;\r\n    this._default_mode = value;\r\n  }\r\n\r\n  get group_by() {\r\n    return this._group_by;\r\n  }\r\n\r\n  set group_by(value) {\r\n    if (value === undefined) return;\r\n    this._group_by = value;\r\n  }\r\n\r\n  get master_usergroup_slug() {\r\n    return this._master_usergroup_slug;\r\n  }\r\n\r\n  set master_usergroup_slug(value) {\r\n    if (value === undefined) return;\r\n    this._master_usergroup_slug = value;\r\n  }\r\n\r\n  get access_group() {\r\n    return this._access_group;\r\n  }\r\n\r\n  set access_group(value) {\r\n    if (value === undefined) return;\r\n    this._access_group = value;\r\n  }\r\n\r\n  get doc_container_parsers() {\r\n    return this._doc_container_parsers;\r\n  }\r\n\r\n  set doc_container_parsers(value) {\r\n    if (value === undefined) return;\r\n    this._doc_container_parsers = value;\r\n  }\r\n\r\n  get_filename_pattern(attributes) {\r\n    return evaluate_pattern(this._filename_pattern, attributes);\r\n  }\r\n\r\n  set_filename_pattern(value) {\r\n    this._filename_pattern = value;\r\n  }\r\n\r\n  get description_pattern() {\r\n    return this._description_pattern;\r\n  }\r\n\r\n  set description_pattern(value) {\r\n    if (value === undefined) return;\r\n    this._description_pattern = value;\r\n  }\r\n\r\n  strict_validation_for_permission(permission) {\r\n    return this._strict_validation.indexOf(permission) !== -1;\r\n  }\r\n\r\n  get strict_validation() {\r\n    return this._strict_validation;\r\n  }\r\n\r\n  set strict_validation(value) {\r\n    if (value === undefined) return;\r\n    this._strict_validation = value;\r\n  }\r\n  \r\n  get action_buttons() {\r\n    return this._action_buttons;\r\n  }\r\n\r\n  set action_buttons(value) {\r\n    if (value === undefined) return;\r\n    this._action_buttons = value;\r\n  }\r\n\r\n  get search_action_buttons() {\r\n    return this._search_action_buttons;\r\n  }\r\n\r\n  set search_action_buttons(value) {\r\n    if (value === undefined) return;\r\n    this._search_action_buttons = value;\r\n  }\r\n\r\n  get approval_rules() {\r\n    return this._approval_rules;\r\n  }\r\n\r\n  set approval_rules(value) {\r\n    if (value === undefined) return;\r\n    this._approval_rules = value;\r\n  }\r\n\r\n  get settings() {\r\n    let obj = {\r\n      version: this._version,\r\n      validation_schema: this._validation_schema,\r\n      validation_constraints: this._validation_constraints,\r\n      search_schema: this._search_schema,\r\n      form_schema: this._form_schema,\r\n      max_file_size: this._max_file_size,\r\n      filename_pattern: this._filename_pattern,\r\n      description_pattern: this._description_pattern,\r\n      is_empty_search_allowed: this._is_empty_search_allowed,\r\n      is_list_container_required: this._is_list_container_required,\r\n      is_doc_container_required: this._is_doc_container_required,\r\n      doc_container_parsers: this._doc_container_parsers,\r\n      sort_by: {\r\n        name: this._default_sort_attribute,\r\n        asc: this._default_sort_order,\r\n      },\r\n      mode: this._default_mode,\r\n      strict_validation: this._strict_validation,\r\n      action_buttons: this._action_buttons,\r\n      search_action_buttons: this._search_action_buttons,\r\n    };\r\n\r\n    if (this.group_by !== null) obj[\"group_by\"] = this.group_by;\r\n    if (this.approval_rules !== null) obj[\"approval_rules\"] = this.approval_rules;\r\n\r\n    return obj;\r\n  }\r\n}\r\n\r\nclass BaseFile {\r\n  constructor(id, name, total_size) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._uploaded_size = 0;\r\n    this._total_size = total_size;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  rename(name) {\r\n    this._name = name;\r\n  }\r\n\r\n  get size() {\r\n    return this._total_size;\r\n  }\r\n\r\n  set_total_size(size) {\r\n    this._total_size = size;\r\n  }\r\n\r\n  _formatBytes(bytes, decimals) {\r\n    if (bytes == 0) return \"0 Bytes\";\r\n    var k = 1024,\r\n      dm = decimals || 2,\r\n      sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"],\r\n      i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + \" \" + sizes[i];\r\n  }\r\n\r\n  formatted_size(decimals) {\r\n    return this._formatBytes(this._total_size, decimals);\r\n  }\r\n\r\n  get progress() {\r\n    return Math.floor((this._uploaded_size / this._total_size) * 100);\r\n  }\r\n\r\n  get uploaded() {\r\n    return this._uploaded_size >= this._total_size;\r\n  }\r\n\r\n  set_size_complete() {\r\n    this._uploaded_size = this._total_size;\r\n  }\r\n\r\n  set_size(size) {\r\n    // console.log(`Size = ${size} bytes`);\r\n    if (size < 0) {\r\n      this._uploaded_size = 0;\r\n      return;\r\n    }\r\n    if (size > this._total_size) {\r\n      this._uploaded_size = this._total_size;\r\n      return;\r\n    }\r\n\r\n    // Always increase size\r\n    if (size > this._uploaded_size) this._uploaded_size = size;\r\n  }\r\n}\r\n\r\nclass UserFolderSetting {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, true, \"id\"],\r\n  //       [true, true, \"folder_id\"],\r\n  //       [true, true, \"usergroup_slug\"],\r\n  //       [true, true, \"username\"],\r\n  //       [true, true, \"role\"],\r\n  //       [true, true, \"search_schema\"],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(\r\n    id,\r\n    folder_id,\r\n    usergroup_slug,\r\n    username,\r\n    role = null,\r\n    search_schema = null\r\n  ) {\r\n    this._id = id;\r\n    this._folder_id = folder_id;\r\n    this._usergroup_slug = usergroup_slug;\r\n    this._username = username;\r\n    this._role = role;\r\n    this._search_schema = search_schema;\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this._id,\r\n      folder_id: this._folder_id,\r\n      usergroup_slug: this._usergroup_slug,\r\n      username: this._username,\r\n      role: this._role,\r\n      search_schema: this._search_schema,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  set id(value) {\r\n    this._user_folder_settings_id = value;\r\n  }\r\n\r\n  get role() {\r\n    return this._role;\r\n  }\r\n\r\n  set role(value) {\r\n    this._role = value;\r\n  }\r\n\r\n  get search_schema() {\r\n    return this._search_schema;\r\n  }\r\n\r\n  set search_schema(value) {}\r\n\r\n  get username() {\r\n    return this._username;\r\n  }\r\n\r\n  get folder_id() {\r\n    return this._folder_id;\r\n  }\r\n\r\n  get usergroup_slug() {\r\n    return this._usergroup_slug;\r\n  }\r\n}\r\n\r\nclass PdfDocument {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, false, \"id\"],\r\n  //       [true, false, \"order\"],\r\n  //       [true, false, \"page_count\"],\r\n  //       [true, false, \"page_from\"],\r\n  //       [true, false, \"page_to\"],\r\n  //       [true, false, \"angle\"],\r\n  //       [true, false, \"file\"],\r\n  //       [true, false, \"uploaded\"],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(\r\n    id,\r\n    order,\r\n    page_count,\r\n    page_from,\r\n    page_to,\r\n    angle,\r\n    file,\r\n    uploaded = true\r\n  ) {\r\n    this._id = id;\r\n    this._order = order;\r\n    this._page_count = page_count;\r\n    this._page_from = page_from;\r\n    this._page_to = page_to;\r\n    this._angle = angle;\r\n    this._file = file;\r\n    this._uploaded = uploaded;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get order() {\r\n    return this._order;\r\n  }\r\n\r\n  set order(value) {\r\n    if (value === undefined) return;\r\n    this._order = value;\r\n  }\r\n\r\n  get page_count() {\r\n    return this._page_count;\r\n  }\r\n\r\n  set page_count(value) {\r\n    if (value === undefined) return;\r\n    this._page_count = value;\r\n  }\r\n\r\n  get page_to() {\r\n    return this._page_to;\r\n  }\r\n\r\n  set page_to(value) {\r\n    if (value === undefined) return;\r\n    this._page_to = value;\r\n  }\r\n\r\n  get page_from() {\r\n    return this._page_from;\r\n  }\r\n\r\n  set page_from(value) {\r\n    if (value === undefined) return;\r\n    this._page_from = value;\r\n  }\r\n\r\n  get angle() {\r\n    return this._angle;\r\n  }\r\n\r\n  set angle(value) {\r\n    if (value === undefined) return;\r\n    this._angle = value;\r\n  }\r\n\r\n  get uploaded() {\r\n    return this._uploaded;\r\n  }\r\n\r\n  set uploaded(value) {\r\n    if (value === undefined) return;\r\n    this._uploaded = value;\r\n  }\r\n\r\n  get file() {\r\n    return this._file;\r\n  }\r\n\r\n  get to_be_editted() {\r\n    return (\r\n      this.page_from != 1 || this.page_to != this.page_count || this.angle != 0\r\n    );\r\n  }\r\n}\r\n\r\nclass Flow {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, true, \"id\"],\r\n  //       [true, true, \"name\"],\r\n  //       [true, true, \"username\"],\r\n  //       [true, true, \"trigger\"],\r\n  //       [true, true, \"is_multiple\"],\r\n  //       [true, true, \"is_active\"],\r\n  //       [true, true, \"message_if_fail\"],\r\n  //       [true, true, \"process\"],\r\n  //       [true, true, \"created_at\"],\r\n  //       [true, true, \"updated_at\"],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(\r\n    id,\r\n    name,\r\n    username,\r\n    trigger,\r\n    is_multiple,\r\n    is_active,\r\n    message_if_fail,\r\n    process,\r\n    created_at,\r\n    updated_at\r\n  ) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._username = username;\r\n    this._trigger = trigger;\r\n    this._is_multiple = is_multiple;\r\n    this._is_active = is_active;\r\n    this._message_if_fail = message_if_fail;\r\n    this._process = process;\r\n    this._created_at = created_at;\r\n    this._updated_at = updated_at;\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      username: this.username,\r\n      trigger: this.trigger,\r\n      is_multiple: this.is_multiple,\r\n      is_active: this.is_active,\r\n      message_if_fail: this.message_if_fail,\r\n      process: this.process,\r\n      created_at: this.created_at,\r\n      updated_at: this.updated_at,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get username() {\r\n    return this._username;\r\n  }\r\n\r\n  get trigger() {\r\n    return this._trigger;\r\n  }\r\n\r\n  get is_multiple() {\r\n    return this._is_multiple;\r\n  }\r\n\r\n  get is_active() {\r\n    return this._is_active;\r\n  }\r\n\r\n  get message_if_fail() {\r\n    return this._message_if_fail;\r\n  }\r\n\r\n  get process() {\r\n    return this._process;\r\n  }\r\n\r\n  get created_at() {\r\n    return this._created_at;\r\n  }\r\n\r\n  get updated_at() {\r\n    return this._updated_at;\r\n  }\r\n}\r\n\r\nclass FlowItem {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, false, \"id\"],\r\n  //       [true, false, \"name\"],\r\n  //       [true, false, \"username\"],\r\n  //       [true, false, \"trigger\"],\r\n  //       [true, false, \"success\"],\r\n  //       [true, false, \"is_active\"],\r\n  //       [true, false, \"message_if_fail\"],\r\n  //       [false, false, \"input\"],\r\n  //       [false, false, \"process\"],\r\n  //       [true, false, \"started_at\"],\r\n  //       [true, false, \"finished_at\"],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(\r\n    id,\r\n    name,\r\n    username,\r\n    trigger,\r\n    success,\r\n    is_active,\r\n    message_if_fail,\r\n    input,\r\n    process,\r\n    started_at,\r\n    finished_at\r\n  ) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._username = username;\r\n    this._trigger = trigger;\r\n    this._success = success;\r\n    this._is_active = is_active;\r\n    this._message_if_fail = message_if_fail;\r\n    this._input = input;\r\n    this._process = process;\r\n    this._started_at = started_at;\r\n    this._finished_at = finished_at;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get username() {\r\n    return this._username;\r\n  }\r\n\r\n  get trigger() {\r\n    return this._trigger;\r\n  }\r\n\r\n  get success() {\r\n    return this._success;\r\n  }\r\n\r\n  get is_active() {\r\n    return this._is_active;\r\n  }\r\n\r\n  get message_if_fail() {\r\n    return this._message_if_fail;\r\n  }\r\n\r\n  get raw_input() {\r\n    return this._input;\r\n  }\r\n\r\n  get input() {\r\n    return JSON.stringify(this._input);\r\n  }\r\n\r\n  get raw_process() {\r\n    return this._process;\r\n  }\r\n\r\n  get process() {\r\n    return JSON.stringify(this._process);\r\n  }\r\n\r\n  get started_at() {\r\n    return this._started_at;\r\n  }\r\n\r\n  get finished_at() {\r\n    return this._finished_at;\r\n  }\r\n\r\n  // get attributes() {\r\n  //   return {\r\n  //     id: this._id,\r\n  //     name: this._name,\r\n  //     username: this._username,\r\n  //     trigger: this._trigger,\r\n  //     success: this._success,\r\n  //     is_active: this._is_active,\r\n  //     input: this._input,\r\n  //     process: this._process,\r\n  //     started_at: this._started_at,\r\n  //     finished_at: this._finished_at,\r\n  //   };\r\n  // }\r\n}\r\n\r\nclass FlowItemStep {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, false, \"id\"],\r\n  //       [true, false, \"name\"],\r\n  //       [true, false, \"description\"],\r\n  //       [true, false, \"flowitem_id\"],\r\n  //       [true, false, \"success\"],\r\n  //       [true, false, \"result_key\"],\r\n  //       [true, false, \"action\"],\r\n  //       [true, false, \"input\"],\r\n  //       [true, false, \"output\"],\r\n  //       [true, false, \"started_at\"],\r\n  //       [true, false, \"finished_at\"],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(\r\n    id,\r\n    name,\r\n    description,\r\n    flowitem_id,\r\n    success,\r\n    result_key,\r\n    action,\r\n    input,\r\n    output,\r\n    started_at,\r\n    finished_at\r\n  ) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._description = description;\r\n    this._flowitem_id = flowitem_id;\r\n    this._success = success;\r\n    this._result_key = result_key;\r\n    this._action = action;\r\n    this._input = input;\r\n    this._output = output;\r\n    this._started_at = started_at;\r\n    this._finished_at = finished_at;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get description() {\r\n    return this._description;\r\n  }\r\n\r\n  get flowitem_id() {\r\n    return this._flowitem_id;\r\n  }\r\n\r\n  get success() {\r\n    return this._success;\r\n  }\r\n\r\n  get result_key() {\r\n    return this._result_key;\r\n  }\r\n\r\n  get action() {\r\n    return this._action;\r\n  }\r\n\r\n  get input() {\r\n    return this._input;\r\n  }\r\n\r\n  get output() {\r\n    return this._output;\r\n  }\r\n\r\n  get started_at() {\r\n    return this._started_at;\r\n  }\r\n\r\n  get finished_at() {\r\n    return this._finished_at;\r\n  }\r\n}\r\n\r\nclass DocumentApproval {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, false, \"id\"],\r\n  //       [true, false, \"state\"],\r\n  //       [true, false, \"from_username\"],\r\n  //       [true, false, \"from_first_name\"],\r\n  //       [true, false, \"from_last_name\"],\r\n  //       [true, false, \"to_username\"],\r\n  //       [true, false, \"to_first_name\"],\r\n  //       [true, false, \"to_last_name\"],\r\n  //       [true, false, \"delegated_from\"],\r\n  //       [true, false, \"created_at\"],\r\n  //       [true, false, \"updated_at\"],\r\n  //       [false, false, \"files\", {}],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(\r\n    id,\r\n    state,\r\n    from_username,\r\n    from_first_name,\r\n    from_last_name,\r\n    to_username,\r\n    to_first_name,\r\n    to_last_name,\r\n    delegated_from,\r\n    created_at,\r\n    updated_at\r\n  ) {\r\n    this._id = id;\r\n    this._state = state;\r\n    this._from_username = from_username;\r\n    this._from_first_name = from_first_name;\r\n    this._from_last_name = from_last_name;\r\n    this._to_username = to_username;\r\n    this._to_first_name = to_first_name;\r\n    this._to_last_name = to_last_name;\r\n    this._delegated_from = delegated_from;\r\n    this._created_at = created_at;\r\n    this._updated_at = updated_at;\r\n    this._files = {};\r\n\r\n    this._document = null;\r\n    this._active_approvals_count_of_document = null;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get state() {\r\n    return this._state;\r\n  }\r\n\r\n  get from_username() {\r\n    return this._from_username;\r\n  }\r\n\r\n  get from_first_name() {\r\n    return this._from_first_name;\r\n  }\r\n\r\n  get from_last_name() {\r\n    return this._from_last_name;\r\n  }\r\n\r\n  get to_username() {\r\n    return this._to_username;\r\n  }\r\n\r\n  get to_first_name() {\r\n    return this._to_first_name;\r\n  }\r\n\r\n  get to_last_name() {\r\n    return this._to_last_name;\r\n  }\r\n\r\n  get delegated_from() {\r\n    return this._delegated_from;\r\n  }\r\n\r\n  get created_at() {\r\n    return this._created_at;\r\n  }\r\n\r\n  get updated_at() {\r\n    return this._updated_at;\r\n  }\r\n\r\n  add_file(id, value) {\r\n    this._files[id] = value;\r\n  }\r\n\r\n  remove_file(id) {\r\n    delete this._files[id];\r\n  }\r\n\r\n  get_file(id) {\r\n    return Object.prototype.hasOwnProperty.call(this._files, id)\r\n      ? this._files[id]\r\n      : null;\r\n  }\r\n\r\n  get files() {\r\n    return Object.values(this._files);\r\n  }\r\n\r\n  get document() {\r\n    return this._document;\r\n  }\r\n\r\n  set document(value) {\r\n    this._document = value;\r\n  }\r\n\r\n  get active_approvals_count_of_document() {\r\n    return this._active_approvals_count_of_document;\r\n  }\r\n\r\n  set active_approvals_count_of_document(value) {\r\n    this._active_approvals_count_of_document = value;\r\n  }\r\n}\r\n\r\nclass ApprovalFlow {\r\n  // class ApprovalFlow extends Model {\r\n  // constructor(...params) {\r\n  //   super(\r\n  //     [\r\n  //       // getter, to_dict, key, default\r\n  //       // Порядок ключей без default должен совпадать с params\r\n  //       [true, false, \"id\"],\r\n  //       [true, false, \"is_active\"],\r\n  //       [true, false, \"success\"],\r\n  //       [true, false, \"steps\"],\r\n  //       [true, false, \"created_at\"],\r\n  //       [true, false, \"updated_at\"],\r\n  //       [true, false, \"is_saved\", true],\r\n  //     ],\r\n  //     params\r\n  //   );\r\n  // }\r\n  constructor(id, is_active, success, steps, created_at, updated_at) {\r\n    this._id = id;\r\n    this._is_active = is_active;\r\n    this._success = success;\r\n    this._steps = steps;\r\n    this._created_at = created_at;\r\n    this._updated_at = updated_at;\r\n    this._is_saved = true;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get is_active() {\r\n    return this._is_active;\r\n  }\r\n\r\n  get is_saved() {\r\n    return this._is_saved;\r\n  }\r\n\r\n  get success() {\r\n    return this._success;\r\n  }\r\n\r\n  get steps() {\r\n    return this._steps;\r\n  }\r\n\r\n  get created_at() {\r\n    return this._created_at;\r\n  }\r\n\r\n  get updated_at() {\r\n    return this._updated_at;\r\n  }\r\n\r\n  validate_index(index) {\r\n    if (index < 0 && index >= this._steps.length) {\r\n      console.log(\"Неверный индекс массива\", index);\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  flush_empty_steps() {\r\n    this._steps = this._steps.filter((e) => e.length != 0);\r\n    this._is_saved = false;\r\n  }\r\n\r\n  add_step() {\r\n    this._steps.push([]);\r\n    this._is_saved = false;\r\n  }\r\n\r\n  delete_step(index) {\r\n    if (this.validate_index(index)) this._steps.splice(index, 1);\r\n    this._is_saved = false;\r\n  }\r\n\r\n  add_username_to_step(index, username) {\r\n    // console.log(index, username);\r\n    if (this.validate_index(index)) this._steps[index].push(username);\r\n    this._is_saved = false;\r\n  }\r\n\r\n  delete_username_from_step(index, username) {\r\n    this._steps[index] = this._steps[index].filter((e) => e != username);\r\n    this._is_saved = false;\r\n  }\r\n\r\n  save() {\r\n    this._is_saved = true;\r\n  }\r\n}\r\n\r\nclass ServerSetting {\r\n  constructor(id, name, value) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._value = value;\r\n    this._has_modified = false;\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  set value(x) {\r\n    if (x) this._value = x;\r\n    this._has_modified = true;\r\n  }\r\n\r\n  get has_modified() {\r\n    return this._has_modified;\r\n  }\r\n}\r\n\r\nclass MailBox {\r\n  constructor(\r\n    id,\r\n    out_protocol,\r\n    out_encryption,\r\n    out_port,\r\n    out_server,\r\n    in_protocol,\r\n    in_encryption,\r\n    in_port,\r\n    in_server,\r\n    username,\r\n    password,\r\n    name\r\n  ) {\r\n    this._id = id;\r\n    this._out_protocol = out_protocol;\r\n    this._out_encryption = out_encryption;\r\n    this._out_port = out_port;\r\n    this._out_server = out_server;\r\n    this._in_protocol = in_protocol;\r\n    this._in_encryption = in_encryption;\r\n    this._in_port = in_port;\r\n    this._in_server = in_server;\r\n    this._username = username;\r\n    this._password = password;\r\n    this._name = name;\r\n    this._mail_channels = [];\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      username: this.username,\r\n      password: this.password,\r\n      description: this.description,\r\n      out_protocol: this.out_protocol,\r\n      out_encryption: this.out_encryption,\r\n      out_port: this.out_port,\r\n      out_server: this.out_server,\r\n      in_protocol: this.in_protocol,\r\n      in_encryption: this.in_encryption,\r\n      in_port: this.in_port,\r\n      in_server: this.in_server,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get out_protocol() {\r\n    return this._out_protocol;\r\n  }\r\n\r\n  get out_encryption() {\r\n    return this._out_encryption;\r\n  }\r\n\r\n  get out_port() {\r\n    return this._out_port;\r\n  }\r\n\r\n  get out_server() {\r\n    return this._out_server;\r\n  }\r\n\r\n  get in_protocol() {\r\n    return this._in_protocol;\r\n  }\r\n\r\n  get in_encryption() {\r\n    return this._in_encryption;\r\n  }\r\n\r\n  get in_port() {\r\n    return this._in_port;\r\n  }\r\n\r\n  get in_server() {\r\n    return this._in_server;\r\n  }\r\n\r\n  get username() {\r\n    return this._username;\r\n  }\r\n\r\n  get password() {\r\n    return this._password;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get mail_channels() {\r\n    return this._mail_channels;\r\n  }\r\n\r\n  add_mail_channel(x) {\r\n    this._mail_channels.push(x);\r\n  }\r\n}\r\n\r\nclass MailChannel {\r\n  constructor(id, name, folder, storage_path, settings, is_active) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._folder = folder;\r\n    this._storage_path = storage_path;\r\n    this._settings = settings;\r\n    this._is_active = is_active;\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      folder: this.folder,\r\n      storage_path: this.storage_path,\r\n      settings: this.settings,\r\n      is_active: this.is_active,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get folder() {\r\n    return this._folder;\r\n  }\r\n\r\n  get storage_path() {\r\n    return this._storage_path;\r\n  }\r\n\r\n  get settings() {\r\n    return this._settings;\r\n  }\r\n\r\n  get is_active() {\r\n    return this._is_active;\r\n  }\r\n}\r\n\r\nclass MailMessage {\r\n  constructor(\r\n    id,\r\n    subject,\r\n    address_from,\r\n    address_to,\r\n    address_cc,\r\n    address_bcc,\r\n    received_at,\r\n    mailbox,\r\n    mailchannel,\r\n    has_text,\r\n    has_html\r\n  ) {\r\n    this._id = id;\r\n    this._subject = subject;\r\n    this._address_from = address_from;\r\n    this._address_to = address_to;\r\n    this._address_cc = address_cc;\r\n    this._address_bcc = address_bcc;\r\n    this._received_at = received_at;\r\n    this._mailbox = mailbox;\r\n    this._mailchannel = mailchannel;\r\n    this._has_text = has_text;\r\n    this._has_html = has_html;\r\n    this._attachments = {};\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get subject() {\r\n    return this._subject;\r\n  }\r\n\r\n  get address_to() {\r\n    return this._address_to;\r\n  }\r\n\r\n  get address_from() {\r\n    return this._address_from;\r\n  }\r\n\r\n  get address_cc() {\r\n    return this._address_cc;\r\n  }\r\n\r\n  get address_bcc() {\r\n    return this._address_bcc;\r\n  }\r\n\r\n  get received_at() {\r\n    return this._received_at;\r\n  }\r\n\r\n  get mailbox() {\r\n    return this._mailbox;\r\n  }\r\n\r\n  get mailchannel() {\r\n    return this._mailchannel;\r\n  }\r\n\r\n  get has_text() {\r\n    return this._has_text;\r\n  }\r\n\r\n  get has_html() {\r\n    return this._has_html;\r\n  }\r\n\r\n  add_attachment(id, value) {\r\n    this._attachments[id] = value;\r\n  }\r\n\r\n  get attachments() {\r\n    return Object.values(this._attachments);\r\n  }\r\n}\r\n\r\nclass Counter {\r\n  constructor(id, name, description, value, increment) {\r\n    this._id = id;\r\n    this._name = name;\r\n    this._description = description;\r\n    this._value = value;\r\n    this._increment = increment;\r\n  }\r\n\r\n  get to_dict() {\r\n    return {\r\n      id: this.id,\r\n      name: this.name,\r\n      description: this.description,\r\n      value: this.value,\r\n      increment: this.increment,\r\n    };\r\n  }\r\n\r\n  get id() {\r\n    return this._id;\r\n  }\r\n\r\n  get name() {\r\n    return this._name;\r\n  }\r\n\r\n  get description() {\r\n    return this._description;\r\n  }\r\n\r\n  get value() {\r\n    return this._value;\r\n  }\r\n\r\n  get increment() {\r\n    return this._increment;\r\n  }\r\n}\r\n\r\nexport {\r\n  evaluate_pattern,\r\n  User,\r\n  UserGroup,\r\n  Document,\r\n  DocumentApproval,\r\n  BaseFile,\r\n  Folder,\r\n  UserFolderSetting,\r\n  PdfDocument,\r\n  Flow,\r\n  FlowItem,\r\n  FlowItemStep,\r\n  ApprovalFlow,\r\n  ServerSetting,\r\n  MailBox,\r\n  MailChannel,\r\n  MailMessage,\r\n  Counter,\r\n};\r\n","<template>\r\n  <base-page />\r\n</template>\r\n\r\n<script>\r\nimport { provide } from \"vue\";\r\nimport BasePage from \"./views/BasePage.vue\";\r\n\r\nexport default {\r\n  components: { BasePage },\r\n  name: \"App\",\r\n  setup() {\r\n    provide(\"info\", {});\r\n    provide(\"users\", {});\r\n    provide(\"user_replacements\", {});\r\n    provide(\"usergroups\", {});\r\n    provide(\"tokens\", {});\r\n    provide(\"user_folder_settings\", {});\r\n\r\n    provide(\"role_permissions\", {});\r\n    provide(\"permissions\", {});\r\n    provide(\"folders\", {});\r\n    provide(\"documents\", {});\r\n    provide(\"document_approvals\", {});\r\n    provide(\"waiting_document_approvals\", {})\r\n    provide(\"search_document_approvals\", {})\r\n    provide(\"document_approval_flows\", {});\r\n    provide(\"cart\", {});\r\n    provide(\"files_in_folders\", {});\r\n    provide(\"files_pdf_merge\", {});\r\n    provide(\"files_share\", {});\r\n    provide(\"files_document_approval\", {});\r\n    provide(\"files_common\", {});\r\n    provide(\"download_progress\", {});\r\n    provide(\"folder_settings\", {});\r\n    provide(\"self_testing_questions\", {});\r\n    provide(\"server_settings\", {});\r\n    provide(\"mailboxes\", {});\r\n    provide(\"mail_channels\", {});\r\n    provide(\"mail_messages\", {});\r\n    provide(\"context\", {});\r\n    provide(\"counters\", {});\r\n\r\n    provide(\"flows\", {});\r\n    provide(\"flow_items\", {});\r\n    provide(\"flow_item_steps\", {});\r\n\r\n    provide(\"version\", \"1.91.0\");\r\n  },\r\n};\r\n</script>\r\n","<template>\r\n  <div class=\"container\">\r\n    <navigation-component\r\n      :version=\"version\"\r\n      :links=\"navigation_links\"\r\n      :show_usergroup=\"show_usergroup\"\r\n      :can_change_usergroup=\"can_change_usergroup\"\r\n    />\r\n    <router-view v-slot=\"{ Component, route }\">\r\n      <transition :name=\"route.meta.transitionName\">\r\n        <component :is=\"Component\" :key=\"route.path\" />\r\n      </transition>\r\n    </router-view>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, inject, watch, ref } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport NavigationComponent from \"../components/navigation/NavigationComponent.vue\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nexport default {\r\n  components: { NavigationComponent },\r\n  name: \"BasePage\",\r\n  setup() {\r\n    const route = useRoute();\r\n\r\n    const uow = new VueUnitOfWork();\r\n    const user = uow.user_repository.get_current();\r\n\r\n    const version = inject(\"version\");\r\n\r\n    const can_view_settings =\r\n      uow.permission_repository.has(\"can_view_settings\");\r\n\r\n    const navigation_links = computed(() => {\r\n      const links = [\r\n        { route_name: \"LoginPage\", title: \"Вход\" },\r\n        { route_name: \"FoldersPage\", title: \"Выборки\" },\r\n        { route_name: \"ServicePage\", title: \"Сервис\" },\r\n      ];\r\n\r\n      if (can_view_settings.value === true)\r\n        links.push({ route_name: \"SettingsPage\", title: \"Настройки\" });\r\n\r\n      return links;\r\n    });\r\n\r\n    // Отслеживаем перемещения по страницам\r\n    const pages_with_usergroup_selection = [\r\n      \"FoldersPage\",\r\n      \"SearchDocumentPage\",\r\n      \"DocumentPage\",\r\n    ];\r\n\r\n    const show_usergroup = ref(false);\r\n    const can_change_usergroup = ref(false);\r\n\r\n    watch(\r\n      () => route.name,\r\n      (to) => {\r\n        // Разрешаем изменение группы пользователей только на странице Выборки\r\n        can_change_usergroup.value = to === \"FoldersPage\";\r\n        // Определяем показывать ли выбор группы пользователей\r\n        show_usergroup.value = pages_with_usergroup_selection.includes(to);\r\n      }\r\n    );\r\n\r\n    return {\r\n      user,\r\n      navigation_links,\r\n      version,\r\n      show_usergroup,\r\n      can_change_usergroup,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n/* Указываем box sizing */\r\n*,\r\n*::before,\r\n*::after {\r\n  box-sizing: border-box;\r\n}\r\n\r\n/* Убираем внутренние отступы */\r\nul[class],\r\nol[class] {\r\n  padding: 0;\r\n}\r\n\r\n/* Убираем внешние отступы */\r\nbody,\r\nh1,\r\nh2,\r\nh3,\r\nh4,\r\np,\r\nul[class],\r\nol[class],\r\nli,\r\nfigure,\r\nfigcaption,\r\nblockquote,\r\ndl,\r\ndd {\r\n  margin: 0;\r\n}\r\n\r\nhtml {\r\n  height: 100%;\r\n}\r\n\r\n/* Выставляем основные настройки по-умолчанию для body */\r\nbody {\r\n  min-height: 100vh;\r\n  scroll-behavior: smooth;\r\n  text-rendering: optimizeSpeed;\r\n  height: 100%;\r\n}\r\n\r\n.container {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* Удаляем стандартную стилизацию для всех ul и il, у которых есть атрибут class*/\r\nul[class],\r\nol[class] {\r\n  list-style: none;\r\n}\r\n\r\n/* Элементы a, у которых нет класса, сбрасываем до дефолтных стилей */\r\na:not([class]) {\r\n  text-decoration-skip-ink: auto;\r\n}\r\n\r\n/* Упрощаем работу с изображениями */\r\nimg {\r\n  max-width: 100%;\r\n  display: block;\r\n}\r\n\r\n/* Указываем понятную периодичность в потоке данных у article*/\r\narticle > * + * {\r\n  margin-top: 1em;\r\n}\r\n\r\n/* Наследуем шрифты для инпутов и кнопок */\r\ninput,\r\nbutton,\r\ntextarea,\r\nselect {\r\n  font: inherit;\r\n}\r\n\r\n/* Удаляем все анимации и переходы для людей, которые предпочитай их не использовать */\r\n@media (prefers-reduced-motion: reduce) {\r\n  * {\r\n    animation-duration: 0.01ms !important;\r\n    animation-iteration-count: 1 !important;\r\n    transition-duration: 0.01ms !important;\r\n    scroll-behavior: auto !important;\r\n  }\r\n}\r\n\r\n/* Стили приложения */\r\n\r\n.app {\r\n  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,\r\n    Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji,\r\n    Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;\r\n  font-size: 16px;\r\n  height: 100%;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"nav\">\r\n    <div v-for=\"item in links\" v-bind:key=\"item.route_name\" class=\"nav__links\">\r\n      <router-link class=\"nav__item\" :to=\"{ name: item.route_name }\">{{\r\n        item.title\r\n      }}</router-link>\r\n    </div>\r\n\r\n    <div class=\"nav__usergroup\" v-if=\"show_usergroup\">\r\n      <form-select-input\r\n        class=\"nav__usergroupselect\"\r\n        :parameters=\"{\r\n          options: groups,\r\n          is_disabled: !can_change_usergroup,\r\n        }\"\r\n        :value=\"group_id.toString()\"\r\n        @update=\"handle_change_current($event)\"\r\n      />\r\n    </div>\r\n\r\n    <div\r\n      v-if=\"approval_actions_count !== null && approval_orders_count !== null\"\r\n      class=\"nav__approvalinfo\"\r\n    >\r\n      <router-link class=\"nav__approvaltext\" :to=\"{ name: 'ApprovalsPage' }\">\r\n        Согласования:\r\n      </router-link>\r\n\r\n      <span\r\n        class=\"nav__approvalcount\"\r\n        :class=\"{\r\n          nav__approvalcount_warning:\r\n            approval_actions_count === 0 && approval_orders_count > 0,\r\n          nav__approvalcount_alarm: approval_actions_count > 0,\r\n        }\"\r\n        >{{ approval_actions_count }}/{{ approval_orders_count }}</span\r\n      >\r\n    </div>\r\n    <div class=\"nav__cartinfo\">\r\n      <router-link :to=\"{ name: 'CartPage' }\">\r\n        <div class=\"nav__cartimg\" title=\"Перейти в корзину\"></div>\r\n      </router-link>\r\n      <span\r\n        class=\"nav__cartcount\"\r\n        :class=\"{\r\n          nav__cartcount_increased: cart_obj_count_increased_flag,\r\n          nav__cartcount_decreased: cart_obj_count_decreased_flag,\r\n        }\"\r\n        >{{ cart_obj_count }}</span\r\n      >\r\n      <div\r\n        class=\"nav__cleancartimg\"\r\n        title=\"Очистить корзину\"\r\n        @click=\"handle_empty_cart()\"\r\n      ></div>\r\n    </div>\r\n    <div class=\"nav__empty\"></div>\r\n\r\n    <div class=\"nav__welcome\">\r\n      <span v-if=\"user\"\r\n        >Добро пожаловать,\r\n        <router-link :to=\"{ name: 'ProfilePage' }\">\r\n          {{ user.last_name }} {{ user.first_name }}\r\n        </router-link>\r\n        .\r\n      </span>\r\n    </div>\r\n\r\n    <div class=\"nav__version\">v.{{ version }}</div>\r\n    <div\r\n      class=\"nav__behalfuserimg\"\r\n      title=\"Вернуться в свой профиль\"\r\n      @click=\"handle_delete_on_behalf_user()\"\r\n    ></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, watch, ref } from \"vue\";\r\nimport {\r\n  SetCurrentUserGroup,\r\n  EmptyCart,\r\n  DeleteOnBehalfUser,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetUserGroups,\r\n  useGetInfo,\r\n  useGetCart,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport FormSelectInput from \"../fields/FormSelectInput.vue\";\r\n\r\nexport default {\r\n  name: \"NavigationComponent\",\r\n  components: { FormSelectInput },\r\n  props: {\r\n    version: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    links: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    show_usergroup: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    can_change_usergroup: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const uow = new VueUnitOfWork();\r\n    const user = uow.user_repository.get_current(); // Ref\r\n\r\n    const groups = computed(() => {\r\n      if (user.value === null) return [];\r\n      let arr = uow.usergroup_repository\r\n        .values()\r\n        .filter(\r\n          (obj) =>\r\n            // Только публичные и приватные, в которых состоит данный пользователь\r\n            !obj.value.is_private || obj.value.has_username(user.value.username)\r\n        )\r\n        .map((obj) => {\r\n          return {\r\n            id: obj.value.id,\r\n            name: obj.value.name,\r\n            value: obj.value.id.toString(),\r\n          };\r\n        });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const group_id = computed(() => {\r\n      const current_group = uow.usergroup_repository.get_current();\r\n      return current_group.value === null ? 0 : current_group.value.id;\r\n    });\r\n\r\n    // Следим за изменениями groups, изменяем group_id соответственно\r\n    watch(groups, (newValue) => {\r\n      if (group_id.value === 0 && newValue.length > 0) {\r\n        handle_change_current(newValue[0].id);\r\n      }\r\n    });\r\n\r\n    const handle_change_current = (id) => {\r\n      const group = uow.usergroup_repository.get(id);\r\n      MessageBus.handle(new SetCurrentUserGroup(group.value), uow);\r\n    };\r\n\r\n    // INFO\r\n    const approval_actions_count =\r\n      uow.info_repository.get_approval_actions_count();\r\n\r\n    const approval_orders_count =\r\n      uow.info_repository.get_approval_orders_count();\r\n\r\n    // CART\r\n    const cart_obj_count = computed(\r\n      () => uow.cart_repository.doc_values().length\r\n    );\r\n\r\n    const cart_obj_count_increased_flag = ref(false);\r\n    const cart_obj_count_decreased_flag = ref(false);\r\n    \r\n    watch(\r\n      () => cart_obj_count.value,\r\n      (newValue, oldValue) => {\r\n        if (newValue > oldValue) cart_obj_count_increased_flag.value = true;\r\n        if (newValue < oldValue) cart_obj_count_decreased_flag.value = true;\r\n        setTimeout(() => {\r\n          cart_obj_count_decreased_flag.value = false;\r\n          cart_obj_count_increased_flag.value = false;\r\n        }, 1000);\r\n      }\r\n    );\r\n\r\n    const handle_empty_cart = () => {\r\n      MessageBus.handle(new EmptyCart(), uow);\r\n    };\r\n\r\n    const handle_delete_on_behalf_user = (username) =>\r\n      MessageBus.handle(new DeleteOnBehalfUser(username), uow);\r\n\r\n    onMounted(async () => {\r\n      await useBeforeEnterPage(uow, []); // Пытаемся автоматически зaлогинится\r\n      if (props.show_usergroup === true) {\r\n        await useGetUserGroups(uow);\r\n      }\r\n      await Promise.all([useGetInfo(uow), useGetCart(uow)]);\r\n    });\r\n\r\n    return {\r\n      user,\r\n      groups,\r\n      group_id,\r\n      handle_change_current,\r\n      // INFO\r\n      approval_actions_count,\r\n      approval_orders_count,\r\n      // CART\r\n      cart_obj_count,\r\n      cart_obj_count_increased_flag,\r\n      cart_obj_count_decreased_flag,\r\n      handle_empty_cart,\r\n      // BEHALF USERS\r\n      handle_delete_on_behalf_user,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.nav {\r\n  display: flex;\r\n  justify-content: right;\r\n  align-items: center;\r\n  background-color: #f8f9fa;\r\n  border-bottom-width: 1px;\r\n  border-bottom-style: solid;\r\n  border-bottom-color: rgb(222, 226, 230);\r\n}\r\n\r\n.nav__welcome {\r\n  text-align: right;\r\n  padding: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.nav__empty {\r\n  flex-grow: 1;\r\n}\r\n\r\n.nav__item {\r\n  display: block;\r\n  box-sizing: border-box;\r\n  text-decoration: none;\r\n  border: solid transparent;\r\n  border-width: 1px 1px 0 1px;\r\n  border-top-left-radius: 0.25rem;\r\n  border-top-right-radius: 0.25rem;\r\n  padding: 10px;\r\n  text-align: left;\r\n  font-size: 16px;\r\n  font-weight: 400;\r\n  color: #007bff;\r\n}\r\n\r\n.nav__item:link,\r\n.nav__item:visited {\r\n  color: #007bff;\r\n}\r\n\r\n.nav__item:focus,\r\n.nav__item:hover {\r\n  color: darkblue;\r\n  border-color: rgb(222, 226, 230);\r\n}\r\n\r\n.nav__version {\r\n  padding-left: 10px;\r\n  padding-right: 10px;\r\n}\r\n\r\n.nav__usergroup {\r\n  display: flex;\r\n  margin-left: 10px;\r\n}\r\n\r\n.nav__usergroupselect {\r\n  flex-grow: 1;\r\n}\r\n\r\n.nav__approvalinfo {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 10px;\r\n}\r\n\r\n.nav__approvaltext {\r\n  user-select: none;\r\n  text-decoration: none;\r\n}\r\n\r\n.nav__approvalcount {\r\n  background-color: green;\r\n  font-weight: 500;\r\n  padding: 5px;\r\n  border-radius: 7px;\r\n  margin-left: 5px;\r\n  user-select: none;\r\n}\r\n\r\n.nav__approvalcount_warning {\r\n  background-color: yellow;\r\n}\r\n\r\n.nav__approvalcount_alarm {\r\n  background-color: red;\r\n}\r\n\r\n.nav__cartinfo {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 50px;\r\n}\r\n\r\n.nav__cartimg {\r\n  cursor: pointer;\r\n  min-width: 36px;\r\n  min-height: 36px;\r\n  background: url(\"../../../public/shopping-cart.png\") top left/36px 36px no-repeat;\r\n}\r\n\r\n.nav__cartcount {\r\n  user-select: none;\r\n  margin-left: 10px;\r\n  font-weight: bold;\r\n  transition: transform 1s;\r\n}\r\n\r\n.nav__cartcount_decreased {\r\n  color: red;\r\n  transform: scale(1.5);\r\n}\r\n\r\n.nav__cartcount_increased {\r\n  color: green;\r\n  transform: scale(1.5);\r\n}\r\n\r\n.nav__cleancartimg {\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n  min-width: 30px;\r\n  min-height: 30px;\r\n  background: url(\"../../../public/clean.png\") top left/30px 30px no-repeat;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.nav__cleancartimg:hover {\r\n  transform: rotate(30deg);\r\n}\r\n\r\n.nav__behalfuserimg {\r\n  cursor: pointer;\r\n  margin-left: 10px;\r\n  min-width: 30px;\r\n  min-height: 30px;\r\n  background: url(\"../../../public/log-out.png\") top left/30px 30px no-repeat;\r\n  transition: transform 0.3s;\r\n  margin-right: 10px;\r\n}\r\n</style>","class Command {}\r\n\r\nclass Notify extends Command {\r\n  constructor(level, text) {\r\n    super();\r\n    this.level = level;\r\n    this.text = text;\r\n  }\r\n}\r\n\r\nclass NotifyApiError extends Command {\r\n  constructor(code) {\r\n    super();\r\n    this.code = code;\r\n  }\r\n}\r\n\r\nclass LoginWithCredentials extends Command {\r\n  constructor(username, password) {\r\n    super();\r\n    this.username = username;\r\n    this.password = password;\r\n  }\r\n}\r\n\r\nclass LoginWithToken extends Command {}\r\n\r\nclass Logout extends Command {}\r\n\r\nclass GetInfo extends Command {}\r\n\r\nclass GetUsers extends Command {}\r\n\r\nclass SetUser extends Command {\r\n  constructor(\r\n    username,\r\n    is_active,\r\n    access_group_regex,\r\n    role,\r\n    role_inside_group,\r\n    role_outside_group\r\n  ) {\r\n    super();\r\n    this.username = username;\r\n    this.is_active = is_active;\r\n    this.access_group_regex = access_group_regex;\r\n    this.role = role;\r\n    this.role_inside_group = role_inside_group;\r\n    this.role_outside_group = role_outside_group;\r\n  }\r\n}\r\n\r\nclass DeleteUser extends Command {\r\n  constructor(username) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass GetUserReplacements extends Command {}\r\n\r\nclass AddUserReplacement extends Command {\r\n  constructor(username) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass DeleteUserReplacement extends Command {\r\n  constructor(username) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass GetUserReplacementsOfUser extends Command {\r\n  constructor(username) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass AddUserReplacementToUser extends Command {\r\n  constructor(username_to_be_replaced, replaced_with_username) {\r\n    super();\r\n    this.username_to_be_replaced = username_to_be_replaced;\r\n    this.replaced_with_username = replaced_with_username;\r\n  }\r\n}\r\n\r\nclass DeleteUserReplacementFromUser extends Command {\r\n  constructor(username_to_be_replaced, replaced_with_username) {\r\n    super();\r\n    this.username_to_be_replaced = username_to_be_replaced;\r\n    this.replaced_with_username = replaced_with_username;\r\n  }\r\n}\r\n\r\nclass GetOnBehalfUsers extends Command {}\r\n\r\nclass SetOnBehalfUser extends Command {\r\n  constructor(username) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass DeleteOnBehalfUser extends Command {\r\n  constructor(username) {\r\n    super();\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass GetFolders extends Command {}\r\n\r\nclass AddFolder extends Command {\r\n  constructor(\r\n    name,\r\n    storage_path,\r\n    master_usergroup_slug,\r\n    access_group,\r\n    settings\r\n  ) {\r\n    super();\r\n    this.name = name;\r\n    this.storage_path = storage_path;\r\n    this.master_usergroup_slug = master_usergroup_slug;\r\n    this.access_group = access_group;\r\n    this.settings = settings;\r\n  }\r\n}\r\n\r\nclass DeleteFolder extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass UpdateFolder extends Command {\r\n  constructor(\r\n    id,\r\n    name,\r\n    storage_path,\r\n    master_usergroup_slug,\r\n    access_group,\r\n    settings\r\n  ) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.storage_path = storage_path;\r\n    this.master_usergroup_slug = master_usergroup_slug;\r\n    this.access_group = access_group;\r\n    this.settings = settings;\r\n  }\r\n}\r\n\r\nclass GetManyDocuments extends Command {\r\n  constructor(\r\n    folder_id,\r\n    usergroup_id,\r\n    query_obj,\r\n    offset,\r\n    limit,\r\n    sort_by,\r\n    sort_asc,\r\n    sort_rule\r\n  ) {\r\n    super();\r\n\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.query = query_obj;\r\n\r\n    this.offset = offset;\r\n    this.limit = limit;\r\n\r\n    this.sort_by = sort_by;\r\n    this.sort_asc = sort_asc;\r\n    this.sort_rule = sort_rule;\r\n  }\r\n}\r\n\r\nclass GetDocument extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass GetWaitingDocumentApprovals extends Command {}\r\n\r\nclass UploadFileToFolder extends Command {\r\n  constructor(folder_id, usergroup_id, file_id, file) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.file_id = file_id;\r\n    // Здесь file это https://developer.mozilla.org/ru/docs/Web/API/File\r\n    this.file = file;\r\n  }\r\n}\r\n\r\nclass DownloadFileFromFolder extends Command {\r\n  constructor(folder_id, usergroup_id, file_id, name, size, inline) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.file_id = file_id;\r\n    this.name = name;\r\n    this.size = size;\r\n    this.inline = inline;\r\n  }\r\n}\r\n\r\nclass DownloadManyDocumentsFilesAsArchive extends Command {\r\n  constructor(folder_id, usergroup_id, document_ids, size) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_ids = document_ids;\r\n    this.size = size;\r\n  }\r\n}\r\n\r\nclass DownloadDocumentFilesAsArchive extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, size) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.size = size;\r\n  }\r\n}\r\n\r\nclass GetFileInfo extends Command {\r\n  constructor(file_id) {\r\n    super();\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass DeleteFileFromFolder extends Command {\r\n  constructor(folder_id, usergroup_id, file_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass UpdateFileFromFolder extends Command {\r\n  constructor(folder_id, usergroup_id, file_id, filename) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.file_id = file_id;\r\n    this.name = filename;\r\n  }\r\n}\r\n\r\nclass GetRoles extends Command {}\r\n\r\nclass AddRole extends Command {\r\n  constructor(name) {\r\n    super();\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nclass DeleteRole extends Command {\r\n  constructor(name) {\r\n    super();\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nclass GetUserFolderSettings extends Command {}\r\n\r\nclass AddUserFolderSettings extends Command {\r\n  constructor(folder_id, usergroup_slug, username, role, search_schema) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_slug = usergroup_slug;\r\n    this.username = username;\r\n    this.role = role;\r\n    this.search_schema = search_schema;\r\n  }\r\n}\r\n\r\nclass UpdateUserFolderSettings extends Command {\r\n  constructor(id, folder_id, usergroup_slug, username, role, search_schema) {\r\n    super();\r\n    this.id = id;\r\n    this.folder_id = folder_id;\r\n    this.usergroup_slug = usergroup_slug;\r\n    this.username = username;\r\n    this.role = role;\r\n    this.search_schema = search_schema;\r\n  }\r\n}\r\n\r\nclass DeleteUserFolderSettings extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass GetPermissions extends Command {}\r\n\r\nclass AddPermission extends Command {\r\n  constructor(role, perm) {\r\n    super();\r\n    this.role = role;\r\n    this.perm = perm;\r\n  }\r\n}\r\n\r\nclass DeletePermission extends Command {\r\n  constructor(role, perm) {\r\n    super();\r\n    this.role = role;\r\n    this.perm = perm;\r\n  }\r\n}\r\n\r\nclass GetUserPermissions extends Command {}\r\n\r\nclass GetUserPermissionsForFolder extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\nclass GetUserSearchSchema extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\nclass SetUserSearchSchema extends Command {\r\n  constructor(folder_id, usergroup_id, search_schema) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.search_schema = search_schema;\r\n  }\r\n}\r\n\r\nclass DeleteUserSearchSchema extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\nclass SetDocumentAttribute extends Command {\r\n  constructor(\r\n    folder_id,\r\n    usergroup_id,\r\n    document_id,\r\n    name,\r\n    value,\r\n    to_be_decoded\r\n  ) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.name = name;\r\n    this.value = value;\r\n    this.to_be_decoded = to_be_decoded;\r\n  }\r\n}\r\n\r\nclass SaveDocumentsInFolder extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\n// class SaveDocument extends Command {\r\n//   constructor(folder_id, document_id, data, files) {\r\n//     super();\r\n//     this.folder_id = folder_id;\r\n//     this.document_id = document_id;\r\n//     this.data = data;\r\n//     this.files = files;\r\n//   }\r\n// }\r\n\r\nclass SaveManyDocuments extends Command {\r\n  constructor(folder_id, usergroup_id, docs) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.docs = docs;\r\n  }\r\n}\r\n\r\nclass MarkDocumentAsDeleted extends Command {\r\n  constructor(folder_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass MarkDocumentAsNotDeleted extends Command {\r\n  constructor(folder_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\n// class DeleteDocument extends Command {\r\n//   constructor(folder_id, document_id) {\r\n//     super();\r\n//     this.folder_id = folder_id;\r\n//     this.document_id = document_id;\r\n//   }\r\n// }\r\n\r\nclass DeleteManyDocuments extends Command {\r\n  constructor(folder_id, usergroup_id, document_ids) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_ids = document_ids;\r\n  }\r\n}\r\n\r\nclass AttachFileToDocument extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, file_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass DetachFileFromDocument extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, file_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass FlushFileContainer extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\nclass AddDocument extends Command {\r\n  constructor(\r\n    folder_id,\r\n    usergroup_id,\r\n    document_id,\r\n    union_id,\r\n    attributes,\r\n    files,\r\n    mark_as_modified,\r\n    is_created_first_time,\r\n    is_blocked\r\n  ) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.union_id = union_id;\r\n    this.attributes = attributes;\r\n    this.files = files;\r\n    this.mark_as_modified = mark_as_modified;\r\n    this.is_created_first_time = is_created_first_time;\r\n    this.is_blocked = is_blocked;\r\n  }\r\n}\r\n\r\nclass AddDocumentModel extends Command {\r\n  constructor(folder_id, usergroup_id, doc, mark_as_modified) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.doc = doc;\r\n    this.mark_as_modified = mark_as_modified;\r\n  }\r\n}\r\n\r\nclass DuplicateDocumentToUsergroup extends Command {\r\n  constructor(\r\n    folder_id,\r\n    source_usergroup_id,\r\n    target_usergroup_id,\r\n    document_id\r\n  ) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.source_usergroup_id = source_usergroup_id;\r\n    this.target_usergroup_id = target_usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass DuplicateManyDocumentsToUsergroup extends Command {\r\n  constructor(\r\n    folder_id,\r\n    source_usergroup_id,\r\n    target_usergroup_id,\r\n    document_ids\r\n  ) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.source_usergroup_id = source_usergroup_id;\r\n    this.target_usergroup_id = target_usergroup_id;\r\n    this.document_ids = document_ids;\r\n  }\r\n}\r\n\r\n\r\nclass ValidateDocument extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass ValidateDocumentAgainstConstraint extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, parameters, error_message) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.parameters = parameters;\r\n    this.error_message = error_message;\r\n  }\r\n}\r\n\r\nclass ValidateDocumentAgainstAttributeRegexValidationConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstAttributeTogetherRegexValidationConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstUniqueTogetherConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstAttributeHasPreviousValueConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstHasFileConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstHasApprovalConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstSingleUnionConstraint extends ValidateDocumentAgainstConstraint {}\r\nclass ValidateDocumentAgainstFilenamePatternConstraint extends ValidateDocumentAgainstConstraint {}\r\n\r\nclass AttachFilesToDocumentUsingPattern extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass AllocateFilesToDocumentsUsingPattern extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\nclass GetSpareFiles extends Command {\r\n  constructor(folder_id, usergroup_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n  }\r\n}\r\n\r\nclass UpdateUploadProgress extends Command {\r\n  constructor(file_ids) {\r\n    super();\r\n    this.file_ids = file_ids;\r\n  }\r\n}\r\n\r\nclass DownloadExcelFile extends Command {\r\n  constructor(filename, aoa) {\r\n    super();\r\n    this.filename = filename; // Name of downloaded file\r\n    this.aoa = aoa; // array of arrays\r\n  }\r\n}\r\n\r\nclass DownloadJsonFile extends Command {\r\n  constructor(filename, data) {\r\n    super();\r\n    this.filename = filename; // Name of downloaded file\r\n    this.data = data; // data to be serialized in JSON\r\n  }\r\n}\r\n\r\nclass GetPdfMergeFiles extends Command {}\r\n\r\nclass UploadPdfMergeFile extends Command {\r\n  constructor(id, order, file) {\r\n    super();\r\n    this.id = id;\r\n    this.order = order;\r\n    // Здесь file это https://developer.mozilla.org/ru/docs/Web/API/File\r\n    this.file = file;\r\n  }\r\n}\r\n\r\nclass PushDocumentButton extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, action) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.action = action;\r\n  }\r\n}\r\n\r\nclass PerformActionOnDocuments extends Command {\r\n  constructor(\r\n    handler,\r\n    username,\r\n    folder_id = null,\r\n    usergroup_id = null,\r\n    document_ids = []\r\n  ) {\r\n    super();\r\n    this.handler = handler;\r\n    this.username = username;\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_ids = document_ids;\r\n  }\r\n}\r\n\r\nclass UpdatePdfMergeFile extends Command {\r\n  constructor(id, order, page_from, page_to, angle) {\r\n    super();\r\n    this.id = id;\r\n    this.order = order;\r\n    this.page_from = page_from;\r\n    this.page_to = page_to;\r\n    this.angle = angle;\r\n  }\r\n}\r\n\r\nclass DeletePdfMergeFile extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass DeleteAllPdfMergeFiles extends Command {}\r\n\r\nclass DownloadPdfMergeResult extends Command {\r\n  constructor(keep_bookmarks, add_filenames_as_bookmarks) {\r\n    super();\r\n    this.keep_bookmarks = keep_bookmarks;\r\n    this.add_filenames_as_bookmarks = add_filenames_as_bookmarks;\r\n  }\r\n}\r\n\r\nclass DownloadPdfMixResult extends Command {}\r\n\r\nclass GetShareFiles extends Command {}\r\n\r\nclass UploadShareFile extends Command {\r\n  constructor(id, file) {\r\n    super();\r\n    this.id = id;\r\n    // Здесь file это https://developer.mozilla.org/ru/docs/Web/API/File\r\n    this.file = file;\r\n  }\r\n}\r\n\r\nclass DeleteShareFile extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass DownloadShareFile extends Command {\r\n  constructor(id, name, size, inline) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.size = size;\r\n    this.inline = inline;\r\n  }\r\n}\r\n\r\nclass GetUserGroups extends Command {}\r\n\r\nclass AddUserGroup extends Command {\r\n  constructor(name, slug, is_private) {\r\n    super();\r\n    this.name = name;\r\n    this.slug = slug;\r\n    this.is_private = is_private;\r\n  }\r\n}\r\n\r\nclass UpdateUserGroup extends Command {\r\n  constructor(id, name, slug, is_private) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.slug = slug;\r\n    this.is_private = is_private;\r\n  }\r\n}\r\n\r\nclass DeleteUserGroup extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass AddUserToUserGroup extends Command {\r\n  constructor(id, username) {\r\n    super();\r\n    this.id = id;\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass DeleteUserFromUserGroup extends Command {\r\n  constructor(id, username) {\r\n    super();\r\n    this.id = id;\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass SetCurrentUserGroup extends Command {\r\n  constructor(usergroup) {\r\n    super();\r\n    this.usergroup = usergroup;\r\n  }\r\n}\r\n\r\nclass GetFlows extends Command {\r\n  constructor(query_obj) {\r\n    super();\r\n    this.query = query_obj;\r\n  }\r\n}\r\n\r\nclass AddFlow extends Command {\r\n  constructor(name, trigger, is_active, is_multiple, message_if_fail, process) {\r\n    super();\r\n    this.name = name;\r\n    this.trigger = trigger;\r\n    this.is_active = is_active;\r\n    this.is_multiple = is_multiple;\r\n    this.message_if_fail = message_if_fail;\r\n    this.process = process;\r\n  }\r\n}\r\n\r\nclass UpdateFlow extends Command {\r\n  constructor(\r\n    id,\r\n    name,\r\n    trigger,\r\n    is_active,\r\n    is_multiple,\r\n    message_if_fail,\r\n    process\r\n  ) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.trigger = trigger;\r\n    this.is_active = is_active;\r\n    this.is_multiple = is_multiple;\r\n    this.message_if_fail = message_if_fail;\r\n    this.process = process;\r\n  }\r\n}\r\n\r\nclass DeleteFlow extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass GetFlowItem extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass GetManyFlowItems extends Command {\r\n  constructor(query_obj) {\r\n    super();\r\n    this.query = query_obj;\r\n  }\r\n}\r\n\r\nclass RestartFlowItem extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass GetFlowItemSteps extends Command {\r\n  constructor(flowitem_id) {\r\n    super();\r\n    this.flowitem_id = flowitem_id;\r\n  }\r\n}\r\n\r\nclass DropSelfTestingQuestions extends Command {}\r\n\r\nclass AddSelfTestingQuestion extends Command {\r\n  constructor(id, question_text, answers) {\r\n    super();\r\n    this.id = id;\r\n    this.question = question_text;\r\n    this.answers = answers;\r\n  }\r\n}\r\n\r\nclass GetManyDocumentsApprovals extends Command {\r\n  constructor(query_obj, offset, limit, sort_by, sort_asc) {\r\n    super();\r\n    this.query = query_obj;\r\n    this.offset = offset;\r\n    this.limit = limit;\r\n    this.sort_by = sort_by;\r\n    this.sort_asc = sort_asc;\r\n  }\r\n}\r\n\r\nclass GetDocumentApprovals extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass AddDocumentApproval extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, username) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass UpdateDocumentApproval extends Command {\r\n  constructor(\r\n    folder_id,\r\n    usergroup_id,\r\n    document_id,\r\n    approval_id,\r\n    state,\r\n    comments\r\n  ) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.approval_id = approval_id;\r\n    this.state = state;\r\n    this.comments = comments;\r\n  }\r\n}\r\n\r\nclass DeleteDocumentApproval extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, approval_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.approval_id = approval_id;\r\n  }\r\n}\r\n\r\nclass DelegateDocumentApproval extends Command {\r\n  constructor(\r\n    folder_id,\r\n    usergroup_id,\r\n    document_id,\r\n    approval_id,\r\n    username,\r\n    with_return\r\n  ) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.approval_id = approval_id;\r\n    this.username = username;\r\n    this.with_return = with_return;\r\n  }\r\n}\r\n\r\nclass GetDocumentApprovalSpareFiles extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass UploadDocumentApprovalFile extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, file_id, file) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.file_id = file_id;\r\n    // Здесь file это https://developer.mozilla.org/ru/docs/Web/API/File\r\n    this.file = file;\r\n  }\r\n}\r\n\r\nclass DeleteDocumentApprovalFile extends Command {\r\n  constructor(folder_id, usergroup_id, document_id, file_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass EmptyCart extends Command {}\r\nclass GetCart extends Command {}\r\n\r\nclass AddDocumentToCart extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass AddManyDocumentsToCart extends Command {\r\n  constructor(folder_id, usergroup_id, document_ids) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_ids = document_ids;\r\n  }\r\n}\r\n\r\nclass RemoveDocumentFromCart extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass CreateDocumentApprovalFlow extends Command {\r\n  constructor(document_id) {\r\n    super();\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass AddDocumentApprovalFlowStep extends Command {\r\n  constructor(document_id) {\r\n    super();\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass DeleteDocumentApprovalFlowStep extends Command {\r\n  constructor(document_id, index) {\r\n    super();\r\n    this.document_id = document_id;\r\n    this.index = index;\r\n  }\r\n}\r\n\r\nclass AttachUserToDocumentApprovalFlowStep extends Command {\r\n  constructor(document_id, index, username) {\r\n    super();\r\n    this.document_id = document_id;\r\n    this.index = index;\r\n    this.username = username;\r\n  }\r\n}\r\n\r\nclass DeleteUserFromDocumentApprovalFlowStep extends AttachUserToDocumentApprovalFlowStep {}\r\n\r\nclass AbstractDocumentApprovalFlowCommand extends Command {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass GetDocumentApprovalFlow extends AbstractDocumentApprovalFlowCommand {}\r\nclass StartDocumentApprovalFlow extends AbstractDocumentApprovalFlowCommand {}\r\nclass StopDocumentApprovalFlow extends AbstractDocumentApprovalFlowCommand {}\r\nclass SetDocumentApprovalFlow extends AbstractDocumentApprovalFlowCommand {}\r\n\r\nclass GetServerSettings extends Command {}\r\nclass UpdateServerSetting extends Command {\r\n  constructor(id, value) {\r\n    super();\r\n    this.id = id;\r\n    this.value = value;\r\n  }\r\n}\r\n\r\nclass GetMailBoxes extends Command {}\r\n\r\nclass AddMailBox extends Command {\r\n  constructor(\r\n    out_protocol,\r\n    out_encryption,\r\n    out_port,\r\n    out_server,\r\n    in_protocol,\r\n    in_encryption,\r\n    in_port,\r\n    in_server,\r\n    username,\r\n    password,\r\n    name\r\n  ) {\r\n    super();\r\n    this.out_protocol = out_protocol;\r\n    this.out_encryption = out_encryption;\r\n    this.out_port = out_port;\r\n    this.out_server = out_server;\r\n    this.in_protocol = in_protocol;\r\n    this.in_encryption = in_encryption;\r\n    this.in_port = in_port;\r\n    this.in_server = in_server;\r\n    this.username = username;\r\n    this.password = password;\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nclass UpdateMailBox extends Command {\r\n  constructor(\r\n    id,\r\n    out_protocol,\r\n    out_encryption,\r\n    out_port,\r\n    out_server,\r\n    in_protocol,\r\n    in_encryption,\r\n    in_port,\r\n    in_server,\r\n    username,\r\n    password,\r\n    name\r\n  ) {\r\n    super();\r\n    this.id = id;\r\n    this.out_protocol = out_protocol;\r\n    this.out_encryption = out_encryption;\r\n    this.out_port = out_port;\r\n    this.out_server = out_server;\r\n    this.in_protocol = in_protocol;\r\n    this.in_encryption = in_encryption;\r\n    this.in_port = in_port;\r\n    this.in_server = in_server;\r\n    this.username = username;\r\n    this.password = password;\r\n    this.name = name;\r\n  }\r\n}\r\n\r\nclass DeleteMailBox extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass GetMailChannels extends Command {}\r\n\r\nclass AddMailChannel extends Command {\r\n  constructor(name, folder, storage_path, settings, is_active) {\r\n    super();\r\n    this.name = name;\r\n    this.folder = folder;\r\n    this.storage_path = storage_path;\r\n    this.settings = settings;\r\n    this.is_active = is_active;\r\n  }\r\n}\r\n\r\nclass UpdateMailChannel extends Command {\r\n  constructor(id, name, folder, storage_path, settings, is_active) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.folder = folder;\r\n    this.storage_path = storage_path;\r\n    this.settings = settings;\r\n    this.is_active = is_active;\r\n  }\r\n}\r\n\r\nclass DeleteMailChannel extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass AddMailChannelToMailBox extends Command {\r\n  constructor(mailbox_id, mailchannel_id) {\r\n    super();\r\n    this.mailbox_id = mailbox_id;\r\n    this.mailchannel_id = mailchannel_id;\r\n  }\r\n}\r\n\r\nclass DeleteMailChannelFromMailBox extends Command {\r\n  constructor(mailbox_id, mailchannel_id) {\r\n    super();\r\n    this.mailbox_id = mailbox_id;\r\n    this.mailchannel_id = mailchannel_id;\r\n  }\r\n}\r\n\r\nclass FetchMailChannel extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass GetMailMessages extends Command {\r\n  constructor(query_obj) {\r\n    super();\r\n    this.query = query_obj;\r\n  }\r\n}\r\n\r\nclass DeleteMailMessage extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nclass AbstractDownloadMailMessage extends Command {\r\n  constructor(id, format) {\r\n    super();\r\n    this.id = id;\r\n    this.format = format;\r\n  }\r\n}\r\n\r\nclass DownloadMailMessageInTextFormat extends AbstractDownloadMailMessage {\r\n  constructor(id) {\r\n    super(id, \"text\");\r\n  }\r\n}\r\n\r\nclass DownloadMailMessageInHtmlFormat extends AbstractDownloadMailMessage {\r\n  constructor(id) {\r\n    super(id, \"html\");\r\n  }\r\n}\r\n\r\nclass DownloadMailMessageInRawFormat extends AbstractDownloadMailMessage {\r\n  constructor(id) {\r\n    super(id, \"raw\");\r\n  }\r\n}\r\n\r\nclass DownloadMailMessageAttachment extends Command {\r\n  constructor(message_id, id, name, size, inline) {\r\n    super();\r\n    this.message_id = message_id;\r\n    this.id = id;\r\n    this.name = name;\r\n    this.size = size;\r\n    this.inline = inline;\r\n  }\r\n}\r\n\r\n// CONTEXT\r\nclass GetDocumentAttributesContext extends Command {\r\n  constructor(ctx_id, ctx_name, folder_id, document_id, is_raw_attribute) {\r\n    super();\r\n    this.ctx_id = ctx_id;\r\n    this.ctx_name = ctx_name;\r\n    this.folder_id = folder_id;\r\n    this.document_id = document_id;\r\n    this.is_raw_attribute = is_raw_attribute;\r\n  }\r\n}\r\n\r\nclass GetDocumentPreviousAttributeContext extends Command {\r\n  constructor(\r\n    ctx_id,\r\n    ctx_name,\r\n    folder_id,\r\n    usergroup_id,\r\n    document_id,\r\n    attribute_name,\r\n    is_raw_attribute,\r\n    count\r\n  ) {\r\n    super();\r\n    this.ctx_id = ctx_id;\r\n    this.ctx_name = ctx_name;\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.attribute_name = attribute_name;\r\n    this.is_raw_attribute = is_raw_attribute;\r\n    this.count = count;\r\n  }\r\n}\r\n\r\nclass GetUserEmailContext extends Command {\r\n  constructor(ctx_id, ctx_name) {\r\n    super();\r\n    this.ctx_id = ctx_id;\r\n    this.ctx_name = ctx_name;\r\n  }\r\n}\r\n\r\nclass GetCounters extends Command {}\r\n\r\nclass AddCounter extends Command {\r\n  constructor(name, description, value, increment) {\r\n    super();\r\n    this.name = name;\r\n    this.description = description;\r\n    this.value = value;\r\n    this.increment = increment;\r\n  }\r\n}\r\n\r\nclass UpdateCounter extends Command {\r\n  constructor(id, name, description, value, increment) {\r\n    super();\r\n    this.id = id;\r\n    this.name = name;\r\n    this.description = description;\r\n    this.value = value;\r\n    this.increment = increment;\r\n  }\r\n}\r\n\r\nclass DeleteCounter extends Command {\r\n  constructor(id) {\r\n    super();\r\n    this.id = id;\r\n  }\r\n}\r\n\r\nexport {\r\n  Command,\r\n  Notify,\r\n  NotifyApiError,\r\n  GetInfo,\r\n  // USER\r\n  LoginWithCredentials,\r\n  LoginWithToken,\r\n  Logout,\r\n  GetUsers,\r\n  SetUser,\r\n  DeleteUser,\r\n  GetUserReplacements,\r\n  AddUserReplacement,\r\n  DeleteUserReplacement,\r\n  GetUserReplacementsOfUser,\r\n  AddUserReplacementToUser,\r\n  DeleteUserReplacementFromUser,\r\n  GetOnBehalfUsers,\r\n  SetOnBehalfUser,\r\n  DeleteOnBehalfUser,\r\n  // USER GROUPS\r\n  GetUserGroups,\r\n  AddUserGroup,\r\n  UpdateUserGroup,\r\n  DeleteUserGroup,\r\n  AddUserToUserGroup,\r\n  DeleteUserFromUserGroup,\r\n  SetCurrentUserGroup,\r\n  // FOLDERS\r\n  GetFolders,\r\n  AddFolder,\r\n  DeleteFolder,\r\n  UpdateFolder,\r\n  // ROLES\r\n  GetRoles,\r\n  AddRole,\r\n  DeleteRole,\r\n  // USER FOLDER SETTINGS\r\n  GetUserFolderSettings,\r\n  AddUserFolderSettings,\r\n  UpdateUserFolderSettings,\r\n  DeleteUserFolderSettings,\r\n  // PERMISSIONS\r\n  GetPermissions,\r\n  AddPermission,\r\n  DeletePermission,\r\n  GetUserPermissions,\r\n  GetUserPermissionsForFolder,\r\n  GetUserSearchSchema,\r\n  SetUserSearchSchema,\r\n  DeleteUserSearchSchema,\r\n  // DOCUMENTS\r\n  GetManyDocuments,\r\n  GetDocument,\r\n  GetWaitingDocumentApprovals,\r\n  AddDocument,\r\n  AddDocumentModel,\r\n  DuplicateDocumentToUsergroup,\r\n  DuplicateManyDocumentsToUsergroup,\r\n  SetDocumentAttribute,\r\n  SaveDocumentsInFolder,\r\n  SaveManyDocuments,\r\n  MarkDocumentAsDeleted,\r\n  MarkDocumentAsNotDeleted,\r\n  DeleteManyDocuments,\r\n  PushDocumentButton,\r\n  PerformActionOnDocuments,\r\n  // DOCUMENT APPROVALS\r\n  GetManyDocumentsApprovals,\r\n  GetDocumentApprovals,\r\n  AddDocumentApproval,\r\n  UpdateDocumentApproval,\r\n  DeleteDocumentApproval,\r\n  DelegateDocumentApproval,\r\n  GetDocumentApprovalSpareFiles,\r\n  UploadDocumentApprovalFile,\r\n  DeleteDocumentApprovalFile,\r\n  // DOCUMENT APPROVAL FLOW\r\n  CreateDocumentApprovalFlow,\r\n  AddDocumentApprovalFlowStep,\r\n  DeleteDocumentApprovalFlowStep,\r\n  AttachUserToDocumentApprovalFlowStep,\r\n  DeleteUserFromDocumentApprovalFlowStep,\r\n  GetDocumentApprovalFlow,\r\n  StartDocumentApprovalFlow,\r\n  StopDocumentApprovalFlow,\r\n  SetDocumentApprovalFlow,\r\n  // DOCUMENT FILES\r\n  UploadFileToFolder,\r\n  DownloadFileFromFolder,\r\n  DownloadManyDocumentsFilesAsArchive,\r\n  DownloadDocumentFilesAsArchive,\r\n  DeleteFileFromFolder,\r\n  UpdateFileFromFolder,\r\n  AttachFileToDocument,\r\n  DetachFileFromDocument,\r\n  FlushFileContainer,\r\n  AttachFilesToDocumentUsingPattern,\r\n  AllocateFilesToDocumentsUsingPattern,\r\n  GetSpareFiles,\r\n  UpdateUploadProgress,\r\n  GetFileInfo,\r\n  // CART\r\n  GetCart,\r\n  AddDocumentToCart,\r\n  AddManyDocumentsToCart,\r\n  RemoveDocumentFromCart,\r\n  EmptyCart,\r\n  // SERVER SETTINGS\r\n  GetServerSettings,\r\n  UpdateServerSetting,\r\n  // MAIL BOX\r\n  GetMailBoxes,\r\n  AddMailBox,\r\n  UpdateMailBox,\r\n  DeleteMailBox,\r\n  // MAIL CHANNEL\r\n  GetMailChannels,\r\n  AddMailChannel,\r\n  UpdateMailChannel,\r\n  DeleteMailChannel,\r\n  AddMailChannelToMailBox,\r\n  DeleteMailChannelFromMailBox,\r\n  FetchMailChannel,\r\n  // MAIL MESSAGE\r\n  GetMailMessages,\r\n  DeleteMailMessage,\r\n  DownloadMailMessageInTextFormat,\r\n  DownloadMailMessageInHtmlFormat,\r\n  DownloadMailMessageInRawFormat,\r\n  DownloadMailMessageAttachment,\r\n  // VALIDATION\r\n  ValidateDocument,\r\n  ValidateDocumentAgainstAttributeRegexValidationConstraint,\r\n  ValidateDocumentAgainstAttributeTogetherRegexValidationConstraint,\r\n  ValidateDocumentAgainstUniqueTogetherConstraint,\r\n  ValidateDocumentAgainstAttributeHasPreviousValueConstraint,\r\n  ValidateDocumentAgainstHasFileConstraint,\r\n  ValidateDocumentAgainstHasApprovalConstraint,\r\n  ValidateDocumentAgainstSingleUnionConstraint,\r\n  ValidateDocumentAgainstFilenamePatternConstraint,\r\n  // EXCEL\r\n  DownloadExcelFile,\r\n  // JSON\r\n  DownloadJsonFile,\r\n  // SERVICE - PDF MERGE\r\n  GetPdfMergeFiles,\r\n  UpdatePdfMergeFile,\r\n  UploadPdfMergeFile,\r\n  DeletePdfMergeFile,\r\n  DeleteAllPdfMergeFiles,\r\n  DownloadPdfMergeResult,\r\n  DownloadPdfMixResult,\r\n  // SERVICE - SHARE FILE\r\n  GetShareFiles,\r\n  UploadShareFile,\r\n  DeleteShareFile,\r\n  DownloadShareFile,\r\n  // SERVICE - SELF TESTING\r\n  DropSelfTestingQuestions,\r\n  AddSelfTestingQuestion,\r\n  // SERVICE - COUNTER\r\n  GetCounters,\r\n  AddCounter,\r\n  UpdateCounter,\r\n  DeleteCounter,\r\n  // WORKFLOW - FLOW\r\n  GetFlows,\r\n  AddFlow,\r\n  UpdateFlow,\r\n  DeleteFlow,\r\n  // WORKFLOW - FLOW ITEM\r\n  GetFlowItem,\r\n  GetManyFlowItems,\r\n  RestartFlowItem,\r\n  GetFlowItemSteps,\r\n  // CONTEXT\r\n  GetDocumentAttributesContext,\r\n  GetDocumentPreviousAttributeContext,\r\n  GetUserEmailContext,\r\n};\r\n","class Event {}\r\n\r\nclass ApiError extends Event {\r\n  constructor(code) {\r\n    super();\r\n    this.code = code;\r\n  }\r\n}\r\n\r\nclass AccessPagePermissionCheckFail extends Event {}\r\nclass UserLoginSuccess extends Event {}\r\nclass UserLogoutSuccess extends Event {}\r\nclass UserLoginFail extends Event {}\r\nclass AuthTokenFail extends Event {}\r\n\r\nclass UsersGetSuccess extends Event {}\r\nclass UsersUpdateSuccess extends Event {}\r\nclass UsersDeleteSuccess extends Event {}\r\n\r\nclass UserReplacementAddSuccess extends Event {}\r\nclass UserReplacementDeleteSuccess extends Event {}\r\n\r\nclass OnBehalfUserChangeSuccess extends Event {}\r\nclass OnBehalfUserDeleteSuccess extends Event {}\r\n\r\nclass FoldersAddSuccess extends Event {}\r\nclass FoldersUpdateSuccess extends Event {}\r\nclass FoldersDeleteSuccess extends Event {}\r\n\r\nclass UploadFileError extends Event {\r\n  constructor(filename) {\r\n    super();\r\n    this.filename = filename;\r\n  }\r\n}\r\n\r\nclass UploadEmptyFileError extends UploadFileError {}\r\nclass UploadFileTooBigError extends UploadFileError {}\r\nclass UploadFileWrongExtensionError extends UploadFileError {}\r\nclass UploadFileWrongFilenameError extends UploadFileError {}\r\n\r\nclass UploadFileSuccess extends Event {}\r\n\r\nclass SaveManyDocumentsSuccess extends Event {}\r\nclass DeleteManyDocumentsSuccess extends Event {}\r\n\r\nclass DocumentAttributesChanged extends Event {\r\n  constructor(folder_id, usergroup_id, document_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n  }\r\n}\r\n\r\nclass DuplicateDocumentToUsergroupSuccess extends Event {}\r\nclass DuplicateManyDocumentsToUsergroupSuccess extends Event {}\r\n\r\nclass DocumentFilesAreUploading extends Event {}\r\n\r\nclass FileUpdatedSuccess extends Event {}\r\nclass FileDeletedSuccess extends Event {}\r\n\r\nclass FileAttachedToDocument extends Event {\r\n  constructor(folder_id, usergroup_id, document_id, file_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass FileDetachedFromDocument extends Event {\r\n  constructor(folder_id, usergroup_id, document_id, file_id) {\r\n    super();\r\n    this.folder_id = folder_id;\r\n    this.usergroup_id = usergroup_id;\r\n    this.document_id = document_id;\r\n    this.file_id = file_id;\r\n  }\r\n}\r\n\r\nclass DocumentButtonPushed extends Event {}\r\n\r\nclass FilesAllocated extends Event {}\r\n\r\nclass AddRoleSuccess extends Event {}\r\nclass DeleteRoleSuccess extends Event {}\r\n\r\nclass AddUserFolderSettingsSuccess extends Event {}\r\nclass UpdateUserFolderSettingsSuccess extends Event {}\r\nclass DeleteUserFolderSettingsSuccess extends Event {}\r\n\r\nclass SetUserSearchSchemaSuccess extends Event {}\r\n\r\nclass AddPermissionSuccess extends Event {}\r\nclass DeletePermissionSuccess extends Event {}\r\n\r\nclass DocumentLinkCopied extends Event {}\r\nclass FileLinkCopied extends Event {}\r\n\r\nclass AddUserGroupSuccess extends Event {}\r\nclass UpdateUserGroupSuccess extends Event {}\r\nclass DeleteUserGroupSuccess extends Event {}\r\nclass UserGroupHasNotBeenAssigned extends Event {}\r\n\r\nclass DocumentAddedToCartSuccess extends Event {}\r\nclass DocumentRemovedFromCartSuccess extends Event {}\r\nclass ManyDocumentsAddedToCartSuccess extends Event {}\r\n\r\nclass AddFlowSuccess extends Event {}\r\nclass UpdateFlowSuccess extends Event {}\r\nclass DeleteFlowSuccess extends Event {}\r\nclass RestartFlowItemSuccess extends Event {}\r\n\r\nclass SelfTestingRepliedSuccess extends Event {}\r\nclass SelfTestingRepliedFail extends Event {}\r\n\r\nclass DocumentApprovalAddedSuccess extends Event {}\r\nclass DocumentApprovalUpdatedSuccess extends Event {}\r\nclass DocumentApprovalDeletedSuccess extends Event {}\r\nclass DocumentApprovalDelegatedSuccess extends Event {}\r\n\r\nclass EmptyApprovalFlowSaved extends Event {}\r\nclass ApprovalFlowStarted extends Event {}\r\nclass ApprovalFlowStopped extends Event {}\r\nclass ApprovalFlowUploadError extends Event {}\r\n\r\nclass ServerSettingUpdatedSuccess extends Event {}\r\n\r\nclass MailBoxAddedSuccess extends Event {}\r\nclass MailBoxUpdatedSuccess extends Event {}\r\nclass MailBoxDeletedSuccess extends Event {}\r\n\r\nclass MailChannelAddedSuccess extends Event {}\r\nclass MailChannelUpdatedSuccess extends Event {}\r\nclass MailChannelDeletedSuccess extends Event {}\r\nclass MailChannelFetchedSuccess extends Event {}\r\n\r\nclass MailMessageDeletedSuccess extends Event {}\r\n\r\nclass CounterAddedSuccess extends Event {}\r\nclass CounterUpdatedSuccess extends Event {}\r\nclass CounterDeletedSuccess extends Event {}\r\n\r\nexport {\r\n  Event,\r\n  ApiError,\r\n\r\n  // LOGIN\r\n  UserLoginSuccess,\r\n  UserLogoutSuccess,\r\n  UserLoginFail,\r\n  AuthTokenFail,\r\n\r\n  // PERMISSION\r\n  AccessPagePermissionCheckFail,\r\n  AddPermissionSuccess,\r\n  DeletePermissionSuccess,\r\n\r\n  // USER\r\n  UsersGetSuccess,\r\n  UsersUpdateSuccess,\r\n  UsersDeleteSuccess,\r\n  UserReplacementAddSuccess,\r\n  UserReplacementDeleteSuccess,\r\n  OnBehalfUserChangeSuccess,\r\n  OnBehalfUserDeleteSuccess,\r\n\r\n  // FOLDER\r\n  FoldersAddSuccess,\r\n  FoldersUpdateSuccess,\r\n  FoldersDeleteSuccess,\r\n\r\n  // FILE\r\n  UploadFileError,\r\n  UploadEmptyFileError,\r\n  UploadFileTooBigError,\r\n  UploadFileWrongFilenameError,\r\n  UploadFileWrongExtensionError,\r\n  UploadFileSuccess,\r\n  DocumentFilesAreUploading,\r\n  FileUpdatedSuccess,\r\n  FileDeletedSuccess,\r\n  FileAttachedToDocument,\r\n  FileDetachedFromDocument,\r\n  FilesAllocated,\r\n  FileLinkCopied,\r\n\r\n  // DOCUMENT\r\n  SaveManyDocumentsSuccess,\r\n  DeleteManyDocumentsSuccess,\r\n  DocumentAttributesChanged,\r\n  DuplicateDocumentToUsergroupSuccess,\r\n  DuplicateManyDocumentsToUsergroupSuccess,\r\n  DocumentLinkCopied,\r\n  DocumentButtonPushed,\r\n  \r\n  // DOCUMENT APPROVAL\r\n  DocumentApprovalAddedSuccess,\r\n  DocumentApprovalUpdatedSuccess,\r\n  DocumentApprovalDeletedSuccess,\r\n  DocumentApprovalDelegatedSuccess,\r\n\r\n  // DOCUMENT APPROVAL FLOW\r\n  EmptyApprovalFlowSaved,\r\n  ApprovalFlowStarted,\r\n  ApprovalFlowStopped,\r\n  ApprovalFlowUploadError,\r\n\r\n  // ROLE\r\n  AddRoleSuccess,\r\n  DeleteRoleSuccess,\r\n\r\n  // USER FOLDER SETTINGS\r\n  AddUserFolderSettingsSuccess,\r\n  UpdateUserFolderSettingsSuccess,\r\n  DeleteUserFolderSettingsSuccess,\r\n\r\n  // USER SEARCH SCHEMA\r\n  SetUserSearchSchemaSuccess,\r\n\r\n  // USER GROUP\r\n  AddUserGroupSuccess,\r\n  UpdateUserGroupSuccess,\r\n  DeleteUserGroupSuccess,\r\n  UserGroupHasNotBeenAssigned,\r\n\r\n\r\n  // CART\r\n  DocumentAddedToCartSuccess,\r\n  DocumentRemovedFromCartSuccess,\r\n  ManyDocumentsAddedToCartSuccess,\r\n\r\n  // FLOW\r\n  AddFlowSuccess,\r\n  UpdateFlowSuccess,\r\n  DeleteFlowSuccess,\r\n\r\n  // FLOW ITEM\r\n  RestartFlowItemSuccess,\r\n\r\n  // SELF TESTING\r\n  SelfTestingRepliedSuccess,\r\n  SelfTestingRepliedFail,\r\n\r\n  // SERVER SETTINGS\r\n  ServerSettingUpdatedSuccess,\r\n  \r\n  // MAILBOXES\r\n  MailBoxAddedSuccess,\r\n  MailBoxUpdatedSuccess,\r\n  MailBoxDeletedSuccess,\r\n\r\n  // MAIL CHANNELS\r\n  MailChannelAddedSuccess,\r\n  MailChannelUpdatedSuccess,\r\n  MailChannelDeletedSuccess,\r\n  MailChannelFetchedSuccess,\r\n\r\n  // MAIL MESSAGES\r\n  MailMessageDeletedSuccess,\r\n\r\n  // COUNTERS\r\n  CounterAddedSuccess,\r\n  CounterUpdatedSuccess,\r\n  CounterDeletedSuccess,\r\n};\r\n","import Ajv from \"ajv\";\r\nimport AjvErrors from \"ajv-errors\";\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass DataClass {\r\n  constructor(obj) {\r\n    this._data = undefined;\r\n\r\n    // Если объекта нет, то не валидируем\r\n    if (obj === undefined) return;\r\n\r\n    this._validate_using_schema(obj, this.schema);\r\n  }\r\n\r\n  get data() {\r\n    if (this._data === undefined) {\r\n      throw new NotImplementedError(\"DataClass.data has not been assigned\");\r\n    }\r\n\r\n    return this._data;\r\n  }\r\n\r\n  get schema() {\r\n    throw new NotImplementedError(\"Json schema is not defined\");\r\n  }\r\n\r\n  _validate_using_schema(obj, schema) {\r\n    this.ajv = new Ajv({ allErrors: true, allowUnionTypes: true});\r\n    AjvErrors(this.ajv);\r\n\r\n    const validate = this.ajv.compile(schema); // Ref\r\n    validate(obj);\r\n    // console.log(schema)\r\n    // console.log(obj)\r\n\r\n    if (validate.errors !== null) {\r\n      validate.errors.forEach((err) => console.log(err));\r\n      throw new NotImplementedError(\r\n        \"Object \" + obj.constructor.name + \" does not correspond to json schema\"\r\n      );\r\n    }\r\n\r\n    this._data = obj;\r\n  }\r\n\r\n}\r\n\r\nexport { DataClass };\r\n","const Info = {\r\n  type: \"object\",\r\n  properties: {\r\n    approval_actions_count: { type: \"integer\" },\r\n    approval_orders_count: { type: \"integer\" },\r\n  },\r\n  required: [\"approval_actions_count\", \"approval_orders_count\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { Info };\r\n","const Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    auth_token: {\r\n      type: \"string\",\r\n    },\r\n    first_name: {\r\n      type: \"string\",\r\n    },\r\n    last_name: {\r\n      type: \"string\",\r\n    },\r\n    patronomic: {\r\n      type: \"string\",\r\n    },\r\n    position: {\r\n      type: \"string\",\r\n    },\r\n    department: {\r\n      type: \"string\",\r\n    },\r\n    username: {\r\n      type: \"string\",\r\n    },\r\n    email: {\r\n      type: [\"null\", \"string\"]\r\n    },\r\n    role: {\r\n      type: \"string\",\r\n    },\r\n    role_inside_group: {\r\n      type: \"string\",\r\n    },\r\n    role_outside_group: {\r\n      type: \"string\",\r\n    },\r\n    is_active: {\r\n      type: \"boolean\",\r\n    },\r\n    access_group_regex: {\r\n      type: \"string\",\r\n    },\r\n    on_behalf: {\r\n      type: [\"null\", \"string\"]\r\n    },\r\n  },\r\n  required: [\r\n    \"first_name\",\r\n    \"last_name\",\r\n    \"patronomic\",\r\n    \"position\",\r\n    \"department\",\r\n    \"username\",\r\n    \"email\",\r\n    \"role\",\r\n    \"role_inside_group\",\r\n    \"role_outside_group\",\r\n    \"is_active\",\r\n    \"access_group_regex\",\r\n    \"on_behalf\"\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single\r\n};\r\n\r\nexport { Single, List };\r\n","const AttributeRegexValidationConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"attribute_regex_validation\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        field: { type: \"string\" },\r\n        pattern: { type: \"string\" },\r\n        case_insensitive: { type: \"boolean\" },\r\n      },\r\n      required: [\"field\", \"pattern\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { AttributeRegexValidationConstraint };\r\n","const AttributeTogetherRegexValidationConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"attribute_together_regex_validation\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        subject_field: { type: \"string\" },\r\n        subject_pattern: { type: \"string\" },\r\n        object_field: { type: \"string\" },\r\n        object_pattern: { type: \"string\" },\r\n        case_insensitive: { type: \"boolean\" },\r\n      },\r\n      required: [\r\n        \"subject_field\",\r\n        \"subject_pattern\",\r\n        \"object_field\",\r\n        \"object_pattern\",\r\n      ],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { AttributeTogetherRegexValidationConstraint };\r\n","const UniqueTogetherConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"unique_together\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        fields: { type: \"array\", items: { type: \"string\" } },\r\n      },\r\n      required: [\"fields\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { UniqueTogetherConstraint };\r\n","const AttributeHasPreviousValueConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"attribute_has_previous_value\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        fields: { type: \"array\", items: { type: \"string\" } },\r\n        field_to_be_checked: { type: \"string\" },\r\n        allowed_values: { type: \"array\", items: { type: \"string\" } },\r\n      },\r\n      required: [\"fields\", \"field_to_be_checked\", \"allowed_values\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { AttributeHasPreviousValueConstraint };\r\n","const HasFileConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"has_file\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        pattern: { type: \"string\" },\r\n        case_insensitive: { type: \"boolean\" },\r\n        // case_sensitive: { type: \"boolean\" },\r\n        min_count: { type: \"integer\" },\r\n        max_count: { type: \"integer\" },\r\n      },\r\n      required: [\"pattern\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { HasFileConstraint };\r\n","const HasApprovalConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"has_approval\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        usernames: { type: \"array\", items: { type: \"string\" } },\r\n      },\r\n      required: [\"usernames\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { HasApprovalConstraint };\r\n","const SingleUnionConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"single_union\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        fields: { type: \"array\", items: { type: \"string\" } },\r\n      },\r\n      required: [\"fields\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { SingleUnionConstraint };\r\n","const FilenameMatchPatternConstraint = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"filename_match_pattern\"] },\r\n    error_message: { type: \"string\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        min_count: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"error_message\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { FilenameMatchPatternConstraint };\r\n","const DocumentAttributesContext = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    type: { const: \"DOCUMENT_ATTRIBUTES\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        is_raw_attribute: { type: \"boolean\" }\r\n      },\r\n      required: [\"is_raw_attribute\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"type\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { DocumentAttributesContext };\r\n","const PreviousDocumentsAttributeContext = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    type: { const: \"PREVIOUS_DOCUMENTS_ATTRIBUTE\" },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        attribute_name: { type: \"string\" },\r\n        is_raw_attribute: { type: \"boolean\" },\r\n        count: { type: \"integer\" },\r\n      },\r\n      required: [\"attribute_name\", \"is_raw_attribute\", \"count\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"type\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { PreviousDocumentsAttributeContext };\r\n","const UsersEmailsContext = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    type: { const: \"USERS_EMAILS\" },\r\n  },\r\n  required: [\"name\", \"type\"],\r\n  additionalProperties: false\r\n};\r\n\r\nexport { UsersEmailsContext };\r\n","const Type = { const: \"FormDateInput\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    is_disabled: { type: \"boolean\" },\r\n    default: { type: \"integer\", minimum: 0 },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormDateInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"integer\", minimum: 0 },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormDateInput };\r\n","const Type = { const: \"FormEmailToAddressField\" };\r\n\r\nconst FormEmailToAddressField = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        value: {\r\n          type: \"object\",\r\n          properties: {\r\n            TO: { type: \"string\" },\r\n            CC: { type: \"string\" },\r\n            BCC: { type: \"string\" },\r\n          },\r\n          required: [\"TO\", \"CC\", \"BCC\"],\r\n          additionalProperties: false,\r\n        },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormEmailToAddressField };\r\n","const Type = { const: \"FormEmailToAddressInput\" };\r\n\r\nconst Context = {\r\n  type: \"object\",\r\n  properties: {\r\n    ADDRESS: { type: \"string\" },\r\n    KNOWN_EMAILS: { type: \"string\" },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    default: {\r\n      type: \"object\",\r\n      properties: {\r\n        TO: { type: \"string\" },\r\n        CC: { type: \"string\" },\r\n        BCC: { type: \"string\" },\r\n      },\r\n      required: [\"TO\", \"CC\", \"BCC\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormEmailToAddressInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: {\r\n          type: \"object\",\r\n          properties: {\r\n            TO: { type: \"string\" },\r\n            CC: { type: \"string\" },\r\n            BCC: { type: \"string\" },\r\n          },\r\n          required: [\"TO\", \"CC\", \"BCC\"],\r\n          additionalProperties: false,\r\n        },\r\n        bind_context: Context,\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n        bind_context: Context,\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormEmailToAddressInput };\r\n","const Type = { const: \"FormHtmlField\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    height: { type: \"integer\" },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormHtmlField = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormHtmlField };\r\n","const Type = { const: \"FormHtmlInput\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    height: { type: \"integer\" },\r\n    default: { type: \"string\" },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormHtmlInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormHtmlInput };\r\n","const Type = { const: \"FormTextField\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    align: { type: \"string\" },\r\n    font_weight: { type: \"string\" },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormTextField = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormTextField };\r\n","const Type = { const: \"FormTextInput\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    placeholder: { type: \"string\" },\r\n    secure: { type: \"boolean\" },\r\n    is_disabled: { type: \"boolean\" },\r\n    color: { type: \"string\" },\r\n    default: { type: \"string\" },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormTextInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormTextInput };\r\n","const Context = {\r\n  type: \"object\",\r\n  properties: {\r\n    ATTRIBUTES: { type: \"string\" },\r\n  },\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormHiddenInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: { const: \"FormHiddenInput\" },\r\n        parameters: {\r\n          type: \"object\",\r\n          properties: {\r\n            default: {},\r\n            pattern: { type: \"string\" },\r\n          },\r\n          required: [\"default\"],\r\n          additionalProperties: false,\r\n        },\r\n        bind: { type: \"string\" },\r\n        bind_context: Context,\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormHiddenInput };\r\n","const Type = { const: \"FormSelectInput\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    size: { type: \"integer\", minimum: 1 },\r\n    is_disabled: { type: \"boolean\" },\r\n    default: { type: \"string\" },\r\n    options: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          name: { type: \"string\" },\r\n          value: { type: \"string\" },\r\n        },\r\n        required: [\"name\", \"value\"],\r\n        additionalProperties: false,\r\n      },\r\n    },\r\n  },\r\n  required: [\"options\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormSelectInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormSelectInput };\r\n","const Type = { const: \"FormFilteredSelectInput\" };\r\n\r\nconst Parameters = {\r\n  type: \"object\",\r\n  properties: {\r\n    size: { type: \"integer\", minimum: 1 },\r\n    is_disabled: { type: \"boolean\" },\r\n    placeholder: { type: \"string\" },\r\n    default: { type: \"string\" },\r\n    options: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          name: { type: \"string\" },\r\n          value: { type: \"string\" },\r\n        },\r\n        required: [\"name\", \"value\"],\r\n        additionalProperties: false,\r\n      },\r\n    },\r\n  },\r\n  required: [\"options\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst FormFilteredSelectInput = {\r\n  oneOf: [\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        value: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"value\"],\r\n      additionalProperties: false,\r\n    },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        type: Type,\r\n        parameters: Parameters,\r\n        bind: { type: \"string\" },\r\n      },\r\n      required: [\"type\", \"bind\"],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { FormFilteredSelectInput };\r\n","import { AttributeRegexValidationConstraint } from \"./validation/attribute_regex_validation_constraint\";\r\nimport { AttributeTogetherRegexValidationConstraint } from \"./validation/attribute_together_regex_validation_constraint\";\r\nimport { UniqueTogetherConstraint } from \"./validation/unique_together_constraint\";\r\nimport { AttributeHasPreviousValueConstraint } from \"./validation/attribute_has_previous_value_constraint\";\r\nimport { HasFileConstraint } from \"./validation/has_file_constraint\";\r\nimport { HasApprovalConstraint } from \"./validation/has_approval_constraint\";\r\nimport { SingleUnionConstraint } from \"./validation/single_union_constraint\";\r\nimport { FilenameMatchPatternConstraint } from \"./validation/filename_match_pattern_constraint\";\r\n\r\nimport { DocumentAttributesContext } from \"./form/context/document_attributes_context\";\r\nimport { PreviousDocumentsAttributeContext } from \"./form/context/previous_documents_attribute_context\";\r\nimport { UsersEmailsContext } from \"./form/context/users_emails_context\";\r\n\r\nimport { FormDateInput } from \"./form/field/form_date_input\";\r\nimport { FormEmailToAddressField } from \"./form/field/form_email_to_address_field\";\r\nimport { FormEmailToAddressInput } from \"./form/field/form_email_to_address_input\";\r\nimport { FormHtmlField } from \"./form/field/form_html_field\";\r\nimport { FormHtmlInput } from \"./form/field/form_html_input\";\r\nimport { FormTextField } from \"./form/field/form_text_field\";\r\nimport { FormTextInput } from \"./form/field/form_text_input\";\r\nimport { FormHiddenInput } from \"./form/field/form_hidden_input\";\r\nimport { FormSelectInput } from \"./form/field/form_select_input\";\r\nimport { FormFilteredSelectInput } from \"./form/field/form_filtered_select_input\";\r\n\r\nconst FormFields = {\r\n  type: \"array\",\r\n  items: {\r\n    oneOf: [\r\n      FormDateInput,\r\n      FormEmailToAddressField,\r\n      FormEmailToAddressInput,\r\n      FormHtmlField,\r\n      FormHtmlInput,\r\n      FormTextField,\r\n      FormTextInput,\r\n      FormHiddenInput,\r\n      FormSelectInput,\r\n      FormFilteredSelectInput,\r\n    ],\r\n  },\r\n};\r\n\r\nconst FolderSettings = {\r\n  type: \"object\",\r\n  properties: {\r\n    version: { type: \"string\" },\r\n    validation_constraints: {\r\n      type: \"array\",\r\n      items: {\r\n        oneOf: [\r\n          AttributeRegexValidationConstraint,\r\n          AttributeTogetherRegexValidationConstraint,\r\n          UniqueTogetherConstraint,\r\n          AttributeHasPreviousValueConstraint,\r\n          HasFileConstraint,\r\n          HasApprovalConstraint,\r\n          SingleUnionConstraint,\r\n          FilenameMatchPatternConstraint,\r\n        ],\r\n      },\r\n    },\r\n    search_schema: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          name: { type: \"string\" },\r\n          description: { type: \"string\" },\r\n          size: {\r\n            enum: [\r\n              \"w50\",\r\n              \"w100\",\r\n              \"w150\",\r\n              \"w200\",\r\n              \"w250\",\r\n              \"w300\",\r\n              \"w350\",\r\n              \"w400\",\r\n            ],\r\n          },\r\n          grow: { type: \"boolean\" },\r\n          align: { enum: [\"left\", \"center\", \"right\"] },\r\n          default: { type: [\"string\", \"integer\"] },\r\n          is_disabled: { type: \"boolean\" },\r\n          sort_rule: {\r\n            enum: [\"DEFAULT\", \"INTEGER\", \"STRING\", \"CHANGE_ORDER_NUMBER\"],\r\n          },\r\n          fields: {\r\n            type: \"array\",\r\n            items: {\r\n              type: \"object\",\r\n              properties: {\r\n                placeholder: { type: \"string\" },\r\n                rule: {\r\n                  enum: [\r\n                    \"exact\",\r\n                    \"iexact\",\r\n                    \"contains\",\r\n                    \"icontains\",\r\n                    \"gt\",\r\n                    \"gte\",\r\n                    \"lt\",\r\n                    \"lte\",\r\n                  ],\r\n                },\r\n                re: { type: \"string\" },\r\n                converter: { type: \"string\" },\r\n              },\r\n              required: [\"placeholder\", \"rule\"],\r\n              additionalProperties: false,\r\n            },\r\n          },\r\n        },\r\n        required: [\"name\", \"fields\", \"description\"],\r\n        additionalProperties: false,\r\n      },\r\n    },\r\n    form_schema: {\r\n      type: \"object\",\r\n      properties: {\r\n        context: {\r\n          type: \"array\",\r\n          items: {\r\n            oneOf: [\r\n              DocumentAttributesContext,\r\n              PreviousDocumentsAttributeContext,\r\n              UsersEmailsContext,\r\n            ],\r\n          },\r\n        },\r\n        pages: {\r\n          type: \"array\",\r\n          items: {\r\n            type: \"object\",\r\n            properties: {\r\n              size: { type: \"integer\" },\r\n              name: { type: \"string\" },\r\n              fields: {\r\n                type: \"object\",\r\n                properties: {\r\n                  read_mode: FormFields,\r\n                  edit_mode: FormFields,\r\n                },\r\n                additionalProperties: false,\r\n              },\r\n            },\r\n            required: [\"fields\"],\r\n            additionalProperties: false,\r\n          },\r\n        },\r\n      },\r\n      required: [\"pages\"],\r\n      additionalProperties: false,\r\n    },\r\n    max_file_size: { type: \"integer\" },\r\n    filename_pattern: { type: \"string\" },\r\n    description_pattern: { type: \"string\" },\r\n    is_empty_search_allowed: { type: \"boolean\" },\r\n    sort_by: {\r\n      type: \"object\",\r\n      properties: { name: { type: \"string\" }, asc: { type: \"boolean\" } },\r\n      required: [\"name\", \"asc\"],\r\n      additionalProperties: false,\r\n    },\r\n    group_by: {\r\n      type: \"object\",\r\n      properties: {\r\n        button_active_name: { type: \"string\" },\r\n        button_passive_name: { type: \"string\" },\r\n        fields: { type: \"array\", items: { type: \"string\" } },\r\n        order_by: { type: \"string\" },\r\n        aggregate_function: { enum: [\"MAX\"] },\r\n        is_active: { type: \"boolean\" },\r\n      },\r\n      required: [\r\n        \"button_active_name\",\r\n        \"button_passive_name\",\r\n        \"fields\",\r\n        \"order_by\",\r\n        \"aggregate_function\",\r\n      ],\r\n      additionalProperties: false,\r\n    },\r\n\r\n    is_list_container_required: { type: \"boolean\" },\r\n    is_doc_container_required: { type: \"boolean\" },\r\n    doc_container_parsers: {\r\n      type: \"array\",\r\n      items: { enum: [\"1868_amm_transmittal\", \"1882_dlenc_transmittal\"] },\r\n    },\r\n    action_buttons: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        required: [\"caption\", \"action\"],\r\n        additionalProperties: false,\r\n        properties: {\r\n          caption: { type: \"string\" },\r\n          action: { type: \"string\" },\r\n          type: {\r\n            enum: [\"primary\", \"secondary\", \"success\", \"warning\", \"danger\"],\r\n          },\r\n          allowed_usernames: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n          },\r\n          required_approvals: {\r\n            type: \"object\",\r\n            additionalProperties: false,\r\n            properties: {\r\n              all: {\r\n                type: \"array\",\r\n                items: { type: \"string\" },\r\n              },\r\n              anyOf: {\r\n                type: \"array\",\r\n                items: { type: \"string\" },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    search_action_buttons: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        required: [\"caption\", \"handler\"],\r\n        additionalProperties: false,\r\n        properties: {\r\n          caption: { type: \"string\" },\r\n          handler: { enum: [\"1882_dlenc_transmittal\"] },\r\n          allowed_usernames: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n          },\r\n        },\r\n      },\r\n    },\r\n    approval_rules: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        filename: {\r\n          type: \"object\",\r\n          properties: {\r\n            pattern: { type: \"string\" },\r\n            case_insensitive: { type: \"boolean\" },\r\n          },\r\n          required: [\"pattern\"],\r\n          additionalProperties: false,\r\n        },\r\n        can_approve: {\r\n          type: \"array\",\r\n          items: { type: \"string\" },\r\n        },\r\n        can_reject: {\r\n          type: \"array\",\r\n          items: { type: \"string\" },\r\n        },\r\n        can_delegate_with_return: {\r\n          type: \"array\",\r\n          items: { type: \"string\" },\r\n        },\r\n        can_delegate_without_return: {\r\n          type: \"array\",\r\n          items: { type: \"string\" },\r\n        },\r\n      },\r\n    },\r\n    mode: { enum: [\"view\", \"edit\"] },\r\n    strict_validation: { type: \"array\", items: { type: \"string\" } },\r\n  },\r\n  required: [\r\n    \"validation_constraints\",\r\n    \"search_schema\",\r\n    \"max_file_size\",\r\n    \"filename_pattern\",\r\n    \"description_pattern\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { FolderSettings };\r\n","import { FolderSettings } from \"./folder/folder_settings\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"number\",\r\n    },\r\n    name: {\r\n      type: \"string\",\r\n    },\r\n    storage_path: {\r\n      type: \"string\",\r\n    },\r\n    master_usergroup_slug: {\r\n      type: \"string\",\r\n    },\r\n    access_group: {\r\n      type: \"string\",\r\n    },\r\n    settings: FolderSettings,\r\n  },\r\n  required: [\"id\", \"name\", \"storage_path\", \"master_usergroup_slug\", \"access_group\", \"settings\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: {\r\n      type: \"string\",\r\n      enum: [\r\n        \"can_get_folders\",\r\n        \"can_view_settings\",\r\n        \"can_view_folder\",\r\n        \"can_add_folder\",\r\n        \"can_change_folder\",\r\n        \"can_delete_folder\",\r\n        \"can_view_user\",\r\n        \"can_change_user\",\r\n        \"can_delete_user\",\r\n        \"can_view_role\",\r\n        \"can_view_permission\",\r\n        \"can_change_permission\",\r\n        \"can_add_role\",\r\n        \"can_change_role\",\r\n        \"can_delete_role\",\r\n        \"can_view_document\",\r\n        \"can_add_document\",\r\n        \"can_change_document\",\r\n        \"can_delete_document\",\r\n        \"can_view_file\",\r\n        \"can_add_file\",\r\n        \"can_change_file\",\r\n        \"can_delete_file\",\r\n        \"can_view_userfoldersetting\",\r\n        \"can_add_userfoldersetting\",\r\n        \"can_change_userfoldersetting\",\r\n        \"can_delete_userfoldersetting\",\r\n        \"can_view_usergroup\",\r\n        \"can_add_usergroup\",\r\n        \"can_change_usergroup\",\r\n        \"can_delete_usergroup\",\r\n        \"can_view_service\",\r\n        \"can_view_flow\",\r\n        \"can_add_flow\",\r\n        \"can_change_flow\",\r\n        \"can_delete_flow\",\r\n        \"can_view_flowitem\",\r\n        \"can_add_flowitem\",\r\n        \"can_change_flowitem\",\r\n        \"can_delete_flowitem\",\r\n        \"can_view_flowitemstep\",\r\n        \"can_view_documentapproval\",\r\n        \"can_add_documentapproval\",\r\n        \"can_change_documentapproval\",\r\n        \"can_delete_documentapproval\",\r\n        \"can_delegate_documentapproval\",\r\n        \"can_search_documentapproval\",\r\n        \"can_empty_cart\",\r\n        \"can_view_cart\",\r\n        \"can_add_to_cart\",\r\n        \"can_remove_from_cart\",\r\n        \"can_view_userreplacement\",\r\n        \"can_add_userreplacement\",\r\n        \"can_delete_userreplacement\",\r\n        \"can_view_onbehalfuser\",\r\n        \"can_change_onbehalfuser\",\r\n        \"can_delete_onbehalfuser\",\r\n        \"can_view_documentapprovalflow\",\r\n        \"can_change_documentapprovalflow\",\r\n        \"can_delete_documentapprovalflow\",\r\n        \"can_view_serversetting\",\r\n        \"can_change_serversetting\",\r\n        \"can_view_mailbox\",\r\n        \"can_add_mailbox\",\r\n        \"can_change_mailbox\",\r\n        \"can_delete_mailbox\",\r\n        \"can_view_mailchannel\",\r\n        \"can_add_mailchannel\",\r\n        \"can_change_mailchannel\",\r\n        \"can_delete_mailchannel\",\r\n        \"can_fetch_mailchannel\",\r\n        \"can_view_mail\",\r\n        \"can_delete_mail\",\r\n        \"can_view_counter\",\r\n        \"can_add_counter\",\r\n        \"can_change_counter\",\r\n        \"can_delete_counter\",\r\n        \"can_fetch_counter\",\r\n        \"can_view_xmldocument\",\r\n        \"can_add_xmldocument\",\r\n        \"can_change_xmldocument\",\r\n        \"can_delete_xmldocument\",\r\n        \"can_view_alluserreplacement\",\r\n        \"can_add_alluserreplacement\",\r\n        \"can_delete_alluserreplacement\",\r\n        \"can_view_transmittal\"\r\n      ],\r\n    },\r\n    is_for_folder: {\r\n      type: \"boolean\",\r\n    },\r\n  },\r\n  required: [\"name\", \"is_for_folder\"],\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { Single as PermissionSingle } from \"./permission\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"number\",\r\n    },\r\n    name: {\r\n      type: \"string\",\r\n    },\r\n    permissions: {\r\n      type: \"array\",\r\n      items: PermissionSingle\r\n    },\r\n  },\r\n  required: [\"id\", \"name\", \"permissions\"],\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const Single = {\r\n  type: [\r\n    \"array\",\r\n     \"null\"\r\n  ],\r\n};\r\n\r\nexport { Single };\r\n","import { Single as SearchSchemaSingle } from \"./search_schema\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"integer\",\r\n    },\r\n    user: {\r\n      type: \"string\",\r\n    },\r\n    folder: {\r\n      type: \"integer\",\r\n    },\r\n    usergroup: {\r\n      type: \"string\",\r\n    },\r\n    role: {\r\n      type: [\"string\", \"null\"],\r\n    },\r\n    search_schema: SearchSchemaSingle,\r\n  },\r\n  required: [\"id\", \"user\", \"folder\", \"usergroup\", \"role\", \"search_schema\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"string\",\r\n    },\r\n    name: {\r\n      type: \"string\",\r\n    },\r\n    size: {\r\n      type: \"number\",\r\n    },\r\n  },\r\n  required: [\"id\", \"name\", \"size\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };","import { List as FileList } from \"./file\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"string\",\r\n    },\r\n    union: { type: [\"null\", \"string\"] },\r\n    folder_id: { type: \"integer\" },\r\n    usergroup_id: { type: \"integer\" },\r\n    user_id: { type: [\"null\", \"integer\"] },\r\n    data: {\r\n      type: \"object\",\r\n      patternProperties: {\r\n        \"^[a-zA-Z0-9_]+$\": {\r\n          type: [\"string\", \"number\", \"boolean\", \"object\", \"array\"],\r\n        },\r\n      },\r\n    },\r\n    description: {\r\n      type: \"string\",\r\n    },\r\n    files: FileList,\r\n    is_blocked: {\r\n      type: \"boolean\",\r\n    },\r\n    created_at: {\r\n      type: \"string\",\r\n    },\r\n    updated_at: {\r\n      type: \"string\",\r\n    },\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"union\",\r\n    \"folder_id\",\r\n    \"usergroup_id\",\r\n    \"user_id\",\r\n    \"data\",\r\n    \"description\",\r\n    \"files\",\r\n    \"is_blocked\",\r\n    \"created_at\",\r\n    \"updated_at\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { Single as FileSingle } from \"./file\";\r\nimport { Single as UserSingle } from \"./user\";\r\nimport { Single as DocumentSingle } from \"./document\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"integer\",\r\n    },\r\n    user: UserSingle,\r\n    created_by: UserSingle,\r\n    delegated_from: {\r\n      type: [\"null\", \"integer\"],\r\n    },\r\n    state: {\r\n      enum: [\"APPROVED\", \"REJECTED\", \"DELEGATED\", \"NONE\"],\r\n    },\r\n    created_at: {\r\n      type: \"string\",\r\n    },\r\n    updated_at: {\r\n      type: \"string\",\r\n    },\r\n    files: {\r\n      type: \"array\",\r\n      items: FileSingle,\r\n    },\r\n    document: DocumentSingle,\r\n    active_approvals_count_of_document: {\r\n      type: \"integer\",\r\n    },\r\n  },\r\n  required: [\"id\", \"user\", \"state\", \"created_at\", \"updated_at\", \"files\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nconst SearchList = {\r\n  type: \"object\",\r\n  required: [\"approvals\", \"count\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    approvals: List,\r\n    count: { type: \"integer\" },\r\n  },\r\n};\r\n\r\nexport { Single, List, SearchList };\r\n","import { Single as UserSingle } from \"./user\";\r\n\r\nconst Single = {\r\n  oneOf: [\r\n    { type: \"null\" },\r\n    {\r\n      type: \"object\",\r\n      properties: {\r\n        id: {\r\n          type: \"integer\",\r\n        },\r\n        created_by: UserSingle,\r\n        started_by: UserSingle,\r\n        finished_by: UserSingle,\r\n        is_active: {\r\n          type: \"boolean\",\r\n        },\r\n        success: {\r\n          type: \"boolean\",\r\n        },\r\n        steps: {\r\n          type: \"array\",\r\n          items: { type: \"array\", items: { type: \"string\" } },\r\n        },\r\n        created_at: {\r\n          type: \"string\",\r\n        },\r\n        updated_at: {\r\n          type: \"string\",\r\n        },\r\n      },\r\n      required: [\r\n        \"id\",\r\n        \"created_by\",\r\n        \"started_by\",\r\n        \"finished_by\",\r\n        \"is_active\",\r\n        \"success\",\r\n        \"steps\",\r\n        \"created_at\",\r\n        \"updated_at\",\r\n      ],\r\n      additionalProperties: false,\r\n    },\r\n  ],\r\n};\r\n\r\nexport { Single };\r\n","import { Single as FileSingle } from \"./file\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"string\",\r\n    },\r\n    order: {\r\n      type: \"integer\",\r\n    },\r\n    page_count: {\r\n      type: \"integer\",\r\n    },\r\n    page_from: {\r\n      type: \"integer\",\r\n    },\r\n    page_to: {\r\n      type: \"integer\",\r\n    },\r\n    angle: {\r\n      type: \"integer\",\r\n    },\r\n    file: FileSingle,\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"order\",\r\n    \"page_count\",\r\n    \"page_from\",\r\n    \"page_to\",\r\n    \"angle\",\r\n    \"file\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { Single as UserSingle } from \"./user\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"integer\",\r\n    },\r\n    name: {\r\n      type: \"string\",\r\n    },\r\n    slug: {\r\n      type: \"string\",\r\n    },\r\n    is_private: {\r\n      type: \"boolean\",\r\n    },\r\n    users: {\r\n      type: \"array\",\r\n      items: UserSingle,\r\n    },\r\n  },\r\n  required: [\"id\", \"name\", \"slug\", \"is_private\", \"users\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };","const FinishedBeforeItem = {\r\n  type: \"object\",\r\n  required: [\"name\", \"success\", \"result_key\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { type: \"string\" },\r\n    success: { type: \"boolean\" },\r\n    result_key: { type: \"string\" },\r\n  },\r\n};\r\n\r\nexport { FinishedBeforeItem };\r\n","const DivisionByZeroAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"DIVISION_BY_ZERO\" },\r\n    input: { const: {} },\r\n  },\r\n};\r\n\r\nexport { DivisionByZeroAction };\r\n","const IfAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"IF\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"condition\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        condition: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { IfAction };\r\n","const CreateVariableAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"CREATE_VARIABLE\" },\r\n    input: { type: \"object\" },\r\n  },\r\n};\r\n\r\nexport { CreateVariableAction };\r\n","const SendEmailAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"subject\", \"combination_pattern\", \"body\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        subject: { type: \"string\" },\r\n        combination_pattern: { type: \"string\" },\r\n        body: { type: \"string\" },\r\n        html_body: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailAction };\r\n","const SendEmailUserCreatedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_USER_CREATED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"username\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        username: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailUserCreatedAction };\r\n","const SendEmailDocumentCreatedOrUpdatedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_CREATED_OR_UPDATED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"subject\", \"combination_pattern\", \"doc_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        subject: { type: \"string\" },\r\n        combination_pattern: { type: \"string\" },\r\n        doc_id: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentCreatedOrUpdatedAction };\r\n","const SendEmailDocumentApprovalCreatedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_APPROVAL_CREATED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"approval_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        approval_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentApprovalCreatedAction };\r\n","const SendEmailDocumentApprovalUpdatedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_APPROVAL_UPDATED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"approval_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        approval_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentApprovalUpdatedAction };\r\n","const SendEmailDocumentApprovalDeletedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_APPROVAL_DELETED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"approval_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        approval_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentApprovalDeletedAction };\r\n","const SendEmailDocumentApprovalFlowStartedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_APPROVAL_FLOW_STARTED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"approval_flow_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        approval_flow_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentApprovalFlowStartedAction };\r\n","const SendEmailDocumentApprovalFlowStoppedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_APPROVAL_FLOW_STOPPED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"approval_flow_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        approval_flow_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentApprovalFlowStoppedAction };\r\n","const SendEmailDocumentApprovalFlowExecutedAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_APPROVAL_FLOW_EXECUTED\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"approval_flow_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        approval_flow_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentApprovalFlowExecutedAction };\r\n","const SendEmailDocumentCreatedFromMailMessageAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_EMAIL_DOCUMENT_CREATED_FROM_MAIL_MESSAGE\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"address_to\", \"success\", \"doc_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        address_to: { type: \"string\" },\r\n        success: { type: [\"boolean\", \"string\"] },\r\n        doc_id: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendEmailDocumentCreatedFromMailMessageAction };\r\n","const DispatchEmailsAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"DISPATCH_EMAILS\" },\r\n    input: { const: {} },\r\n  },\r\n};\r\n\r\nexport { DispatchEmailsAction };\r\n","const GetUserByIdAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_USER_BY_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"user_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        user_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetUserByIdAction };\r\n","const GetUserByUsernameAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_USER_BY_USERNAME\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"username\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetUserByUsernameAction };\r\n","const GetUsergroupByIdAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_USERGROUP_BY_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"usergroup_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        usergroup_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetUsergroupByIdAction };\r\n","const GetFolderByIdAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_FOLDER_BY_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"folder_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        folder_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetFolderByIdAction };\r\n","const GetDocumentByIdAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_DOCUMENT_BY_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"doc_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        doc_id: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetDocumentByIdAction };\r\n","const GetDocumentByApprovalAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_DOCUMENT_BY_APPROVAL_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"approval_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        approval_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetDocumentByApprovalAction };\r\n","const UpdateDocumentAttributesAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"UPDATE_DOCUMENT_ATTRIBUTES\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"doc_id\", \"attributes\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        doc_id: { type: \"string\" },\r\n        attributes: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { UpdateDocumentAttributesAction };\r\n","const UpdateDocumentFilesAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"UPDATE_DOCUMENT_FILES\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"doc_id\", \"file_ids\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        doc_id: { type: \"string\" },\r\n        file_ids: {\r\n          oneOf: [\r\n            { type: \"string\" },\r\n            {\r\n              type: \"array\",\r\n              items: {\r\n                type: \"string\",\r\n              },\r\n            },\r\n          ],\r\n        },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { UpdateDocumentFilesAction };\r\n","const GetMailBoxByIdAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_MAILBOX_BY_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"mailbox_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        mailbox_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetMailBoxByIdAction };\r\n","const GetMailChannelByIdAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"GET_MAILCHANNEL_BY_ID\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"mailchannel_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        mailchannel_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { GetMailChannelByIdAction };\r\n","const FetchMailMessagesAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"FETCH_MAIL_MESSAGES\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"mailbox_id\", \"mailchannel_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        mailchannel_id: { type: [\"integer\", \"string\"] },\r\n        mailbox_id: { type: [\"integer\", \"string\"] }\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { FetchMailMessagesAction };\r\n","const SendMailMessageAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"SEND_MAIL_MESSAGE\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\r\n        \"mailbox_id\",\r\n        \"address_to\",\r\n        \"address_cc\",\r\n        \"address_bcc\",\r\n        \"subject\",\r\n        \"text_body\",\r\n        \"html_body\",\r\n        \"files\",\r\n        \"save_storage_path\",\r\n        \"save_filename\"\r\n      ],\r\n      additionalProperties: false,\r\n      properties: {\r\n        mailbox_id: { type: [\"integer\", \"string\"] },\r\n        address_to: { type: \"string\" },\r\n        address_cc: { type: \"string\" },\r\n        address_bcc: { type: \"string\" },\r\n        subject: { type: \"string\" },\r\n        text_body: { type: \"string\" },\r\n        html_body: { type: \"string\" },\r\n        files: {\r\n          oneOf: [\r\n            { type: \"string\" },\r\n            {\r\n              type: \"object\",\r\n              required: [\"id\", \"name\", \"storage_path\"],\r\n              properties: {\r\n                id: { type: \"string\" },\r\n                name: { type: \"string\" },\r\n                storage_path: { type: \"string\" },\r\n              },\r\n              additionalProperties: false,\r\n            },\r\n          ],\r\n        },\r\n        save_storage_path: { type: \"string\" },\r\n        save_filename: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { SendMailMessageAction };\r\n","const FetchMailChannelAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"FETCH_MAIL_CHANNEL\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"mailchannel_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        mailchannel_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { FetchMailChannelAction };\r\n","const FetchAllMailChannelsAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"FETCH_ALL_MAIL_CHANNELS\" },\r\n    input: { const: {} },\r\n  },\r\n};\r\n\r\nexport { FetchAllMailChannelsAction };\r\n","const CreateDocumentFromMailMessageAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"CREATE_DOCUMENT_FROM_MAIL_MESSAGE\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"mail_id\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        mail_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { CreateDocumentFromMailMessageAction };\r\n","const ExtractHtmlPortionAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"EXTRACT_HTML_PORTION\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"html\", \"tag\", \"attributes\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        html: { type: \"string\" },\r\n        tag: { type: \"string\" },\r\n        attributes: { oneOf: [{ type: \"string\" }, { type: \"object\" }] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { ExtractHtmlPortionAction };\r\n","const FetchCounter = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"FETCH_COUNTER_BY_NAME\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"counter_name\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        counter_name: { type: \"string\" },\r\n        key: { type: \"string\" },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { FetchCounter };\r\n","const ConfirmCounter = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"CONFIRM_COUNTER_BY_NAME\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\"counter_name\", \"key\", \"value\"],\r\n      additionalProperties: false,\r\n      properties: {\r\n        counter_name: { type: \"string\" },\r\n        key: { type: \"string\" },\r\n        \"value\": { \"type\": [\"string\", \"integer\"] }\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { ConfirmCounter };\r\n","const CopyDocumentToUsergroupAction = {\r\n  $schema: \"http://json-schema.org/draft-07/schema#\",\r\n  type: \"object\",\r\n  required: [\"name\", \"input\"],\r\n  additionalProperties: false,\r\n  properties: {\r\n    name: { const: \"COPY_DOCUMENT_TO_USERGROUP\" },\r\n    input: {\r\n      type: \"object\",\r\n      required: [\r\n        \"user_id\",\r\n        \"folder_id\",\r\n        \"source_usergroup_id\",\r\n        \"target_usergroup_id\",\r\n        \"doc_id\",\r\n      ],\r\n      additionalProperties: false,\r\n      properties: {\r\n        user_id: { type: [\"integer\", \"string\"] },\r\n        folder_id: { type: [\"integer\", \"string\"] },\r\n        source_usergroup_id: { type: [\"integer\", \"string\"] },\r\n        target_usergroup_id: { type: [\"integer\", \"string\"] },\r\n        doc_id: { type: [\"integer\", \"string\"] },\r\n      },\r\n    },\r\n  },\r\n};\r\n\r\nexport { CopyDocumentToUsergroupAction };\r\n","import { FinishedBeforeItem } from \"./finished_before_item\";\r\nimport { DivisionByZeroAction } from \"./actions/division_by_zero_action\";\r\nimport { IfAction } from \"./actions/if_action\";\r\nimport { CreateVariableAction } from \"./actions/create_variable_action\";\r\nimport { SendEmailAction } from \"./actions/send_email_action\";\r\nimport { SendEmailUserCreatedAction } from \"./actions/send_email_user_created_action\";\r\nimport { SendEmailDocumentCreatedOrUpdatedAction } from \"./actions/send_email_document_created_or_updated_action\";\r\nimport { SendEmailDocumentApprovalCreatedAction } from \"./actions/send_email_document_approval_created_action\";\r\nimport { SendEmailDocumentApprovalUpdatedAction } from \"./actions/send_email_document_approval_updated_action\";\r\nimport { SendEmailDocumentApprovalDeletedAction } from \"./actions/send_email_document_approval_deleted_action\";\r\nimport { SendEmailDocumentApprovalFlowStartedAction } from \"./actions/send_email_document_approval_flow_started_action\";\r\nimport { SendEmailDocumentApprovalFlowStoppedAction } from \"./actions/send_email_document_approval_flow_stopped_action\";\r\nimport { SendEmailDocumentApprovalFlowExecutedAction } from \"./actions/send_email_document_approval_flow_executed_action\";\r\nimport { SendEmailDocumentCreatedFromMailMessageAction } from \"./actions/send_email_document_created_from_mail_message_action\";\r\nimport { DispatchEmailsAction } from \"./actions/dispatch_emails_action\";\r\nimport { GetUserByIdAction } from \"./actions/get_user_by_id_action\";\r\nimport { GetUserByUsernameAction } from \"./actions/get_user_by_username_action\";\r\nimport { GetUsergroupByIdAction } from \"./actions/get_usergroup_by_id_action\";\r\nimport { GetFolderByIdAction } from \"./actions/get_folder_by_id_action\";\r\nimport { GetDocumentByIdAction } from \"./actions/get_document_by_id_action\";\r\nimport { GetDocumentByApprovalAction } from \"./actions/get_document_by_approval_action\";\r\nimport { UpdateDocumentAttributesAction } from \"./actions/update_document_attributes_action\";\r\nimport { UpdateDocumentFilesAction } from \"./actions/update_document_files_action\";\r\nimport { GetMailBoxByIdAction } from \"./actions/get_mailbox_by_id_action\";\r\nimport { GetMailChannelByIdAction } from \"./actions/get_mailchannel_by_id_action\";\r\n// import { FetchMailMessageAction } from \"./actions/fetch_mail_message_action\";\r\nimport { FetchMailMessagesAction } from \"./actions/fetch_mail_messages_action\";\r\nimport { SendMailMessageAction } from \"./actions/send_mail_message_action\";\r\nimport { FetchMailChannelAction } from \"./actions/fetch_mail_channel_action\";\r\nimport { FetchAllMailChannelsAction } from \"./actions/fetch_all_mail_channels_action\";\r\nimport { CreateDocumentFromMailMessageAction } from \"./actions/create_document_from_mail_message_action\";\r\nimport { ExtractHtmlPortionAction } from \"./actions/extract_html_portion_action\";\r\nimport { FetchCounter } from \"./actions/fetch_counter\";\r\nimport { ConfirmCounter } from \"./actions/confirm_counter\";\r\nimport { CopyDocumentToUsergroupAction } from \"./actions/copy_document_to_usergroup_action\";\r\n\r\nconst FlowProcess001 = {\r\n  type: \"object\",\r\n  properties: {\r\n    version: {\r\n      type: \"integer\",\r\n      minimum: 1,\r\n      maximum: 1,\r\n    },\r\n    start_condition: { type: \"string\" },\r\n    steps: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        required: [\"name\", \"description\", \"action\"],\r\n        properties: {\r\n          name: {\r\n            type: \"string\",\r\n            not: { enum: [\"input\"] },\r\n          },\r\n          variable_name: {\r\n            type: \"string\",\r\n            not: { enum: [\"input\"] },\r\n          },\r\n          description: { type: \"string\" },\r\n\r\n          to_be_finished_before: {\r\n            type: \"array\",\r\n            items: FinishedBeforeItem,\r\n          },\r\n\r\n          at_least_one_to_be_finished_before: {\r\n            type: \"array\",\r\n            items: FinishedBeforeItem,\r\n          },\r\n\r\n          action: {\r\n            oneOf: [\r\n              DivisionByZeroAction,\r\n              IfAction,\r\n              CreateVariableAction,\r\n              SendEmailAction,\r\n              SendEmailUserCreatedAction,\r\n              SendEmailDocumentCreatedOrUpdatedAction,\r\n              SendEmailDocumentApprovalCreatedAction,\r\n              SendEmailDocumentApprovalUpdatedAction,\r\n              SendEmailDocumentApprovalDeletedAction,\r\n              SendEmailDocumentApprovalFlowStartedAction,\r\n              SendEmailDocumentApprovalFlowStoppedAction,\r\n              SendEmailDocumentApprovalFlowExecutedAction,\r\n              SendEmailDocumentCreatedFromMailMessageAction,\r\n              DispatchEmailsAction,\r\n              GetUserByIdAction,\r\n              GetUserByUsernameAction,\r\n              GetUsergroupByIdAction,\r\n              GetFolderByIdAction,\r\n              GetDocumentByIdAction,\r\n              GetDocumentByApprovalAction,\r\n              UpdateDocumentAttributesAction,\r\n              UpdateDocumentFilesAction,\r\n              GetMailBoxByIdAction,\r\n              GetMailChannelByIdAction,\r\n              // FetchMailMessageAction,\r\n              FetchMailMessagesAction,\r\n              SendMailMessageAction,\r\n              FetchMailChannelAction,\r\n              FetchAllMailChannelsAction,\r\n              CreateDocumentFromMailMessageAction,\r\n              ExtractHtmlPortionAction,\r\n              FetchCounter,\r\n              ConfirmCounter,\r\n              CopyDocumentToUsergroupAction,\r\n            ],\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n  required: [\"version\", \"steps\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { FlowProcess001 };\r\n","import { FlowProcess001 } from \"./flow_process_001\";\r\n\r\nconst FlowProcess = {\r\n  oneOf: [FlowProcess001],\r\n};\r\n\r\nexport { FlowProcess };\r\n","import { FlowProcess } from \"./flow_process/flow_process\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"integer\",\r\n    },\r\n    name: {\r\n      type: \"string\",\r\n    },\r\n    user: {\r\n      type: \"string\",\r\n    },\r\n    trigger: {\r\n      type: \"string\",\r\n    },\r\n    is_multiple: {\r\n      type: \"boolean\",\r\n    },\r\n    is_active: {\r\n      type: \"boolean\",\r\n    },\r\n    process: FlowProcess,\r\n    message_if_fail: {type: \"boolean\"},\r\n    created_at: {\r\n      type: \"string\",\r\n    },\r\n    updated_at: {\r\n      type: \"string\",\r\n    },\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"name\",\r\n    \"user\",\r\n    \"trigger\",\r\n    \"is_multiple\",\r\n    \"is_active\",\r\n    \"process\",\r\n    \"message_if_fail\",\r\n    \"created_at\",\r\n    \"updated_at\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { Single as FlowSingle } from \"./flow\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"integer\",\r\n    },\r\n    flow: FlowSingle,\r\n    success: {\r\n      type: \"boolean\",\r\n    },\r\n    is_active: {\r\n      type: \"boolean\",\r\n    },\r\n    input: { type: \"object\" },\r\n    process: { type: \"object\" },\r\n    message_if_fail: {type: \"boolean\"},\r\n    started_at: {\r\n      type: \"string\",\r\n    },\r\n    finished_at: {\r\n      type: [\"null\", \"string\"],\r\n    },\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"flow\",\r\n    \"success\",\r\n    \"is_active\",\r\n    \"input\",\r\n    \"process\",\r\n    \"message_if_fail\",\r\n    \"started_at\",\r\n    \"finished_at\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: { type: \"integer\" },\r\n    name: { type: \"string\" },\r\n    description: { type: \"string\" },\r\n    flowitem_id: { type: \"integer\" },\r\n    success: { type: \"boolean\" },\r\n    result_key: { type: \"string\" },\r\n    action: { type: \"string\" },\r\n    input: { type: \"object\" },\r\n    output: { type: [\"string\", \"object\"] },\r\n    started_at: {\r\n      type: \"string\",\r\n    },\r\n    finished_at: {\r\n      type: [\"null\", \"string\"],\r\n    },\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"name\",\r\n    \"description\",\r\n    \"flowitem_id\",\r\n    \"success\",\r\n    \"result_key\",\r\n    \"action\",\r\n    \"input\",\r\n    \"output\",\r\n    \"started_at\",\r\n    \"finished_at\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: {\r\n      type: \"integer\",\r\n    },\r\n    name: {\r\n      type: \"string\",\r\n    },\r\n    value: {\r\n      type: \"string\",\r\n    },\r\n  },\r\n  required: [\"id\", \"name\", \"value\"],\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const CheckMandatoryAttributeProcessor = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"CHECK_MANDATORY\"] },\r\n  },\r\n  required: [\"name\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { CheckMandatoryAttributeProcessor };\r\n","const DatetimeToTimestampAttributeProcessor = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"DATETIME_TO_TIMESTAMP\"] },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        format: { type: \"string\" },\r\n      },\r\n      required: [\"format\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { DatetimeToTimestampAttributeProcessor };\r\n","const SetIfNoneAttributeProcessor = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"SET_IF_NONE\"] },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        value: { type: [\"integer\", \"string\"] },\r\n      },\r\n      required: [\"value\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { SetIfNoneAttributeProcessor };\r\n","import { CheckMandatoryAttributeProcessor } from \"./attribute_processors/check_mandatory_attribute_processor\";\r\nimport { DatetimeToTimestampAttributeProcessor } from \"./attribute_processors/datetime_to_timestamp_attribute_processor\";\r\nimport { SetIfNoneAttributeProcessor } from \"./attribute_processors/set_if_none_attribute_processor\";\r\n\r\nconst SimpleParser = {\r\n  type: \"object\",\r\n  properties: {\r\n    name: { enum: [\"SIMPLE\"] },\r\n    parameters: {\r\n      type: \"object\",\r\n      properties: {\r\n        subject: {\r\n          type: \"object\",\r\n          properties: {\r\n            regex: { type: \"array\", items: { type: \"string\" } },\r\n            flags: { type: \"string\" },\r\n            row_count: { type: \"integer\", minimum: 1 },\r\n          },\r\n          required: [\"regex\"],\r\n          additionalProperties: false,\r\n        },\r\n        body: {\r\n          type: \"object\",\r\n          properties: {\r\n            regex: { type: \"array\", items: { type: \"string\" } },\r\n            flags: { type: \"string\" },\r\n            row_count: { type: \"integer\", minimum: 1 },\r\n          },\r\n          required: [\"regex\"],\r\n          additionalProperties: false,\r\n        },\r\n        post_processors: {\r\n          type: \"array\",\r\n          items: {\r\n            type: \"object\",\r\n            properties: {\r\n              attribute: { type: \"string\" },\r\n              processor: {\r\n                oneOf: [\r\n                  DatetimeToTimestampAttributeProcessor,\r\n                  SetIfNoneAttributeProcessor,\r\n                  CheckMandatoryAttributeProcessor,\r\n                ],\r\n              },\r\n            },\r\n            required: [\"attribute\", \"processor\"],\r\n            additionalProperties: false,\r\n          },\r\n        },\r\n      },\r\n      required: [\"subject\", \"body\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"name\", \"parameters\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { SimpleParser };\r\n","import { SimpleParser } from \"./parser/simple_parser\";\r\n\r\nconst MailChannelSettings = {\r\n  type: \"object\",\r\n  properties: {\r\n    version: { type: \"string\" },\r\n    store_to: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          folder_id: { type: \"integer\" },\r\n          usergroup_id: { type: \"integer\" },\r\n        },\r\n        required: [\"folder_id\", \"usergroup_id\"],\r\n        additionalProperties: false,\r\n      },\r\n    },\r\n    parser: {\r\n      oneOf: [SimpleParser],\r\n    },\r\n    save: {\r\n      type: \"object\",\r\n      properties: {\r\n        raw: { type: \"boolean\" },\r\n        text: { type: \"boolean\" },\r\n        html: { type: \"boolean\" },\r\n        attachments: { type: \"boolean\" },\r\n        filename: { type: \"string\" },\r\n      },\r\n      required: [\"raw\", \"text\", \"html\", \"attachments\"],\r\n      additionalProperties: false,\r\n    },\r\n  },\r\n  required: [\"store_to\", \"parser\", \"save\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nexport { MailChannelSettings };\r\n","import { MailChannelSettings } from \"./mail_channel/mail_channel_settings\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: { type: \"integer\" },\r\n    name: { type: \"string\" },\r\n    folder: { type: \"string\" },\r\n    storage_path: { type: \"string\" },\r\n    settings: MailChannelSettings,\r\n    is_active: { type: \"boolean\" },\r\n  },\r\n  required: [\"id\", \"name\", \"folder\", \"storage_path\", \"settings\", \"is_active\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { Single as MailChannelSingle } from \"./mail_channel\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: { type: \"integer\" },\r\n\r\n    out_protocol: { enum: [\"SMTP\"] },\r\n    out_encryption: { enum: [\"NONE\", \"SSL/TLS\", \"STARTTLS\"] },\r\n    out_port: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n    out_server: { type: \"string\" },\r\n\r\n    in_protocol: { enum: [\"POP3\", \"IMAP\"] },\r\n    in_encryption: { enum: [\"NONE\", \"SSL/TLS\", \"STARTTLS\"] },\r\n    in_port: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n    in_server: { type: \"string\" },\r\n\r\n    username: { type: \"string\" },\r\n    password: { type: \"string\" },\r\n    name: { type: \"string\" },\r\n    mailchannels: {\r\n      type: \"array\",\r\n      items: MailChannelSingle,\r\n    },\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"out_protocol\",\r\n    \"out_encryption\",\r\n    \"out_port\",\r\n    \"out_server\",\r\n    \"in_protocol\",\r\n    \"in_encryption\",\r\n    \"in_port\",\r\n    \"in_server\",\r\n    \"username\",\r\n    \"password\",\r\n    \"name\",\r\n    \"mailchannels\"\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { List as FileList } from \"./file\";\r\n\r\nconst Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: { type: \"integer\" },\r\n    subject: { type: [\"null\", \"string\"] },\r\n    message_id: { type: \"string\" },\r\n    address_from: { type: \"string\" },\r\n    address_to: { type: \"string\" },\r\n    address_cc: { type: [\"null\", \"string\"] },\r\n    address_bcc: { type: [\"null\", \"string\"] },\r\n    received_at: { type: \"string\" },\r\n    mailbox: { type: \"integer\" },\r\n    mailchannel: { type: \"integer\" },\r\n    has_text: { type: \"boolean\" },\r\n    has_html: { type: \"boolean\" },\r\n    attachments: FileList,\r\n  },\r\n  required: [\r\n    \"id\",\r\n    \"subject\",\r\n    \"message_id\",\r\n    \"address_from\",\r\n    \"address_to\",\r\n    \"address_cc\",\r\n    \"address_bcc\",\r\n    \"received_at\",\r\n    \"mailbox\",\r\n    \"mailchannel\",\r\n    \"has_text\",\r\n    \"has_html\",\r\n    \"attachments\",\r\n  ],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","const Single = {\r\n  type: \"object\",\r\n  properties: {\r\n    id: { type: \"integer\" },\r\n    name: { type: \"string\" },\r\n    description: { type: \"string\" },\r\n    value: { type: \"integer\" },\r\n    increment: { type: \"integer\" },\r\n  },\r\n  required: [\"id\", \"name\", \"description\", \"value\", \"increment\"],\r\n  additionalProperties: false,\r\n};\r\n\r\nconst List = {\r\n  type: \"array\",\r\n  items: Single,\r\n};\r\n\r\nexport { Single, List };\r\n","import { DataClass } from \"../domain/dataclass\";\r\nimport { Info } from \"./api_responses/models/info\";\r\nimport {\r\n  Single as UserSingle,\r\n  List as UserList,\r\n} from \"./api_responses/models/user\";\r\nimport {\r\n  Single as FolderSingle,\r\n  List as FolderList,\r\n} from \"./api_responses/models/folder\";\r\nimport {\r\n  Single as RoleSingle,\r\n  List as RoleList,\r\n} from \"./api_responses/models/role\";\r\nimport {\r\n  Single as UserFolderSettingSingle,\r\n  List as UserFolderSettingList,\r\n} from \"./api_responses/models/user_folder_setting\";\r\nimport { List as PermissionList } from \"./api_responses/models/permission\";\r\nimport {\r\n  Single as DocumentSingle,\r\n  List as DocumentList,\r\n} from \"./api_responses/models/document\";\r\nimport {\r\n  Single as DocumentApprovalSingle,\r\n  List as DocumentApprovalList,\r\n  SearchList as DocumentApprovalSearchList,\r\n} from \"./api_responses/models/document_approval\";\r\nimport { Single as ApprovalFlowSingle } from \"./api_responses/models/approval_flow\";\r\nimport {\r\n  Single as FileSingle,\r\n  List as FileList,\r\n} from \"./api_responses/models/file\";\r\nimport { Single as SearchSchemaSingle } from \"./api_responses/models/search_schema\";\r\nimport {\r\n  Single as PdfMergeFileSingle,\r\n  List as PdfMergeFileList,\r\n} from \"./api_responses/models/pdf_merge_file\";\r\nimport {\r\n  Single as UserGroupSingle,\r\n  List as UserGroupList,\r\n} from \"./api_responses/models/usergroup\";\r\nimport {\r\n  Single as FlowSingle,\r\n  List as FlowList,\r\n} from \"./api_responses/models/flow\";\r\nimport {\r\n  Single as FlowItemSingle,\r\n  List as FlowItemList,\r\n} from \"./api_responses/models/flow_item\";\r\nimport { List as FlowItemStepList } from \"./api_responses/models/flow_item_step\";\r\nimport {\r\n  Single as ServerSettingSingle,\r\n  List as ServerSettingList,\r\n} from \"./api_responses/models/server_setting\";\r\nimport {\r\n  Single as MailBoxSingle,\r\n  List as MailBoxList,\r\n} from \"./api_responses/models/mailbox\";\r\nimport {\r\n  Single as MailChannelSingle,\r\n  List as MailChannelList,\r\n} from \"./api_responses/models/mail_channel\";\r\nimport { List as MailMessageList } from \"./api_responses/models/mail_message\";\r\nimport {\r\n  Single as CounterSingle,\r\n  List as CounterList,\r\n} from \"./api_responses/models/counter\";\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass Request extends DataClass {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {},\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass Response extends DataClass {}\r\n\r\nclass NegativeResponse extends Response {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        code: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass EmptyPositiveResponse extends Response {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {},\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass PositiveFileResponse extends Response {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        file: { type: \"object\" },\r\n        name: { type: \"string\" },\r\n        size: { type: \"number\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass LoginCredentialsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n        password: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass LoginCredentialsResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass LoginTokenRequest extends Request {}\r\nclass LoginTokenResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass GetInfoRequest extends Request {}\r\nclass GetInfoResponse extends Response {\r\n  get schema() {\r\n    return Info;\r\n  }\r\n}\r\n\r\nclass GetUsersRequest extends Request {}\r\nclass GetUsersResponse extends Response {\r\n  get schema() {\r\n    return UserList;\r\n  }\r\n}\r\n\r\nclass SetUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n        is_active: { type: \"boolean\" },\r\n        access_group_regex: { type: \"string\" },\r\n        role: { type: \"string\" },\r\n        role_inside_group: { type: \"string\" },\r\n        role_outside_group: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass SetUserResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass DeleteUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetUserReplacementsRequest extends Request {}\r\nclass GetUserReplacementsResponse extends Response {\r\n  get schema() {\r\n    return UserList;\r\n  }\r\n}\r\n\r\nclass AddUserReplacementRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddUserReplacementResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass DeleteUserReplacementRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserReplacementResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetUserReplacementsOfUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetUserReplacementsOfUserResponse extends Response {\r\n  get schema() {\r\n    return UserList;\r\n  }\r\n}\r\n\r\nclass AddUserReplacementToUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username_to_be_replaced: { type: \"string\" },\r\n        replaced_with_username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddUserReplacementToUserResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass DeleteUserReplacementFromUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username_to_be_replaced: { type: \"string\" },\r\n        replaced_with_username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserReplacementFromUserResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetOnBehalfUsersRequest extends Request {}\r\nclass GetOnBehalfUsersResponse extends Response {\r\n  get schema() {\r\n    return UserList;\r\n  }\r\n}\r\n\r\nclass SetOnBehalfUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass SetOnBehalfUserResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass DeleteOnBehalfUserRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteOnBehalfUserResponse extends Response {\r\n  get schema() {\r\n    return UserSingle;\r\n  }\r\n}\r\n\r\nclass GetUserGroupsRequest extends Request {}\r\nclass GetUserGroupsResponse extends Response {\r\n  get schema() {\r\n    return UserGroupList;\r\n  }\r\n}\r\n\r\n// class GetMyUserGroupsRequest extends GetUserGroupsRequest {}\r\n// class GetMyUserGroupsResponse extends GetUserGroupsResponse {}\r\n\r\nclass AddUserGroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        slug: { type: \"string\" },\r\n        is_private: { type: \"boolean\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddUserGroupResponse extends Response {\r\n  get schema() {\r\n    return UserGroupSingle;\r\n  }\r\n}\r\n\r\nclass SetUserGroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        name: { type: \"string\" },\r\n        slug: { type: \"string\" },\r\n        is_private: { type: \"boolean\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass SetUserGroupResponse extends Response {\r\n  get schema() {\r\n    return UserGroupSingle;\r\n  }\r\n}\r\n\r\nclass DeleteUserGroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserGroupResponse extends EmptyPositiveResponse {}\r\n\r\nclass AddUserToUserGroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddUserToUserGroupResponse extends Response {\r\n  get schema() {\r\n    return UserGroupSingle;\r\n  }\r\n}\r\n\r\nclass DeleteUserFromUserGroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserFromUserGroupResponse extends Response {\r\n  get schema() {\r\n    return UserGroupSingle;\r\n  }\r\n}\r\n\r\nclass GetFoldersRequest extends Request {}\r\nclass GetFoldersResponse extends Response {\r\n  get schema() {\r\n    return FolderList;\r\n  }\r\n}\r\n\r\nclass AddFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        storage_path: { type: \"string\" },\r\n        master_usergroup_slug: { type: \"string\" },\r\n        access_group: { type: \"string\" },\r\n        settings: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddFolderResponse extends Response {\r\n  get schema() {\r\n    return FolderSingle;\r\n  }\r\n}\r\n\r\nclass UpdateFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        name: { type: \"string\" },\r\n        storage_path: { type: \"string\" },\r\n        master_usergroup_slug: { type: \"string\" },\r\n        access_group: { type: \"string\" },\r\n        settings: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateFolderResponse extends Response {\r\n  get schema() {\r\n    return FolderSingle;\r\n  }\r\n}\r\n\r\nclass DeleteFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteFolderResponse extends EmptyPositiveResponse {}\r\n\r\nclass UploadFileToFolderRequest extends Request {\r\n  // file = https://developer.mozilla.org/ru/docs/Web/API/File\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        original_file: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UploadFileToFolderResponse extends EmptyPositiveResponse {}\r\n\r\nclass DownloadFileFromFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadFileFromFolderResponse extends PositiveFileResponse {}\r\n\r\nclass DownloadManyDocumentsFilesAsArchiveRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_ids: { type: \"array\", items: { type: \"string\" } },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadManyDocumentsFilesAsArchiveResponse extends PositiveFileResponse {}\r\n\r\nclass DownloadDocumentFilesAsArchiveRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadDocumentFilesAsArchiveResponse extends PositiveFileResponse {}\r\n\r\nclass DeleteFileFromFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteFileFromFolderResponse extends EmptyPositiveResponse {}\r\n\r\nclass UpdateFileFromFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        name: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass UpdateFileFromFolderResponse extends Response {\r\n  get schema() {\r\n    return FileSingle;\r\n  }\r\n}\r\n\r\nclass GetFileInfoRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        // folder_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetFileInfoResponse extends Response {\r\n  get schema() {\r\n    return FileSingle;\r\n  }\r\n}\r\n\r\nclass GetRolesRequest extends Request {}\r\nclass GetRolesResponse extends Response {\r\n  get schema() {\r\n    return RoleList;\r\n  }\r\n}\r\n\r\nclass AddRoleRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddRoleResponse extends Response {\r\n  get schema() {\r\n    return RoleSingle;\r\n  }\r\n}\r\n\r\nclass DeleteRoleRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteRoleResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetUserFolderSettingsRequest extends Request {}\r\nclass GetUserFolderSettingsResponse extends Response {\r\n  get schema() {\r\n    return UserFolderSettingList;\r\n  }\r\n}\r\n\r\nclass AddUserFolderSettingsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        username: { type: \"string\" },\r\n        folder_id: { type: \"number\" },\r\n        usergroup_slug: { type: \"string\" },\r\n        role: { type: [\"null\", \"string\"] },\r\n        search_schema: { type: [\"null\", \"array\"] },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddUserFolderSettingsResponse extends Response {\r\n  get schema() {\r\n    return UserFolderSettingSingle;\r\n  }\r\n}\r\n\r\nclass UpdateUserFolderSettingsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"number\" },\r\n        username: { type: \"string\" },\r\n        folder_id: { type: \"number\" },\r\n        usergroup_slug: { type: \"string\" },\r\n        role: { type: [\"null\", \"string\"] },\r\n        search_schema: { type: [\"null\", \"array\"] },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateUserFolderSettingsResponse extends Response {\r\n  get schema() {\r\n    return UserFolderSettingSingle;\r\n  }\r\n}\r\n\r\nclass DeleteUserFolderSettingsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"number\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserFolderSettingsResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetPermissionsRequest extends Request {}\r\nclass GetPermissionsResponse extends Response {\r\n  get schema() {\r\n    return PermissionList;\r\n  }\r\n}\r\n\r\n// OK\r\nclass AddPermissionRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        role: { type: \"string\" },\r\n        permission: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass AddPermissionResponse extends Response {\r\n  get schema() {\r\n    return RoleSingle;\r\n  }\r\n}\r\n\r\nclass DeletePermissionRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        role: { type: \"string\" },\r\n        permission: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeletePermissionResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetUserPermissionsRequest extends Request {}\r\nclass GetUserPermissionsResponse extends Response {\r\n  get schema() {\r\n    return PermissionList;\r\n  }\r\n}\r\n\r\nclass GetUserPermissionsForFolderRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetUserPermissionsForFolderResponse extends Response {\r\n  get schema() {\r\n    return PermissionList;\r\n  }\r\n}\r\n\r\nclass GetUserSearchSchemaRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetUserSearchSchemaResponse extends Response {\r\n  get schema() {\r\n    return SearchSchemaSingle;\r\n  }\r\n}\r\n\r\nclass SetUserSearchSchemaRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        search_schema: SearchSchemaSingle,\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass SetUserSearchSchemaResponse extends EmptyPositiveResponse {}\r\n\r\nclass DeleteUserSearchSchemaRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteUserSearchSchemaResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetDocumentRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetDocumentResponse extends Response {\r\n  get schema() {\r\n    return DocumentSingle;\r\n  }\r\n}\r\n\r\nclass GetPreviousDocumentsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        count: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetPreviousDocumentsResponse extends Response {\r\n  get schema() {\r\n    return DocumentList;\r\n  }\r\n}\r\n\r\nclass PushDocumentButtonRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        action: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass PushDocumentButtonResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetManyDocumentsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        query: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetManyDocumentsResponse extends Response {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        documents: DocumentList,\r\n        count: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\n// class SaveDocumentRequest extends Request {\r\n//   get keys() {\r\n//     return [\"folder_id\", \"id\", \"data\", \"files\"];\r\n//   }\r\n// }\r\n// class SaveDocumentResponse extends EmptyPositiveResponse {}\r\n\r\nclass SaveManyDocumentsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        docs: { type: \"array\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass SaveManyDocumentsResponse extends Response {\r\n  get schema() {\r\n    return DocumentList;\r\n  }\r\n}\r\n\r\n// class DeleteDocumentRequest extends Request {\r\n//   get keys() {\r\n//     return [\"folder_id\", \"id\"];\r\n//   }\r\n// }\r\n// class DeleteDocumentResponse extends EmptyPositiveResponse {}\r\n\r\nclass DeleteManyDocumentsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        ids: { type: \"array\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteManyDocumentsResponse extends EmptyPositiveResponse {}\r\n\r\nclass DuplicateDocumentToUsergroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        source_usergroup_id: { type: \"integer\" },\r\n        target_usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DuplicateDocumentToUsergroupResponse extends Response {\r\n  get schema() {\r\n    return DocumentSingle;\r\n  }\r\n}\r\n\r\nclass DuplicateManyDocumentsToUsergroupRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        source_usergroup_id: { type: \"integer\" },\r\n        target_usergroup_id: { type: \"integer\" },\r\n        document_ids: { type: \"array\", items: { type: \"string\" } },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DuplicateManyDocumentsToUsergroupResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetSpareFilesRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetSpareFilesResponse extends Response {\r\n  get schema() {\r\n    return FileList;\r\n  }\r\n}\r\n\r\nclass GetUploadProgressRequest extends Request {}\r\n\r\nclass GetUploadProgressResponse extends Response {\r\n  get schema() {\r\n    return {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        properties: {\r\n          file_id: { type: \"string\" },\r\n          loaded: { type: \"integer\" },\r\n        },\r\n        additionalProperties: false,\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nclass GetPdfMergeFilesRequest extends Request {}\r\nclass GetPdfMergeFilesResponse extends Response {\r\n  get schema() {\r\n    return PdfMergeFileList;\r\n  }\r\n}\r\n\r\nclass UploadPdfMergeFileRequest extends Request {\r\n  // file = https://developer.mozilla.org/ru/docs/Web/API/File\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        order: { type: \"integer\" },\r\n        original_file: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UploadPdfMergeFileResponse extends Response {\r\n  get schema() {\r\n    return PdfMergeFileSingle;\r\n  }\r\n}\r\n\r\nclass UpdatePdfMergeFileRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        order: { type: \"integer\" },\r\n        page_from: { type: \"integer\" },\r\n        page_to: { type: \"integer\" },\r\n        angle: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdatePdfMergeFileResponse extends Response {\r\n  get schema() {\r\n    return PdfMergeFileSingle;\r\n  }\r\n}\r\n\r\nclass DeletePdfMergeFileRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeletePdfMergeFileResponse extends EmptyPositiveResponse {}\r\n\r\nclass DownloadPdfMergeResultRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        keep_bookmarks: { type: \"boolean\" },\r\n        add_filenames_as_bookmarks: { type: \"boolean\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadPdfMergeResultResponse extends PositiveFileResponse {}\r\n\r\nclass DownloadPdfMixResultRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {},\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadPdfMixResultResponse extends PositiveFileResponse {}\r\n\r\nclass GetShareFilesRequest extends Request {}\r\nclass GetShareFilesResponse extends Response {\r\n  get schema() {\r\n    return FileList;\r\n  }\r\n}\r\n\r\nclass UploadShareFileRequest extends Request {\r\n  // file = https://developer.mozilla.org/ru/docs/Web/API/File\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        original_file: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UploadShareFileResponse extends EmptyPositiveResponse {}\r\n\r\nclass DownloadShareFileRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadShareFileResponse extends PositiveFileResponse {}\r\n\r\nclass DeleteShareFileRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteShareFileResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetFlowsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        query: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetFlowsResponse extends Response {\r\n  get schema() {\r\n    return FlowList;\r\n  }\r\n}\r\n\r\nclass AddFlowRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        trigger: { type: \"string\" },\r\n        is_active: { type: \"boolean\" },\r\n        is_multiple: { type: \"boolean\" },\r\n        message_if_fail: { type: \"boolean\" },\r\n        process: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddFlowResponse extends Response {\r\n  get schema() {\r\n    return FlowSingle;\r\n  }\r\n}\r\n\r\nclass UpdateFlowRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        name: { type: \"string\" },\r\n        trigger: { type: \"string\" },\r\n        is_active: { type: \"boolean\" },\r\n        is_multiple: { type: \"boolean\" },\r\n        message_if_fail: { type: \"boolean\" },\r\n        process: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateFlowResponse extends Response {\r\n  get schema() {\r\n    return FlowSingle;\r\n  }\r\n}\r\n\r\nclass DeleteFlowRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteFlowResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetFlowItemRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetFlowItemResponse extends Response {\r\n  get schema() {\r\n    return FlowItemSingle;\r\n  }\r\n}\r\n\r\nclass RestartFlowItemRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass RestartFlowItemResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetManyFlowItemsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        query: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetManyFlowItemsResponse extends Response {\r\n  get schema() {\r\n    return FlowItemList;\r\n  }\r\n}\r\n\r\nclass GetFlowItemStepsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        flowitem_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetFlowItemStepsResponse extends Response {\r\n  get schema() {\r\n    return FlowItemStepList;\r\n  }\r\n}\r\n\r\nclass GetManyDocumentsApprovalsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        query: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetManyDocumentsApprovalsResponse extends Response {\r\n  get schema() {\r\n    return DocumentApprovalSearchList;\r\n  }\r\n}\r\n\r\nclass GetDocumentApprovalsRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetDocumentApprovalsResponse extends Response {\r\n  get schema() {\r\n    return DocumentApprovalList;\r\n  }\r\n}\r\n\r\nclass AddDocumentApprovalRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        username: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddDocumentApprovalResponse extends Response {\r\n  get schema() {\r\n    return DocumentApprovalSingle;\r\n  }\r\n}\r\n\r\nclass UpdateDocumentApprovalRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        approval_id: { type: \"integer\" },\r\n        state: { enum: [\"APPROVED\", \"REJECTED\", \"DELEGATED\", \"NONE\"] },\r\n        files: { type: \"array\", items: { type: \"string\" } },\r\n        comments: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateDocumentApprovalResponse extends Response {\r\n  get schema() {\r\n    return DocumentApprovalSingle;\r\n  }\r\n}\r\n\r\nclass DeleteDocumentApprovalRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        approval_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteDocumentApprovalResponse extends EmptyPositiveResponse {}\r\n\r\nclass DelegateDocumentApprovalRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        approval_id: { type: \"integer\" },\r\n        username: { type: \"string\" },\r\n        with_return: { type: \"boolean\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DelegateDocumentApprovalResponse extends Response {\r\n  get schema() {\r\n    return DocumentApprovalList;\r\n  }\r\n}\r\n\r\nclass GetDocumentApprovalSpareFilesRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetDocumentApprovalSpareFilesResponse extends Response {\r\n  get schema() {\r\n    return FileList;\r\n  }\r\n}\r\n\r\nclass UploadDocumentApprovalFileRequest extends Request {\r\n  // file = https://developer.mozilla.org/ru/docs/Web/API/File\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        file_id: { type: \"string\" },\r\n        original_file: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UploadDocumentApprovalFileResponse extends EmptyPositiveResponse {}\r\n\r\nclass DeleteDocumentApprovalFileRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        file_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteDocumentApprovalFileResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetWaitingDocumentApprovalsRequest extends Request {}\r\nclass GetWaitingDocumentApprovalsResponse extends Response {\r\n  get schema() {\r\n    return DocumentApprovalList;\r\n  }\r\n}\r\n\r\nclass EmptyCartRequest extends Request {}\r\nclass EmptyCartResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetCartDocumentsRequest extends Request {}\r\nclass GetCartDocumentsResponse extends Response {\r\n  get schema() {\r\n    return DocumentList;\r\n  }\r\n}\r\n\r\nclass AddDocumentToCartRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddDocumentToCartResponse extends Response {\r\n  get schema() {\r\n    return DocumentSingle;\r\n  }\r\n}\r\n\r\nclass AddManyDocumentsToCartRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_ids: { type: \"array\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddManyDocumentsToCartResponse extends Response {\r\n  get schema() {\r\n    return DocumentList;\r\n  }\r\n}\r\n\r\nclass RemoveDocumentFromCartRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass RemoveDocumentFromCartResponse extends EmptyPositiveResponse {}\r\n\r\nclass AbstractDocumentApprovalFlowRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\n\r\nclass AbstractDocumentApprovalFlowResponse extends Response {\r\n  get schema() {\r\n    return ApprovalFlowSingle;\r\n  }\r\n}\r\n\r\nclass GetDocumentApprovalFlowRequest extends AbstractDocumentApprovalFlowRequest {}\r\nclass GetDocumentApprovalFlowResponse extends AbstractDocumentApprovalFlowResponse {}\r\n\r\nclass SetDocumentApprovalFlowRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_id: { type: \"string\" },\r\n        steps: {\r\n          type: \"array\",\r\n          items: {\r\n            type: \"array\",\r\n            items: {\r\n              type: \"string\",\r\n            },\r\n            minItems: 1,\r\n          },\r\n          minItems: 1,\r\n        },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass SetDocumentApprovalFlowResponse extends AbstractDocumentApprovalFlowResponse {}\r\n\r\nclass StartDocumentApprovalFlowRequest extends AbstractDocumentApprovalFlowRequest {}\r\nclass StartDocumentApprovalFlowResponse extends AbstractDocumentApprovalFlowResponse {}\r\n\r\nclass StopDocumentApprovalFlowRequest extends AbstractDocumentApprovalFlowRequest {}\r\nclass StopDocumentApprovalFlowResponse extends AbstractDocumentApprovalFlowResponse {}\r\n\r\nclass GetServerSettingsRequest extends Request {}\r\nclass GetServerSettingsResponse extends Response {\r\n  get schema() {\r\n    return ServerSettingList;\r\n  }\r\n}\r\n\r\nclass UpdateServerSettingRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        value: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateServerSettingResponse extends Response {\r\n  get schema() {\r\n    return ServerSettingSingle;\r\n  }\r\n}\r\n\r\nclass GetMailBoxesRequest extends Request {}\r\nclass GetMailBoxesResponse extends Response {\r\n  get schema() {\r\n    return MailBoxList;\r\n  }\r\n}\r\n\r\nclass AddMailBoxRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        out_protocol: { enum: [\"SMTP\"] },\r\n        out_encryption: { enum: [\"NONE\", \"SSL/TLS\", \"STARTTLS\"] },\r\n        out_port: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n        out_server: { type: \"string\" },\r\n\r\n        in_protocol: { enum: [\"POP3\", \"IMAP\"] },\r\n        in_encryption: { enum: [\"NONE\", \"SSL/TLS\", \"STARTTLS\"] },\r\n        in_port: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n        in_server: { type: \"string\" },\r\n\r\n        username: { type: \"string\" },\r\n        password: { type: \"string\" },\r\n        name: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddMailBoxResponse extends Response {\r\n  get schema() {\r\n    return MailBoxSingle;\r\n  }\r\n}\r\n\r\nclass UpdateMailBoxRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        out_protocol: { enum: [\"SMTP\"] },\r\n        out_encryption: { enum: [\"NONE\", \"SSL/TLS\", \"STARTTLS\"] },\r\n        out_port: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n        out_server: { type: \"string\" },\r\n        in_protocol: { enum: [\"POP3\", \"IMAP\"] },\r\n        in_encryption: { enum: [\"NONE\", \"SSL/TLS\", \"STARTTLS\"] },\r\n        in_port: { type: \"integer\", minimum: 0, maximum: 1000 },\r\n        in_server: { type: \"string\" },\r\n        username: { type: \"string\" },\r\n        password: { type: \"string\" },\r\n        name: { type: \"string\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateMailBoxResponse extends Response {\r\n  get schema() {\r\n    return MailBoxSingle;\r\n  }\r\n}\r\n\r\nclass DeleteMailBoxRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteMailBoxResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetMailChannelsRequest extends Request {}\r\nclass GetMailChannelsResponse extends Response {\r\n  get schema() {\r\n    return MailChannelList;\r\n  }\r\n}\r\n\r\nclass AddMailChannelRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        folder: { type: \"string\" },\r\n        storage_path: { type: \"string\" },\r\n        settings: { type: \"object\" },\r\n        is_active: { type: \"boolean\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddMailChannelResponse extends Response {\r\n  get schema() {\r\n    return MailChannelSingle;\r\n  }\r\n}\r\n\r\nclass UpdateMailChannelRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        name: { type: \"string\" },\r\n        folder: { type: \"string\" },\r\n        storage_path: { type: \"string\" },\r\n        settings: { type: \"object\" },\r\n        is_active: { type: \"boolean\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateMailChannelResponse extends Response {\r\n  get schema() {\r\n    return MailChannelSingle;\r\n  }\r\n}\r\n\r\nclass DeleteMailChannelRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteMailChannelResponse extends EmptyPositiveResponse {}\r\n\r\nclass AddMailChannelToMailBoxRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        mailbox_id: { type: \"integer\" },\r\n        mailchannel_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddMailChannelToMailBoxResponse extends Response {\r\n  get schema() {\r\n    return MailBoxSingle;\r\n  }\r\n}\r\n\r\nclass DeleteMailChannelFromMailBoxRequest extends AddMailChannelToMailBoxRequest {}\r\nclass DeleteMailChannelFromMailBoxResponse extends AddMailChannelToMailBoxResponse {}\r\n\r\nclass FetchMailChannelRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass FetchMailChannelResponse extends EmptyPositiveResponse {}\r\n\r\nclass GetMailMessagesRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        query: { type: \"object\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass GetMailMessagesResponse extends Response {\r\n  get schema() {\r\n    return MailMessageList;\r\n  }\r\n}\r\n\r\nclass DeleteMailMessageRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteMailMessageResponse extends EmptyPositiveResponse {}\r\n\r\nclass DownloadMailMessageRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        format: { type: \"string\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadMailMessageResponse extends PositiveFileResponse {}\r\n\r\nclass DownloadMailMessageAttachmentRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"string\" },\r\n        message_id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadMailMessageAttachmentResponse extends PositiveFileResponse {}\r\n\r\nclass GetCountersRequest extends Request {}\r\nclass GetCountersResponse extends Response {\r\n  get schema() {\r\n    return CounterList;\r\n  }\r\n}\r\n\r\nclass AddCounterRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        name: { type: \"string\" },\r\n        description: { type: \"string\" },\r\n        value: { type: \"integer\" },\r\n        increment: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass AddCounterResponse extends Response {\r\n  get schema() {\r\n    return CounterSingle;\r\n  }\r\n}\r\n\r\nclass UpdateCounterRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n        name: { type: \"string\" },\r\n        description: { type: \"string\" },\r\n        value: { type: \"integer\" },\r\n        increment: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass UpdateCounterResponse extends Response {\r\n  get schema() {\r\n    return CounterSingle;\r\n  }\r\n}\r\n\r\nclass DeleteCounterRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        id: { type: \"integer\" },\r\n      },\r\n      additionalProperties: false,\r\n    };\r\n  }\r\n}\r\nclass DeleteCounterResponse extends EmptyPositiveResponse {}\r\n\r\nclass DownloadTransmittalCoverSheetRequest extends Request {\r\n  get schema() {\r\n    return {\r\n      type: \"object\",\r\n      properties: {\r\n        folder_id: { type: \"integer\" },\r\n        usergroup_id: { type: \"integer\" },\r\n        document_ids: { type: \"array\", items: { type: \"string\" } },\r\n        template: { type: \"string\" },\r\n      },\r\n      additionalProperties: true, // set_size_method\r\n    };\r\n  }\r\n}\r\nclass DownloadTransmittalCoverSheetResponse extends PositiveFileResponse {}\r\n\r\nclass AbstractApi {\r\n  constructor() {\r\n    this._auth_token = null;\r\n  }\r\n\r\n  set_auth_token(token) {\r\n    this._auth_token = token;\r\n  }\r\n\r\n  call = (request) => {\r\n    if (\r\n      !Object.prototype.hasOwnProperty.call(\r\n        this.REQUEST_HANDLERS,\r\n        request.constructor.name\r\n      )\r\n    ) {\r\n      throw new NotImplementedError(\r\n        \"API request does not have handler for \" + request.constructor.name\r\n      );\r\n    }\r\n\r\n    const func = this.REQUEST_HANDLERS[request.constructor.name];\r\n    return func(request);\r\n  };\r\n\r\n  login_with_credentials = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  login_with_token = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_info = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_users = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  set_user = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_user = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_user_replacements = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_user_replacement = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_user_replacement = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_on_behalf_users = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  set_on_behalf_user = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_on_behalf_user = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_user_groups = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  set_user_groups = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_user_groups = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_user_groups = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_user_to_user_group = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_user_from_user_group = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_folders = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_document = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_previous_documents = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_many_documents = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_waiting_document_approvals = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  upload_file_to_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_file_from_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_many_documents_files_as_archive = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_document_files_as_archive = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_file_from_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_file_from_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_roles = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_role = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_role = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_user_folder_settings = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_user_folder_settings = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  set_user_folder_settings = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_user_folder_settings = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_permissions = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_permission = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_permission = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_permissions_by_roles = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_user_permissions = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_user_permissions_for_folder = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_user_search_schema = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  set_user_search_schema = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_user_search_schema = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_spare_files = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  save_document = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  save_many_documents = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_document = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_many_documents = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  duplicate_document_to_usergroup = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  duplicate_many_documents_to_usergroup = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  push_document_button = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_upload_progress = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_pdf_merge_files = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  upload_pdf_merge_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_pdf_merge_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_pdf_merge_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_pdf_merge_result = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_pdf_mix_result = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_share_files = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  upload_share_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_share_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_share_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_flows = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_flow_item = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  restart_flow_item = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_many_flow_items = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_flow_item_steps = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_many_documents_approvals = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_document_approvals = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_document_approval = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_document_approval = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_document_approval = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_document_approval_spare_files = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  upload_document_approval_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_document_approval_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delegate_document_approval_file = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  empty_cart = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_cart_documents = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_document_to_cart = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_many_documents_to_cart = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  remove_document_from_cart = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_document_approval_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  set_document_approval_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  start_document_approval_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  stop_document_approval_flow = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_server_settings = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_server_setting = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_mailboxes = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_mailbox = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_mailbox = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_mailbox = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_mail_channels = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_mail_channel = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_mail_channel = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_mail_channel = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_mail_channel_to_mailbox = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_mail_channel_from_mailbox = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  fetch_mail_channel = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  get_mail_messages = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_mail_message = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_mail_message = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_mail_message_attachment = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  add_counter = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  update_counter = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  delete_counter = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  download_transmittal_cover_sheet = () => {\r\n    throw new NotImplementedError();\r\n  }\r\n}\r\n\r\nexport {\r\n  AbstractApi,\r\n  NegativeResponse,\r\n  // INFO\r\n  GetInfoRequest,\r\n  GetInfoResponse,\r\n  // LOGIN\r\n  LoginCredentialsRequest,\r\n  LoginCredentialsResponse,\r\n  LoginTokenRequest,\r\n  LoginTokenResponse,\r\n  // USER\r\n  GetUsersRequest,\r\n  GetUsersResponse,\r\n  SetUserRequest,\r\n  SetUserResponse,\r\n  DeleteUserRequest,\r\n  DeleteUserResponse,\r\n  GetUserReplacementsRequest,\r\n  GetUserReplacementsResponse,\r\n  AddUserReplacementRequest,\r\n  AddUserReplacementResponse,\r\n  DeleteUserReplacementRequest,\r\n  DeleteUserReplacementResponse,\r\n  GetUserReplacementsOfUserRequest,\r\n  GetUserReplacementsOfUserResponse,\r\n  AddUserReplacementToUserRequest,\r\n  AddUserReplacementToUserResponse,\r\n  DeleteUserReplacementFromUserRequest,\r\n  DeleteUserReplacementFromUserResponse,\r\n  GetOnBehalfUsersRequest,\r\n  GetOnBehalfUsersResponse,\r\n  SetOnBehalfUserRequest,\r\n  SetOnBehalfUserResponse,\r\n  DeleteOnBehalfUserRequest,\r\n  DeleteOnBehalfUserResponse,\r\n  // USER GROUPS\r\n  GetUserGroupsRequest,\r\n  GetUserGroupsResponse,\r\n  AddUserGroupRequest,\r\n  AddUserGroupResponse,\r\n  SetUserGroupRequest,\r\n  SetUserGroupResponse,\r\n  DeleteUserGroupRequest,\r\n  DeleteUserGroupResponse,\r\n  AddUserToUserGroupRequest,\r\n  AddUserToUserGroupResponse,\r\n  DeleteUserFromUserGroupRequest,\r\n  DeleteUserFromUserGroupResponse,\r\n  // FOLDER\r\n  GetFoldersRequest,\r\n  GetFoldersResponse,\r\n  AddFolderRequest,\r\n  AddFolderResponse,\r\n  DeleteFolderRequest,\r\n  DeleteFolderResponse,\r\n  UpdateFolderRequest,\r\n  UpdateFolderResponse,\r\n  // DOCUMENT\r\n  GetDocumentRequest,\r\n  GetDocumentResponse,\r\n  GetManyDocumentsRequest,\r\n  GetManyDocumentsResponse,\r\n  GetWaitingDocumentApprovalsRequest,\r\n  GetWaitingDocumentApprovalsResponse,\r\n  SaveManyDocumentsRequest,\r\n  SaveManyDocumentsResponse,\r\n  DeleteManyDocumentsRequest,\r\n  DeleteManyDocumentsResponse,\r\n  DuplicateDocumentToUsergroupRequest,\r\n  DuplicateDocumentToUsergroupResponse,\r\n  DuplicateManyDocumentsToUsergroupRequest,\r\n  DuplicateManyDocumentsToUsergroupResponse,\r\n  GetPreviousDocumentsRequest,\r\n  GetPreviousDocumentsResponse,\r\n  PushDocumentButtonRequest,\r\n  PushDocumentButtonResponse,\r\n  // TRANSMITTAL\r\n  DownloadTransmittalCoverSheetRequest,\r\n  DownloadTransmittalCoverSheetResponse,\r\n  // DOCUMENT APPROVAL\r\n  GetManyDocumentsApprovalsRequest,\r\n  GetManyDocumentsApprovalsResponse,\r\n  GetDocumentApprovalsRequest,\r\n  GetDocumentApprovalsResponse,\r\n  AddDocumentApprovalRequest,\r\n  AddDocumentApprovalResponse,\r\n  UpdateDocumentApprovalRequest,\r\n  UpdateDocumentApprovalResponse,\r\n  DeleteDocumentApprovalRequest,\r\n  DeleteDocumentApprovalResponse,\r\n  DelegateDocumentApprovalRequest,\r\n  DelegateDocumentApprovalResponse,\r\n  GetDocumentApprovalSpareFilesRequest,\r\n  GetDocumentApprovalSpareFilesResponse,\r\n  UploadDocumentApprovalFileRequest,\r\n  UploadDocumentApprovalFileResponse,\r\n  DeleteDocumentApprovalFileRequest,\r\n  DeleteDocumentApprovalFileResponse,\r\n  // DOCUMENT APPROVAL FLOW\r\n  GetDocumentApprovalFlowRequest,\r\n  GetDocumentApprovalFlowResponse,\r\n  SetDocumentApprovalFlowRequest,\r\n  SetDocumentApprovalFlowResponse,\r\n  StartDocumentApprovalFlowRequest,\r\n  StartDocumentApprovalFlowResponse,\r\n  StopDocumentApprovalFlowRequest,\r\n  StopDocumentApprovalFlowResponse,\r\n  // CART\r\n  EmptyCartRequest,\r\n  EmptyCartResponse,\r\n  GetCartDocumentsRequest,\r\n  GetCartDocumentsResponse,\r\n  AddDocumentToCartRequest,\r\n  AddDocumentToCartResponse,\r\n  AddManyDocumentsToCartRequest,\r\n  AddManyDocumentsToCartResponse,\r\n  RemoveDocumentFromCartRequest,\r\n  RemoveDocumentFromCartResponse,\r\n  // FILE\r\n  UploadFileToFolderRequest,\r\n  UploadFileToFolderResponse,\r\n  DownloadFileFromFolderRequest,\r\n  DownloadFileFromFolderResponse,\r\n  DownloadManyDocumentsFilesAsArchiveRequest,\r\n  DownloadManyDocumentsFilesAsArchiveResponse,\r\n  DownloadDocumentFilesAsArchiveRequest,\r\n  DownloadDocumentFilesAsArchiveResponse,\r\n  DeleteFileFromFolderRequest,\r\n  DeleteFileFromFolderResponse,\r\n  UpdateFileFromFolderRequest,\r\n  UpdateFileFromFolderResponse,\r\n  GetFileInfoRequest,\r\n  GetFileInfoResponse,\r\n  GetSpareFilesRequest,\r\n  GetSpareFilesResponse,\r\n  GetUploadProgressRequest,\r\n  GetUploadProgressResponse,\r\n  // ROLE\r\n  GetRolesRequest,\r\n  GetRolesResponse,\r\n  AddRoleRequest,\r\n  AddRoleResponse,\r\n  DeleteRoleRequest,\r\n  DeleteRoleResponse,\r\n  // USER FOLDER SETTING\r\n  GetUserFolderSettingsRequest,\r\n  GetUserFolderSettingsResponse,\r\n  AddUserFolderSettingsRequest,\r\n  AddUserFolderSettingsResponse,\r\n  UpdateUserFolderSettingsRequest,\r\n  UpdateUserFolderSettingsResponse,\r\n  DeleteUserFolderSettingsRequest,\r\n  DeleteUserFolderSettingsResponse,\r\n  // PERMISSION\r\n  GetPermissionsRequest,\r\n  GetPermissionsResponse,\r\n  AddPermissionRequest,\r\n  AddPermissionResponse,\r\n  DeletePermissionRequest,\r\n  DeletePermissionResponse,\r\n  GetUserPermissionsRequest,\r\n  GetUserPermissionsResponse,\r\n  GetUserPermissionsForFolderRequest,\r\n  GetUserPermissionsForFolderResponse,\r\n  // USER SEARCH SCHEMA\r\n  GetUserSearchSchemaRequest,\r\n  GetUserSearchSchemaResponse,\r\n  SetUserSearchSchemaRequest,\r\n  SetUserSearchSchemaResponse,\r\n  DeleteUserSearchSchemaRequest,\r\n  DeleteUserSearchSchemaResponse,\r\n  // SERVER SETTINGS\r\n  GetServerSettingsRequest,\r\n  GetServerSettingsResponse,\r\n  UpdateServerSettingRequest,\r\n  UpdateServerSettingResponse,\r\n  // MAILBOXES\r\n  GetMailBoxesRequest,\r\n  GetMailBoxesResponse,\r\n  AddMailBoxRequest,\r\n  AddMailBoxResponse,\r\n  UpdateMailBoxRequest,\r\n  UpdateMailBoxResponse,\r\n  DeleteMailBoxRequest,\r\n  DeleteMailBoxResponse,\r\n  // MAIL CHANNELS\r\n  GetMailChannelsRequest,\r\n  GetMailChannelsResponse,\r\n  AddMailChannelRequest,\r\n  AddMailChannelResponse,\r\n  UpdateMailChannelRequest,\r\n  UpdateMailChannelResponse,\r\n  DeleteMailChannelRequest,\r\n  DeleteMailChannelResponse,\r\n  AddMailChannelToMailBoxRequest,\r\n  AddMailChannelToMailBoxResponse,\r\n  DeleteMailChannelFromMailBoxRequest,\r\n  DeleteMailChannelFromMailBoxResponse,\r\n  FetchMailChannelRequest,\r\n  FetchMailChannelResponse,\r\n  // MAIL MESSAGES\r\n  GetMailMessagesRequest,\r\n  GetMailMessagesResponse,\r\n  DeleteMailMessageRequest,\r\n  DeleteMailMessageResponse,\r\n  DownloadMailMessageRequest,\r\n  DownloadMailMessageResponse,\r\n  DownloadMailMessageAttachmentRequest,\r\n  DownloadMailMessageAttachmentResponse,\r\n  // SERVICE - PDF MERGE\r\n  GetPdfMergeFilesRequest,\r\n  GetPdfMergeFilesResponse,\r\n  UploadPdfMergeFileRequest,\r\n  UploadPdfMergeFileResponse,\r\n  UpdatePdfMergeFileRequest,\r\n  UpdatePdfMergeFileResponse,\r\n  DeletePdfMergeFileRequest,\r\n  DeletePdfMergeFileResponse,\r\n  DownloadPdfMergeResultRequest,\r\n  DownloadPdfMergeResultResponse,\r\n  DownloadPdfMixResultRequest,\r\n  DownloadPdfMixResultResponse,\r\n  // SERVICE - SHARE FILE\r\n  GetShareFilesRequest,\r\n  GetShareFilesResponse,\r\n  UploadShareFileRequest,\r\n  UploadShareFileResponse,\r\n  DownloadShareFileRequest,\r\n  DownloadShareFileResponse,\r\n  DeleteShareFileRequest,\r\n  DeleteShareFileResponse,\r\n  // SERVICE - COUNTER\r\n  GetCountersRequest,\r\n  GetCountersResponse,\r\n  AddCounterRequest,\r\n  AddCounterResponse,\r\n  UpdateCounterRequest,\r\n  UpdateCounterResponse,\r\n  DeleteCounterRequest,\r\n  DeleteCounterResponse,\r\n  // WORKFLOW - FLOW\r\n  GetFlowsRequest,\r\n  GetFlowsResponse,\r\n  AddFlowRequest,\r\n  AddFlowResponse,\r\n  UpdateFlowRequest,\r\n  UpdateFlowResponse,\r\n  DeleteFlowRequest,\r\n  DeleteFlowResponse,\r\n  // WORKFLOW - FLOW ITEM\r\n  GetFlowItemRequest,\r\n  GetFlowItemResponse,\r\n  RestartFlowItemRequest,\r\n  RestartFlowItemResponse,\r\n  GetManyFlowItemsRequest,\r\n  GetManyFlowItemsResponse,\r\n  GetFlowItemStepsRequest,\r\n  GetFlowItemStepsResponse,\r\n};\r\n","import { Notify } from \"../../domain/command\";\r\n\r\nimport {\r\n  NegativeResponse,\r\n  GetInfoRequest,\r\n  GetInfoResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n} from \"../../domain/event\";\r\n\r\nclass WrongResponseError extends Error {}\r\nclass WrongErrorType extends Error {}\r\n\r\nconst notify = (event, uow) => {\r\n  const actions = {\r\n    success: uow.notificator.success,\r\n    warning: uow.notificator.warning,\r\n    info: uow.notificator.info,\r\n    error: uow.notificator.error,\r\n  };\r\n\r\n  if (!Object.prototype.hasOwnProperty.call(actions, event.level)) {\r\n    throw new WrongErrorType('Wrong error type \"' + event.level + '\"');\r\n  }\r\n\r\n  actions[event.level](event.text);\r\n};\r\n\r\nconst notify_api_error = (event, uow) => {\r\n  const errors = {\r\n    \"Auth.Credentials.Fail\": [\"error\", \"Неверные учетные данные\"],\r\n    \"Auth.Credentials.Blocked\": [\"error\", \"Учетная запись заблокирована\"],\r\n    \"Auth.Token.Fail\": [\"error\", \"Неверные учетные данные\"],\r\n    \"Auth.Token.Blocked\": [\"error\", \"Учетная запись заблокирована\"],\r\n    \"Auth.Token.NotAllowed\": [\"error\", \"Недостаточно прав доступа\"],\r\n    \"User.Error.WrongOnBehalf\": [\r\n      \"error\",\r\n      \"Вы не можете работать от данного пользователя\",\r\n    ],\r\n\r\n    \"Api.Server.Unavailable\": [\"error\", \"Сервер недоступен\"],\r\n    \"Api.Server.InternalError\": [\"error\", \"Ошибка сервера\"],\r\n\r\n    \"Database.Error.Integrity\": [\"error\", \"Ошибка базы данных\"],\r\n    \"Database.Error.Validation\": [\"error\", \"Неверные входные данные\"],\r\n    \"Database.Error.Protected\": [\"error\", \"Ошибка удаления связанных данных\"],\r\n\r\n    \"Request.Body.NotJson\": [\"error\", \"Неверный запрос\"],\r\n    \"Parameter.Body.Wrong\": [\"error\", \"Неверный запрос\"],\r\n    \"Parameter.Path.Wrong\": [\"error\", \"Неверный запрос\"],\r\n    \"Parameter.Query.Wrong\": [\"error\", \"Неверный запрос\"],\r\n\r\n    \"Storage.Error.NotAvailable\": [\"error\", \"Хранилище файлов не доступно\"],\r\n\r\n    \"Document.Error.Blocked\": [\"error\", \"Документ заблокирован\"],\r\n    \"DocumentApproval.Error.AlreadyDone\": [\r\n      \"error\",\r\n      \"Согласование уже выполнено\",\r\n    ],\r\n    \"DocumentApproval.Error.CanNotBeDeleted\": [\r\n      \"error\",\r\n      \"Согласование не может быть удалено. Возможно запущен поток согласований.\",\r\n    ],\r\n    \"DocumentApproval.Error.CanNotDelegate\": [\r\n      \"error\",\r\n      \"Делегирование невозможно\",\r\n    ],\r\n    \"DocumentApproval.Error.AlreadyDelegated\": [\r\n      \"error\",\r\n      \"Согласование уже делегировано\",\r\n    ],\r\n    \"DocumentApproval.Error.HasBeenDelegatedWithReturn\": [\r\n      \"error\",\r\n      \"Делегирования с возвратом не завершены\",\r\n    ],\r\n    \"DocumentApprovalFile.Error.CanNotBeDeleted\": [\r\n      \"error\",\r\n      \"Файл согласования не может быть удален\",\r\n    ],\r\n    \"DocumentApprovalFlow.Error.Blocked\": [\r\n      \"error\",\r\n      \"Поток согласований заблокирован\",\r\n    ],\r\n    \"DocumentApprovalFlow.Error.DoesNotExist\": [\r\n      \"error\",\r\n      \"Поток согласований не существует\",\r\n    ],\r\n    \"DocumentApprovalFlow.Error.AlreadyStarted\": [\r\n      \"error\",\r\n      \"Поток согласований уже запущен\",\r\n    ],\r\n    \"DocumentApprovalFlow.Error.AlreadyStopped\": [\r\n      \"error\",\r\n      \"Поток согласований уже остановлен\",\r\n    ],\r\n    \"File.Blocked.AttachedToDocument\": [\"error\", \"Файл прикреплен к документу\"],\r\n    \"File.Uploaded.ZeroSize\": [\r\n      \"error\",\r\n      \"Загруженный файл имеет нулевой размер\",\r\n    ],\r\n    \"File.Error.TooLarge\": [\r\n      \"error\",\r\n      \"Слишком большой файл\",\r\n    ],\r\n    \"MailReceiver.Error.Login\": [\r\n      \"error\",\r\n      \"Ошибка при подключении к почтовому ящику\",\r\n    ],\r\n    \"MailReceiver.Error.List\": [\r\n      \"error\",\r\n      \"Ошибка при получении списка сообщений из почтового ящика\",\r\n    ],\r\n    \"MailReceiver.Error.Fetch\": [\r\n      \"error\",\r\n      \"Ошибка при получении сообщения из почтового ящика\",\r\n    ],\r\n    \"MailParser.Error.WrongBytes\": [\r\n      \"error\",\r\n      \"Ошибка при парсинге сообщения\",\r\n    ],\r\n    \"MailParser.Error.Headers\": [\r\n      \"error\",\r\n      \"Ошибка при получении заголовков сообщения\",\r\n    ],\r\n    \"MailParser.Error.TextBody\": [\r\n      \"error\",\r\n      \"Ошибка при получении тела сообщения в формате text\",\r\n    ],\r\n    \"MailParser.Error.HtmlBody\": [\r\n      \"error\",\r\n      \"Ошибка при получении тела сообщения в формате html\",\r\n    ],\r\n    \"MailParser.Error.Attachment\": [\r\n      \"error\",\r\n      \"Ошибка при получении вложения сообщения\",\r\n    ],\r\n    \"MailParser.Error.CidImage\": [\r\n      \"error\",\r\n      \"Ошибка при извлечении изображения из письма\",\r\n    ],\r\n    \"MailParser.Error.ConvertHtmlBody\": [\r\n      \"error\",\r\n      \"Ошибка при конвертировании тела сообщения в формате html\",\r\n    ],\r\n    \"MailChannel.Error.Settings\": [\r\n      \"error\",\r\n      \"Неверные настройки почтового канала\",\r\n    ],\r\n    \"MailMessage.Body.NotFound\": [\r\n      \"error\",\r\n      \"Тело сообщения в запрошенном формате отсутствует\",\r\n    ],\r\n    \"Pdf.Error.Operation\": [\r\n      \"error\",\r\n      \"Ошибка операции над PDF файлом\",\r\n    ],\r\n    \"Transmittal.Error.CoverSheet\": [\r\n      \"error\",\r\n      \"Ошибка создания накладной трансмиттала\",\r\n    ],\r\n  };\r\n\r\n  if (!Object.prototype.hasOwnProperty.call(errors, event.code)) {\r\n    console.log('Неизвестный код ответа API \"' + event.code + '\"');\r\n    uow.push_message(new Notify(\"error\", \"Неизвестная ошибка\"));\r\n    return;\r\n  }\r\n  const [level, text] = errors[event.code];\r\n  uow.push_message(new Notify(level, text));\r\n};\r\n\r\nconst get_info = async (event, uow) => {\r\n  const request = new GetInfoRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetInfoResponse) {\r\n    uow.info_repository.set_approval_actions_count(\r\n      response.data.approval_actions_count\r\n    );\r\n    uow.info_repository.set_approval_orders_count(\r\n      response.data.approval_orders_count\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n\r\nexport {\r\n  notify,\r\n  notify_api_error,\r\n  get_info,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  LoginCredentialsRequest,\r\n  LoginCredentialsResponse,\r\n  LoginTokenRequest,\r\n  LoginTokenResponse,\r\n  GetUsersRequest,\r\n  GetUsersResponse,\r\n  SetUserRequest,\r\n  SetUserResponse,\r\n  DeleteUserRequest,\r\n  DeleteUserResponse,\r\n  GetUserReplacementsRequest,\r\n  GetUserReplacementsResponse,\r\n  AddUserReplacementRequest,\r\n  AddUserReplacementResponse,\r\n  DeleteUserReplacementRequest,\r\n  DeleteUserReplacementResponse,\r\n  GetUserReplacementsOfUserRequest,\r\n  GetUserReplacementsOfUserResponse,\r\n  AddUserReplacementToUserRequest,\r\n  AddUserReplacementToUserResponse,\r\n  DeleteUserReplacementFromUserRequest,\r\n  DeleteUserReplacementFromUserResponse,\r\n  GetOnBehalfUsersRequest,\r\n  GetOnBehalfUsersResponse,\r\n  SetOnBehalfUserRequest,\r\n  SetOnBehalfUserResponse,\r\n  DeleteOnBehalfUserRequest,\r\n  DeleteOnBehalfUserResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  UserLoginSuccess,\r\n  UserLogoutSuccess,\r\n  UsersUpdateSuccess,\r\n  UsersDeleteSuccess,\r\n  UserReplacementAddSuccess,\r\n  UserReplacementDeleteSuccess,\r\n  OnBehalfUserChangeSuccess,\r\n  OnBehalfUserDeleteSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { User } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_user_response_obj_to_model = (obj) => {\r\n  const user = new User(\r\n    obj.username,\r\n    obj.email,\r\n    obj.first_name,\r\n    obj.last_name,\r\n    obj.patronomic,\r\n    obj.position,\r\n    obj.department,\r\n    obj.is_active,\r\n    obj.access_group_regex,\r\n    obj.role,\r\n    obj.role_inside_group,\r\n    obj.role_outside_group,\r\n    obj.on_behalf\r\n  );\r\n\r\n  return user;\r\n};\r\n\r\nconst login_with_credentials = async (event, uow) => {\r\n  uow.user_repository.reset_keeping_refs();\r\n  uow.token_repository.reset();\r\n\r\n  const request = new LoginCredentialsRequest({\r\n    username: event.username,\r\n    password: event.password,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof LoginCredentialsResponse) {\r\n    uow.user_repository.set_current(\r\n      convert_user_response_obj_to_model(response.data)\r\n    );\r\n    uow.token_repository.set_auth_token(response.data.auth_token);\r\n    uow.api.set_auth_token(response.data.auth_token);\r\n    uow.permission_repository.reset();\r\n    uow.push_message(new UserLoginSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst login_with_token = async (event, uow) => {\r\n  const request = new LoginTokenRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof LoginTokenResponse) {\r\n    uow.user_repository.set_current(\r\n      convert_user_response_obj_to_model(response.data)\r\n    );\r\n    uow.permission_repository.reset();\r\n    uow.push_message(new UserLoginSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst logout = (event, uow) => {\r\n  uow.user_repository.reset();\r\n  uow.token_repository.reset();\r\n  uow.permission_repository.reset();\r\n  uow.push_message(new UserLogoutSuccess());\r\n};\r\n\r\nconst get_users = async (event, uow) => {\r\n  const request = new GetUsersRequest();\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUsersResponse) {\r\n    response.data.forEach((e) => {\r\n      const user = convert_user_response_obj_to_model(e);\r\n      uow.user_repository.set(user.username, user);\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst set_user = async (event, uow) => {\r\n  const request = new SetUserRequest({\r\n    username: event.username,\r\n    is_active: event.is_active,\r\n    access_group_regex: event.access_group_regex,\r\n    role: event.role,\r\n    role_inside_group: event.role_inside_group,\r\n    role_outside_group: event.role_outside_group,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof SetUserResponse) {\r\n    const user = convert_user_response_obj_to_model(response.data);\r\n    uow.user_repository.set(user.username, user);\r\n    uow.push_message(new UsersUpdateSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user = async (event, uow) => {\r\n  const request = new DeleteUserRequest({\r\n    username: event.username,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserResponse) {\r\n    uow.user_repository.delete(event.username);\r\n    uow.push_message(new UsersDeleteSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_user_replacements = async (event, uow) => {\r\n  const current_user = uow.user_repository.get_current();\r\n\r\n  const request = new GetUserReplacementsRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserReplacementsResponse) {\r\n    response.data.forEach((e) => {\r\n      const user = convert_user_response_obj_to_model(e);\r\n      uow.user_replacement_repository.set(\r\n        current_user.value.username,\r\n        user.username,\r\n        user\r\n      );\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_user_replacement = async (event, uow) => {\r\n  const current_user = uow.user_repository.get_current();\r\n\r\n  const request = new AddUserReplacementRequest({\r\n    username: event.username,\r\n  });\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddUserReplacementResponse) {\r\n    const user = convert_user_response_obj_to_model(response.data);\r\n    uow.user_replacement_repository.set(\r\n      current_user.value.username,\r\n      user.username,\r\n      user\r\n    );\r\n    uow.push_message(new UserReplacementAddSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user_replacement = async (event, uow) => {\r\n  const current_user = uow.user_repository.get_current();\r\n\r\n  const request = new DeleteUserReplacementRequest({\r\n    username: event.username,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserReplacementResponse) {\r\n    uow.user_replacement_repository.delete(\r\n      current_user.value.username,\r\n      event.username\r\n    );\r\n    uow.push_message(new UserReplacementDeleteSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_user_replacements_of_user = async (event, uow) => {\r\n  uow.user_replacement_repository.reset_keeping_refs(event.username);\r\n\r\n  const request = new GetUserReplacementsOfUserRequest({\r\n    username: event.username,\r\n  });\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserReplacementsOfUserResponse) {\r\n    response.data.forEach((e) => {\r\n      const user = convert_user_response_obj_to_model(e);\r\n      uow.user_replacement_repository.set(\r\n        event.username,\r\n        user.username,\r\n        user\r\n      );\r\n    });\r\n\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_user_replacement_to_user = async (event, uow) => {\r\n  const request = new AddUserReplacementToUserRequest({\r\n    username_to_be_replaced : event.username_to_be_replaced,\r\n    replaced_with_username : event.replaced_with_username\r\n  });\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddUserReplacementToUserResponse) {\r\n    const user = convert_user_response_obj_to_model(response.data);\r\n    uow.user_replacement_repository.set(\r\n      event.username_to_be_replaced,\r\n      user.username,\r\n      user\r\n    );\r\n    uow.push_message(new UserReplacementAddSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user_replacement_from_user = async (event, uow) => {\r\n  const request = new DeleteUserReplacementFromUserRequest({\r\n    username_to_be_replaced : event.username_to_be_replaced,\r\n    replaced_with_username : event.replaced_with_username\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserReplacementFromUserResponse) {\r\n    uow.user_replacement_repository.delete(\r\n      event.username_to_be_replaced,\r\n      event.replaced_with_username\r\n    );\r\n    uow.push_message(new UserReplacementDeleteSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n\r\nconst get_on_behalf_users = async (event, uow) => {\r\n  const request = new GetOnBehalfUsersRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetOnBehalfUsersResponse) {\r\n    uow.user_repository.set_on_behalf_users(\r\n      response.data.map((e) => convert_user_response_obj_to_model(e))\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst set_on_behalf_user = async (event, uow) => {\r\n  const request = new SetOnBehalfUserRequest({\r\n    username: event.username,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof SetOnBehalfUserResponse) {\r\n    uow.user_repository.set_current(\r\n      convert_user_response_obj_to_model(response.data)\r\n    );\r\n    uow.push_message(new OnBehalfUserChangeSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_on_behalf_user = async (event, uow) => {\r\n  const request = new DeleteOnBehalfUserRequest({\r\n    username: event.username,\r\n  });\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteOnBehalfUserResponse) {\r\n    uow.user_repository.set_current(\r\n      convert_user_response_obj_to_model(response.data)\r\n    );\r\n    uow.push_message(new OnBehalfUserDeleteSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// Возвращает объект, в котором ключи - email, значения - Фамилия Имя пользователей\r\n// Пользователи должны быть загружены в репозиторий\r\nconst get_user_email_context = async (event, uow) => {\r\n  const users = uow.user_repository\r\n    .values()\r\n    .map((e) => e.value)\r\n    .filter((e) => e.is_active === true);\r\n\r\n  let attrs = {};\r\n  users.forEach((x) => {\r\n    if (x.email) attrs[x.email] = (x.last_name + \" \" + x.first_name).trim();\r\n  });\r\n\r\n  uow.context_repository.set(event.ctx_id, event.ctx_name, attrs);\r\n};\r\n\r\nexport {\r\n  login_with_credentials,\r\n  login_with_token,\r\n  logout,\r\n  get_users,\r\n  set_user,\r\n  delete_user,\r\n  get_user_replacements,\r\n  add_user_replacement,\r\n  delete_user_replacement,\r\n  get_user_replacements_of_user,\r\n  add_user_replacement_to_user,\r\n  delete_user_replacement_from_user,\r\n  get_on_behalf_users,\r\n  set_on_behalf_user,\r\n  delete_on_behalf_user,\r\n  get_user_email_context,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetUserGroupsRequest,\r\n  GetUserGroupsResponse,\r\n  AddUserGroupRequest,\r\n  AddUserGroupResponse,\r\n  SetUserGroupRequest,\r\n  SetUserGroupResponse,\r\n  DeleteUserGroupRequest,\r\n  DeleteUserGroupResponse,\r\n  AddUserToUserGroupRequest,\r\n  AddUserToUserGroupResponse,\r\n  DeleteUserFromUserGroupRequest,\r\n  DeleteUserFromUserGroupResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport { User, UserGroup } from \"../../domain/model\";\r\n\r\nimport {\r\n  ApiError,\r\n  AddUserGroupSuccess,\r\n  UpdateUserGroupSuccess,\r\n  DeleteUserGroupSuccess,\r\n} from \"../../domain/event\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst set_user_group_into_repository = (uow, obj) => {\r\n  // Создаем группу\r\n  const group = new UserGroup(obj.id, obj.name, obj.slug, obj.is_private);\r\n  uow.usergroup_repository.set(obj.id, group);\r\n\r\n  // При получении своих групп, пользователи не передаются\r\n  // Добавляем пользователей к группе\r\n  if (obj.users)\r\n    obj.users.forEach((data) => {\r\n      const user = new User(\r\n        data.username,\r\n        data.email,\r\n        data.first_name,\r\n        data.last_name,\r\n        data.patronomic,\r\n        data.position,\r\n        data.department,\r\n        data.is_active,\r\n        data.role,\r\n        data.role_inside_group,\r\n        data.role_outside_group,\r\n        data.on_behalf\r\n      );\r\n\r\n      group.add_user(user);\r\n    });\r\n};\r\n\r\nconst get_user_groups = async (event, uow) => {\r\n  uow.usergroup_repository.reset_keeping_refs();\r\n\r\n  const request = new GetUserGroupsRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserGroupsResponse) {\r\n    response.data.forEach((obj) => set_user_group_into_repository(uow, obj));\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_user_group = async (event, uow) => {\r\n  const request = new AddUserGroupRequest({\r\n    name: event.name,\r\n    slug: event.slug,\r\n    is_private: event.is_private,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddUserGroupResponse) {\r\n    set_user_group_into_repository(uow, response.data);\r\n    uow.push_message(new AddUserGroupSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_user_group = async (event, uow) => {\r\n  const request = new SetUserGroupRequest({\r\n    id: event.id,\r\n    name: event.name,\r\n    slug: event.slug,\r\n    is_private: event.is_private,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof SetUserGroupResponse) {\r\n    set_user_group_into_repository(uow, response.data);\r\n    uow.push_message(new UpdateUserGroupSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user_group = async (event, uow) => {\r\n  const request = new DeleteUserGroupRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserGroupResponse) {\r\n    uow.usergroup_repository.delete(event.id);\r\n    uow.push_message(new DeleteUserGroupSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_user_to_user_group = async (event, uow) => {\r\n  const request = new AddUserToUserGroupRequest({\r\n    id: event.id,\r\n    username: event.username,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddUserToUserGroupResponse) {\r\n    set_user_group_into_repository(uow, response.data);\r\n    uow.push_message(new UpdateUserGroupSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user_from_user_group = async (event, uow) => {\r\n  const request = new DeleteUserFromUserGroupRequest({\r\n    id: event.id,\r\n    username: event.username,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserFromUserGroupResponse) {\r\n    set_user_group_into_repository(uow, response.data);\r\n    uow.push_message(new UpdateUserGroupSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst set_current_user_group = (event, uow) => {\r\n  // Устанавливаем текущую группу пользователей\r\n  if (event.usergroup === null) console.log(\"Запрещенная группа пользователей\");\r\n\r\n  const actual_group = uow.usergroup_repository.get_current();\r\n  if (actual_group.value && actual_group.value.id === event.usergroup.id)\r\n    return;\r\n\r\n  uow.usergroup_repository.set_current(event.usergroup);\r\n  // Сбрасываем документы во всех выборках\r\n  uow.folder_repository.values().forEach((folder_ref) => {\r\n    uow.doc_repository.reset(folder_ref.value.id);\r\n  });\r\n};\r\n\r\nexport {\r\n  get_user_groups,\r\n  add_user_group,\r\n  update_user_group,\r\n  delete_user_group,\r\n  add_user_to_user_group,\r\n  delete_user_from_user_group,\r\n  set_current_user_group,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetPermissionsRequest,\r\n  GetPermissionsResponse,\r\n  AddPermissionRequest,\r\n  AddPermissionResponse,\r\n  DeletePermissionRequest,\r\n  DeletePermissionResponse,\r\n  GetUserPermissionsRequest,\r\n  GetUserPermissionsResponse,\r\n  GetUserPermissionsForFolderRequest,\r\n  GetUserPermissionsForFolderResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  AddPermissionSuccess,\r\n  DeletePermissionSuccess,\r\n} from \"../../domain/event\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst get_permissions = async (event, uow) => {\r\n  const request = new GetPermissionsRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetPermissionsResponse) {\r\n    uow.role_permissions_repository.set_variants(response.permissions);\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst add_permission = async (event, uow) => {\r\n  const request = new AddPermissionRequest({\r\n    role: event.role,\r\n    permission: event.perm,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddPermissionResponse) {\r\n    uow.role_permissions_repository.set(event.role, event.perm, true);\r\n    uow.push_message(new AddPermissionSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst delete_permission = async (event, uow) => {\r\n  const request = new DeletePermissionRequest({\r\n    role: event.role,\r\n    permission: event.perm,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeletePermissionResponse) {\r\n    uow.role_permissions_repository.set(event.role, event.perm, false);\r\n    uow.push_message(new DeletePermissionSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_user_permissions = async (event, uow) => {\r\n  uow.permission_repository.reset();\r\n\r\n  const request = new GetUserPermissionsRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserPermissionsResponse) {\r\n    response.data.forEach((perm) => {\r\n      uow.permission_repository.add(perm.name);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst get_user_permissions_for_folder = async (event, uow) => {\r\n  uow.permission_repository.reset_for_folder(event.folder_id);\r\n\r\n  const request = new GetUserPermissionsForFolderRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserPermissionsForFolderResponse) {\r\n    response.data.forEach((obj) => {\r\n      uow.permission_repository.add_for_folder(event.folder_id, obj.name);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  get_permissions,\r\n  add_permission,\r\n  delete_permission,\r\n  get_user_permissions,\r\n  get_user_permissions_for_folder,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetRolesRequest,\r\n  GetRolesResponse,\r\n  AddRoleRequest,\r\n  AddRoleResponse,\r\n  DeleteRoleRequest,\r\n  DeleteRoleResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  AddRoleSuccess,\r\n  DeleteRoleSuccess,\r\n} from \"../../domain/event\";\r\n\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\n\r\nconst get_roles = async (event, uow) => {\r\n  const request = new GetRolesRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetRolesResponse) {\r\n    // Устанавливаем варианты ролей\r\n    uow.user_folder_settings_repository.set_role_variants(\r\n      response.data.map((e) => e.name)\r\n    );\r\n\r\n    // Сбрасываем установленные флаги\r\n    uow.role_permissions_repository.reset();\r\n\r\n    // Устанавливаем флаги разрешений по ролям\r\n    response.data.forEach((role) => {\r\n      role.permissions.forEach((perm) => {\r\n        uow.role_permissions_repository.set(role.name, perm.name, true);\r\n      });\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst add_role = async (event, uow) => {\r\n  const request = new AddRoleRequest({\r\n    name: event.name,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddRoleResponse) {\r\n    uow.push_message(new AddRoleSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst delete_role = async (event, uow) => {\r\n  const request = new DeleteRoleRequest({\r\n    name: event.name,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteRoleResponse) {\r\n    uow.push_message(new DeleteRoleSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n\r\nexport {\r\n  get_roles,\r\n  add_role,\r\n  delete_role,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetFoldersRequest,\r\n  GetFoldersResponse,\r\n  AddFolderRequest,\r\n  AddFolderResponse,\r\n  DeleteFolderRequest,\r\n  DeleteFolderResponse,\r\n  UpdateFolderRequest,\r\n  UpdateFolderResponse,\r\n  GetUserFolderSettingsRequest,\r\n  GetUserFolderSettingsResponse,\r\n  AddUserFolderSettingsRequest,\r\n  AddUserFolderSettingsResponse,\r\n  UpdateUserFolderSettingsRequest,\r\n  UpdateUserFolderSettingsResponse,\r\n  DeleteUserFolderSettingsRequest,\r\n  DeleteUserFolderSettingsResponse,\r\n  GetUserSearchSchemaRequest,\r\n  GetUserSearchSchemaResponse,\r\n  SetUserSearchSchemaRequest,\r\n  SetUserSearchSchemaResponse,\r\n  DeleteUserSearchSchemaRequest,\r\n  DeleteUserSearchSchemaResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  FoldersAddSuccess,\r\n  FoldersUpdateSuccess,\r\n  FoldersDeleteSuccess,\r\n  AddUserFolderSettingsSuccess,\r\n  UpdateUserFolderSettingsSuccess,\r\n  DeleteUserFolderSettingsSuccess,\r\n  SetUserSearchSchemaSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { Folder, UserFolderSetting } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_folder_response_obj_to_model = (obj) => {\r\n  const folder = new Folder(obj.id);\r\n  folder.name = obj.name;\r\n  folder.storage_path = obj.storage_path;\r\n  folder.master_usergroup_slug = obj.master_usergroup_slug;\r\n  folder.access_group = obj.access_group;\r\n\r\n  folder.version = obj.settings.version;\r\n  folder.validation_constraints = obj.settings.validation_constraints;\r\n  folder.search_schema = obj.settings.search_schema;\r\n  folder.form_schema = obj.settings.form_schema;\r\n  folder.max_file_size = obj.settings.max_file_size;\r\n  folder.set_filename_pattern(obj.settings.filename_pattern);\r\n  folder.description_pattern = obj.settings.description_pattern;\r\n  folder.is_empty_search_allowed = obj.settings.is_empty_search_allowed;\r\n\r\n  // Внешний вид страницы\r\n  folder.is_list_container_required = obj.settings.is_list_container_required;\r\n  folder.is_doc_container_required = obj.settings.is_doc_container_required;\r\n  folder.doc_container_parsers = obj.settings.doc_container_parsers;\r\n\r\n  // Сортировка по умолчанию\r\n  if (obj.settings.sort_by) {\r\n    folder.default_sort_attribute = obj.settings.sort_by.name;\r\n    folder.default_sort_order = obj.settings.sort_by.asc;\r\n  }\r\n\r\n  // Правила сравнения при сортировке\r\n  if (obj.settings.sort_rules) folder.sort_rules = obj.settings.sort_rules;\r\n\r\n  // Режим по умолчанию\r\n  if (obj.settings.mode) folder.default_mode = obj.settings.mode;\r\n\r\n  // Группировка\r\n  folder.group_by = obj.settings.group_by;\r\n\r\n  // Строгая валидация\r\n  folder.strict_validation = obj.settings.strict_validation;\r\n\r\n  // Кнопки действий\r\n  if (obj.settings.action_buttons) folder.action_buttons = obj.settings.action_buttons;\r\n  if (obj.settings.search_action_buttons) folder.search_action_buttons = obj.settings.search_action_buttons;\r\n\r\n  // Правила для согласований\r\n  if (obj.settings.approval_rules) folder.approval_rules = obj.settings.approval_rules;\r\n\r\n  return folder;\r\n};\r\n\r\nconst get_folders = async (event, uow) => {\r\n  const request = new GetFoldersRequest();\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetFoldersResponse) {\r\n    response.data.forEach((obj) =>\r\n      uow.folder_repository.set(\r\n        obj.id,\r\n        convert_folder_response_obj_to_model(obj)\r\n      )\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst add_folder = async (event, uow) => {\r\n  const request = new AddFolderRequest({\r\n    name: event.name,\r\n    storage_path: event.storage_path,\r\n    master_usergroup_slug: event.master_usergroup_slug,\r\n    access_group: event.access_group,\r\n    settings: event.settings,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddFolderResponse) {\r\n    const folder = convert_folder_response_obj_to_model(response.data);\r\n    uow.folder_repository.set(folder.id, folder);\r\n    uow.push_message(new FoldersAddSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst update_folder = async (event, uow) => {\r\n  const request = new UpdateFolderRequest({\r\n    id: event.id,\r\n    name: event.name,\r\n    storage_path: event.storage_path,\r\n    master_usergroup_slug: event.master_usergroup_slug,\r\n    access_group: event.access_group,\r\n    settings: event.settings,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UpdateFolderResponse) {\r\n    const folder = convert_folder_response_obj_to_model(response.data);\r\n    uow.folder_repository.set(folder.id, folder);\r\n    uow.push_message(new FoldersUpdateSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst delete_folder = async (event, uow) => {\r\n  const request = new DeleteFolderRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteFolderResponse) {\r\n    uow.folder_repository.delete(event.id);\r\n    uow.push_message(new FoldersDeleteSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst convert_user_folder_settings_to_model = (obj) =>\r\n  new UserFolderSetting(\r\n    obj.id,\r\n    obj.folder,\r\n    obj.usergroup,\r\n    obj.user,\r\n    obj.role,\r\n    obj.search_schema\r\n  );\r\n\r\nconst get_user_folder_settings = async (event, uow) => {\r\n  const request = new GetUserFolderSettingsRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserFolderSettingsResponse) {\r\n    response.data.forEach((e) => {\r\n      const obj = convert_user_folder_settings_to_model(e)\r\n      uow.user_folder_settings_repository.set(obj.id, obj);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_user_folder_settings = async (event, uow) => {\r\n  const request = new AddUserFolderSettingsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_slug: event.usergroup_slug,\r\n    username: event.username,\r\n    role: event.role,\r\n    search_schema: event.search_schema,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddUserFolderSettingsResponse) {\r\n    const obj = convert_user_folder_settings_to_model(response.data)\r\n    uow.user_folder_settings_repository.set(obj.id, obj);\r\n    uow.push_message(new AddUserFolderSettingsSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst set_user_folder_settings = async (event, uow) => {\r\n  const request = new UpdateUserFolderSettingsRequest({\r\n    id: event.id,\r\n    folder_id: event.folder_id,\r\n    usergroup_slug: event.usergroup_slug,\r\n    username: event.username,\r\n    role: event.role,\r\n    search_schema: event.search_schema,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UpdateUserFolderSettingsResponse) {\r\n    const obj = convert_user_folder_settings_to_model(response.data)\r\n    uow.user_folder_settings_repository.set(obj.id, obj);\r\n    uow.push_message(new UpdateUserFolderSettingsSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user_folder_settings = async (event, uow) => {\r\n  const request = new DeleteUserFolderSettingsRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserFolderSettingsResponse) {\r\n    uow.user_folder_settings_repository.delete(event.id);\r\n    uow.push_message(new DeleteUserFolderSettingsSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_user_search_schema = async (event, uow) => {\r\n  const request = new GetUserSearchSchemaRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUserSearchSchemaResponse) {\r\n    uow.folder_repository.set_user_search_schema(\r\n      event.folder_id,\r\n      response.data\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst set_user_search_schema = async (event, uow) => {\r\n  const request = new SetUserSearchSchemaRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    search_schema: event.search_schema,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof SetUserSearchSchemaResponse) {\r\n    uow.folder_repository.set_user_search_schema(\r\n      event.folder_id,\r\n      event.search_schema\r\n    );\r\n    uow.push_message(new SetUserSearchSchemaSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_user_search_schema = async (event, uow) => {\r\n  const request = new DeleteUserSearchSchemaRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteUserSearchSchemaResponse) {\r\n    uow.folder_repository.delete_user_search_schema(event.folder_id);\r\n    uow.push_message(new SetUserSearchSchemaSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  get_folders,\r\n  add_folder,\r\n  update_folder,\r\n  delete_folder,\r\n  get_user_folder_settings,\r\n  add_user_folder_settings,\r\n  set_user_folder_settings,\r\n  delete_user_folder_settings,\r\n  get_user_search_schema,\r\n  set_user_search_schema,\r\n  delete_user_search_schema,\r\n};\r\n","import {\r\n  DeleteManyDocuments,\r\n  SaveManyDocuments,\r\n  AddDocumentModel,\r\n} from \"../../domain/command\";\r\n\r\nimport {\r\n  NegativeResponse,\r\n  GetDocumentRequest,\r\n  GetDocumentResponse,\r\n  GetManyDocumentsRequest,\r\n  GetManyDocumentsResponse,\r\n  SaveManyDocumentsRequest,\r\n  SaveManyDocumentsResponse,\r\n  DeleteManyDocumentsRequest,\r\n  DeleteManyDocumentsResponse,\r\n  DuplicateDocumentToUsergroupRequest,\r\n  DuplicateDocumentToUsergroupResponse,\r\n  DuplicateManyDocumentsToUsergroupRequest,\r\n  DuplicateManyDocumentsToUsergroupResponse,\r\n  GetPreviousDocumentsRequest,\r\n  GetPreviousDocumentsResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  SaveManyDocumentsSuccess,\r\n  DeleteManyDocumentsSuccess,\r\n  DocumentAttributesChanged,\r\n  DocumentFilesAreUploading,\r\n  DuplicateDocumentToUsergroupSuccess,\r\n  DuplicateManyDocumentsToUsergroupSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { Document, BaseFile } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_doc_response_obj_to_model = (obj, is_created_first_time) => {\r\n  const base_files = obj.files.map((f) => {\r\n    const base_file = new BaseFile(f.id, f.name, f.size);\r\n    base_file.set_size(f.size);\r\n    return base_file;\r\n  });\r\n\r\n  const doc = new Document(\r\n    obj.id,\r\n    obj.folder_id,\r\n    obj.usergroup_id,\r\n    is_created_first_time,\r\n    obj.union,\r\n    obj.created_at ? new Date(obj.created_at) : obj.created_at,\r\n    obj.updated_at ? new Date(obj.updated_at) : obj.updated_at\r\n  );\r\n\r\n  //  Устанавливаем атрибуты\r\n  Object.keys(obj.data).forEach((key) => doc.set_attribute(key, obj.data[key]));\r\n\r\n  // Добавляем файлы к документу\r\n  base_files.forEach((base_file) => {\r\n    doc.add_file(base_file.id, base_file);\r\n  });\r\n\r\n  // Обозначаем заблокирован документ или нет\r\n  doc.is_blocked = obj.is_blocked;\r\n\r\n  // Добавляем описание к документу\r\n  doc.description = obj.description;\r\n\r\n  return doc;\r\n};\r\n\r\nconst get_document = async (event, uow) => {\r\n  const folder = uow.folder_repository.get(event.folder_id);\r\n\r\n  const request = new GetDocumentRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetDocumentResponse) {\r\n    const doc = convert_doc_response_obj_to_model(response.data, false);\r\n    doc.description_pattern = folder.value.description_pattern;\r\n    uow.push_message(\r\n      new AddDocumentModel(event.folder_id, event.usergroup_id, doc, false)\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_many_documents = async (event, uow) => {\r\n  uow.doc_repository.reset(event.folder_id);\r\n\r\n  const folder = uow.folder_repository.get(event.folder_id);\r\n  const query = structuredClone(event.query);\r\n\r\n  if (event.limit) query[\"_LIMIT\"] = event.limit;\r\n  if (event.offset) query[\"_OFFSET\"] = event.offset;\r\n  if (event.sort_by) query[\"_SORT_BY\"] = event.sort_by;\r\n\r\n  if (event.sort_asc === false) query[\"_SORT_ASC\"] = \"DESC\";\r\n\r\n  if (event.sort_rule && event.sort_rule !== \"DEFAULT\")\r\n    query[\"_SORT_RULE\"] = event.sort_rule;\r\n\r\n  const request = new GetManyDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    query: query,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetManyDocumentsResponse) {\r\n    response.data.documents.forEach((obj) => {\r\n      const doc = convert_doc_response_obj_to_model(obj, false);\r\n      doc.description_pattern = folder.value.description_pattern;\r\n\r\n      uow.push_message(\r\n        new AddDocumentModel(event.folder_id, event.usergroup_id, doc, false)\r\n      );\r\n    });\r\n    uow.doc_repository.set_count(response.data.count);\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst set_document_attribute = (event, uow) => {\r\n  if (uow.doc_repository.is_blocked(event.folder_id, event.document_id)) return;\r\n\r\n  uow.doc_repository.set_attribute(\r\n    event.folder_id,\r\n    event.document_id,\r\n    event.name,\r\n    event.value,\r\n    event.to_be_decoded\r\n  );\r\n  uow.doc_repository.mark_as_modified(event.folder_id, event.document_id);\r\n  uow.push_message(\r\n    new DocumentAttributesChanged(\r\n      event.folder_id,\r\n      event.usergroup_id,\r\n      event.document_id\r\n    )\r\n  );\r\n};\r\n\r\nconst save_documents_in_folder = async (event, uow) => {\r\n  const doc_ids = uow.doc_repository.pure_keys(event.folder_id);\r\n  let to_be_deleted = [];\r\n  let to_be_created = [];\r\n\r\n  const handle_function = async (doc_id) => {\r\n    const is_deleted = uow.doc_repository.is_deleted(event.folder_id, doc_id);\r\n    if (is_deleted) {\r\n      const is_created_first_time = uow.doc_repository.is_created_first_time(\r\n        event.folder_id,\r\n        doc_id\r\n      );\r\n      // Если документ создан впервые, то просто удаляем его, так как\r\n      // на сервере его еще нет\r\n      if (is_created_first_time) {\r\n        uow.doc_repository.delete(event.folder_id, doc_id);\r\n      } else {\r\n        // Если не впервые, добавляем в список удаления на сервере\r\n        to_be_deleted.push(doc_id);\r\n      }\r\n      return true;\r\n    }\r\n\r\n    const is_saved = uow.doc_repository.is_saved(event.folder_id, doc_id);\r\n    if (!is_saved) {\r\n      const doc = uow.doc_repository.get(event.folder_id, doc_id).value;\r\n      const attributes = doc.raw_attributes;\r\n      const attach_files_ids = doc.files.map((obj) => obj.id);\r\n\r\n      to_be_created.push({\r\n        id: doc_id,\r\n        union: doc.union,\r\n        data: attributes,\r\n        description: doc.description,\r\n        files: attach_files_ids,\r\n      });\r\n    }\r\n  };\r\n\r\n  // Проверяем окончена ли загрузка файлов\r\n  if (\r\n    !doc_ids.every((id) => uow.doc_repository.uploaded(event.folder_id, id))\r\n  ) {\r\n    uow.push_message(new DocumentFilesAreUploading());\r\n    return false;\r\n  }\r\n\r\n  doc_ids.forEach((id) => {\r\n    // Если документ не заблокирован, начинаем его обработку\r\n    if (!uow.doc_repository.is_blocked(event.folder_id, id))\r\n      handle_function(id);\r\n  });\r\n\r\n  // Удаляем все документы\r\n  if (to_be_deleted.length > 0)\r\n    await uow.push_message(\r\n      new DeleteManyDocuments(\r\n        event.folder_id,\r\n        event.usergroup_id,\r\n        to_be_deleted\r\n      )\r\n    );\r\n\r\n  // Сохраняем все документы\r\n  if (to_be_created.length > 0)\r\n    await uow.push_message(\r\n      new SaveManyDocuments(event.folder_id, event.usergroup_id, to_be_created)\r\n    );\r\n};\r\n\r\nconst save_many_documents = async (event, uow) => {\r\n  const folder = uow.folder_repository.get(event.folder_id);\r\n\r\n  const request = new SaveManyDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    docs: event.docs,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof SaveManyDocumentsResponse) {\r\n    // Обновляем данные документов в хранилище и маркируем, как сохраненные\r\n    response.data.forEach((obj) => {\r\n      const doc = convert_doc_response_obj_to_model(obj);\r\n      doc.description_pattern = folder.value.description_pattern;\r\n      uow.doc_repository.set(event.folder_id, obj.id, doc);\r\n      uow.doc_repository.mark_as_saved(event.folder_id, obj.id);\r\n    });\r\n    uow.push_message(new SaveManyDocumentsSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst mark_document_as_deleted = (event, uow) => {\r\n  if (uow.doc_repository.is_blocked(event.folder_id, event.document_id)) return;\r\n\r\n  uow.doc_repository\r\n    .files(event.folder_id, event.document_id)\r\n    .forEach((base_file) => {\r\n      uow.file_in_folder_repository.set(\r\n        event.folder_id,\r\n        base_file.id,\r\n        base_file\r\n      );\r\n    });\r\n  uow.doc_repository.mark_as_deleted(event.folder_id, event.document_id);\r\n};\r\n\r\nconst mark_document_as_not_deleted = (event, uow) => {\r\n  if (uow.doc_repository.is_blocked(event.folder_id, event.document_id)) return;\r\n\r\n  uow.doc_repository\r\n    .files(event.folder_id, event.document_id)\r\n    .forEach((base_file) => {\r\n      uow.file_in_folder_repository.delete(event.folder_id, base_file.id);\r\n    });\r\n  uow.doc_repository.mark_as_not_deleted(event.folder_id, event.document_id);\r\n};\r\n\r\nconst delete_many_documents = async (event, uow) => {\r\n  const request = new DeleteManyDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    ids: event.document_ids,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DeleteManyDocumentsResponse) {\r\n    event.document_ids.forEach((id) =>\r\n      uow.doc_repository.delete(event.folder_id, id)\r\n    );\r\n    uow.push_message(new DeleteManyDocumentsSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_document = (event, uow) => {\r\n  const doc = convert_doc_response_obj_to_model(\r\n    {\r\n      id: event.document_id,\r\n      folder_id: event.folder_id,\r\n      usergroup_id: event.usergroup_id,\r\n      union: event.union_id,\r\n      data: event.attributes,\r\n      files: event.files,\r\n      is_blocked: event.is_blocked,\r\n    },\r\n    event.is_created_first_time\r\n  );\r\n\r\n  const folder = uow.folder_repository.get(event.folder_id);\r\n  doc.description_pattern = folder.value.description_pattern;\r\n\r\n  const now_timestamp = Math.floor(Date.now() / 1000);\r\n  doc.set_attribute(\"_CREATED_AT_DATE\", now_timestamp);\r\n  doc.set_attribute(\"_UPDATED_AT_DATE\", now_timestamp);\r\n\r\n  uow.push_message(\r\n    new AddDocumentModel(\r\n      event.folder_id,\r\n      event.usergroup_id,\r\n      doc,\r\n      event.mark_as_modified\r\n    )\r\n  );\r\n};\r\n\r\nconst add_document_model = (event, uow) => {\r\n  // Добавляем документ в хранилище\r\n  uow.doc_repository.set(event.folder_id, event.doc.id, event.doc);\r\n\r\n  // Добавляем файлы документа в общее хранилище файлов\r\n  event.doc.files.forEach((f) => uow.file_common_repository.set(f.id, f));\r\n\r\n  if (event.mark_as_modified === true)\r\n    uow.doc_repository.mark_as_modified(event.folder_id, event.doc.id);\r\n};\r\n\r\nconst duplicate_document_to_usergroup = async (event, uow) => {\r\n  const request = new DuplicateDocumentToUsergroupRequest({\r\n    folder_id: event.folder_id,\r\n    source_usergroup_id: event.source_usergroup_id,\r\n    target_usergroup_id: event.target_usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DuplicateDocumentToUsergroupResponse) {\r\n    const original_doc = uow.doc_repository.get(\r\n      event.folder_id,\r\n      event.document_id\r\n    ); //Ref\r\n    const copied_doc = convert_doc_response_obj_to_model(response.data, false);\r\n    original_doc.value.add_clone(copied_doc);\r\n    // description_pattern не копируется, так как он не нужен\r\n\r\n    uow.push_message(new DuplicateDocumentToUsergroupSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst duplicate_many_documents_to_usergroup = async (event, uow) => {\r\n  const request = new DuplicateManyDocumentsToUsergroupRequest({\r\n    folder_id: event.folder_id,\r\n    source_usergroup_id: event.source_usergroup_id,\r\n    target_usergroup_id: event.target_usergroup_id,\r\n    document_ids: event.document_ids,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DuplicateManyDocumentsToUsergroupResponse) {\r\n    uow.push_message(new DuplicateManyDocumentsToUsergroupSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// Возвращает атрибуты документа. Документ должен быть уже загружен в репозиторий\r\nconst get_document_attributes_context = (event, uow) => {\r\n  if (!uow.doc_repository.is_saved(event.folder_id, event.document_id)) return;\r\n\r\n  const doc = uow.doc_repository.get(event.folder_id, event.document_id); // Ref\r\n  const attrs = event.is_raw ? doc.value.raw_attributes : doc.value.attributes;\r\n\r\n  uow.context_repository.set(event.ctx_id, event.ctx_name, attrs);\r\n};\r\n\r\n// Запрашивает count предшествующих по дате модификации документов\r\n// с сервера. Возвращает массив из атрибутов attribute_name полученных документов\r\nconst get_document_previous_attribute_context = async (event, uow) => {\r\n  if (!uow.doc_repository.is_saved(event.folder_id, event.document_id)) return;\r\n\r\n  // пытаемся получить id группы пользователей, если мастер-группа\r\n  // пользователей задана у данной папки\r\n  const folder = uow.folder_repository.get(event.folder_id);\r\n  const usergroup_slug = folder.value.master_usergroup_slug;\r\n\r\n  let usergroup_id =\r\n    usergroup_slug === \"\"\r\n      ? null\r\n      : uow.usergroup_repository.get_id_by_slug(usergroup_slug);\r\n\r\n  // Если мастер группа не задана, осуществляем проверку для\r\n  // группы пользователей, в которой находимся\r\n  if (usergroup_id === null) {\r\n    usergroup_id = event.usergroup_id;\r\n  }\r\n\r\n  const request = new GetPreviousDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: usergroup_id,\r\n    document_id: event.document_id,\r\n    count: event.count,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetPreviousDocumentsResponse) {\r\n    const docs = response.data.map((obj) =>\r\n      convert_doc_response_obj_to_model(obj, false)\r\n    );\r\n\r\n    const attrs = docs.map((doc) =>\r\n      event.is_raw\r\n        ? doc.raw_attributes[event.attribute_name]\r\n        : doc.attributes[event.attribute_name]\r\n    );\r\n\r\n    uow.context_repository.set(\r\n      event.ctx_id,\r\n      event.ctx_name,\r\n      attrs.filter((e) => e !== undefined)\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n\r\nexport {\r\n  convert_doc_response_obj_to_model,\r\n  get_document,\r\n  get_many_documents,\r\n  set_document_attribute,\r\n  save_documents_in_folder,\r\n  save_many_documents,\r\n  mark_document_as_deleted,\r\n  mark_document_as_not_deleted,\r\n  delete_many_documents,\r\n  add_document,\r\n  add_document_model,\r\n  duplicate_document_to_usergroup,\r\n  duplicate_many_documents_to_usergroup,\r\n  // CONTEXT\r\n  get_document_attributes_context,\r\n  get_document_previous_attribute_context,\r\n};\r\n","const get_extension_of_file = (filename) => {\r\n  return filename.split('.').pop() || \"\";\r\n}\r\n\r\nexport { get_extension_of_file };\r\n","import { get_extension_of_file } from \"./filename\";\r\n\r\nconst js_download_file = ({ data, filename, mime, bom, inline = false }) => {\r\n  const is_pdf =\r\n    mime === \"application/pdf\" ||\r\n    get_extension_of_file(filename).toLowerCase() == \"pdf\";\r\n\r\n  const is_html =\r\n    mime === \"text/html\" ||\r\n    get_extension_of_file(filename).toLowerCase() === \"html\";\r\n\r\n  const blobData = typeof bom !== \"undefined\" ? [bom, data] : [data];\r\n\r\n  if (!mime && is_pdf) mime = \"application/pdf\";\r\n  if (!mime && is_html) mime = \"text/html\";\r\n\r\n  const blob = new Blob(blobData, { type: mime });\r\n\r\n  if (typeof window.navigator.msSaveBlob !== \"undefined\") {\r\n    // IE workaround for \"HTML7007: One or more blob URLs were\r\n    // revoked by closing the blob for which they were created.\r\n    // These URLs will no longer resolve as the data backing\r\n    // the URL has been freed.\"\r\n    window.navigator.msSaveBlob(blob, filename);\r\n  } else {\r\n    var blobURL =\r\n      window.URL && window.URL.createObjectURL\r\n        ? window.URL.createObjectURL(blob)\r\n        : window.webkitURL.createObjectURL(blob);\r\n\r\n    const tempLink = document.createElement(\"a\");\r\n    tempLink.style.display = \"none\";\r\n    tempLink.href = blobURL;\r\n\r\n    const title = document.createElement(\"title\");\r\n    title.innerText = filename;\r\n\r\n    // Safari thinks _blank anchor are pop ups. We only want to set _blank\r\n    // target if the browser does not support the HTML5 download attribute.\r\n    // This allows you to download files in desktop safari if pop up blocking\r\n    // is enabled.\r\n    if (typeof tempLink.download === \"undefined\") {\r\n      tempLink.setAttribute(\"target\", \"_blank\");\r\n    }\r\n    if (inline === true && (is_pdf || is_html))\r\n      tempLink.addEventListener(\"click\", function (event) {\r\n        event.preventDefault();\r\n        let new_window = window.open(blobURL, \"_blank\");\r\n        new_window.onload = () => new_window.document.head.appendChild(title);\r\n      });\r\n    else tempLink.setAttribute(\"download\", filename);\r\n\r\n    document.body.appendChild(tempLink);\r\n    tempLink.click();\r\n\r\n    // Fixes \"webkit blob resource error 1\"\r\n    setTimeout(function () {\r\n      document.body.removeChild(tempLink);\r\n      window.URL.revokeObjectURL(blobURL);\r\n    }, 5000);\r\n  }\r\n};\r\n\r\nexport { js_download_file };\r\n","import {\r\n  NegativeResponse,\r\n  PushDocumentButtonRequest,\r\n  PushDocumentButtonResponse,\r\n  DownloadTransmittalCoverSheetRequest,\r\n  DownloadTransmittalCoverSheetResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport { ApiError, DocumentButtonPushed } from \"../../domain/event\";\r\n\r\nimport { js_download_file } from \"../utils/file_download\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst push_document_button = async (event, uow) => {\r\n  const request = new PushDocumentButtonRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    action: event.action,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof PushDocumentButtonResponse) {\r\n    uow.push_message(new DocumentButtonPushed());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst handler_1882_dlenc_transmittal = async (\r\n  uow,\r\n  username,\r\n  folder_id,\r\n  usergroup_id,\r\n  document_ids\r\n) => {\r\n\r\n  const request = new DownloadTransmittalCoverSheetRequest({\r\n    folder_id: folder_id,\r\n    usergroup_id: usergroup_id,\r\n    document_ids: document_ids,\r\n    template: \"1882_dlenc\",\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadTransmittalCoverSheetResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst perform_action_on_documents = async (event, uow) => {\r\n  const handlers = {\r\n    \"1882_dlenc_transmittal\": handler_1882_dlenc_transmittal,\r\n  };\r\n\r\n  const handler = handlers[event.handler];\r\n\r\n  await handler(\r\n    uow,\r\n    event.username,\r\n    event.folder_id,\r\n    event.usergroup_id,\r\n    event.document_ids\r\n  );\r\n};\r\n\r\nexport { push_document_button, perform_action_on_documents };\r\n","import {\r\n  NegativeResponse,\r\n  GetManyDocumentsApprovalsRequest,\r\n  GetManyDocumentsApprovalsResponse,\r\n  GetDocumentApprovalsRequest,\r\n  GetDocumentApprovalsResponse,\r\n  AddDocumentApprovalRequest,\r\n  AddDocumentApprovalResponse,\r\n  UpdateDocumentApprovalRequest,\r\n  UpdateDocumentApprovalResponse,\r\n  DeleteDocumentApprovalRequest,\r\n  DeleteDocumentApprovalResponse,\r\n  DelegateDocumentApprovalRequest,\r\n  DelegateDocumentApprovalResponse,\r\n  GetDocumentApprovalSpareFilesRequest,\r\n  GetDocumentApprovalSpareFilesResponse,\r\n  UploadDocumentApprovalFileRequest,\r\n  UploadDocumentApprovalFileResponse,\r\n  DeleteDocumentApprovalFileRequest,\r\n  DeleteDocumentApprovalFileResponse,\r\n  GetWaitingDocumentApprovalsRequest,\r\n  GetWaitingDocumentApprovalsResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  UploadFileError,\r\n  UploadFileSuccess,\r\n  FileDeletedSuccess,\r\n  DocumentApprovalAddedSuccess,\r\n  DocumentApprovalUpdatedSuccess,\r\n  DocumentApprovalDeletedSuccess,\r\n  DocumentApprovalDelegatedSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { convert_doc_response_obj_to_model } from \"./document_handlers\";\r\n\r\nimport { GetDocumentApprovalSpareFiles } from \"../../domain/command\";\r\n\r\nimport { DocumentApproval, BaseFile } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_approval_response_obj_to_model = (obj) => {\r\n  const base_files = obj.files.map((f) => {\r\n    const base_file = new BaseFile(f.id, f.name, f.size);\r\n    base_file.set_size(f.size);\r\n    return base_file;\r\n  });\r\n\r\n  const approval = new DocumentApproval(\r\n    obj.id,\r\n    obj.state,\r\n    obj.created_by.username,\r\n    obj.created_by.first_name,\r\n    obj.created_by.last_name,\r\n    obj.user.username,\r\n    obj.user.first_name,\r\n    obj.user.last_name,\r\n    obj.delegated_from,\r\n    new Date(obj.created_at),\r\n    new Date(obj.updated_at)\r\n  );\r\n\r\n  // Добавляем файлы к документу\r\n  base_files.forEach((base_file) => {\r\n    approval.add_file(base_file.id, base_file);\r\n  });\r\n\r\n  if (obj.document)\r\n    approval.document = convert_doc_response_obj_to_model(obj.document);\r\n\r\n  if (obj.active_approvals_count_of_document)\r\n    approval.active_approvals_count_of_document =\r\n      obj.active_approvals_count_of_document;\r\n\r\n  return approval;\r\n};\r\n\r\nconst get_many_documents_approvals = async (event, uow) => {\r\n  uow.search_doc_approval_repository.reset_keeping_refs();\r\n\r\n  const query = structuredClone(event.query);\r\n\r\n  if (event.limit) query[\"_LIMIT\"] = event.limit;\r\n  if (event.offset) query[\"_OFFSET\"] = event.offset;\r\n  if (event.sort_by) query[\"_SORT_BY\"] = event.sort_by;\r\n  if (event.sort_asc === false) query[\"_SORT_ASC\"] = \"DESC\";\r\n\r\n  const request = new GetManyDocumentsApprovalsRequest({ query: query });\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetManyDocumentsApprovalsResponse) {\r\n    response.data.approvals.forEach((obj) => {\r\n      const approval = convert_approval_response_obj_to_model(obj);\r\n      uow.search_doc_approval_repository.set(approval.id, approval);\r\n    });\r\n    uow.search_doc_approval_repository.set_count(response.data.count);\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_document_approvals = async (event, uow) => {\r\n  uow.doc_approval_repository.reset_keeping_refs(event.document_id);\r\n\r\n  const request = new GetDocumentApprovalsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof GetDocumentApprovalsResponse) {\r\n    response.data.forEach((obj) => {\r\n      const approval = convert_approval_response_obj_to_model(obj);\r\n      uow.doc_approval_repository.set(event.document_id, approval.id, approval);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_document_approval = async (event, uow) => {\r\n  const request = new AddDocumentApprovalRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    username: event.username,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddDocumentApprovalResponse) {\r\n    const approval = convert_approval_response_obj_to_model(response.data);\r\n    uow.doc_approval_repository.set(event.document_id, approval.id, approval);\r\n    uow.push_message(new DocumentApprovalAddedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_document_approval = async (event, uow) => {\r\n  const non_attached_document_approval_files =\r\n    uow.doc_approval_file_repository.pure_keys();\r\n\r\n  const request = new UpdateDocumentApprovalRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    approval_id: event.approval_id,\r\n    state: event.state,\r\n    files: non_attached_document_approval_files,\r\n    comments: event.comments\r\n      .replace(/<(div|br)>/g, \"\\n\")\r\n      .replace(/<(.|\\n)*?>/g, \"\"),\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof UpdateDocumentApprovalResponse) {\r\n    const approval = convert_approval_response_obj_to_model(response.data);\r\n    uow.doc_approval_repository.set(\r\n      event.document_id,\r\n      event.approval_id,\r\n      approval\r\n    );\r\n    uow.waiting_doc_approval_repository.delete(event.approval_id);\r\n\r\n    uow.push_message(new DocumentApprovalUpdatedSuccess());\r\n    uow.push_message(\r\n      new GetDocumentApprovalSpareFiles(\r\n        event.folder_id,\r\n        event.usergroup_id,\r\n        event.document_id\r\n      )\r\n    );\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_document_approval = async (event, uow) => {\r\n  const request = new DeleteDocumentApprovalRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    approval_id: event.approval_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DeleteDocumentApprovalResponse) {\r\n    uow.doc_approval_repository.delete(event.document_id, event.approval_id);\r\n    uow.push_message(new DocumentApprovalDeletedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delegate_document_approval = async (event, uow) => {\r\n  const request = new DelegateDocumentApprovalRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    approval_id: event.approval_id,\r\n    username: event.username,\r\n    with_return: event.with_return,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DelegateDocumentApprovalResponse) {\r\n    response.data.forEach((obj) => {\r\n      const approval = convert_approval_response_obj_to_model(obj);\r\n      uow.doc_approval_repository.set(event.document_id, approval.id, approval);\r\n      uow.waiting_doc_approval_repository.set(approval.id, approval);\r\n    });\r\n\r\n    if (event.with_return === false) {\r\n      uow.waiting_doc_approval_repository.delete(event.approval_id);\r\n    }\r\n\r\n    uow.push_message(new DocumentApprovalDelegatedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_document_approval_spare_files = async (event, uow) => {\r\n  uow.doc_approval_file_repository.reset();\r\n\r\n  const request = new GetDocumentApprovalSpareFilesRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetDocumentApprovalSpareFilesResponse) {\r\n    response.data.forEach((obj) => {\r\n      const file = new BaseFile(obj.id, obj.name, obj.size);\r\n      uow.file_common_repository.set(obj.id, file);\r\n      uow.file_common_repository.set_size_complete(obj.id);\r\n      uow.doc_approval_file_repository.set(obj.id, file);\r\n    });\r\n    return;\r\n  }\r\n};\r\n\r\nconst upload_document_approval_file = async (event, uow) => {\r\n  const file = new BaseFile(event.file_id, event.file.name, event.file.size);\r\n  uow.file_common_repository.set(event.file_id, file);\r\n  uow.doc_approval_file_repository.set(event.file_id, file);\r\n\r\n  // Добавляем файл в таймер. Стартуем обновления процесса загрузки\r\n  uow.upload_progress_timer.add(event.file_id);\r\n\r\n  const request = new UploadDocumentApprovalFileRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    file_id: event.file_id,\r\n    original_file: event.file,\r\n  });\r\n\r\n  let response = null;\r\n\r\n  try {\r\n    response = await uow.api.call(request);\r\n  } catch (error) {\r\n    uow.push_message(new UploadFileError(event.file.name));\r\n    console.log(error);\r\n  }\r\n\r\n  // После завершения запроса удаляем файл из таймера\r\n  uow.upload_progress_timer.remove(event.file_id);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.doc_approval_file_repository.delete(event.file_id);\r\n    uow.file_common_repository.delete(event.file_id);\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UploadDocumentApprovalFileResponse) {\r\n    // Если запрос успешен, то устанавливаем прогресс 100%\r\n    uow.file_common_repository.set_size_complete(event.file_id);\r\n    uow.push_message(new UploadFileSuccess());\r\n    return;\r\n  }\r\n\r\n  uow.doc_approval_file_repository.delete(event.file_id);\r\n  uow.file_common_repository.delete(event.file_id);\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_document_approval_file = async (event, uow) => {\r\n  const request = new DeleteDocumentApprovalFileRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    file_id: event.file_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteDocumentApprovalFileResponse) {\r\n    uow.doc_approval_file_repository.delete(event.file_id);\r\n    uow.file_common_repository.delete(event.file_id);\r\n    uow.push_message(new FileDeletedSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_waiting_document_approvals = async (event, uow) => {\r\n  uow.waiting_doc_approval_repository.reset_keeping_refs();\r\n\r\n  const request = new GetWaitingDocumentApprovalsRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetWaitingDocumentApprovalsResponse) {\r\n    response.data.forEach((obj) => {\r\n      const approval = convert_approval_response_obj_to_model(obj);\r\n      uow.waiting_doc_approval_repository.set(approval.id, approval);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  convert_approval_response_obj_to_model,\r\n  get_many_documents_approvals,\r\n  get_document_approvals,\r\n  add_document_approval,\r\n  update_document_approval,\r\n  delete_document_approval,\r\n  delegate_document_approval,\r\n  get_document_approval_spare_files,\r\n  upload_document_approval_file,\r\n  delete_document_approval_file,\r\n  get_waiting_document_approvals,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetDocumentApprovalFlowRequest,\r\n  GetDocumentApprovalFlowResponse,\r\n  SetDocumentApprovalFlowRequest,\r\n  SetDocumentApprovalFlowResponse,\r\n  StartDocumentApprovalFlowRequest,\r\n  StartDocumentApprovalFlowResponse,\r\n  StopDocumentApprovalFlowRequest,\r\n  StopDocumentApprovalFlowResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  EmptyApprovalFlowSaved,\r\n  ApprovalFlowStarted,\r\n  ApprovalFlowStopped,\r\n} from \"../../domain/event\";\r\n\r\nimport { ApprovalFlow } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_approval_flow_response_obj_to_model = (obj) => {\r\n  const flow = new ApprovalFlow(\r\n    obj.id,\r\n    obj.is_active,\r\n    obj.success,\r\n    obj.steps,\r\n    new Date(obj.created_at),\r\n    new Date(obj.updated_at)\r\n  );\r\n\r\n  return flow;\r\n};\r\n\r\nconst create_document_approval_flow = (event, uow) => {\r\n  const dt = new Date();\r\n  uow.doc_approval_flow_repository.set(\r\n    event.document_id,\r\n    new ApprovalFlow(\r\n      null, // id\r\n      false, // is_active\r\n      false, // success,\r\n      [[]], //steps,\r\n      dt, // created_at\r\n      dt // updated_at\r\n    )\r\n  );\r\n};\r\n\r\nconst add_document_approval_flow_step = (event, uow) => {\r\n  const flow = uow.doc_approval_flow_repository.get(event.document_id);\r\n  flow.value.add_step();\r\n};\r\n\r\nconst delete_document_approval_flow_step = (event, uow) => {\r\n  const flow = uow.doc_approval_flow_repository.get(event.document_id);\r\n  flow.value.delete_step(event.index);\r\n};\r\n\r\nconst attach_user_to_document_approval_flow_step = (event, uow) => {\r\n  const flow = uow.doc_approval_flow_repository.get(event.document_id);\r\n  flow.value.add_username_to_step(event.index, event.username);\r\n};\r\n\r\nconst delete_user_from_document_approval_flow_step = (event, uow) => {\r\n  const flow = uow.doc_approval_flow_repository.get(event.document_id);\r\n  flow.value.delete_username_from_step(event.index, event.username);\r\n};\r\n\r\nconst get_document_approval_flow = async (event, uow) => {\r\n  const request = new GetDocumentApprovalFlowRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof GetDocumentApprovalFlowResponse) {\r\n    const flow =\r\n      response.data === null\r\n        ? null\r\n        : convert_approval_flow_response_obj_to_model(response.data);\r\n    uow.doc_approval_flow_repository.set(event.document_id, flow);\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst set_document_approval_flow = async (event, uow) => {\r\n  const flow = uow.doc_approval_flow_repository.get(event.document_id);\r\n  flow.value.flush_empty_steps();\r\n\r\n  if (flow.value.steps.length === 0) {\r\n    uow.push_message(new EmptyApprovalFlowSaved());\r\n    return;\r\n  }\r\n\r\n  const request = new SetDocumentApprovalFlowRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n    steps: flow.value.steps,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof SetDocumentApprovalFlowResponse) {\r\n    const flow =\r\n      response.data === null\r\n        ? null\r\n        : convert_approval_flow_response_obj_to_model(response.data);\r\n    uow.doc_approval_flow_repository.set(event.document_id, flow);\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst start_document_approval_flow = async (event, uow) => {\r\n  const request = new StartDocumentApprovalFlowRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof StartDocumentApprovalFlowResponse) {\r\n    const flow =\r\n      response.data === null\r\n        ? null\r\n        : convert_approval_flow_response_obj_to_model(response.data);\r\n    uow.doc_approval_flow_repository.set(event.document_id, flow);\r\n\r\n    uow.push_message(new ApprovalFlowStarted());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst stop_document_approval_flow = async (event, uow) => {\r\n  const request = new StopDocumentApprovalFlowRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof StopDocumentApprovalFlowResponse) {\r\n    const flow =\r\n      response.data === null\r\n        ? null\r\n        : convert_approval_flow_response_obj_to_model(response.data);\r\n    uow.doc_approval_flow_repository.set(event.document_id, flow);\r\n\r\n    uow.push_message(new ApprovalFlowStopped());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  convert_approval_flow_response_obj_to_model,\r\n  create_document_approval_flow,\r\n  add_document_approval_flow_step,\r\n  delete_document_approval_flow_step,\r\n  attach_user_to_document_approval_flow_step,\r\n  delete_user_from_document_approval_flow_step,\r\n  get_document_approval_flow,\r\n  set_document_approval_flow,\r\n  start_document_approval_flow,\r\n  stop_document_approval_flow,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  EmptyCartRequest,\r\n  EmptyCartResponse,\r\n  GetCartDocumentsRequest,\r\n  GetCartDocumentsResponse,\r\n  AddDocumentToCartRequest,\r\n  AddDocumentToCartResponse,\r\n  AddManyDocumentsToCartRequest,\r\n  AddManyDocumentsToCartResponse,\r\n  RemoveDocumentFromCartRequest,\r\n  RemoveDocumentFromCartResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  DocumentAddedToCartSuccess,\r\n  DocumentRemovedFromCartSuccess,\r\n  ManyDocumentsAddedToCartSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { convert_doc_response_obj_to_model } from \"./document_handlers\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst empty_cart = async (event, uow) => {\r\n  const request = new EmptyCartRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof EmptyCartResponse) {\r\n    uow.cart_repository.reset_keeping_refs_for_docs();\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_cart_documents = async (event, uow) => {\r\n  const request = new GetCartDocumentsRequest();\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof GetCartDocumentsResponse) {\r\n    response.data.forEach((obj) => {\r\n      const doc = convert_doc_response_obj_to_model(obj);\r\n      uow.cart_repository.set_doc(doc.id, doc);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_document_to_cart = async (event, uow) => {\r\n  const request = new AddDocumentToCartRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddDocumentToCartResponse) {\r\n    const doc = convert_doc_response_obj_to_model(response.data);\r\n    uow.cart_repository.set_doc(doc.id, doc);\r\n\r\n    uow.push_message(new DocumentAddedToCartSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_many_documents_to_cart = async (event, uow) => {\r\n  const request = new AddManyDocumentsToCartRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_ids: event.document_ids,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddManyDocumentsToCartResponse) {\r\n    response.data.forEach((obj) => {\r\n      const doc = convert_doc_response_obj_to_model(obj);\r\n      uow.cart_repository.set_doc(doc.id, doc);\r\n    });\r\n    uow.push_message(new ManyDocumentsAddedToCartSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst remove_document_from_cart = async (event, uow) => {\r\n  const request = new RemoveDocumentFromCartRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof RemoveDocumentFromCartResponse) {\r\n    uow.cart_repository.delete_doc(event.document_id);\r\n    uow.push_message(new DocumentRemovedFromCartSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  empty_cart,\r\n  get_cart_documents,\r\n  add_document_to_cart,\r\n  add_many_documents_to_cart,\r\n  remove_document_from_cart,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetServerSettingsRequest,\r\n  GetServerSettingsResponse,\r\n  UpdateServerSettingRequest,\r\n  UpdateServerSettingResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport { ApiError, ServerSettingUpdatedSuccess } from \"../../domain/event\";\r\n\r\nimport { ServerSetting } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_server_setting_response_obj_to_model = (obj) =>\r\n  new ServerSetting(obj.id, obj.name, obj.value);\r\n\r\nconst get_server_settings = async (event, uow) => {\r\n  const request = new GetServerSettingsRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetServerSettingsResponse) {\r\n    response.data.forEach((obj) => {\r\n      const model = convert_server_setting_response_obj_to_model(obj);\r\n      uow.server_setting_repository.set(model.id, model);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_server_setting = async (event, uow) => {\r\n  const request = new UpdateServerSettingRequest({\r\n    id: event.id,\r\n    value: event.value,\r\n  });\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UpdateServerSettingResponse) {\r\n    const model = convert_server_setting_response_obj_to_model(response.data);\r\n    uow.server_setting_repository.set(model.id, model);\r\n    uow.push_message(new ServerSettingUpdatedSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\n\r\nexport {\r\n  convert_server_setting_response_obj_to_model,\r\n  get_server_settings,\r\n  update_server_setting,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetMailBoxesRequest,\r\n  GetMailBoxesResponse,\r\n  AddMailBoxRequest,\r\n  AddMailBoxResponse,\r\n  UpdateMailBoxRequest,\r\n  UpdateMailBoxResponse,\r\n  DeleteMailBoxRequest,\r\n  DeleteMailBoxResponse,\r\n  GetMailChannelsRequest,\r\n  GetMailChannelsResponse,\r\n  AddMailChannelRequest,\r\n  AddMailChannelResponse,\r\n  UpdateMailChannelRequest,\r\n  UpdateMailChannelResponse,\r\n  DeleteMailChannelRequest,\r\n  DeleteMailChannelResponse,\r\n  AddMailChannelToMailBoxRequest,\r\n  AddMailChannelToMailBoxResponse,\r\n  DeleteMailChannelFromMailBoxRequest,\r\n  DeleteMailChannelFromMailBoxResponse,\r\n  FetchMailChannelRequest,\r\n  FetchMailChannelResponse,\r\n  GetMailMessagesRequest,\r\n  GetMailMessagesResponse,\r\n  DeleteMailMessageRequest,\r\n  DeleteMailMessageResponse,\r\n  DownloadMailMessageRequest,\r\n  DownloadMailMessageResponse,\r\n  DownloadMailMessageAttachmentRequest,\r\n  DownloadMailMessageAttachmentResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  MailBoxAddedSuccess,\r\n  MailBoxUpdatedSuccess,\r\n  MailBoxDeletedSuccess,\r\n  MailChannelAddedSuccess,\r\n  MailChannelUpdatedSuccess,\r\n  MailChannelDeletedSuccess,\r\n  MailChannelFetchedSuccess,\r\n  MailMessageDeletedSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport {\r\n  BaseFile,\r\n  MailBox,\r\n  MailChannel,\r\n  MailMessage,\r\n} from \"../../domain/model\";\r\nimport { js_download_file } from \"../utils/file_download\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_mailbox_response_obj_to_model = (obj) => {\r\n  const item = new MailBox(\r\n    obj.id,\r\n    obj.out_protocol,\r\n    obj.out_encryption,\r\n    obj.out_port,\r\n    obj.out_server,\r\n    obj.in_protocol,\r\n    obj.in_encryption,\r\n    obj.in_port,\r\n    obj.in_server,\r\n    obj.username,\r\n    obj.password,\r\n    obj.name\r\n  );\r\n\r\n  // Добавляем почтовые каналы к почтовым ящикам\r\n  if (obj.mailchannels)\r\n    obj.mailchannels.forEach((data) => {\r\n      const channel = convert_mail_channel_response_obj_to_model(data);\r\n      item.add_mail_channel(channel);\r\n    });\r\n\r\n  return item;\r\n};\r\n\r\nconst get_mailboxes = async (event, uow) => {\r\n  uow.mailbox_repository.reset_keeping_refs();\r\n\r\n  const request = new GetMailBoxesRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof GetMailBoxesResponse) {\r\n    response.data.forEach((obj) => {\r\n      const mailbox = convert_mailbox_response_obj_to_model(obj);\r\n      uow.mailbox_repository.set(mailbox.id, mailbox);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_mailbox = async (event, uow) => {\r\n  const request = new AddMailBoxRequest({\r\n    out_protocol: event.out_protocol,\r\n    out_encryption: event.out_encryption,\r\n    out_port: event.out_port,\r\n    out_server: event.out_server,\r\n    in_protocol: event.in_protocol,\r\n    in_encryption: event.in_encryption,\r\n    in_port: event.in_port,\r\n    in_server: event.in_server,\r\n    username: event.username,\r\n    password: event.password,\r\n    name: event.name,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddMailBoxResponse) {\r\n    const mailbox = convert_mailbox_response_obj_to_model(response.data);\r\n    uow.mailbox_repository.set(mailbox.id, mailbox);\r\n    uow.push_message(new MailBoxAddedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_mailbox = async (event, uow) => {\r\n  const request = new UpdateMailBoxRequest({\r\n    id: event.id,\r\n    out_protocol: event.out_protocol,\r\n    out_encryption: event.out_encryption,\r\n    out_port: event.out_port,\r\n    out_server: event.out_server,\r\n    in_protocol: event.in_protocol,\r\n    in_encryption: event.in_encryption,\r\n    in_port: event.in_port,\r\n    in_server: event.in_server,\r\n    username: event.username,\r\n    password: event.password,\r\n    name: event.name,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof UpdateMailBoxResponse) {\r\n    const mailbox = convert_mailbox_response_obj_to_model(response.data);\r\n    uow.mailbox_repository.set(mailbox.id, mailbox);\r\n    uow.push_message(new MailBoxUpdatedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_mailbox = async (event, uow) => {\r\n  const request = new DeleteMailBoxRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DeleteMailBoxResponse) {\r\n    uow.mailbox_repository.delete(event.id);\r\n    uow.push_message(new MailBoxDeletedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst convert_mail_channel_response_obj_to_model = (obj) => {\r\n  const item = new MailChannel(\r\n    obj.id,\r\n    obj.name,\r\n    obj.folder,\r\n    obj.storage_path,\r\n    obj.settings,\r\n    obj.is_active\r\n  );\r\n\r\n  return item;\r\n};\r\n\r\nconst get_mail_channels = async (event, uow) => {\r\n  uow.mail_channel_repository.reset_keeping_refs();\r\n\r\n  const request = new GetMailChannelsRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof GetMailChannelsResponse) {\r\n    response.data.forEach((obj) => {\r\n      const channel = convert_mail_channel_response_obj_to_model(obj);\r\n      uow.mail_channel_repository.set(channel.id, channel);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_mail_channel = async (event, uow) => {\r\n  const request = new AddMailChannelRequest({\r\n    name: event.name,\r\n    folder: event.folder,\r\n    storage_path: event.storage_path,\r\n    settings: event.settings,\r\n    is_active: event.is_active,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddMailChannelResponse) {\r\n    const channel = convert_mail_channel_response_obj_to_model(response.data);\r\n    uow.mail_channel_repository.set(channel.id, channel);\r\n    uow.push_message(new MailChannelAddedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_mail_channel = async (event, uow) => {\r\n  const request = new UpdateMailChannelRequest({\r\n    id: event.id,\r\n    name: event.name,\r\n    folder: event.folder,\r\n    storage_path: event.storage_path,\r\n    settings: event.settings,\r\n    is_active: event.is_active,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof UpdateMailChannelResponse) {\r\n    const channel = convert_mail_channel_response_obj_to_model(response.data);\r\n    uow.mail_channel_repository.set(channel.id, channel);\r\n    uow.push_message(new MailChannelUpdatedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_mail_channel = async (event, uow) => {\r\n  const request = new DeleteMailChannelRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DeleteMailChannelResponse) {\r\n    uow.mail_channel_repository.delete(event.id);\r\n    uow.push_message(new MailChannelDeletedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_mail_channel_to_mailbox = async (event, uow) => {\r\n  const request = new AddMailChannelToMailBoxRequest({\r\n    mailbox_id: event.mailbox_id,\r\n    mailchannel_id: event.mailchannel_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddMailChannelToMailBoxResponse) {\r\n    const mailbox = convert_mailbox_response_obj_to_model(response.data);\r\n    uow.mailbox_repository.set(mailbox.id, mailbox);\r\n    uow.push_message(new MailBoxUpdatedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_mail_channel_from_mailbox = async (event, uow) => {\r\n  const request = new DeleteMailChannelFromMailBoxRequest({\r\n    mailbox_id: event.mailbox_id,\r\n    mailchannel_id: event.mailchannel_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DeleteMailChannelFromMailBoxResponse) {\r\n    const mailbox = convert_mailbox_response_obj_to_model(response.data);\r\n    uow.mailbox_repository.set(mailbox.id, mailbox);\r\n    uow.push_message(new MailBoxUpdatedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst fetch_mail_channel = async (event, uow) => {\r\n  const request = new FetchMailChannelRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof FetchMailChannelResponse) {\r\n    uow.push_message(new MailChannelFetchedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst convert_mail_message_response_obj_to_model = (obj) => {\r\n  const base_files = obj.attachments.map((f) => {\r\n    const base_file = new BaseFile(f.id, f.name, f.size);\r\n    base_file.set_size(f.size);\r\n    return base_file;\r\n  });\r\n\r\n  const mail = new MailMessage(\r\n    obj.id,\r\n    obj.subject,\r\n    obj.address_from,\r\n    obj.address_to,\r\n    obj.address_cc,\r\n    obj.address_bcc,\r\n    new Date(obj.received_at),\r\n    obj.mailbox,\r\n    obj.mailchannel,\r\n    obj.has_text,\r\n    obj.has_html\r\n  );\r\n\r\n  // Добавляем файлы к письму\r\n  base_files.forEach((base_file) => {\r\n    mail.add_attachment(base_file.id, base_file);\r\n  });\r\n\r\n  return mail;\r\n};\r\n\r\nconst get_mail_messages = async (event, uow) => {\r\n  uow.mail_message_repository.reset_keeping_refs();\r\n\r\n  const request = new GetMailMessagesRequest({ query: event.query });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetMailMessagesResponse) {\r\n    response.data.forEach((obj) =>\r\n      uow.mail_message_repository.set(\r\n        obj.id,\r\n        convert_mail_message_response_obj_to_model(obj)\r\n      )\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_mail_message = async (event, uow) => {\r\n  const request = new DeleteMailMessageRequest({ id: event.id });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteMailMessageResponse) {\r\n    uow.mail_message_repository.delete(event.id);\r\n    uow.push_message(new MailMessageDeletedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_mail_message = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, \"AAAAA\", 1000);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadMailMessageRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    id: event.id,\r\n    format: event.format,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadMailMessageResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_mail_message_attachment = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, event.name, event.size);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadMailMessageAttachmentRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    message_id: event.message_id,\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadMailMessageAttachmentResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n      inline: event.inline,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  convert_mailbox_response_obj_to_model,\r\n  get_mailboxes,\r\n  add_mailbox,\r\n  update_mailbox,\r\n  delete_mailbox,\r\n  convert_mail_channel_response_obj_to_model,\r\n  get_mail_channels,\r\n  add_mail_channel,\r\n  update_mail_channel,\r\n  delete_mail_channel,\r\n  add_mail_channel_to_mailbox,\r\n  delete_mail_channel_from_mailbox,\r\n  fetch_mail_channel,\r\n  get_mail_messages,\r\n  delete_mail_message,\r\n  download_mail_message,\r\n  download_mail_message_attachment,\r\n};\r\n","import { DeleteFileFromFolder } from \"../../domain/command\";\r\nimport {\r\n  NegativeResponse,\r\n  UploadFileToFolderRequest,\r\n  UploadFileToFolderResponse,\r\n  DownloadFileFromFolderRequest,\r\n  DownloadFileFromFolderResponse,\r\n  DownloadManyDocumentsFilesAsArchiveRequest,\r\n  DownloadManyDocumentsFilesAsArchiveResponse,\r\n  DownloadDocumentFilesAsArchiveRequest,\r\n  DownloadDocumentFilesAsArchiveResponse,\r\n  DeleteFileFromFolderRequest,\r\n  DeleteFileFromFolderResponse,\r\n  UpdateFileFromFolderRequest,\r\n  UpdateFileFromFolderResponse,\r\n  GetFileInfoRequest,\r\n  GetFileInfoResponse,\r\n  GetSpareFilesRequest,\r\n  GetSpareFilesResponse,\r\n  GetUploadProgressRequest,\r\n  GetUploadProgressResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  AttachFileToDocument,\r\n  AttachFilesToDocumentUsingPattern,\r\n} from \"../../domain/command\";\r\n\r\nimport {\r\n  ApiError,\r\n  UploadFileError,\r\n  UploadFileSuccess,\r\n  FileUpdatedSuccess,\r\n  FileDeletedSuccess,\r\n  FileAttachedToDocument,\r\n  FileDetachedFromDocument,\r\n  FilesAllocated,\r\n} from \"../../domain/event\";\r\n\r\nimport { BaseFile } from \"../../domain/model\";\r\nimport { js_download_file } from \"../utils/file_download\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport XLSX from \"xlsx\"; // SheetJS\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst upload_file_to_folder = async (event, uow) => {\r\n  const file = new BaseFile(event.file_id, event.file.name, event.file.size);\r\n  uow.file_in_folder_repository.set(event.folder_id, event.file_id, file);\r\n  uow.file_common_repository.set(event.file_id, file);\r\n\r\n  // Добавляем файл в таймер. Стартуем обновления процесса загрузки\r\n  uow.upload_progress_timer.add(event.file_id);\r\n\r\n  const request = new UploadFileToFolderRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    id: event.file_id,\r\n    original_file: event.file,\r\n  });\r\n\r\n  let response = null;\r\n\r\n  try {\r\n    response = await uow.api.call(request);\r\n  } catch (error) {\r\n    uow.push_message(new UploadFileError(event.file.name));\r\n    console.log(error);\r\n  }\r\n\r\n  // После завершения запроса удаляем файл из таймера\r\n  uow.upload_progress_timer.remove(event.file_id);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.file_in_folder_repository.delete(event.folder_id, event.file_id);\r\n    uow.file_common_repository.delete(event.file_id);\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UploadFileToFolderResponse) {\r\n    // Если запрос успешен, то устанавливаем прогресс 100%\r\n    uow.file_common_repository.set_size_complete(event.file_id);\r\n    uow.push_message(new UploadFileSuccess());\r\n    return;\r\n  }\r\n\r\n  uow.file_in_folder_repository.delete(event.folder_id, event.file_id);\r\n  uow.file_common_repository.delete(event.file_id);\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// OK\r\nconst download_file_from_folder = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, event.name, event.size);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadFileFromFolderRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    id: event.file_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadFileFromFolderResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n      inline: event.inline,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_many_documents_files_as_archive = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, \"AAAAA\", event.size);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadManyDocumentsFilesAsArchiveRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_ids: event.document_ids,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadManyDocumentsFilesAsArchiveResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_document_files_as_archive = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, \"AAAAA\", event.size);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadDocumentFilesAsArchiveRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadDocumentFilesAsArchiveResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_file_info = async (event, uow) => {\r\n  const request = new GetFileInfoRequest({\r\n    id: event.file_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetFileInfoResponse) return response.data;\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_file_from_folder = async (event, uow) => {\r\n  const delete_file_func = () => {\r\n    // Удаляем файл из нераспределнных файлов папки\r\n    uow.file_in_folder_repository.delete(event.folder_id, event.file_id);\r\n    // Удаляем файл из общего хранилища файлов\r\n    uow.file_common_repository.delete(event.file_id);\r\n\r\n    uow.push_message(new FileDeletedSuccess());\r\n  };\r\n\r\n  // Если файл прикреплен к другим документам в этой же папке, группе пользователей\r\n  // все равно его удаляем\r\n  if (uow.doc_repository.file_in_repository(event.folder_id, event.file_id)) {\r\n    delete_file_func();\r\n    return;\r\n  }\r\n\r\n  const request = new DeleteFileFromFolderRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    id: event.file_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  // Если файл прикреплен к другим документам в этой же папке, группе пользователей\r\n  // все равно его удаляем\r\n  if (response instanceof DeleteFileFromFolderResponse) {\r\n    delete_file_func();\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_file_from_folder = async (event, uow) => {\r\n  const request = new UpdateFileFromFolderRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    id: event.file_id,\r\n    name: event.name,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UpdateFileFromFolderResponse) {\r\n    const file = uow.file_common_repository.get(\r\n      event.file_id\r\n    ); // Ref\r\n    file.value.rename(response.data.name);\r\n    uow.push_message(new FileUpdatedSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst flush_file_container = (event, uow) => {\r\n  uow.file_in_folder_repository\r\n    .pure_keys(event.folder_id)\r\n    .forEach((file_id) =>\r\n      uow.push_message(\r\n        new DeleteFileFromFolder(event.folder_id, event.usergroup_id, file_id)\r\n      )\r\n    );\r\n};\r\n\r\nconst get_spare_files = async (event, uow) => {\r\n  uow.file_in_folder_repository.reset(event.folder_id);\r\n\r\n  const request = new GetSpareFilesRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetSpareFilesResponse) {\r\n    response.data.forEach((obj) => {\r\n      const base_file = new BaseFile(obj.id, obj.name, obj.size);\r\n      base_file.set_size(obj.size);\r\n      // Добавляем файл в хранилище нераспределенных файлов папки\r\n      uow.file_in_folder_repository.set(event.folder_id, obj.id, base_file);\r\n      // Добавляем файл в общее хранилище файлов\r\n      uow.file_common_repository.set(obj.id, base_file);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_upload_progress = async (event, uow) => {\r\n  const request = new GetUploadProgressRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetUploadProgressResponse) {\r\n    response.data.forEach((obj) => {\r\n      uow.file_common_repository.set_size(obj.file_id, obj.loaded);\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_excel_file = async (event) => {\r\n  // https://redstapler.co/sheetjs-tutorial-create-xlsx/\r\n\r\n  function s2ab(s) {\r\n    var buf = new ArrayBuffer(s.length); //convert s to arrayBuffer\r\n    var view = new Uint8Array(buf); //create uint8array as viewer\r\n    for (var i = 0; i < s.length; i++) view[i] = s.charCodeAt(i) & 0xff; //convert to octet\r\n    return buf;\r\n  }\r\n\r\n  const ws = XLSX.utils.aoa_to_sheet(event.aoa);\r\n\r\n  const wb = XLSX.utils.book_new();\r\n  wb.SheetNames.push(\"Sheet\");\r\n  wb.Sheets[\"Sheet\"] = ws;\r\n\r\n  var wbout = XLSX.write(wb, { bookType: \"xlsx\", type: \"binary\" });\r\n\r\n  js_download_file({\r\n    data: new Blob([s2ab(wbout)], { type: \"application/octet-stream\" }),\r\n    filename: event.filename,\r\n  });\r\n};\r\n\r\nconst download_json_file = async (event) => {\r\n  js_download_file({\r\n    data: new Blob([JSON.stringify(event.data)]),\r\n    mime: \"application/octet-stream\",\r\n    filename: event.filename,\r\n  });\r\n};\r\n\r\nconst attach_file_to_document = (event, uow) => {\r\n  const file = uow.file_in_folder_repository.get_file(\r\n    event.folder_id,\r\n    event.file_id\r\n  );\r\n\r\n  if (!file) {\r\n    console.log(\"Error during attaching of file\");\r\n    return;\r\n  }\r\n\r\n  uow.doc_repository.add_file(event.folder_id, event.document_id, file);\r\n  uow.doc_repository.mark_as_modified(event.folder_id, event.document_id);\r\n  uow.file_in_folder_repository.delete(event.folder_id, event.file_id);\r\n\r\n  // Отравляем событие о том, что файл добавлен\r\n  uow.push_message(\r\n    new FileAttachedToDocument(\r\n      event.folder_id,\r\n      event.usergroup_id,\r\n      event.document_id,\r\n      event.file_id\r\n    )\r\n  );\r\n};\r\n\r\nconst detach_file_from_document = (event, uow) => {\r\n  const file = uow.doc_repository.get_file(\r\n    event.folder_id,\r\n    event.document_id,\r\n    event.file_id\r\n  );\r\n\r\n  if (!file) {\r\n    console.log(\"Error during detaching of file\");\r\n    return;\r\n  }\r\n\r\n  uow.file_in_folder_repository.set(event.folder_id, event.file_id, file);\r\n  uow.doc_repository.remove_file(\r\n    event.folder_id,\r\n    event.document_id,\r\n    event.file_id\r\n  );\r\n  uow.doc_repository.mark_as_modified(event.folder_id, event.document_id);\r\n\r\n  // Отравляем событие о том, что файл удален\r\n  uow.push_message(\r\n    new FileDetachedFromDocument(\r\n      event.folder_id,\r\n      event.usergroup_id,\r\n      event.document_id,\r\n      event.file_id\r\n    )\r\n  );\r\n};\r\n\r\nconst attach_files_to_document_using_pattern = (event, uow) => {\r\n  const attributes = uow.doc_repository.attributes(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  const filename_pattern = uow.folder_repository.get_filename_pattern(\r\n    event.folder_id,\r\n    attributes\r\n  );\r\n\r\n  if (filename_pattern === null || filename_pattern == \"\") return;\r\n\r\n  const regexp = new RegExp(filename_pattern);\r\n  const base_files_ids = uow.file_in_folder_repository.pure_keys(\r\n    event.folder_id\r\n  );\r\n\r\n  base_files_ids.forEach((file_id) => {\r\n    const file = uow.file_in_folder_repository.get_file(\r\n      event.folder_id,\r\n      file_id\r\n    );\r\n\r\n    // Если файл еще не загружен, исключаем его из распределения\r\n    if (!file.uploaded) return;\r\n\r\n    // Проверяем имя файла на совпадение с шаблоном\r\n    if (file.name.match(regexp) !== null)\r\n      uow.push_message(\r\n        new AttachFileToDocument(\r\n          event.folder_id,\r\n          event.usergroup_id,\r\n          event.document_id,\r\n          file_id\r\n        )\r\n      );\r\n  });\r\n};\r\n\r\nconst allocate_files_to_documents_using_pattern = (event, uow) => {\r\n  const doc_ids = uow.doc_repository.pure_keys(event.folder_id);\r\n  doc_ids.forEach((id) => {\r\n    // Если документ не заблокирован, он участвует в распределении файлов\r\n    if (!uow.doc_repository.is_blocked(event.folder_id, id))\r\n      uow.push_message(\r\n        new AttachFilesToDocumentUsingPattern(\r\n          event.folder_id,\r\n          event.usergroup_id,\r\n          id\r\n        )\r\n      );\r\n  });\r\n\r\n  uow.push_message(new FilesAllocated());\r\n};\r\n\r\nexport {\r\n  upload_file_to_folder,\r\n  download_file_from_folder,\r\n  download_many_documents_files_as_archive,\r\n  download_document_files_as_archive,\r\n  get_file_info,\r\n  delete_file_from_folder,\r\n  update_file_from_folder,\r\n  flush_file_container,\r\n  get_spare_files,\r\n  update_upload_progress,\r\n  download_excel_file,\r\n  download_json_file,\r\n  attach_file_to_document,\r\n  detach_file_from_document,\r\n  attach_files_to_document_using_pattern,\r\n  allocate_files_to_documents_using_pattern,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetPdfMergeFilesRequest,\r\n  GetPdfMergeFilesResponse,\r\n  UploadPdfMergeFileRequest,\r\n  UploadPdfMergeFileResponse,\r\n  UpdatePdfMergeFileRequest,\r\n  UpdatePdfMergeFileResponse,\r\n  DeletePdfMergeFileRequest,\r\n  DeletePdfMergeFileResponse,\r\n  DownloadPdfMergeResultRequest,\r\n  DownloadPdfMergeResultResponse,\r\n  DownloadPdfMixResultRequest,\r\n  DownloadPdfMixResultResponse,\r\n  GetShareFilesRequest,\r\n  GetShareFilesResponse,\r\n  UploadShareFileRequest,\r\n  UploadShareFileResponse,\r\n  DeleteShareFileRequest,\r\n  DeleteShareFileResponse,\r\n  DownloadShareFileRequest,\r\n  DownloadShareFileResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport { DeletePdfMergeFile } from \"../../domain/command\";\r\n\r\nimport {\r\n  ApiError,\r\n  UploadFileError,\r\n  UploadFileSuccess,\r\n  FileDeletedSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { BaseFile, PdfDocument } from \"../../domain/model\";\r\nimport { js_download_file } from \"../utils/file_download\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst get_pdf_merge_files = async (event, uow) => {\r\n  uow.pdf_merge_file_repository.reset();\r\n\r\n  const request = new GetPdfMergeFilesRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetPdfMergeFilesResponse) {\r\n    response.data.forEach((obj) => {\r\n      const file = new BaseFile(obj.file.id, obj.file.name, obj.file.size);\r\n      uow.file_common_repository.set(obj.file.id, file);\r\n      uow.file_common_repository.set_size_complete(obj.file.id);\r\n\r\n      const pdf_doc = new PdfDocument(\r\n        obj.id,\r\n        obj.order,\r\n        obj.page_count,\r\n        obj.page_from,\r\n        obj.page_to,\r\n        obj.angle,\r\n        file,\r\n        true // uploaded\r\n      );\r\n      uow.pdf_merge_file_repository.set(obj.id, pdf_doc);\r\n    });\r\n    return;\r\n  }\r\n};\r\n\r\nconst upload_pdf_merge_file = async (event, uow) => {\r\n  const file = new BaseFile(event.id, event.file.name, event.file.size);\r\n  uow.file_common_repository.set(event.id, file);\r\n\r\n  const pdf_doc = new PdfDocument(\r\n    event.id,\r\n    event.order,\r\n    0,\r\n    0,\r\n    0,\r\n    0,\r\n    file,\r\n    false\r\n  );\r\n  uow.pdf_merge_file_repository.set(event.id, pdf_doc);\r\n\r\n  // Добавляем файл в таймер. Стартуем обновления процесса загрузки\r\n  uow.upload_progress_timer.add(event.id);\r\n\r\n  const request = new UploadPdfMergeFileRequest({\r\n    id: event.id,\r\n    order: event.order,\r\n    original_file: event.file,\r\n  });\r\n\r\n  let response = null;\r\n\r\n  try {\r\n    response = await uow.api.call(request);\r\n  } catch (error) {\r\n    uow.push_message(new UploadFileError(event.file.name));\r\n    console.log(error);\r\n  }\r\n\r\n  // После завершения запроса удаляем файл из таймера\r\n  uow.upload_progress_timer.remove(event.id);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.pdf_merge_file_repository.delete(event.id);\r\n    uow.file_common_repository.delete(event.id);\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UploadPdfMergeFileResponse) {\r\n    // Если запрос успешен, то устанавливаем прогресс 100%\r\n    uow.file_common_repository.set_size_complete(event.id);\r\n    // Еще раз извлекаем объект из репозитория. Иначе не работают ссылка\r\n    const obj = uow.pdf_merge_file_repository.get(event.id).value;\r\n    obj.page_count = response.data.page_count;\r\n    obj.page_from = response.data.page_from;\r\n    obj.page_to = response.data.page_to;\r\n    obj.angle = response.data.angle;\r\n    obj.uploaded = true;\r\n    uow.push_message(new UploadFileSuccess());\r\n    return;\r\n  }\r\n\r\n  uow.pdf_merge_file_repository.delete(event.id);\r\n  uow.file_common_repository.delete(event.id);\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_pdf_merge_file = async (event, uow) => {\r\n  const request = new UpdatePdfMergeFileRequest({\r\n    id: event.id,\r\n    order: event.order,\r\n    page_from: event.page_from,\r\n    page_to: event.page_to,\r\n    angle: event.angle,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UpdatePdfMergeFileResponse) {\r\n    const obj = uow.pdf_merge_file_repository.get(response.data.id).value;\r\n    obj.order = response.data.order;\r\n    obj.page_from = response.data.page_from;\r\n    obj.page_to = response.data.page_to;\r\n    obj.angle = response.data.angle;\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_pdf_merge_file = async (event, uow) => {\r\n  const request = new DeletePdfMergeFileRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeletePdfMergeFileResponse) {\r\n    uow.pdf_merge_file_repository.delete(event.id);\r\n    uow.file_common_repository.delete(event.id);\r\n    uow.push_message(new FileDeletedSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_all_pdf_merge_files = (event, uow) => {\r\n  uow.pdf_merge_file_repository\r\n    .pure_keys()\r\n    .forEach((id) => uow.push_message(new DeletePdfMergeFile(id)));\r\n};\r\n\r\nconst download_pdf_merge_result = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, \"AAAAA\", 1000);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadPdfMergeResultRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    // folder_id: event.folder_id,\r\n    // id: event.file_id,\r\n    keep_bookmarks: event.keep_bookmarks,\r\n    add_filenames_as_bookmarks: event.add_filenames_as_bookmarks,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadPdfMergeResultResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_pdf_mix_result = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, \"AAAAA\", 1000);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadPdfMixResultRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadPdfMixResultResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_share_files = async (event, uow) => {\r\n  uow.share_file_repository.reset();\r\n\r\n  const request = new GetShareFilesRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetShareFilesResponse) {\r\n    response.data.forEach((obj) => {\r\n      const file = new BaseFile(obj.id, obj.name, obj.size);\r\n      uow.file_common_repository.set(obj.id, file);\r\n      uow.file_common_repository.set_size_complete(obj.id);\r\n      uow.share_file_repository.set(obj.id, file);\r\n    });\r\n    return;\r\n  }\r\n};\r\n\r\nconst upload_share_file = async (event, uow) => {\r\n  const file = new BaseFile(event.id, event.file.name, event.file.size);\r\n  uow.file_common_repository.set(event.id, file);\r\n  uow.share_file_repository.set(event.id, file);\r\n\r\n  // Добавляем файл в таймер. Стартуем обновления процесса загрузки\r\n  uow.upload_progress_timer.add(event.id);\r\n\r\n  const request = new UploadShareFileRequest({\r\n    id: event.id,\r\n    original_file: event.file,\r\n  });\r\n\r\n  let response = null;\r\n\r\n  try {\r\n    response = await uow.api.call(request);\r\n  } catch (error) {\r\n    uow.push_message(new UploadFileError(event.file.name));\r\n    console.log(error);\r\n  }\r\n\r\n  // После завершения запроса удаляем файл из таймера\r\n  uow.upload_progress_timer.remove(event.id);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.share_file_repository.delete(event.id);\r\n    uow.file_common_repository.delete(event.id);\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UploadShareFileResponse) {\r\n    // Если запрос успешен, то устанавливаем прогресс 100%\r\n    uow.file_common_repository.set_size_complete(event.id);\r\n    uow.push_message(new UploadFileSuccess());\r\n    return;\r\n  }\r\n\r\n  uow.share_file_repository.delete(event.id);\r\n  uow.file_common_repository.delete(event.id);\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_share_file = async (event, uow) => {\r\n  const request = new DeleteShareFileRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteShareFileResponse) {\r\n    uow.share_file_repository.delete(event.id);\r\n    uow.file_common_repository.delete(event.id);\r\n    uow.push_message(new FileDeletedSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst download_share_file = async (event, uow) => {\r\n  const id = uuidv4();\r\n\r\n  const file = new BaseFile(id, event.name, event.size);\r\n  uow.download_progress.set(id, file);\r\n\r\n  const request = new DownloadShareFileRequest({\r\n    set_size_method: (size) => uow.download_progress.set_size(id, size),\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DownloadShareFileResponse) {\r\n    js_download_file({\r\n      data: response.data.file,\r\n      filename: response.data.name,\r\n      inline: event.inline,\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst drop_self_testing_questions = (event, uow) => {\r\n  uow.self_testing_question_repository.reset();\r\n};\r\n\r\nconst add_self_testing_question = (event, uow) => {\r\n  uow.self_testing_question_repository.set(event.id, event);\r\n};\r\n\r\nexport {\r\n  // PDF MERGE\r\n  get_pdf_merge_files,\r\n  upload_pdf_merge_file,\r\n  update_pdf_merge_file,\r\n  delete_pdf_merge_file,\r\n  delete_all_pdf_merge_files,\r\n  download_pdf_merge_result,\r\n  download_pdf_mix_result,\r\n  // SHARE FILE\r\n  get_share_files,\r\n  upload_share_file,\r\n  delete_share_file,\r\n  download_share_file,\r\n  // SELF TESTING\r\n  drop_self_testing_questions,\r\n  add_self_testing_question,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetCountersRequest,\r\n  GetCountersResponse,\r\n  AddCounterRequest,\r\n  AddCounterResponse,\r\n  UpdateCounterRequest,\r\n  UpdateCounterResponse,\r\n  DeleteCounterRequest,\r\n  DeleteCounterResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  CounterAddedSuccess,\r\n  CounterUpdatedSuccess,\r\n  CounterDeletedSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport {\r\n  Counter,\r\n} from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\n\r\nconst convert_counter_response_obj_to_model = (obj) => {\r\n  const item = new Counter(\r\n    obj.id,\r\n    obj.name,\r\n    obj.description,\r\n    obj.value,\r\n    obj.increment,\r\n  );\r\n\r\n  return item;\r\n};\r\n\r\nconst get_counters = async (event, uow) => {\r\n  uow.counter_repository.reset_keeping_refs();\r\n\r\n  const request = new GetCountersRequest({});\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof GetCountersResponse) {\r\n    response.data.forEach((obj) => {\r\n      const counter = convert_counter_response_obj_to_model(obj);\r\n      uow.counter_repository.set(counter.id, counter);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_counter = async (event, uow) => {\r\n  const request = new AddCounterRequest({\r\n    name: event.name,\r\n    description: event.description,\r\n    value: event.value,\r\n    increment: event.increment,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof AddCounterResponse) {\r\n    const counter = convert_counter_response_obj_to_model(response.data);\r\n    uow.counter_repository.set(counter.id, counter);\r\n    uow.push_message(new CounterAddedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_counter = async (event, uow) => {\r\n  const request = new UpdateCounterRequest({\r\n    id: event.id,\r\n    name: event.name,\r\n    description: event.description,\r\n    value: event.value,\r\n    increment: event.increment,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof UpdateCounterResponse) {\r\n    const counter = convert_counter_response_obj_to_model(response.data);\r\n    uow.counter_repository.set(counter.id, counter);\r\n    uow.push_message(new CounterUpdatedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_counter = async (event, uow) => {\r\n  const request = new DeleteCounterRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return false;\r\n  }\r\n\r\n  if (response instanceof DeleteCounterResponse) {\r\n    uow.counter_repository.delete(event.id);\r\n    uow.push_message(new CounterDeletedSuccess());\r\n    return true;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  convert_counter_response_obj_to_model,\r\n  get_counters,\r\n  add_counter,\r\n  update_counter,\r\n  delete_counter,\r\n};\r\n","import {\r\n  NegativeResponse,\r\n  GetFlowsRequest,\r\n  GetFlowsResponse,\r\n  AddFlowRequest,\r\n  AddFlowResponse,\r\n  UpdateFlowRequest,\r\n  UpdateFlowResponse,\r\n  DeleteFlowRequest,\r\n  DeleteFlowResponse,\r\n  GetFlowItemRequest,\r\n  GetFlowItemResponse,\r\n  GetManyFlowItemsRequest,\r\n  GetManyFlowItemsResponse,\r\n  GetFlowItemStepsRequest,\r\n  GetFlowItemStepsResponse,\r\n  RestartFlowItemRequest,\r\n  RestartFlowItemResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport {\r\n  ApiError,\r\n  AddFlowSuccess,\r\n  UpdateFlowSuccess,\r\n  DeleteFlowSuccess,\r\n  RestartFlowItemSuccess,\r\n} from \"../../domain/event\";\r\n\r\nimport { Flow, FlowItem, FlowItemStep } from \"../../domain/model\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst convert_flow_response_obj_to_model = (obj) =>\r\n  new Flow(\r\n    obj.id,\r\n    obj.name,\r\n    obj.user,\r\n    obj.trigger,\r\n    obj.is_multiple,\r\n    obj.is_active,\r\n    obj.message_if_fail,\r\n    obj.process,\r\n    new Date(obj.created_at),\r\n    new Date(obj.updated_at)\r\n  );\r\n\r\nconst get_flows = async (event, uow) => {\r\n  const request = new GetFlowsRequest({ query: event.query });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetFlowsResponse) {\r\n    uow.flow_repository.reset_keeping_refs();\r\n    response.data.forEach((obj) =>\r\n      uow.flow_repository.set(obj.id, convert_flow_response_obj_to_model(obj))\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst add_flow = async (event, uow) => {\r\n  const request = new AddFlowRequest({\r\n    name: event.name,\r\n    trigger: event.trigger,\r\n    is_active: event.is_active,\r\n    is_multiple: event.is_multiple,\r\n    message_if_fail: event.message_if_fail,\r\n    process: event.process,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof AddFlowResponse) {\r\n    uow.flow_repository.set(\r\n      response.data.id,\r\n      convert_flow_response_obj_to_model(response.data)\r\n    );\r\n    uow.push_message(new AddFlowSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst update_flow = async (event, uow) => {\r\n  const request = new UpdateFlowRequest({\r\n    id: event.id,\r\n    name: event.name,\r\n    trigger: event.trigger,\r\n    is_active: event.is_active,\r\n    is_multiple: event.is_multiple,\r\n    message_if_fail: event.message_if_fail,\r\n    process: event.process,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof UpdateFlowResponse) {\r\n    uow.flow_repository.set(\r\n      response.data.id,\r\n      convert_flow_response_obj_to_model(response.data)\r\n    );\r\n    uow.push_message(new UpdateFlowSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst delete_flow = async (event, uow) => {\r\n  const request = new DeleteFlowRequest({\r\n    id: event.id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof DeleteFlowResponse) {\r\n    uow.flow_repository.delete(event.id);\r\n    uow.push_message(new DeleteFlowSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst convert_flow_item_response_obj_to_model = (obj) =>\r\n  new FlowItem(\r\n    obj.id,\r\n    obj.flow.name,\r\n    obj.flow.user,\r\n    obj.flow.trigger,\r\n    obj.success,\r\n    obj.is_active,\r\n    obj.message_if_fail,\r\n    obj.input,\r\n    obj.process,\r\n    new Date(obj.started_at),\r\n    obj.finished_at === null ? null : new Date(obj.finished_at)\r\n  );\r\n\r\nconst get_many_flow_items = async (event, uow) => {\r\n  const request = new GetManyFlowItemsRequest({ query: event.query });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetManyFlowItemsResponse) {\r\n    uow.flow_item_repository.reset_keeping_refs();\r\n    response.data.forEach((obj) =>\r\n      uow.flow_item_repository.set(\r\n        obj.id,\r\n        convert_flow_item_response_obj_to_model(obj)\r\n      )\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_flow_item = async (event, uow) => {\r\n  const request = new GetFlowItemRequest({ id: event.id });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetFlowItemResponse) {\r\n    uow.flow_item_repository.set_current(\r\n      convert_flow_item_response_obj_to_model(response.data)\r\n    );\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst convert_flow_item_step_response_obj_to_model = (obj) =>\r\n  new FlowItemStep(\r\n    obj.id,\r\n    obj.name,\r\n    obj.description,\r\n    obj.flowitem_id,\r\n    obj.success,\r\n    obj.result_key,\r\n    obj.action,\r\n    obj.input,\r\n    obj.output,\r\n    new Date(obj.started_at),\r\n    obj.finished_at === null ? null : new Date(obj.finished_at)\r\n  );\r\n\r\nconst get_flow_item_steps = async (event, uow) => {\r\n  const request = new GetFlowItemStepsRequest({\r\n    flowitem_id: event.flowitem_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetFlowItemStepsResponse) {\r\n    uow.flow_item_step_repository.reset_keeping_refs();\r\n    response.data.forEach((obj) => {\r\n      uow.flow_item_step_repository.set(\r\n        obj.id,\r\n        convert_flow_item_step_response_obj_to_model(obj)\r\n      );\r\n    });\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst restart_flow_item = async (event, uow) => {\r\n  const request = new RestartFlowItemRequest({ id: event.id });\r\n\r\n  const response = await uow.api.call(request);\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof RestartFlowItemResponse) {\r\n    uow.push_message(new RestartFlowItemSuccess());\r\n    return;\r\n  }\r\n\r\n  throw new WrongResponseError();\r\n};\r\n\r\nexport {\r\n  get_flows,\r\n  add_flow,\r\n  update_flow,\r\n  delete_flow,\r\n  get_flow_item,\r\n  restart_flow_item,\r\n  get_many_flow_items,\r\n  get_flow_item_steps,\r\n};\r\n","import { v4 as uuidv4 } from \"uuid\";\r\n\r\nimport {\r\n  ValidateDocumentAgainstAttributeRegexValidationConstraint,\r\n  ValidateDocumentAgainstAttributeTogetherRegexValidationConstraint,\r\n  ValidateDocumentAgainstUniqueTogetherConstraint,\r\n  ValidateDocumentAgainstAttributeHasPreviousValueConstraint,\r\n  ValidateDocumentAgainstHasFileConstraint,\r\n  ValidateDocumentAgainstHasApprovalConstraint,\r\n  ValidateDocumentAgainstSingleUnionConstraint,\r\n  ValidateDocumentAgainstFilenamePatternConstraint,\r\n} from \"../../domain/command\";\r\n\r\nimport {\r\n  NegativeResponse,\r\n  GetManyDocumentsRequest,\r\n  GetManyDocumentsResponse,\r\n  GetDocumentApprovalsRequest,\r\n  GetDocumentApprovalsResponse,\r\n} from \"../../adapters/api\";\r\n\r\nimport { convert_approval_response_obj_to_model } from \"./document_approval_handlers\";\r\n\r\nimport { ApiError } from \"../../domain/event\";\r\n\r\nclass WrongResponseError extends Error {}\r\n\r\nconst reset_document_validation_errors = (event, uow) => {\r\n  uow.doc_repository.reset_errors(event.folder_id, event.document_id);\r\n};\r\n\r\nconst validate_document_against_constraints = (event, uow) => {\r\n  // Если не нужна валидация, выходим\r\n  if (!uow.folder_repository.get_is_necessary_validate(event.folder_id)) return;\r\n\r\n  const constraints = uow.folder_repository.get_validation_constraints(\r\n    event.folder_id\r\n  );\r\n\r\n  // Если проверки не заданы, выходим\r\n  if (!constraints) return;\r\n\r\n  // пытаемся получить id группы пользователей, если мастер-группа\r\n  // пользователей задана у данной папки\r\n  const folder = uow.folder_repository.get(event.folder_id);\r\n  const usergroup_slug = folder.value.master_usergroup_slug;\r\n\r\n  let usergroup_id =\r\n    usergroup_slug === \"\"\r\n      ? null\r\n      : uow.usergroup_repository.get_id_by_slug(usergroup_slug);\r\n\r\n  // Если мастер группа не задана, осуществляем проверку для\r\n  // группы пользователей, в которой находимся\r\n  if (usergroup_id === null) {\r\n    usergroup_id = event.usergroup_id;\r\n  }\r\n\r\n  // console.log('USE, usergroup_idRGROUP ID', usergroup_id)\r\n\r\n  const handlers = {\r\n    attribute_regex_validation:\r\n      ValidateDocumentAgainstAttributeRegexValidationConstraint,\r\n    attribute_together_regex_validation:\r\n      ValidateDocumentAgainstAttributeTogetherRegexValidationConstraint,\r\n    has_file: ValidateDocumentAgainstHasFileConstraint,\r\n    has_approval: ValidateDocumentAgainstHasApprovalConstraint,\r\n    unique_together: ValidateDocumentAgainstUniqueTogetherConstraint,\r\n    attribute_has_previous_value:\r\n      ValidateDocumentAgainstAttributeHasPreviousValueConstraint,\r\n    single_union: ValidateDocumentAgainstSingleUnionConstraint,\r\n    filename_match_pattern: ValidateDocumentAgainstFilenamePatternConstraint,\r\n  };\r\n\r\n  // Валидация на сервере\r\n  uow.doc_repository.start_validation(\r\n    event.folder_id,\r\n    event.document_id,\r\n    constraints.length\r\n  );\r\n\r\n  constraints.forEach((e) => {\r\n    const handler_command = handlers[e.name];\r\n    if (!handler_command) {\r\n      console.log(\"Unknown validation contraint '\" + e.name + \"' \");\r\n      return;\r\n    }\r\n\r\n    uow.push_message(\r\n      new handler_command(\r\n        event.folder_id,\r\n        usergroup_id,\r\n        event.document_id,\r\n        e.parameters,\r\n        e.error_message\r\n      )\r\n    );\r\n  });\r\n};\r\n\r\n// Проверка наличия документов с такими же полями на сервере и в зоне редактирования\r\nconst validate_document_against_unique_together_constraint = async (\r\n  event,\r\n  uow\r\n) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Функция async, поэтому важно попасть ошибками в нужный контейнер\r\n  const errors_container_id = uow.doc_repository.errors_container_id(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Подготавливаем функцию добавления ошибки\r\n  const push_error = () =>\r\n    uow.doc_repository.add_error(\r\n      event.folder_id,\r\n      event.document_id,\r\n      errors_container_id,\r\n      event.error_message\r\n    );\r\n\r\n  const attrs = uow.doc_repository.attributes(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Формируем запрос к серверу в виде точного сопадения\r\n  // unique_together полей\r\n  // Для проверки достаточно 2 документов\r\n  let query = { _LIMIT: 2 };\r\n  let is_all_required_attrs_filled = true;\r\n  event.parameters.fields.forEach((name) => {\r\n    if (!attrs[name]) is_all_required_attrs_filled = false;\r\n    query[name + \"__exact\"] = attrs[name];\r\n  });\r\n\r\n  // Если одно из требуемых полей еще не заполнено,\r\n  // прекращаем валидацию\r\n  if (!is_all_required_attrs_filled) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  const request = new GetManyDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    query: query,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetManyDocumentsResponse) {\r\n    if (\r\n      response.data.count > 1 ||\r\n      (response.data.count === 1 &&\r\n        response.data.documents[0].id !== event.document_id)\r\n    ) {\r\n      // Если на сервере больше одного документа либо один\r\n      // с тем же id, пишем ошибку. Прекращаем проверку\r\n      // console.log(\"push error after request\");\r\n      push_error();\r\n      stop_validation();\r\n      return;\r\n    }\r\n  } else throw new WrongResponseError();\r\n\r\n  // Если на сервере таких документов нет, продолжаем проверку среди новых\r\n  // документов в зоне редактирования\r\n\r\n  const docs = uow.doc_repository.values(event.folder_id);\r\n\r\n  let count_of_docs_with_same_attrs = 0;\r\n  docs.forEach((obj) => {\r\n    // console.log(obj.value.id, 'vs', event.document_id)\r\n    if (obj.value.id == event.document_id) return;\r\n    let are_same = true;\r\n    event.parameters.fields.forEach((key) => {\r\n      if (query[key + \"__exact\"] !== obj.value.get_attribute(key))\r\n        are_same = false;\r\n    });\r\n\r\n    if (are_same === true) count_of_docs_with_same_attrs++;\r\n  });\r\n\r\n  // Если документов с одинаковыми unique_together полями больше одного\r\n  // пишем ошибку\r\n  if (count_of_docs_with_same_attrs > 1) {\r\n    // console.log(\"push, usergroup_id error after internal check\");\r\n    push_error();\r\n  }\r\n\r\n  stop_validation();\r\n};\r\n\r\n// Проверка наличия документов с такими же полями на сервере и в зоне редактирования\r\nconst validate_document_against_has_previous_value_constraint = async (\r\n  event,\r\n  uow\r\n) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Функция async, поэтому важно попасть ошибками в нужный контейнер\r\n  const errors_container_id = uow.doc_repository.errors_container_id(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Подготавливаем функцию добавления ошибки\r\n  const push_error = () =>\r\n    uow.doc_repository.add_error(\r\n      event.folder_id,\r\n      event.document_id,\r\n      errors_container_id,\r\n      event.error_message\r\n    );\r\n\r\n  const attrs = uow.doc_repository.attributes(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Получаем значение поля, требующего проверки\r\n  let is_all_required_attrs_filled = true;\r\n  if (!attrs[event.parameters.field_to_be_checked])\r\n    is_all_required_attrs_filled = false;\r\n  const value_to_be_checked = attrs[event.parameters.field_to_be_checked];\r\n\r\n  // Если поле еще не заполнено, прекращаем валидацию\r\n  if (!is_all_required_attrs_filled) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  // Получаем индекс значени в массиве допустимых значений\r\n  const value_index =\r\n    event.parameters.allowed_values.indexOf(value_to_be_checked);\r\n\r\n  // Если значение = первому из допустимых, прекращаем валидацию\r\n  if (value_index == 0) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  // Если заполненное значение отсутствует в допустимых, выдаем ошибку\r\n  if (value_index == -1) {\r\n    push_error();\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  // Формируем запрос к серверу в виде точного сопадения\r\n  // unique_together полей\r\n  // Для проверки достаточно 2-х документов\r\n  let query = { _LIMIT: 2 };\r\n\r\n  query[event.parameters.field_to_be_checked + \"__exact\"] =\r\n    event.parameters.allowed_values[value_index - 1];\r\n\r\n  event.parameters.fields.forEach((name) => {\r\n    if (!attrs[name]) is_all_required_attrs_filled = false;\r\n    query[name + \"__exact\"] = attrs[name];\r\n  });\r\n\r\n  // Если одно из требуемых полей еще не заполнено,\r\n  // прекращаем валидацию\r\n  if (!is_all_required_attrs_filled) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  const request = new GetManyDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    query: query,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    stop_validation();\r\n    uow.push_message(new ApiError(response.data.code));\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetManyDocumentsResponse) {\r\n    if (\r\n      response.data.count > 1 ||\r\n      (response.data.count === 1 &&\r\n        response.data.documents[0].id !== event.document_id)\r\n    ) {\r\n      // Если на сервере больше одного документа либо один\r\n      // но с другим id. Прекращаем проверку\r\n      stop_validation();\r\n      return;\r\n    }\r\n  } else throw new WrongResponseError();\r\n\r\n  // Если на сервере таких документов нет, продолжаем проверку среди новых\r\n  // документов в зоне редактирования\r\n\r\n  const docs = uow.doc_repository.values(event.folder_id);\r\n\r\n  let count_of_docs_with_same_attrs = 0;\r\n  docs.forEach((obj) => {\r\n    let are_same = true;\r\n\r\n    if (\r\n      query[event.parameters.field_to_be_checked + \"__exact\"] !==\r\n      value_to_be_checked\r\n    )\r\n      are_same = false;\r\n\r\n    event.parameters.fields.forEach((key) => {\r\n      if (query[key + \"__exact\"] !== obj.value.get_attribute(key))\r\n        are_same = false;\r\n    });\r\n\r\n    if (are_same === true) count_of_docs_with_same_attrs++;\r\n  });\r\n\r\n  // Если документов с требуемыми полями больше одного\r\n  // прекращаем проверку\r\n  if (count_of_docs_with_same_attrs > 0) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  // Если документов нигде нет, пишем ошибку.\r\n  push_error();\r\n  stop_validation();\r\n};\r\n\r\n// Проверка наличия у документов файлов\r\nconst validate_document_against_has_file_constraint = (event, uow) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Подготавливаем регулярное выражение\r\n  const flags = event.parameters.case_insensitive === true ? \"i\" : \"\";\r\n  const regexp = new RegExp(event.parameters.pattern, flags);\r\n\r\n  // Получаем документ\r\n  const doc = uow.doc_repository.get(event.folder_id, event.document_id); //Ref\r\n\r\n  // Определяем кол-во файлов, имена которых совпадают с шаблоном\r\n  let count = 0;\r\n  doc.value.files.forEach((file) => {\r\n    if (file.name.toString().match(regexp)) count++;\r\n  });\r\n\r\n  // Сравниваем с предельными количествами\r\n  if (\r\n    (Number.isInteger(event.parameters.min_count) &&\r\n      count < event.parameters.min_count) ||\r\n    (Number.isInteger(event.parameters.max_count) &&\r\n      count > event.parameters.max_count)\r\n  ) {\r\n    // Выдаем ошибку, функция синхронная (можно использовать упрощенный способ)\r\n    uow.doc_repository.add_error_easy(\r\n      event.folder_id,\r\n      event.document_id,\r\n      event.error_message\r\n    );\r\n  }\r\n\r\n  stop_validation();\r\n};\r\n\r\n// Проверка соответствия аттрибута документа регулярному выражению\r\nconst validate_document_against_attribute_regex_validation_constraint = (\r\n  event,\r\n  uow\r\n) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Подготавливаем регулярное выражение\r\n  const flags = event.parameters.case_insensitive === true ? \"i\" : \"\";\r\n  const regexp = new RegExp(event.parameters.pattern, flags);\r\n\r\n  // Получаем документ\r\n  const doc = uow.doc_repository.get(event.folder_id, event.document_id); //Ref\r\n\r\n  // Получаем аттрибут\r\n  const attr = get_nested_attribute_from_document(doc, event.parameters.field);\r\n\r\n  // Проверяем на соответствие регулярному выражению\r\n  if (attr !== undefined && attr !== null)\r\n    if (typeof attr === \"object\" || attr.match(regexp)) {\r\n      stop_validation();\r\n      return;\r\n    }\r\n\r\n  // Выдаем ошибку, функция синхронная (можно использовать упрощенный способ)\r\n  uow.doc_repository.add_error_easy(\r\n    event.folder_id,\r\n    event.document_id,\r\n    event.error_message\r\n  );\r\n\r\n  stop_validation();\r\n};\r\n\r\n// Проверка соответствия атрибута документа регулярному выражению\r\n// при соответствии другого атрибута документа регулярному выражению\r\nconst validate_document_against_attribute_together_regex_validation_constraint =\r\n  (event, uow) => {\r\n    const stop_validation = () => {\r\n      uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n    };\r\n\r\n    // Подготавливаем регулярное выражение\r\n    const flags = event.parameters.case_insensitive === true ? \"i\" : \"\";\r\n    const subject_regexp = new RegExp(event.parameters.subject_pattern, flags);\r\n    const object_regexp = new RegExp(event.parameters.object_pattern, flags);\r\n\r\n    // Получаем документ\r\n    const doc = uow.doc_repository.get(event.folder_id, event.document_id); //Ref\r\n\r\n    // Получаем аттрибут\r\n    // const subject_attr = doc.value.get_attribute(\r\n    //   event.parameters.subject_field\r\n    // );\r\n    const subject_attr = get_nested_attribute_from_document(\r\n      doc,\r\n      event.parameters.subject_field\r\n    );\r\n    const object_attr = get_nested_attribute_from_document(\r\n      doc,\r\n      event.parameters.object_field\r\n    );\r\n    // const object_attr = doc.value.get_attribute(event.parameters.object_field);\r\n\r\n    // Проверяем на соответствие регулярному выражению\r\n    if (\r\n      subject_attr !== undefined &&\r\n      subject_attr !== null &&\r\n      object_attr !== undefined &&\r\n      object_attr !== null\r\n    ) {\r\n      if (subject_attr.toString().match(subject_regexp)) {\r\n        if (object_attr.toString().match(object_regexp)) {\r\n          stop_validation();\r\n          return;\r\n        }\r\n      } else {\r\n        stop_validation();\r\n        return;\r\n      }\r\n\r\n      // Выдаем ошибку, функция синхронная (можно использовать упрощенный способ)\r\n      uow.doc_repository.add_error_easy(\r\n        event.folder_id,\r\n        event.document_id,\r\n        event.error_message\r\n      );\r\n    }\r\n\r\n    stop_validation();\r\n  };\r\n\r\n// Проверка наличия документов на сервере с такими же полями, но относящихся к разным union\r\nconst validate_document_against_single_union_constraint = async (\r\n  event,\r\n  uow\r\n) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Функция async, поэтому важно попасть ошибками в нужный контейнер\r\n  const errors_container_id = uow.doc_repository.errors_container_id(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Подготавливаем функцию добавления ошибки\r\n  const push_error = () =>\r\n    uow.doc_repository.add_error(\r\n      event.folder_id,\r\n      event.document_id,\r\n      errors_container_id,\r\n      event.error_message\r\n    );\r\n\r\n  const attrs = uow.doc_repository.attributes(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Формируем запрос к серверу в виде точного сопадения\r\n  // unique_together полей\r\n  let query = {};\r\n  let is_all_required_attrs_filled = true;\r\n  event.parameters.fields.forEach((name) => {\r\n    if (!attrs[name]) is_all_required_attrs_filled = false;\r\n    query[name + \"__exact\"] = attrs[name];\r\n  });\r\n\r\n  // Если одно из требуемых полей еще не заполнено,\r\n  // прекращаем валидацию\r\n  if (!is_all_required_attrs_filled) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  const request = new GetManyDocumentsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    query: query,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetManyDocumentsResponse) {\r\n    let union_id_already_assigned = false;\r\n\r\n    // Определяем кол-во уникальных union в полученных документах\r\n    let union_ids_obj = {};\r\n    response.data.documents.forEach((doc) => {\r\n      if (doc.union !== null) union_ids_obj[doc.union] = true;\r\n    });\r\n    const union_ids = Object.keys(union_ids_obj);\r\n\r\n    if (union_ids.length > 1) {\r\n      // Если на сервере больше одного уникального union_id, пишем ошибку. Прекращаем проверку\r\n      push_error();\r\n      stop_validation();\r\n      return;\r\n    }\r\n\r\n    // Присваиваем документу найденный union ID\r\n    if (union_ids.length === 1) {\r\n      uow.doc_repository.set_union(\r\n        event.folder_id,\r\n        event.document_id,\r\n        union_ids[0]\r\n      );\r\n      union_id_already_assigned = true;\r\n      stop_validation();\r\n      return;\r\n    }\r\n\r\n    // Если на сервере таких документов нет, продолжаем проверку среди новых\r\n    // документов в зоне редактирования\r\n\r\n    const docs = uow.doc_repository.values(event.folder_id);\r\n\r\n    docs.forEach((obj) => {\r\n      // Если это тот же самый документ, пропускаем\r\n      if (obj.value.id === event.document_id || union_id_already_assigned) {\r\n        return;\r\n      }\r\n\r\n      // Если не тот же самый, производим сравнение\r\n      let are_same = true;\r\n      event.parameters.fields.forEach((key) => {\r\n        if (query[key + \"__exact\"] !== obj.value.get_attribute(key))\r\n          are_same = false;\r\n      });\r\n\r\n      // Если в зоне редактирования уже есть такой же документ с присвоенным union,\r\n      // используем его\r\n      if (are_same === true && obj.union !== null) {\r\n        uow.doc_repository.set_union(\r\n          event.folder_id,\r\n          event.document_id,\r\n          obj.value.union\r\n        );\r\n        union_id_already_assigned = true;\r\n        return;\r\n      }\r\n    });\r\n\r\n    // Если union id уже присвоен\r\n    if (union_id_already_assigned) {\r\n      stop_validation();\r\n      return;\r\n    }\r\n\r\n    // Если ни в зоне редактирования, ни на сервере таких документов нет\r\n    // Присваиваем новый union_id\r\n    uow.doc_repository.set_union(event.folder_id, event.document_id, uuidv4());\r\n  }\r\n\r\n  stop_validation();\r\n  throw new WrongResponseError();\r\n};\r\n\r\n// Проверка соответствия атрибута документа регулярному выражению\r\n// при соответствии другого атрибута документа регулярному выражению\r\nconst validate_document_against_filename_pattern_constraint = (event, uow) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Получаем документ\r\n  const doc = uow.doc_repository.get(event.folder_id, event.document_id); //Ref\r\n\r\n  // Формируем\r\n  const filename_pattern = uow.folder_repository.get_filename_pattern(\r\n    event.folder_id,\r\n    doc.value.attributes\r\n  );\r\n\r\n  // Подготавливаем регулярное выражение\r\n  if (filename_pattern === null || filename_pattern == \"\") return;\r\n  const regexp = new RegExp(filename_pattern);\r\n\r\n  // Получаем минимальное кол-во файлов, имена которых должны совпасть\r\n  const min_count = event.parameters.min_count;\r\n\r\n  // Проверяем каждый файл на соответствие регулярному выражению\r\n  let wrong_filenames = [];\r\n  doc.value.files.forEach((file) => {\r\n    if (file.name.toString().match(regexp)) {\r\n      return;\r\n    }\r\n    wrong_filenames.push(file.name);\r\n  });\r\n\r\n  if (\r\n    (min_count &&\r\n      doc.value.files.length - wrong_filenames.length < min_count) ||\r\n    (!min_count && wrong_filenames.length > 0)\r\n  )\r\n    // Выдаем ошибку, функция синхронная (можно использовать упрощенный способ)\r\n    wrong_filenames.forEach((filename) =>\r\n      uow.doc_repository.add_error_easy(\r\n        event.folder_id,\r\n        event.document_id,\r\n        filename + \" | \" + event.error_message\r\n      )\r\n    );\r\n\r\n  stop_validation();\r\n};\r\n\r\n// Проверка наличия согласований\r\nconst validate_document_against_has_approval_constraint = async (\r\n  event,\r\n  uow\r\n) => {\r\n  const stop_validation = () => {\r\n    uow.doc_repository.stop_validation(event.folder_id, event.document_id);\r\n  };\r\n\r\n  // Получаем документ\r\n  const doc = uow.doc_repository.get(event.folder_id, event.document_id); //Ref\r\n\r\n  // Если документ не сохранен, прекращаем валидацию, так как он может быть\r\n  // еще не создан и это вызовет ошибку при получении согласований.\r\n  if (!doc.value.is_saved) {\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  // Функция async, поэтому важно попасть ошибками в нужный контейнер\r\n  const errors_container_id = uow.doc_repository.errors_container_id(\r\n    event.folder_id,\r\n    event.document_id\r\n  );\r\n\r\n  // Подготавливаем функцию добавления ошибки\r\n  const push_error = () =>\r\n    uow.doc_repository.add_error(\r\n      event.folder_id,\r\n      event.document_id,\r\n      errors_container_id,\r\n      event.error_message\r\n    );\r\n\r\n  const request = new GetDocumentApprovalsRequest({\r\n    folder_id: event.folder_id,\r\n    usergroup_id: event.usergroup_id,\r\n    document_id: event.document_id,\r\n  });\r\n\r\n  const response = await uow.api.call(request);\r\n\r\n  if (response instanceof NegativeResponse) {\r\n    uow.push_message(new ApiError(response.data.code));\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  if (response instanceof GetDocumentApprovalsResponse) {\r\n    // Определяем пользователей, которые согласовали или делегировали\r\n    // после последнего сохранения\r\n    const approvals = response.data\r\n      .map((obj) => convert_approval_response_obj_to_model(obj))\r\n      .filter(\r\n        (x) =>\r\n          x.updated_at > doc.value.updated_at &&\r\n          [\"APPROVED\", \"DELEGATED\"].includes(x.state)\r\n      );\r\n\r\n    approvals.sort((a, b) => a.updated_at > b.updated_at);\r\n\r\n    const approvals_by_id = {};\r\n    approvals.forEach((x) => (approvals_by_id[x.id] = x));\r\n\r\n    //  Подменяем все делегирования на финальный статус\r\n    const state_by_username = {};\r\n    approvals.forEach((x) => {\r\n      const state = x.state;\r\n      let obj = x;\r\n\r\n      state_by_username[obj.to_username] = state;\r\n      while (obj.delegated_from) {\r\n        obj = approvals_by_id[obj.delegated_from];\r\n        state_by_username[obj.to_username] = state;\r\n      }\r\n    });\r\n\r\n    //  Создаем массив имен пользователей согласовавших\r\n    let usernames_who_approved = [];\r\n    Object.keys(state_by_username).forEach((username) => {\r\n      if (state_by_username[username] === \"APPROVED\")\r\n        usernames_who_approved.push(username);\r\n    });\r\n\r\n    //  Находим разницу массивов\r\n    const difference = event.parameters.usernames.filter(\r\n      (x) => !usernames_who_approved.includes(x)\r\n    );\r\n\r\n    //  Если хотя бы одно из необходимых согласований не найдено\r\n    if (difference.length > 0) {\r\n      push_error();\r\n    }\r\n\r\n    stop_validation();\r\n    return;\r\n  }\r\n\r\n  stop_validation();\r\n  throw new WrongResponseError();\r\n};\r\n\r\nconst get_nested_attribute_from_document = (doc, attr_name) => {\r\n  const attr_names = attr_name.split(\"__\");\r\n  const doc_attr_key = attr_names.shift();\r\n  let value = doc.value.get_attribute(doc_attr_key);\r\n\r\n  while (attr_names.length > 0) {\r\n    const nested_key = attr_names.shift();\r\n    value = value[nested_key];\r\n  }\r\n\r\n  return value;\r\n};\r\n\r\nexport {\r\n  reset_document_validation_errors,\r\n  get_nested_attribute_from_document,\r\n  validate_document_against_constraints,\r\n  validate_document_against_attribute_regex_validation_constraint,\r\n  validate_document_against_attribute_together_regex_validation_constraint,\r\n  validate_document_against_unique_together_constraint,\r\n  validate_document_against_has_previous_value_constraint,\r\n  validate_document_against_has_file_constraint,\r\n  validate_document_against_single_union_constraint,\r\n  validate_document_against_filename_pattern_constraint,\r\n  validate_document_against_has_approval_constraint,\r\n};\r\n","import {\r\n  Notify,\r\n  NotifyApiError,\r\n  GetUserPermissions,\r\n  ValidateDocument,\r\n  GetRoles,\r\n  GetInfo,\r\n  // GetPermissionsByRoles,\r\n} from \"../domain/command\";\r\nimport { MessageBus } from \"../service_layer/message_bus\";\r\n\r\nconst handle_api_error = (event, uow) => {\r\n  if (event.code === \"Auth.Token.Fail\") {\r\n    return;\r\n  }\r\n  uow.push_message(new NotifyApiError(event.code));\r\n};\r\n\r\nconst handle_access_perm_fail_error = (event, uow) => {\r\n  uow.push_message(\r\n    new Notify(\"error\", \"Недостаточно прав для доступа к странице\")\r\n  );\r\n};\r\n\r\nconst user_login_success = async (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Вы вошли в систему\"));\r\n  await MessageBus.handle(new GetUserPermissions(), uow);\r\n};\r\n\r\nconst user_logout_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"info\", \"Вы вышли из системы\"));\r\n};\r\n\r\nconst users_get_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"info\", \"Данные пользователей получены\"));\r\n};\r\n\r\nconst users_update_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Сохранено\"));\r\n};\r\n\r\nconst users_delete_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Удалено\"));\r\n};\r\n\r\nconst user_replacement_add_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Замещение добавлено\"));\r\n};\r\n\r\nconst user_replacement_delete_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Замещение удалено\"));\r\n};\r\n\r\nconst on_behalf_user_change_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Установлено. Обновите страницу.\"));\r\n};\r\n\r\nconst on_behalf_user_delete_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Вы работаете от своего имени. Обновите станицу.\"));\r\n};\r\n\r\nconst folders_add_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Сохранено\"));\r\n};\r\n\r\nconst folders_update_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Сохранено\"));\r\n};\r\n\r\nconst folders_delete_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", \"Удалено\"));\r\n};\r\n\r\nconst handle_upload_file_error = (event, uow) => {\r\n  uow.push_message(\r\n    new Notify(\"error\", `Ошибка загрузки файла ${event.filename}`)\r\n  );\r\n};\r\n\r\nconst handle_upload_empty_file_error = (event, uow) => {\r\n  uow.push_message(\r\n    new Notify(\"error\", `Файл \"${event.filename}\" имеет нулевой размер`)\r\n  );\r\n};\r\n\r\nconst handle_upload_file_too_big_error = (event, uow) => {\r\n  uow.push_message(\r\n    new Notify(\"error\", `Файл \"${event.filename}\" слишком велик`)\r\n  );\r\n};\r\n\r\nconst handle_upload_file_wrong_extension_error = (event, uow) => {\r\n  uow.push_message(\r\n    new Notify(\r\n      \"error\",\r\n      `Файл \"${event.filename}\" имеет неправильное расширение`\r\n    )\r\n  );\r\n};\r\n\r\nconst handle_upload_file_wrong_filename_error = (event, uow) => {\r\n  uow.push_message(\r\n    new Notify(\r\n      \"error\",\r\n      `Файл \"${event.filename}\" имеет неправильное имя`\r\n    )\r\n  );\r\n};\r\n\r\nconst handle_upload_file_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Файл загружен`));\r\n};\r\n\r\nconst handle_save_many_documents_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Сохранение завершено`));\r\n};\r\n\r\nconst handle_delete_many_documents_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Удаление завершено`));\r\n};\r\n\r\nconst handle_document_attributes_changed = (event, uow) => {\r\n  uow.push_message(\r\n    new ValidateDocument(event.folder_id, event.usergroup_id, event.document_id)\r\n  );\r\n};\r\n\r\nconst handle_duplicate_document_to_usergroup_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Документ успешно скопирован`));\r\n};\r\n\r\nconst handle_duplicate_many_documents_to_usergroup_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Документы успешно скопированы`));\r\n};\r\n\r\nconst handle_document_files_are_uploading = (event, uow) => {\r\n  uow.push_message(new Notify(\"error\", `Загрузка файлов еще продолжается`));\r\n};\r\n\r\nconst handle_file_updated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Файл обновлен`));\r\n};\r\n\r\nconst handle_file_deleted_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Файл удален`));\r\n};\r\n\r\nconst handle_file_attached_to_document = (event, uow) => {\r\n  uow.push_message(\r\n    new ValidateDocument(event.folder_id, event.usergroup_id, event.document_id)\r\n  );\r\n};\r\n\r\nconst handle_file_detached_from_document = (event, uow) => {\r\n  uow.push_message(\r\n    new ValidateDocument(event.folder_id, event.usergroup_id, event.document_id)\r\n  );\r\n};\r\n\r\nconst handle_files_allocated = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Загруженные файлы распределены`));\r\n};\r\n\r\nconst handle_document_button_pushed = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Действие выполнено`));\r\n};\r\n\r\nconst handle_add_role_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Роль добавлена`));\r\n  uow.push_message(new GetRoles());\r\n};\r\n\r\nconst handle_delete_role_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Роль удалена`));\r\n  uow.push_message(new GetRoles());\r\n};\r\n\r\nconst handle_add_user_folder_settings_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Настройки добавлены`));\r\n};\r\n\r\nconst handle_set_user_folder_settings_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Настройки установлены`));\r\n};\r\n\r\nconst handle_delete_user_folder_settings_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Настройки удалены`));\r\n};\r\n\r\nconst handle_set_user_search_schema_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Пользовательская схема установлена`));\r\n};\r\n\r\nconst handle_add_permission_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Разрешение добавлено`));\r\n};\r\n\r\nconst handle_delete_permission_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Разрешение удалено`));\r\n};\r\n\r\nconst handle_document_link_copied = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Ссылка на документ скопирована`));\r\n};\r\n\r\nconst handle_file_link_copied = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Ссылка на файл скопирована`));\r\n};\r\n\r\nconst handle_add_user_group_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Группа пользователей добавлена`));\r\n};\r\n\r\nconst handle_update_user_group_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Группа пользователей обновлена`));\r\n};\r\n\r\nconst handle_delete_user_group_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Группа пользователей удалена`));\r\n};\r\n\r\nconst handle_user_group_has_not_been_assigned = (event, uow) => {\r\n  uow.push_message(new Notify(\"error\", `Не выбрана группа пользователей`));\r\n};\r\n\r\nconst handle_document_added_to_cart_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Документ добавлен в корзину`));\r\n};\r\n\r\nconst handle_document_removed_from_cart_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Документ удален из корзины`));\r\n};\r\n\r\nconst handle_many_documents_added_to_cart_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Документы добавлены в корзину`));\r\n};\r\n\r\nconst handle_add_flow_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Поток создан`));\r\n};\r\n\r\nconst handle_update_flow_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Поток обновлен`));\r\n};\r\n\r\nconst handle_delete_flow_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Поток удален`));\r\n};\r\n\r\nconst handle_restart_flow_item_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Экземпляр потока перезапущен`));\r\n};\r\n\r\nconst handle_self_testing_replied_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Правильно`));\r\n};\r\n\r\nconst handle_self_testing_replied_fail = (event, uow) => {\r\n  uow.push_message(new Notify(\"error\", `Неверно`));\r\n};\r\n\r\nconst handle_document_approval_added_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Запрос на согласование добавлен`));\r\n  uow.push_message(new GetInfo());\r\n};\r\n\r\nconst handle_document_approval_updated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Согласование/Отклонение выполнено`));\r\n  uow.push_message(new GetInfo());\r\n};\r\n\r\nconst handle_document_approval_deleted_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Согласование удалено`));\r\n  uow.push_message(new GetInfo());\r\n};\r\n\r\nconst handle_document_approval_delegated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Согласование делегировано`));\r\n  uow.push_message(new GetInfo());\r\n};\r\n\r\nconst handle_empty_approval_flow_saved = (event, uow) => {\r\n  uow.push_message(new Notify(\"error\", `Нельзя сохранить пустой поток согласований`));\r\n};\r\n\r\nconst handle_approval_flow_upload_error = (event, uow) => {\r\n  uow.push_message(new Notify(\"error\", `Ошибка загрузки потока согласований`));\r\n};\r\n\r\nconst handle_approval_flow_started = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Поток согласований запущен`));\r\n  uow.push_message(new GetInfo());\r\n};\r\n\r\nconst handle_approval_flow_stopped = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Поток согласований остановлен`));\r\n  uow.push_message(new GetInfo());\r\n};\r\n\r\nconst handle_server_setting_updated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Параметр изменен`));\r\n};\r\n\r\nconst handle_mailbox_added_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Почтовый ящик добавлен`));\r\n};\r\n\r\nconst handle_mailbox_updated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Почтовый ящик изменен`));\r\n};\r\n\r\nconst handle_mailbox_deleted_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Почтовый ящик удален`));\r\n};\r\n\r\nconst handle_mail_channel_added_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Почтовый канал добавлен`));\r\n};\r\n\r\nconst handle_mail_channel_updated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Почтовый канал изменен`));\r\n};\r\n\r\nconst handle_mail_channel_deleted_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Почтовый канал удален`));\r\n};\r\n\r\nconst handle_mail_channel_fetched_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Письма в почтовом канале обновлены`));\r\n};\r\n\r\nconst handle_mail_message_deleted_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Письмо удалено`));\r\n};\r\n\r\nconst handle_counter_added_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Счетчик добавлен`));\r\n};\r\n\r\nconst handle_counter_updated_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Счетчик изменен`));\r\n};\r\n\r\nconst handle_counter_deleted_success = (event, uow) => {\r\n  uow.push_message(new Notify(\"success\", `Счетчик удален`));\r\n};\r\n\r\nexport {\r\n  handle_api_error,\r\n  handle_access_perm_fail_error,\r\n  user_login_success,\r\n  user_logout_success,\r\n  users_get_success,\r\n  users_update_success,\r\n  users_delete_success,\r\n  user_replacement_add_success,\r\n  user_replacement_delete_success,\r\n  on_behalf_user_change_success,\r\n  on_behalf_user_delete_success,\r\n  folders_add_success,\r\n  folders_update_success,\r\n  folders_delete_success,\r\n  handle_upload_file_error,\r\n  handle_upload_empty_file_error,\r\n  handle_upload_file_too_big_error,\r\n  handle_upload_file_wrong_extension_error,\r\n  handle_upload_file_wrong_filename_error,\r\n  handle_upload_file_success,\r\n  handle_save_many_documents_success,\r\n  handle_delete_many_documents_success,\r\n  handle_document_attributes_changed,\r\n  handle_duplicate_document_to_usergroup_success,\r\n  handle_duplicate_many_documents_to_usergroup_success,\r\n  handle_document_files_are_uploading,\r\n  handle_document_button_pushed,\r\n  handle_file_updated_success,\r\n  handle_file_deleted_success,\r\n  handle_files_allocated,\r\n  handle_file_attached_to_document,\r\n  handle_file_detached_from_document,\r\n  handle_add_role_success,\r\n  handle_delete_role_success,\r\n  handle_add_user_folder_settings_success,\r\n  handle_set_user_folder_settings_success,\r\n  handle_delete_user_folder_settings_success,\r\n  handle_set_user_search_schema_success,\r\n  handle_add_permission_success,\r\n  handle_delete_permission_success,\r\n  handle_document_link_copied,\r\n  handle_file_link_copied,\r\n  handle_add_user_group_success,\r\n  handle_update_user_group_success,\r\n  handle_delete_user_group_success,\r\n  handle_user_group_has_not_been_assigned,\r\n  handle_document_added_to_cart_success,\r\n  handle_document_removed_from_cart_success,\r\n  handle_many_documents_added_to_cart_success,\r\n  handle_add_flow_success,\r\n  handle_update_flow_success,\r\n  handle_delete_flow_success,\r\n  handle_restart_flow_item_success,\r\n  handle_self_testing_replied_success,\r\n  handle_self_testing_replied_fail,\r\n  handle_document_approval_added_success,\r\n  handle_document_approval_updated_success,\r\n  handle_document_approval_deleted_success,\r\n  handle_document_approval_delegated_success,\r\n  handle_empty_approval_flow_saved,\r\n  handle_approval_flow_started,\r\n  handle_approval_flow_stopped,\r\n  handle_approval_flow_upload_error,\r\n  handle_server_setting_updated_success,\r\n  handle_mailbox_added_success,\r\n  handle_mailbox_updated_success,\r\n  handle_mailbox_deleted_success,\r\n  handle_mail_channel_added_success,\r\n  handle_mail_channel_updated_success,\r\n  handle_mail_channel_deleted_success,\r\n  handle_mail_channel_fetched_success,\r\n  handle_mail_message_deleted_success,\r\n  handle_counter_added_success,\r\n  handle_counter_updated_success,\r\n  handle_counter_deleted_success,\r\n};\r\n","/*eslint no-constant-condition: [\"error\", { \"checkLoops\": false }]*/\r\n\r\nimport { Command } from \"../domain/command\";\r\nimport { Event } from \"../domain/event\";\r\nimport {\r\n  notify,\r\n  notify_api_error,\r\n  get_info,\r\n} from \"./command_handlers/common_handlers\";\r\n\r\nimport {\r\n  login_with_credentials,\r\n  login_with_token,\r\n  logout,\r\n  get_users,\r\n  set_user,\r\n  delete_user,\r\n  get_user_replacements,\r\n  add_user_replacement,\r\n  delete_user_replacement,\r\n  get_user_replacements_of_user,\r\n  add_user_replacement_to_user,\r\n  delete_user_replacement_from_user,\r\n  get_on_behalf_users,\r\n  set_on_behalf_user,\r\n  delete_on_behalf_user,\r\n  get_user_email_context,\r\n} from \"./command_handlers/user_handlers\";\r\n\r\nimport {\r\n  get_user_groups,\r\n  add_user_group,\r\n  update_user_group,\r\n  delete_user_group,\r\n  add_user_to_user_group,\r\n  delete_user_from_user_group,\r\n  set_current_user_group,\r\n} from \"./command_handlers/usergroup_handlers\";\r\n\r\nimport {\r\n  get_permissions,\r\n  add_permission,\r\n  delete_permission,\r\n  get_user_permissions,\r\n  get_user_permissions_for_folder,\r\n} from \"./command_handlers/permission_handlers\";\r\n\r\nimport {\r\n  get_roles,\r\n  add_role,\r\n  delete_role,\r\n} from \"./command_handlers/role_handlers\";\r\n\r\nimport {\r\n  get_folders,\r\n  add_folder,\r\n  delete_folder,\r\n  update_folder,\r\n  get_user_folder_settings,\r\n  add_user_folder_settings,\r\n  set_user_folder_settings,\r\n  delete_user_folder_settings,\r\n  get_user_search_schema,\r\n  set_user_search_schema,\r\n  delete_user_search_schema,\r\n} from \"./command_handlers/folder_handlers\";\r\n\r\nimport {\r\n  get_many_documents,\r\n  get_document,\r\n  set_document_attribute,\r\n  save_documents_in_folder,\r\n  save_many_documents,\r\n  mark_document_as_deleted,\r\n  mark_document_as_not_deleted,\r\n  delete_many_documents,\r\n  add_document,\r\n  add_document_model,\r\n  duplicate_document_to_usergroup,\r\n  duplicate_many_documents_to_usergroup,\r\n  get_document_attributes_context,\r\n  get_document_previous_attribute_context,\r\n} from \"./command_handlers/document_handlers\";\r\n\r\nimport {\r\n  push_document_button,\r\n  perform_action_on_documents,\r\n} from \"./command_handlers/document_action_handlers\";\r\n\r\nimport {\r\n  get_document_approvals,\r\n  get_many_documents_approvals,\r\n  add_document_approval,\r\n  update_document_approval,\r\n  delete_document_approval,\r\n  delegate_document_approval,\r\n  get_document_approval_spare_files,\r\n  upload_document_approval_file,\r\n  delete_document_approval_file,\r\n  get_waiting_document_approvals,\r\n} from \"./command_handlers/document_approval_handlers\";\r\n\r\nimport {\r\n  create_document_approval_flow,\r\n  add_document_approval_flow_step,\r\n  delete_document_approval_flow_step,\r\n  attach_user_to_document_approval_flow_step,\r\n  delete_user_from_document_approval_flow_step,\r\n  get_document_approval_flow,\r\n  set_document_approval_flow,\r\n  start_document_approval_flow,\r\n  stop_document_approval_flow,\r\n} from \"./command_handlers/document_approval_flow_handlers\";\r\n\r\nimport {\r\n  get_cart_documents,\r\n  add_document_to_cart,\r\n  add_many_documents_to_cart,\r\n  remove_document_from_cart,\r\n  empty_cart,\r\n} from \"./command_handlers/cart_handlers\";\r\n\r\nimport {\r\n  get_server_settings,\r\n  update_server_setting,\r\n} from \"./command_handlers/server_settings_handlers\";\r\n\r\nimport {\r\n  get_mailboxes,\r\n  add_mailbox,\r\n  update_mailbox,\r\n  delete_mailbox,\r\n  get_mail_channels,\r\n  add_mail_channel,\r\n  update_mail_channel,\r\n  delete_mail_channel,\r\n  add_mail_channel_to_mailbox,\r\n  delete_mail_channel_from_mailbox,\r\n  fetch_mail_channel,\r\n  get_mail_messages,\r\n  delete_mail_message,\r\n  download_mail_message,\r\n  download_mail_message_attachment,\r\n} from \"./command_handlers/mail_handlers\";\r\n\r\nimport {\r\n  upload_file_to_folder,\r\n  download_file_from_folder,\r\n  download_many_documents_files_as_archive,\r\n  download_document_files_as_archive,\r\n  get_file_info,\r\n  delete_file_from_folder,\r\n  update_file_from_folder,\r\n  flush_file_container,\r\n  get_spare_files,\r\n  update_upload_progress,\r\n  download_excel_file,\r\n  download_json_file,\r\n  attach_file_to_document,\r\n  detach_file_from_document,\r\n  attach_files_to_document_using_pattern,\r\n  allocate_files_to_documents_using_pattern,\r\n} from \"./command_handlers/file_handlers\";\r\n\r\nimport {\r\n  get_pdf_merge_files,\r\n  upload_pdf_merge_file,\r\n  update_pdf_merge_file,\r\n  delete_pdf_merge_file,\r\n  delete_all_pdf_merge_files,\r\n  download_pdf_merge_result,\r\n  download_pdf_mix_result,\r\n  get_share_files,\r\n  upload_share_file,\r\n  delete_share_file,\r\n  download_share_file,\r\n  drop_self_testing_questions,\r\n  add_self_testing_question,\r\n} from \"./command_handlers/service_handlers\";\r\n\r\nimport {\r\n  get_counters,\r\n  add_counter,\r\n  update_counter,\r\n  delete_counter,\r\n} from \"./command_handlers/counter_handlers\";\r\n\r\nimport {\r\n  get_flows,\r\n  add_flow,\r\n  update_flow,\r\n  delete_flow,\r\n  get_flow_item,\r\n  get_many_flow_items,\r\n  restart_flow_item,\r\n  get_flow_item_steps,\r\n} from \"./command_handlers/flow_handlers\";\r\n\r\nimport {\r\n  reset_document_validation_errors,\r\n  validate_document_against_constraints,\r\n  validate_document_against_attribute_regex_validation_constraint,\r\n  validate_document_against_attribute_together_regex_validation_constraint,\r\n  validate_document_against_unique_together_constraint,\r\n  validate_document_against_has_previous_value_constraint,\r\n  validate_document_against_has_file_constraint,\r\n  validate_document_against_has_approval_constraint,\r\n  validate_document_against_single_union_constraint,\r\n  validate_document_against_filename_pattern_constraint,\r\n} from \"./command_handlers/validation_handlers\";\r\n\r\nimport {\r\n  handle_api_error,\r\n  handle_access_perm_fail_error,\r\n  handle_upload_file_error,\r\n  user_login_success,\r\n  user_logout_success,\r\n  users_get_success,\r\n  users_update_success,\r\n  users_delete_success,\r\n  user_replacement_add_success,\r\n  user_replacement_delete_success,\r\n  on_behalf_user_change_success,\r\n  on_behalf_user_delete_success,\r\n  folders_add_success,\r\n  folders_update_success,\r\n  folders_delete_success,\r\n  handle_upload_empty_file_error,\r\n  handle_upload_file_too_big_error,\r\n  handle_upload_file_wrong_extension_error,\r\n  handle_upload_file_wrong_filename_error,\r\n  handle_upload_file_success,\r\n  handle_delete_many_documents_success,\r\n  handle_save_many_documents_success,\r\n  handle_document_attributes_changed,\r\n  handle_duplicate_document_to_usergroup_success,\r\n  handle_duplicate_many_documents_to_usergroup_success,\r\n  handle_document_files_are_uploading,\r\n  handle_file_updated_success,\r\n  handle_file_deleted_success,\r\n  handle_files_allocated,\r\n  handle_document_button_pushed,\r\n  handle_file_attached_to_document,\r\n  handle_file_detached_from_document,\r\n  handle_add_role_success,\r\n  handle_delete_role_success,\r\n  handle_add_user_folder_settings_success,\r\n  handle_set_user_folder_settings_success,\r\n  handle_delete_user_folder_settings_success,\r\n  handle_set_user_search_schema_success,\r\n  handle_add_permission_success,\r\n  handle_delete_permission_success,\r\n  handle_document_link_copied,\r\n  handle_file_link_copied,\r\n  handle_add_user_group_success,\r\n  handle_update_user_group_success,\r\n  handle_delete_user_group_success,\r\n  handle_user_group_has_not_been_assigned,\r\n  handle_document_added_to_cart_success,\r\n  handle_document_removed_from_cart_success,\r\n  handle_many_documents_added_to_cart_success,\r\n  handle_add_flow_success,\r\n  handle_update_flow_success,\r\n  handle_delete_flow_success,\r\n  handle_restart_flow_item_success,\r\n  handle_self_testing_replied_success,\r\n  handle_self_testing_replied_fail,\r\n  handle_document_approval_added_success,\r\n  handle_document_approval_updated_success,\r\n  handle_document_approval_deleted_success,\r\n  handle_document_approval_delegated_success,\r\n  handle_empty_approval_flow_saved,\r\n  handle_approval_flow_started,\r\n  handle_approval_flow_stopped,\r\n  handle_approval_flow_upload_error,\r\n  handle_server_setting_updated_success,\r\n  handle_mailbox_added_success,\r\n  handle_mailbox_updated_success,\r\n  handle_mailbox_deleted_success,\r\n  handle_mail_channel_added_success,\r\n  handle_mail_channel_updated_success,\r\n  handle_mail_channel_deleted_success,\r\n  handle_mail_channel_fetched_success,\r\n  handle_mail_message_deleted_success,\r\n  handle_counter_added_success,\r\n  handle_counter_updated_success,\r\n  handle_counter_deleted_success,\r\n} from \"./event_handlers\";\r\n\r\nconst COMMAND_HANDLERS = {\r\n  Notify: [notify],\r\n  NotifyApiError: [notify_api_error],\r\n  GetInfo: [get_info],\r\n\r\n  // USER\r\n  LoginWithCredentials: [login_with_credentials],\r\n  LoginWithToken: [login_with_token],\r\n  Logout: [logout],\r\n  GetUsers: [get_users],\r\n  SetUser: [set_user],\r\n  DeleteUser: [delete_user],\r\n  GetUserReplacements: [get_user_replacements],\r\n  AddUserReplacement: [add_user_replacement],\r\n  DeleteUserReplacement: [delete_user_replacement],\r\n  GetUserReplacementsOfUser: [get_user_replacements_of_user],\r\n  AddUserReplacementToUser: [add_user_replacement_to_user],\r\n  DeleteUserReplacementFromUser: [delete_user_replacement_from_user],\r\n  GetOnBehalfUsers: [get_on_behalf_users],\r\n  SetOnBehalfUser: [set_on_behalf_user],\r\n  DeleteOnBehalfUser: [delete_on_behalf_user],\r\n\r\n  // USER GROUPS\r\n  GetUserGroups: [get_user_groups],\r\n  AddUserGroup: [add_user_group],\r\n  UpdateUserGroup: [update_user_group],\r\n  DeleteUserGroup: [delete_user_group],\r\n  AddUserToUserGroup: [add_user_to_user_group],\r\n  DeleteUserFromUserGroup: [delete_user_from_user_group],\r\n  SetCurrentUserGroup: [set_current_user_group],\r\n\r\n  // FOLDERS\r\n  GetFolders: [get_folders],\r\n  AddFolder: [add_folder],\r\n  DeleteFolder: [delete_folder],\r\n  UpdateFolder: [update_folder],\r\n\r\n  // ROLES\r\n  GetRoles: [get_roles],\r\n  AddRole: [add_role],\r\n  DeleteRole: [delete_role],\r\n\r\n  // USER FOLDER SETTINGS\r\n  GetUserFolderSettings: [get_user_folder_settings],\r\n  AddUserFolderSettings: [add_user_folder_settings],\r\n  UpdateUserFolderSettings: [set_user_folder_settings],\r\n  DeleteUserFolderSettings: [delete_user_folder_settings],\r\n\r\n  // PERMISSIONS\r\n  GetPermissions: [get_permissions],\r\n  AddPermission: [add_permission],\r\n  DeletePermission: [delete_permission],\r\n  GetUserPermissions: [get_user_permissions],\r\n  GetUserPermissionsForFolder: [get_user_permissions_for_folder],\r\n\r\n  // USER SEARCH SCHEMA\r\n  GetUserSearchSchema: [get_user_search_schema],\r\n  SetUserSearchSchema: [set_user_search_schema],\r\n  DeleteUserSearchSchema: [delete_user_search_schema],\r\n\r\n  // DOCUMENTS\r\n  GetManyDocuments: [get_many_documents],\r\n  GetDocument: [get_document],\r\n  AddDocument: [add_document],\r\n  AddDocumentModel: [add_document_model],\r\n  SetDocumentAttribute: [set_document_attribute],\r\n  SaveDocumentsInFolder: [save_documents_in_folder],\r\n  SaveManyDocuments: [save_many_documents],\r\n  MarkDocumentAsDeleted: [mark_document_as_deleted],\r\n  MarkDocumentAsNotDeleted: [mark_document_as_not_deleted],\r\n  DeleteManyDocuments: [delete_many_documents],\r\n  DuplicateDocumentToUsergroup: [duplicate_document_to_usergroup],\r\n  DuplicateManyDocumentsToUsergroup: [duplicate_many_documents_to_usergroup],\r\n  PushDocumentButton: [push_document_button],\r\n  PerformActionOnDocuments: [perform_action_on_documents],\r\n\r\n  // DOCUMENT APPROVALS\r\n  GetDocumentApprovals: [get_document_approvals],\r\n  GetManyDocumentsApprovals: [get_many_documents_approvals],\r\n  AddDocumentApproval: [add_document_approval],\r\n  UpdateDocumentApproval: [update_document_approval],\r\n  DeleteDocumentApproval: [delete_document_approval],\r\n  DelegateDocumentApproval: [delegate_document_approval],\r\n  GetDocumentApprovalSpareFiles: [get_document_approval_spare_files],\r\n  UploadDocumentApprovalFile: [upload_document_approval_file],\r\n  DeleteDocumentApprovalFile: [delete_document_approval_file],\r\n\r\n  // APPROVALS\r\n  GetWaitingDocumentApprovals: [get_waiting_document_approvals],\r\n\r\n  // DOCUMENT APPROVAL FLOW\r\n  CreateDocumentApprovalFlow: [create_document_approval_flow],\r\n  AddDocumentApprovalFlowStep: [add_document_approval_flow_step],\r\n  DeleteDocumentApprovalFlowStep: [delete_document_approval_flow_step],\r\n  AttachUserToDocumentApprovalFlowStep: [\r\n    attach_user_to_document_approval_flow_step,\r\n  ],\r\n  DeleteUserFromDocumentApprovalFlowStep: [\r\n    delete_user_from_document_approval_flow_step,\r\n  ],\r\n  GetDocumentApprovalFlow: [get_document_approval_flow],\r\n  SetDocumentApprovalFlow: [set_document_approval_flow],\r\n  StartDocumentApprovalFlow: [start_document_approval_flow],\r\n  StopDocumentApprovalFlow: [stop_document_approval_flow],\r\n\r\n  // CART\r\n  GetCart: [get_cart_documents],\r\n  AddDocumentToCart: [add_document_to_cart],\r\n  AddManyDocumentsToCart: [add_many_documents_to_cart],\r\n  RemoveDocumentFromCart: [remove_document_from_cart],\r\n  EmptyCart: [empty_cart],\r\n\r\n  // SERVER SETTINGS\r\n  GetServerSettings: [get_server_settings],\r\n  UpdateServerSetting: [update_server_setting],\r\n\r\n  // MAILBOXES\r\n  GetMailBoxes: [get_mailboxes],\r\n  AddMailBox: [add_mailbox],\r\n  UpdateMailBox: [update_mailbox],\r\n  DeleteMailBox: [delete_mailbox],\r\n\r\n  // MAIL CHANNELS\r\n  GetMailChannels: [get_mail_channels],\r\n  AddMailChannel: [add_mail_channel],\r\n  UpdateMailChannel: [update_mail_channel],\r\n  DeleteMailChannel: [delete_mail_channel],\r\n  AddMailChannelToMailBox: [add_mail_channel_to_mailbox],\r\n  DeleteMailChannelFromMailBox: [delete_mail_channel_from_mailbox],\r\n  FetchMailChannel: [fetch_mail_channel],\r\n\r\n  // MAIL MESSAGES\r\n  GetMailMessages: [get_mail_messages],\r\n  DeleteMailMessage: [delete_mail_message],\r\n  DownloadMailMessageInTextFormat: [download_mail_message],\r\n  DownloadMailMessageInHtmlFormat: [download_mail_message],\r\n  DownloadMailMessageInRawFormat: [download_mail_message],\r\n  DownloadMailMessageAttachment: [download_mail_message_attachment],\r\n\r\n  // FILE\r\n  AttachFileToDocument: [attach_file_to_document],\r\n  DetachFileFromDocument: [detach_file_from_document],\r\n  FlushFileContainer: [flush_file_container],\r\n  UploadFileToFolder: [upload_file_to_folder],\r\n  DownloadFileFromFolder: [download_file_from_folder],\r\n  DownloadManyDocumentsFilesAsArchive: [\r\n    download_many_documents_files_as_archive,\r\n  ],\r\n  DownloadDocumentFilesAsArchive: [download_document_files_as_archive],\r\n  DeleteFileFromFolder: [delete_file_from_folder],\r\n  UpdateFileFromFolder: [update_file_from_folder],\r\n  GetFileInfo: [get_file_info],\r\n  AttachFilesToDocumentUsingPattern: [attach_files_to_document_using_pattern],\r\n  AllocateFilesToDocumentsUsingPattern: [\r\n    allocate_files_to_documents_using_pattern,\r\n  ],\r\n  GetSpareFiles: [get_spare_files],\r\n\r\n  UpdateUploadProgress: [update_upload_progress],\r\n\r\n  // VALIDATION\r\n  ValidateDocument: [\r\n    reset_document_validation_errors,\r\n    validate_document_against_constraints,\r\n  ],\r\n  ValidateDocumentAgainstAttributeRegexValidationConstraint: [\r\n    validate_document_against_attribute_regex_validation_constraint,\r\n  ],\r\n  ValidateDocumentAgainstAttributeTogetherRegexValidationConstraint: [\r\n    validate_document_against_attribute_together_regex_validation_constraint,\r\n  ],\r\n  ValidateDocumentAgainstUniqueTogetherConstraint: [\r\n    validate_document_against_unique_together_constraint,\r\n  ],\r\n  ValidateDocumentAgainstAttributeHasPreviousValueConstraint: [\r\n    validate_document_against_has_previous_value_constraint,\r\n  ],\r\n  ValidateDocumentAgainstHasFileConstraint: [\r\n    validate_document_against_has_file_constraint,\r\n  ],\r\n  ValidateDocumentAgainstHasApprovalConstraint: [\r\n    validate_document_against_has_approval_constraint,\r\n  ],\r\n  ValidateDocumentAgainstSingleUnionConstraint: [\r\n    validate_document_against_single_union_constraint,\r\n  ],\r\n  ValidateDocumentAgainstFilenamePatternConstraint: [\r\n    validate_document_against_filename_pattern_constraint,\r\n  ],\r\n\r\n  //EXCEL\r\n  DownloadExcelFile: [download_excel_file],\r\n\r\n  //JSON\r\n  DownloadJsonFile: [download_json_file],\r\n\r\n  //SERVICE\r\n  GetPdfMergeFiles: [get_pdf_merge_files],\r\n  UploadPdfMergeFile: [upload_pdf_merge_file],\r\n  UpdatePdfMergeFile: [update_pdf_merge_file],\r\n  DeletePdfMergeFile: [delete_pdf_merge_file],\r\n  DeleteAllPdfMergeFiles: [delete_all_pdf_merge_files],\r\n  DownloadPdfMergeResult: [download_pdf_merge_result],\r\n  DownloadPdfMixResult: [download_pdf_mix_result],\r\n  GetShareFiles: [get_share_files],\r\n  UploadShareFile: [upload_share_file],\r\n  DeleteShareFile: [delete_share_file],\r\n  DownloadShareFile: [download_share_file],\r\n  DropSelfTestingQuestions: [drop_self_testing_questions],\r\n  AddSelfTestingQuestion: [add_self_testing_question],\r\n\r\n  // SERVICE - COUNTER\r\n  GetCounters: [get_counters],\r\n  AddCounter: [add_counter],\r\n  UpdateCounter: [update_counter],\r\n  DeleteCounter: [delete_counter],\r\n\r\n  // WORKFLOW\r\n  GetFlows: [get_flows],\r\n  AddFlow: [add_flow],\r\n  UpdateFlow: [update_flow],\r\n  DeleteFlow: [delete_flow],\r\n  GetFlowItem: [get_flow_item],\r\n  GetManyFlowItems: [get_many_flow_items],\r\n  RestartFlowItem: [restart_flow_item],\r\n  GetFlowItemSteps: [get_flow_item_steps],\r\n\r\n  // CONTEXT\r\n  GetDocumentAttributesContext: [get_document_attributes_context],\r\n  GetDocumentPreviousAttributeContext: [get_document_previous_attribute_context],\r\n  GetUserEmailContext: [get_user_email_context],\r\n};\r\n\r\nconst EVENT_HANDLERS = {\r\n  ApiError: [handle_api_error],\r\n  AccessPagePermissionCheckFail: [handle_access_perm_fail_error],\r\n  UserLoginSuccess: [user_login_success],\r\n  UserLogoutSuccess: [user_logout_success],\r\n  UsersGetSuccess: [users_get_success],\r\n  UsersUpdateSuccess: [users_update_success],\r\n  UsersDeleteSuccess: [users_delete_success],\r\n  UserReplacementAddSuccess: [user_replacement_add_success],\r\n  UserReplacementDeleteSuccess: [user_replacement_delete_success],\r\n  OnBehalfUserChangeSuccess: [on_behalf_user_change_success],\r\n  OnBehalfUserDeleteSuccess: [on_behalf_user_delete_success],\r\n\r\n  FoldersAddSuccess: [folders_add_success],\r\n  FoldersUpdateSuccess: [folders_update_success],\r\n  FoldersDeleteSuccess: [folders_delete_success],\r\n  UploadFileError: [handle_upload_file_error],\r\n  UploadEmptyFileError: [handle_upload_empty_file_error],\r\n  UploadFileTooBigError: [handle_upload_file_too_big_error],\r\n  UploadFileWrongExtensionError: [handle_upload_file_wrong_extension_error],\r\n  UploadFileWrongFilenameError: [handle_upload_file_wrong_filename_error],\r\n  UploadFileSuccess: [handle_upload_file_success],\r\n  SaveManyDocumentsSuccess: [handle_save_many_documents_success],\r\n  DeleteManyDocumentsSuccess: [handle_delete_many_documents_success],\r\n  DocumentAttributesChanged: [handle_document_attributes_changed],\r\n  DuplicateDocumentToUsergroupSuccess: [\r\n    handle_duplicate_document_to_usergroup_success,\r\n  ],\r\n  DuplicateManyDocumentsToUsergroupSuccess: [\r\n    handle_duplicate_many_documents_to_usergroup_success,\r\n  ],\r\n  DocumentFilesAreUploading: [handle_document_files_are_uploading],\r\n  FileUpdatedSuccess: [handle_file_updated_success],\r\n  FileDeletedSuccess: [handle_file_deleted_success],\r\n  FilesAllocated: [handle_files_allocated],\r\n  FileAttachedToDocument: [handle_file_attached_to_document],\r\n  FileDetachedFromDocument: [handle_file_detached_from_document],\r\n  DocumentButtonPushed: [handle_document_button_pushed],\r\n  AddRoleSuccess: [handle_add_role_success],\r\n  DeleteRoleSuccess: [handle_delete_role_success],\r\n  AddUserFolderSettingsSuccess: [handle_add_user_folder_settings_success],\r\n  UpdateUserFolderSettingsSuccess: [handle_set_user_folder_settings_success],\r\n  DeleteUserFolderSettingsSuccess: [handle_delete_user_folder_settings_success],\r\n\r\n  SetUserSearchSchemaSuccess: [handle_set_user_search_schema_success],\r\n  AddPermissionSuccess: [handle_add_permission_success],\r\n  DeletePermissionSuccess: [handle_delete_permission_success],\r\n\r\n  DocumentLinkCopied: [handle_document_link_copied],\r\n  FileLinkCopied: [handle_file_link_copied],\r\n\r\n  AddUserGroupSuccess: [handle_add_user_group_success],\r\n  UpdateUserGroupSuccess: [handle_update_user_group_success],\r\n  DeleteUserGroupSuccess: [handle_delete_user_group_success],\r\n  UserGroupHasNotBeenAssigned: [handle_user_group_has_not_been_assigned],\r\n\r\n  DocumentAddedToCartSuccess: [handle_document_added_to_cart_success],\r\n  DocumentRemovedFromCartSuccess: [handle_document_removed_from_cart_success],\r\n  ManyDocumentsAddedToCartSuccess: [\r\n    handle_many_documents_added_to_cart_success,\r\n  ],\r\n\r\n  SelfTestingRepliedSuccess: [handle_self_testing_replied_success],\r\n  SelfTestingRepliedFail: [handle_self_testing_replied_fail],\r\n\r\n  AddFlowSuccess: [handle_add_flow_success],\r\n  UpdateFlowSuccess: [handle_update_flow_success],\r\n  DeleteFlowSuccess: [handle_delete_flow_success],\r\n  RestartFlowItemSuccess: [handle_restart_flow_item_success],\r\n\r\n  // DOCUMENT APPROVAL\r\n  DocumentApprovalAddedSuccess: [handle_document_approval_added_success],\r\n  DocumentApprovalUpdatedSuccess: [handle_document_approval_updated_success],\r\n  DocumentApprovalDeletedSuccess: [handle_document_approval_deleted_success],\r\n  DocumentApprovalDelegatedSuccess: [\r\n    handle_document_approval_delegated_success,\r\n  ],\r\n\r\n  // APPROVAL FLOW\r\n  EmptyApprovalFlowSaved: [handle_empty_approval_flow_saved],\r\n  ApprovalFlowStarted: [handle_approval_flow_started],\r\n  ApprovalFlowStopped: [handle_approval_flow_stopped],\r\n  ApprovalFlowUploadError: [handle_approval_flow_upload_error],\r\n\r\n  // SERVER SETTING\r\n  ServerSettingUpdatedSuccess: [handle_server_setting_updated_success],\r\n\r\n  // MAILBOXES\r\n  MailBoxAddedSuccess: [handle_mailbox_added_success],\r\n  MailBoxUpdatedSuccess: [handle_mailbox_updated_success],\r\n  MailBoxDeletedSuccess: [handle_mailbox_deleted_success],\r\n\r\n  // MAIL CHANNELS\r\n  MailChannelAddedSuccess: [handle_mail_channel_added_success],\r\n  MailChannelUpdatedSuccess: [handle_mail_channel_updated_success],\r\n  MailChannelDeletedSuccess: [handle_mail_channel_deleted_success],\r\n  MailChannelFetchedSuccess: [handle_mail_channel_fetched_success],\r\n\r\n  // MAIL MESSAGES\r\n  MailMessageDeletedSuccess: [handle_mail_message_deleted_success],\r\n  \r\n  // COUNTERS\r\n  CounterAddedSuccess: [handle_counter_added_success],\r\n  CounterUpdatedSuccess: [handle_counter_updated_success],\r\n  CounterDeletedSuccess: [handle_counter_deleted_success],\r\n};\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass MessageBus {\r\n  static async handle(message, uow) {\r\n    let result = [];\r\n    let quenue = [message];\r\n    // console.log(\"Enter message bus for message \", message);\r\n\r\n    while (true) {\r\n      // console.log(\"QUENUE = \", quenue);\r\n      if (quenue.length === 0) break;\r\n\r\n      const handle_function = async (current_message) => {\r\n        // console.log(current_message);\r\n\r\n        if (current_message instanceof Command) {\r\n          const new_messages = await this.handle_command(\r\n            current_message,\r\n            uow,\r\n            result\r\n          );\r\n          // console.log(\"New command messages \", new_messages);\r\n          quenue = quenue.concat(new_messages);\r\n        }\r\n\r\n        if (current_message instanceof Event) {\r\n          const new_messages = await this.handle_event(current_message, uow);\r\n          // console.log(\"New event messages \", new_messages);\r\n          quenue = quenue.concat(new_messages);\r\n        }\r\n      };\r\n\r\n      // делаем \"map\" массива в промисы\r\n      // ждем когда всё промисы будут выполнены\r\n      const promises = quenue.map(handle_function);\r\n      quenue = [];\r\n      await Promise.all(promises);\r\n    }\r\n\r\n    // console.log(\"Leave message bus for message \", message);\r\n    return result;\r\n  }\r\n\r\n  static async handle_command(message, uow, result) {\r\n    let new_messages = [];\r\n\r\n    if (\r\n      !Object.prototype.hasOwnProperty.call(\r\n        COMMAND_HANDLERS,\r\n        message.constructor.name\r\n      )\r\n    ) {\r\n      throw new NotImplementedError(\r\n        'There is no handler for command \"' + message.constructor.name + '\"'\r\n      );\r\n    }\r\n\r\n    const handlers = COMMAND_HANDLERS[message.constructor.name];\r\n\r\n    const handle_function = async (handler) => {\r\n      try {\r\n        const command_result = await handler(message, uow);\r\n        result.push(command_result);\r\n\r\n        const events = uow.collect_new_messages();\r\n        new_messages = new_messages.concat(events);\r\n      } catch (e) {\r\n        console.log(\r\n          'Exception \"' +\r\n            e.toString() +\r\n            '\" handling command \"' +\r\n            message.constructor.name +\r\n            '\"'\r\n        );\r\n      }\r\n    };\r\n\r\n    // делаем \"map\" массива в промисы\r\n    // ждем когда всё промисы будут выполнены\r\n    const promises = handlers.map(handle_function);\r\n    await Promise.all(promises);\r\n\r\n    // console.log(\"Return command new messages\");\r\n\r\n    return new_messages;\r\n  }\r\n\r\n  static async handle_event(message, uow) {\r\n    let new_messages = [];\r\n\r\n    if (\r\n      !Object.prototype.hasOwnProperty.call(\r\n        EVENT_HANDLERS,\r\n        message.constructor.name\r\n      )\r\n    ) {\r\n      throw new NotImplementedError(\r\n        'There is no handler for event \"' + message.constructor.name + '\"'\r\n      );\r\n    }\r\n\r\n    const handlers = EVENT_HANDLERS[message.constructor.name];\r\n\r\n    const handle_function = async (handler) => {\r\n      try {\r\n        await handler(message, uow);\r\n        const events = uow.collect_new_messages();\r\n        new_messages = new_messages.concat(events);\r\n      } catch (e) {\r\n        console.log(\r\n          'Exception \"' +\r\n            e.toString() +\r\n            '\" handling event \"' +\r\n            message.constructor.name +\r\n            '\"'\r\n        );\r\n      }\r\n    };\r\n\r\n    // делаем \"map\" массива в промисы\r\n    // ждем когда всё промисы будут выполнены\r\n    const promises = handlers.map(handle_function);\r\n    await Promise.all(promises);\r\n\r\n    // console.log(\"Return event new messages\");\r\n\r\n    return new_messages;\r\n  }\r\n}\r\n\r\nexport { MessageBus };\r\n","import { inject, isRef, ref } from \"vue\";\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass AbstractBaseRepository {\r\n  _deep_copy(obj) {\r\n    return JSON.parse(JSON.stringify(obj));\r\n  }\r\n\r\n  _create_name(name) {\r\n    const _name = Array.isArray(name) ? name.join() : name;\r\n    return _name;\r\n  }\r\n\r\n  _set() {\r\n    throw new NotImplementedError('\"set\" method has not been implemented');\r\n  }\r\n\r\n  _get() {\r\n    throw new NotImplementedError('\"get\" method has not been implemented');\r\n  }\r\n\r\n  _delete() {\r\n    throw new NotImplementedError('\"delete\" method has not been implemented');\r\n  }\r\n\r\n  _add_key() {\r\n    throw new NotImplementedError('\"add_key\" method has not been implemented');\r\n  }\r\n\r\n  _remove_key() {\r\n    throw new NotImplementedError(\r\n      '\"remove_key\" method has not been implemented'\r\n    );\r\n  }\r\n\r\n  _keys() {\r\n    throw new NotImplementedError('\"keys\" method has not been implemented');\r\n  }\r\n\r\n  _values() {\r\n    throw new NotImplementedError('\"values\" method has not been implemented');\r\n  }\r\n\r\n  _pure_keys() {\r\n    throw new NotImplementedError(\r\n      '\"pure keys\" method has not been implemented'\r\n    );\r\n  }\r\n\r\n  _keys_box() {\r\n    throw new NotImplementedError('\"keys box\" method has not been implemented');\r\n  }\r\n\r\n  _values_box() {\r\n    throw new NotImplementedError(\r\n      '\"values box\" method has not been implemented'\r\n    );\r\n  }\r\n\r\n  _pure_keys_box() {\r\n    throw new NotImplementedError(\r\n      '\"pure keys box\" method has not been implemented'\r\n    );\r\n  }\r\n\r\n  _set_box() {\r\n    throw new NotImplementedError('\"set_box\" method has not been implemented');\r\n  }\r\n\r\n  _get_box() {\r\n    throw new NotImplementedError('\"get_box\" method has not been implemented');\r\n  }\r\n\r\n  _delete_box() {\r\n    throw new NotImplementedError(\r\n      '\"delete_box\" method has not been implemented'\r\n    );\r\n  }\r\n\r\n  _add_box_key() {\r\n    throw new NotImplementedError(\r\n      '\"add_box_key\" method has not been implemented'\r\n    );\r\n  }\r\n\r\n  _remove_box_key() {\r\n    throw new NotImplementedError(\r\n      '\"remove_box_key\" method has not been implemented'\r\n    );\r\n  }\r\n}\r\n\r\nclass VueBaseRepository extends AbstractBaseRepository {\r\n  constructor(name) {\r\n    super();\r\n    this._properties = inject(name);\r\n  }\r\n\r\n  _reset() {\r\n    Object.keys(this._properties).forEach((key) => {\r\n      delete this._properties[key];\r\n    });\r\n  }\r\n\r\n  _set(name, value, add_key = true) {\r\n    const _name = name.toString();\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, _name)) {\r\n      this._properties[_name] = ref(value);\r\n    } else {\r\n      this._properties[_name].value = value;\r\n    }\r\n    if (add_key) this._add_key(_name);\r\n  }\r\n\r\n  _get(name, empty = null) {\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, name)) {\r\n      this._set(name, this._deep_copy(empty), false);\r\n    }\r\n    return this._properties[name];\r\n  }\r\n\r\n  _delete(name) {\r\n    const _name = name.toString();\r\n    this._set(_name, null);\r\n    this._remove_key(_name);\r\n  }\r\n\r\n  _add_key(name) {\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, \"__KEYS__\")) {\r\n      this._properties[\"__KEYS__\"] = ref([]);\r\n    }\r\n\r\n    const keys = this._get(\"__KEYS__\");\r\n    if (keys.value.indexOf(name) === -1) {\r\n      keys.value.push(name);\r\n    }\r\n  }\r\n\r\n  _remove_key(name) {\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, \"__KEYS__\"))\r\n      return;\r\n\r\n    this._properties[\"__KEYS__\"].value = this._properties[\r\n      \"__KEYS__\"\r\n    ].value.filter((e) => e !== name);\r\n  }\r\n\r\n  _keys() {\r\n    return this._get(\"__KEYS__\", []);\r\n  }\r\n\r\n  _pure_keys() {\r\n    const keys = this._keys();\r\n    return isRef(keys) ? keys.value : keys;\r\n  }\r\n\r\n  _values() {\r\n    return this._keys().value.map((key) => this._get(key));\r\n  }\r\n\r\n  _keys_box(box_id) {\r\n    const _name = this._create_name([\"BOX\", box_id, \"__KEYS__\"]);\r\n    return this._get(_name, []);\r\n  }\r\n\r\n  _pure_keys_box(box_id) {\r\n    const keys = this._keys_box(box_id);\r\n    return isRef(keys) ? keys.value : keys;\r\n  }\r\n\r\n  _values_box(box_id) {\r\n    return this._keys_box(box_id).value.map((key) =>\r\n      this._get_box(box_id, key)\r\n    );\r\n  }\r\n\r\n  _set_box(box_id, name, value) {\r\n    const _name = this._create_name([\"BOX\", box_id, name]);\r\n    this._set(_name, value, false);\r\n    this._add_box_key(box_id, name.toString());\r\n  }\r\n\r\n  _get_box(box_id, name, empty = null) {\r\n    const _name = this._create_name([\"BOX\", box_id, name]);\r\n    return this._get(_name, empty);\r\n  }\r\n\r\n  _delete_box(box_id, name) {\r\n    const _name = this._create_name([\"BOX\", box_id, name]);\r\n    this._delete(_name);\r\n    this._remove_box_key(box_id, name.toString());\r\n  }\r\n\r\n  _add_box_key(box_id, name) {\r\n    const _keys_name = this._create_name([\"BOX\", box_id, \"__KEYS__\"]);\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, _keys_name)) {\r\n      this._properties[_keys_name] = ref([]);\r\n    }\r\n\r\n    const keys = this._get(_keys_name);\r\n    if (keys.value.indexOf(name) === -1) {\r\n      keys.value.push(name);\r\n    }\r\n  }\r\n\r\n  _remove_box_key(box_id, name) {\r\n    const _keys_name = this._create_name([\"BOX\", box_id, \"__KEYS__\"]);\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, _keys_name))\r\n      return;\r\n\r\n    this._properties[_keys_name].value = this._properties[\r\n      _keys_name\r\n    ].value.filter((e) => e !== name);\r\n  }\r\n}\r\n\r\nexport { VueBaseRepository };\r\n","import { VueBaseRepository } from \"./base_repository\";\r\n\r\nconst FlatMixin = {\r\n  reset() {\r\n    this._reset();\r\n  },\r\n\r\n  reset_keeping_refs() {\r\n    this.keys().value.forEach((key) => this.delete(key));\r\n  },\r\n\r\n  get(name) {\r\n    return this._get(name);\r\n  },\r\n\r\n  set(name, value) {\r\n    // console.log(name, value)\r\n    return this._set(name, value);\r\n  },\r\n\r\n  delete(name) {\r\n    return this._delete(name);\r\n  },\r\n\r\n  keys() {\r\n    return this._keys();\r\n  },\r\n\r\n  pure_keys() {\r\n    return this._pure_keys();\r\n  },\r\n\r\n  values() {\r\n    return this._values();\r\n  },\r\n};\r\n\r\nclass VueFlatRepository extends VueBaseRepository {}\r\nObject.assign(VueBaseRepository.prototype, FlatMixin);\r\n\r\nexport { VueFlatRepository };\r\n","import { VueBaseRepository } from \"./base_repository\";\r\n\r\nconst BoxMixin = {\r\n  reset() {\r\n    this._reset();\r\n  },\r\n\r\n  reset_keeping_refs(box_id) {\r\n    this.keys(box_id).value.forEach((key) => this.delete(box_id, key));\r\n  },\r\n\r\n  keys(box_id) {\r\n    return this._keys_box(box_id);\r\n  },\r\n\r\n  pure_keys(box_id) {\r\n    return this._pure_keys_box(box_id);\r\n  },\r\n\r\n  values(box_id) {\r\n    return this._values_box(box_id);\r\n  },\r\n\r\n  set(box_id, name, value) {\r\n    this._set_box(box_id, name, value);\r\n  },\r\n\r\n  get(box_id, name, empty = null) {\r\n    return this._get_box(box_id, name, empty);\r\n  },\r\n\r\n  delete(box_id, name) {\r\n    this._delete_box(box_id, name);\r\n  },\r\n};\r\n\r\nclass VueBoxRepository extends VueBaseRepository {}\r\nObject.assign(VueBoxRepository.prototype, BoxMixin);\r\n\r\nexport { VueBoxRepository };\r\n","const CurrentMixin = {\r\n  set_current(obj) {\r\n    this._set_box(\"__CURRENT__\", \"__CURRENT__\", obj);\r\n  },\r\n\r\n  get_current() {\r\n    return this._get_box(\"__CURRENT__\", \"__CURRENT__\");\r\n  },\r\n\r\n  is_current_settled() {\r\n    return this._get_box(\"__CURRENT__\", \"__CURRENT__\").value !== null;\r\n  },\r\n};\r\n\r\nexport { CurrentMixin };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\nimport { CurrentMixin } from \"./mixins/current\";\r\n\r\nconst AuthenticatedMixin = {\r\n  is_authenticated() {\r\n    return this.is_current_settled();\r\n  },\r\n};\r\n\r\nconst RoleMixin = {\r\n  get_role(username) {\r\n    const user = this.get(username).value;\r\n    return user.role;\r\n  },\r\n\r\n  set_role(username, role) {\r\n    const user = this.get(username).value;\r\n    user.role = role;\r\n  },\r\n\r\n  get_role_inside_group(username) {\r\n    const user = this.get(username).value;\r\n    return user.role_inside_group;\r\n  },\r\n\r\n  set_role_inside_group(username, role) {\r\n    const user = this.get(username).value;\r\n    user.role_inside_group = role;\r\n  },\r\n\r\n  get_role_outside_group(username) {\r\n    const user = this.get(username).value;\r\n    return user.role_outside_group;\r\n  },\r\n\r\n  set_role_outside_group(username, role) {\r\n    const user = this.get(username).value;\r\n    user.role_outside_group = role;\r\n  },\r\n};\r\n\r\nconst ActiveMixin = {\r\n  get_isactive(username) {\r\n    const user = this.get(username).value;\r\n    return user.is_active;\r\n  },\r\n\r\n  set_isactive(username, is_active) {\r\n    const user = this.get(username).value;\r\n    user.is_active = is_active;\r\n  },\r\n};\r\n\r\nconst OnBehalfMixin = {\r\n  set_on_behalf_users(obj) {\r\n    this._set_box(\"__BEHALF__\", \"__BEHALF__\", obj);\r\n  },\r\n\r\n  get_on_behalf_users() {\r\n    return this._get_box(\"__BEHALF__\", \"__BEHALF__\");\r\n  },\r\n\r\n};\r\n\r\nclass VueUserRepository extends VueFlatRepository {}\r\nObject.assign(\r\n  VueUserRepository.prototype,\r\n  CurrentMixin,\r\n  AuthenticatedMixin,\r\n  RoleMixin,\r\n  ActiveMixin,\r\n  OnBehalfMixin,\r\n);\r\n\r\nexport { VueUserRepository };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\nimport { CurrentMixin } from \"./mixins/current\";\r\n\r\nconst SlugMixin = {\r\n  get_id_by_slug(slug) {\r\n    // console.log('USERGROUPS', this.values())\r\n    const usergroup = this.values().find(\r\n      (usergroup) => usergroup.value.slug === slug\r\n    );\r\n    return usergroup === undefined ? null : usergroup.value.id;\r\n  },\r\n};\r\n\r\nclass VueUserGroupRepository extends VueFlatRepository {}\r\nObject.assign(VueUserGroupRepository.prototype, CurrentMixin, SlugMixin);\r\n\r\nexport { VueUserGroupRepository };\r\n","import Cookies from \"js-cookie\";\r\n\r\nimport { VueBaseRepository } from \"./base_repository\";\r\n\r\nconst VueTokenMixin = {\r\n  get_auth_token() {\r\n    return Cookies.get(\"auth_token\");\r\n  },\r\n\r\n  set_auth_token(token) {\r\n    Cookies.set(\"auth_token\", token, this._cookie_default);\r\n  },\r\n};\r\n\r\nconst VueResetMixin = {\r\n  reset() {\r\n    Cookies.remove(\"auth_token\");\r\n  },\r\n};\r\n\r\nclass VueTokenRepository extends VueBaseRepository {\r\n  constructor(name, keep_auth_token_days_count) {\r\n    super(name);\r\n    this._cookie_default = {\r\n      expires: parseInt(keep_auth_token_days_count),\r\n      sameSite: \"strict\",\r\n    };\r\n  }\r\n}\r\nObject.assign(VueTokenRepository.prototype, VueTokenMixin, VueResetMixin);\r\n\r\nexport { VueTokenRepository };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\n\r\nconst VueFolderMixin = {\r\n  set_user_search_schema(folder_id, search_schema) {\r\n    const folder = this.get(folder_id).value;\r\n    if (folder) folder.user_search_schema = search_schema;\r\n  },\r\n\r\n  delete_user_search_schema(folder_id) {\r\n    const folder = this.get(folder_id).value;\r\n    folder.user_search_schema = null;\r\n  },\r\n\r\n  get_validation_schema(folder_id) {\r\n    const folder = this.get(folder_id).value;\r\n    if (!folder) return null;\r\n    return folder.validation_schema;\r\n  },\r\n\r\n  get_validation_constraints(folder_id) {\r\n    const folder = this.get(folder_id).value;\r\n    if (!folder) return null;\r\n    return folder.validation_constraints;\r\n  },\r\n\r\n  get_is_necessary_validate(folder_id) {\r\n    const folder = this.get(folder_id).value;\r\n    if (!folder) return null;\r\n    return folder.is_necessary_validate;\r\n  },\r\n\r\n  get_filename_pattern(folder_id, attributes) {\r\n    const folder = this.get(folder_id).value;\r\n    return folder.get_filename_pattern(attributes);\r\n  },\r\n\r\n  get_strict_validation(folder_id, permission) {\r\n    const folder = this.get(folder_id).value;\r\n    if (!folder) return true;\r\n    return folder.strict_validation_for_permission(permission);\r\n  },\r\n};\r\n\r\nclass VueFolderRepository extends VueFlatRepository {}\r\nObject.assign(VueFolderRepository.prototype, VueFolderMixin);\r\n\r\nexport { VueFolderRepository };\r\n","const CountMixin = {\r\n  set_count(obj) {\r\n    this._set_box(\"__COUNT__\", \"__COUNT__\", obj);\r\n  },\r\n\r\n  get_count() {\r\n    return this._get_box(\"__COUNT__\", \"__COUNT__\");\r\n  },\r\n\r\n  is_count_settled() {\r\n    return this._get_box(\"__COUNT__\", \"__COUNT__\").value !== null;\r\n  },\r\n};\r\n\r\nexport { CountMixin };\r\n","import { VueBoxRepository } from \"./box_repository\";\r\nimport { CountMixin } from \"./mixins/count\";\r\n\r\nconst VueDocMixin = {\r\n  reset(folder_id) {\r\n    this.keys(folder_id).value.forEach((key) => this.delete(folder_id, key));\r\n    this.set_count(0);\r\n  },\r\n\r\n  get_union(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.union;\r\n  },\r\n\r\n  set_union(folder_id, doc_id, union_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    if (doc !== null) doc.union = union_id;\r\n  },\r\n\r\n  set_attribute(folder_id, doc_id, name, value, to_be_decoded) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    if (doc !== null) doc.set_attribute(name, value, to_be_decoded);\r\n  },\r\n\r\n  mark_as_modified(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.modify();\r\n  },\r\n\r\n  mark_as_saved(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.save();\r\n  },\r\n\r\n  mark_all_as_saved(folder_id) {\r\n    this.values(folder_id).forEach((doc) => doc.value.save());\r\n  },\r\n\r\n  mark_as_deleted(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.delete();\r\n  },\r\n\r\n  mark_as_not_deleted(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.recover();\r\n  },\r\n\r\n  uploaded(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.files.every((file) => file.uploaded);\r\n  },\r\n\r\n  is_saved(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.is_saved;\r\n  },\r\n\r\n  is_deleted(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.is_deleted;\r\n  },\r\n\r\n  is_blocked(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.is_blocked;\r\n  },\r\n\r\n  is_created_first_time(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.is_created_first_time;\r\n  },\r\n\r\n  raw_attributes(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.raw_attributes;\r\n  },\r\n\r\n  attributes(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.attributes;\r\n  },\r\n\r\n  files(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.files;\r\n  },\r\n\r\n  get_file(folder_id, doc_id, file_id) {\r\n    // console.log('get_file', folder_id, doc_id, file_id);\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    // console.log(doc)\r\n    return doc.get_file(file_id);\r\n  },\r\n\r\n  add_file(folder_id, doc_id, file) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.add_file(file.id, file);\r\n  },\r\n\r\n  remove_file(folder_id, doc_id, file_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.remove_file(file_id);\r\n  },\r\n\r\n  file_in_repository(folder_id, file_id) {\r\n    const is_doc_has_not_file = (doc) =>\r\n      doc.files.every((file) => file.id != file_id);\r\n\r\n    return !this.values(folder_id)\r\n      .map((obj) => obj.value)\r\n      .every(is_doc_has_not_file);\r\n  },\r\n\r\n  add_error(folder_id, doc_id, errors_container_id, error_text) {\r\n    // console.log('ADD ERROR')\r\n    // console.log(folder_id, doc_id, errors_container_id, error_text)\r\n\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.add_error(errors_container_id, error_text);\r\n  },\r\n\r\n  add_error_easy(folder_id, doc_id, error_text) {\r\n    // console.log('ADD ERROR EASY')\r\n    // console.log(folder_id, doc_id, error_text)\r\n\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.add_error(doc.errors_container_id, error_text);\r\n  },\r\n\r\n  errors_container_id(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.errors_container_id;\r\n  },\r\n\r\n  reset_errors(folder_id, doc_id) {\r\n    // console.log('RESET ERRORS')\r\n\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    doc.reset_errors();\r\n  },\r\n\r\n  has_errors(folder_id, doc_id) {\r\n    // console.log('HAS ERRORS', folder_id, doc_id)\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    if (!doc) return false;\r\n    // console.log('DOC EXIST')\r\n    return doc.errors.length > 0;\r\n  },\r\n\r\n  validation_progress(folder_id) {\r\n    const docs = this.values(folder_id).map((obj) => obj.value);\r\n\r\n    const count_of_validated_docs = docs\r\n      .map((obj) => (obj.is_validation_in_progress ? 0 : 1))\r\n      .reduce((a, b) => a + b, 0);\r\n\r\n    return docs.length === 0\r\n      ? 100\r\n      : Math.round((count_of_validated_docs / docs.length) * 100);\r\n  },\r\n\r\n  start_validation(folder_id, doc_id, count = 1) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.start_validation(count);\r\n  },\r\n\r\n  stop_validation(folder_id, doc_id) {\r\n    const doc = this.get(folder_id, doc_id).value;\r\n    return doc.stop_validation();\r\n  },\r\n};\r\n\r\nclass VueDocRepository extends VueBoxRepository {}\r\nObject.assign(VueDocRepository.prototype, VueDocMixin, CountMixin);\r\n\r\nexport { VueDocRepository };\r\n","import { VueBoxRepository } from \"./box_repository\";\r\n\r\nconst VueFileMixin = {\r\n  reset(folder_id) {\r\n    this.keys(folder_id).value.forEach((key) => this.delete(folder_id, key));\r\n  },\r\n\r\n  set_size(folder_id, file_id, size) {\r\n    const obj = this._get_box(folder_id, file_id).value;\r\n    if (obj) obj.set_size(size);\r\n  },\r\n\r\n  set_total_size(folder_id, file_id, size) {\r\n    const obj = this._get_box(folder_id, file_id).value;\r\n    if (obj) obj.set_total_size(size);\r\n  },\r\n\r\n  set_size_complete(folder_id, file_id) {\r\n    const obj = this._get_box(folder_id, file_id).value;\r\n    if (obj) obj.set_size_complete();\r\n  },\r\n\r\n  get_file(folder_id, file_id) {\r\n    return this.get(folder_id, file_id).value;\r\n  },\r\n\r\n  get_name(folder_id, file_id) {\r\n    const file = this.get(folder_id, file_id).value;\r\n    return file.name;\r\n  },\r\n};\r\n\r\nclass VueFileBoxRepository extends VueBoxRepository {}\r\nObject.assign(VueFileBoxRepository.prototype, VueFileMixin);\r\n\r\nexport { VueFileBoxRepository };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\n\r\nconst VueFileMixin = {\r\n  reset() {\r\n    this.keys().value.forEach((key) => this.delete(key));\r\n  },\r\n\r\n  set_size(file_id, size) {\r\n    const obj = this.get(file_id).value;\r\n    if (obj) obj.set_size(size);\r\n  },\r\n\r\n  set_total_size(file_id, size) {\r\n    const obj = this.get(file_id).value;\r\n    if (obj) obj.set_total_size(size);\r\n  },\r\n\r\n  set_size_complete(file_id) {\r\n    const obj = this.get(file_id).value;\r\n    if (obj) obj.set_size_complete();\r\n  },\r\n\r\n  get_file(file_id) {\r\n    return this.get(file_id).value;\r\n  },\r\n\r\n  get_name(file_id) {\r\n    const file = this.get(file_id).value;\r\n    return file.name;\r\n  },\r\n};\r\n\r\nclass VueFileFlatRepository extends VueFlatRepository {}\r\nObject.assign(VueFileFlatRepository.prototype, VueFileMixin);\r\n\r\nexport { VueFileFlatRepository };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\nimport { ref } from \"vue\";\r\n\r\nconst _variants = '__VARIANTS__'\r\n\r\nconst RoleMixin = {\r\n  get_role_variants() {\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, _variants)) {\r\n      this._properties[_variants] = ref([]);\r\n    }\r\n    return this._properties[_variants];\r\n  },\r\n\r\n  set_role_variants(value) {\r\n    if (!Object.prototype.hasOwnProperty.call(this._properties, _variants)) {\r\n      this._properties[_variants] = ref(value);\r\n    } else {\r\n      this._properties[_variants].value = value;\r\n    }\r\n  },\r\n\r\n};\r\n\r\nconst VueSettingsMixin = {\r\n  set_role(id, role) {\r\n    const obj = this.get(id).value;\r\n    obj.role = role;\r\n  },\r\n};\r\n\r\nclass VueUserFolderSettingsRepository extends VueFlatRepository {}\r\nObject.assign(\r\n  VueUserFolderSettingsRepository.prototype,\r\n  RoleMixin,\r\n  VueSettingsMixin\r\n);\r\n\r\nexport { VueUserFolderSettingsRepository };\r\n","import { VueBaseRepository } from \"./base_repository\";\r\n\r\nconst PermissionMixin = {\r\n  add(name) {\r\n    this._set(name, true);\r\n  },\r\n\r\n  add_for_folder(folder_id, name) {\r\n    this._set_box(folder_id, name, true);\r\n  },\r\n\r\n  remove_for_folder(folder_id, name) {\r\n    this._set_box(folder_id, name, false);\r\n  },\r\n\r\n  reset() {\r\n    this._pure_keys().forEach((key) => {\r\n      this._set(key, false);\r\n    });\r\n  },\r\n\r\n  reset_for_folder(folder_id) {\r\n    this._pure_keys_box(folder_id).forEach((key) => {\r\n      this._set_box(folder_id, key, false);\r\n    });\r\n  },\r\n\r\n  has(name) {\r\n    return this._get(name);\r\n  },\r\n\r\n  has_for_folder(folder_id, name) {\r\n    return this._get_box(folder_id, name);\r\n  },\r\n};\r\n\r\n\r\nclass VuePermissionRepository extends VueBaseRepository {\r\n  constructor() {\r\n    super(\"permissions\");\r\n  }\r\n}\r\nObject.assign(\r\n  VuePermissionRepository.prototype,\r\n  PermissionMixin,\r\n);\r\n\r\nexport { VuePermissionRepository };\r\n","import { VueBoxRepository } from \"./box_repository\";\r\n\r\nconst VariantMixin = {\r\n  get_variants() {\r\n    return this._get(\"__VARIANTS__\");\r\n  },\r\n\r\n  set_variants(value) {\r\n    this._set(\"__VARIANTS__\", value);\r\n  },\r\n};\r\n\r\nclass VueRolePermissionsRepository extends VueBoxRepository {}\r\nObject.assign(VueRolePermissionsRepository.prototype, VariantMixin);\r\n\r\nexport { VueRolePermissionsRepository };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\nimport { CurrentMixin } from \"./mixins/current\";\r\n\r\nclass VueFlatCurrentRepository extends VueFlatRepository {}\r\nObject.assign(\r\n  VueFlatCurrentRepository.prototype,\r\n  CurrentMixin,\r\n);\r\n\r\nexport { VueFlatCurrentRepository };\r\n","/*eslint no-useless-escape: \"error\"*/\r\n\r\nimport libmime from \"libmime\";\r\n\r\nimport {\r\n  AbstractApi,\r\n  NegativeResponse,\r\n\r\n  // INFO\r\n  GetInfoResponse,\r\n\r\n  // USER\r\n  LoginCredentialsResponse,\r\n  LoginTokenResponse,\r\n  GetUsersResponse,\r\n  SetUserResponse,\r\n  DeleteUserResponse,\r\n  GetUserReplacementsResponse,\r\n  AddUserReplacementResponse,\r\n  DeleteUserReplacementResponse,\r\n  GetUserReplacementsOfUserResponse,\r\n  AddUserReplacementToUserResponse,\r\n  DeleteUserReplacementFromUserResponse,\r\n  GetOnBehalfUsersResponse,\r\n  SetOnBehalfUserResponse,\r\n  DeleteOnBehalfUserResponse,\r\n\r\n  // FOLDER\r\n  GetFoldersResponse,\r\n  AddFolderResponse,\r\n  DeleteFolderResponse,\r\n  UpdateFolderResponse,\r\n\r\n  // ROLE\r\n  GetRolesResponse,\r\n  AddRoleResponse,\r\n  DeleteRoleResponse,\r\n\r\n  // USER FOLDER SETTINGS\r\n  GetUserFolderSettingsResponse,\r\n  AddUserFolderSettingsResponse,\r\n  UpdateUserFolderSettingsResponse,\r\n  DeleteUserFolderSettingsResponse,\r\n\r\n  // PERMISSIONS\r\n  GetPermissionsResponse,\r\n  AddPermissionResponse,\r\n  DeletePermissionResponse,\r\n  GetUserPermissionsResponse,\r\n  GetUserPermissionsForFolderResponse,\r\n\r\n  // USER SEARCH SCHEMA\r\n  GetUserSearchSchemaResponse,\r\n  SetUserSearchSchemaResponse,\r\n  DeleteUserSearchSchemaResponse,\r\n\r\n  // DOCUMENTS\r\n  GetDocumentResponse,\r\n  GetManyDocumentsResponse,\r\n  SaveManyDocumentsResponse,\r\n  DeleteManyDocumentsResponse,\r\n  DuplicateDocumentToUsergroupResponse,\r\n  DuplicateManyDocumentsToUsergroupResponse,\r\n  GetPreviousDocumentsResponse,\r\n  PushDocumentButtonResponse,\r\n\r\n  // TRANSMITTAL\r\n  DownloadTransmittalCoverSheetResponse,\r\n\r\n  // DOCUMENT APPROVALS\r\n  GetManyDocumentsApprovalsResponse,\r\n  GetDocumentApprovalsResponse,\r\n  AddDocumentApprovalResponse,\r\n  UpdateDocumentApprovalResponse,\r\n  DeleteDocumentApprovalResponse,\r\n  DelegateDocumentApprovalResponse,\r\n  GetDocumentApprovalSpareFilesResponse,\r\n  UploadDocumentApprovalFileResponse,\r\n  DeleteDocumentApprovalFileResponse,\r\n  GetWaitingDocumentApprovalsResponse,\r\n\r\n  // DOCUMENT APPROVAL FLOW\r\n  GetDocumentApprovalFlowResponse,\r\n  SetDocumentApprovalFlowResponse,\r\n  StartDocumentApprovalFlowResponse,\r\n  StopDocumentApprovalFlowResponse,\r\n\r\n  // CART\r\n  EmptyCartResponse,\r\n  GetCartDocumentsResponse,\r\n  AddDocumentToCartResponse,\r\n  AddManyDocumentsToCartResponse,\r\n  RemoveDocumentFromCartResponse,\r\n\r\n  // SERVER SETTINGS\r\n  GetServerSettingsResponse,\r\n  UpdateServerSettingResponse,\r\n\r\n  // MAILBOXES\r\n  GetMailBoxesResponse,\r\n  AddMailBoxResponse,\r\n  UpdateMailBoxResponse,\r\n  DeleteMailBoxResponse,\r\n  AddMailChannelToMailBoxResponse,\r\n  DeleteMailChannelFromMailBoxResponse,\r\n\r\n  // MAIL CHANNELS\r\n  GetMailChannelsResponse,\r\n  AddMailChannelResponse,\r\n  UpdateMailChannelResponse,\r\n  DeleteMailChannelResponse,\r\n  FetchMailChannelResponse,\r\n\r\n  // MAIL MESSAGES\r\n  GetMailMessagesResponse,\r\n  DeleteMailMessageResponse,\r\n  DownloadMailMessageResponse,\r\n  DownloadMailMessageAttachmentResponse,\r\n\r\n  // FILES\r\n  GetSpareFilesResponse,\r\n  GetUploadProgressResponse,\r\n  UpdateFileFromFolderResponse,\r\n\r\n  // SERVICE - PDF MERGE\r\n  UploadFileToFolderResponse,\r\n  DownloadFileFromFolderResponse,\r\n  DownloadManyDocumentsFilesAsArchiveResponse,\r\n  DownloadDocumentFilesAsArchiveResponse,\r\n  DeleteFileFromFolderResponse,\r\n  GetFileInfoResponse,\r\n  GetPdfMergeFilesResponse,\r\n  UploadPdfMergeFileResponse,\r\n  UpdatePdfMergeFileResponse,\r\n  DeletePdfMergeFileResponse,\r\n  DownloadPdfMergeResultResponse,\r\n  DownloadPdfMixResultResponse,\r\n\r\n  // SERVICE - SHARE FILE\r\n  GetShareFilesResponse,\r\n  UploadShareFileResponse,\r\n  DownloadShareFileResponse,\r\n  DeleteShareFileResponse,\r\n\r\n  // SERVICE - COUNTER\r\n  GetCountersResponse,\r\n  AddCounterResponse,\r\n  UpdateCounterResponse,\r\n  DeleteCounterResponse,\r\n\r\n  // USER GROUPS\r\n  GetUserGroupsResponse,\r\n  AddUserGroupResponse,\r\n  SetUserGroupResponse,\r\n  DeleteUserGroupResponse,\r\n  AddUserToUserGroupResponse,\r\n  DeleteUserFromUserGroupResponse,\r\n\r\n  // WORKFLOW - FLOW\r\n  GetFlowsResponse,\r\n  AddFlowResponse,\r\n  UpdateFlowResponse,\r\n  DeleteFlowResponse,\r\n\r\n  // WORKFLOW - FLOW ITEM\r\n  GetFlowItemResponse,\r\n  RestartFlowItemResponse,\r\n  GetManyFlowItemsResponse,\r\n  GetFlowItemStepsResponse,\r\n} from \"./api\";\r\n\r\nclass HttpApiError extends Error {}\r\n\r\nclass HttpApi extends AbstractApi {\r\n  constructor(api_url) {\r\n    super();\r\n    this.api_url = api_url;\r\n\r\n    // REQUEST_HANDLERS находятся в дочернем классе иначе функции буду цепляться от родительского класса\r\n    this.REQUEST_HANDLERS = {\r\n      // INFO\r\n      GetInfoRequest: this.get_info,\r\n\r\n      // USER\r\n      LoginCredentialsRequest: this.login_with_credentials,\r\n      LoginTokenRequest: this.login_with_token,\r\n      GetUsersRequest: this.get_users,\r\n      SetUserRequest: this.set_user,\r\n      DeleteUserRequest: this.delete_user,\r\n      GetUserReplacementsRequest: this.get_user_replacements,\r\n      AddUserReplacementRequest: this.add_user_replacement,\r\n      DeleteUserReplacementRequest: this.delete_user_replacement,\r\n      GetUserReplacementsOfUserRequest: this.get_user_replacements_of_user,\r\n      AddUserReplacementToUserRequest: this.add_user_replacement_to_user,\r\n      DeleteUserReplacementFromUserRequest: this.delete_user_replacement_from_user,\r\n      GetOnBehalfUsersRequest: this.get_on_behalf_users,\r\n      SetOnBehalfUserRequest: this.set_on_behalf_user,\r\n      DeleteOnBehalfUserRequest: this.delete_on_behalf_user,\r\n\r\n      // USER GROUP\r\n      GetUserGroupsRequest: this.get_user_groups,\r\n      AddUserGroupRequest: this.add_user_group,\r\n      SetUserGroupRequest: this.set_user_group,\r\n      DeleteUserGroupRequest: this.delete_user_group,\r\n      AddUserToUserGroupRequest: this.add_user_to_user_group,\r\n      DeleteUserFromUserGroupRequest: this.delete_user_from_user_group,\r\n\r\n      // FOLDER\r\n      GetFoldersRequest: this.get_folders,\r\n      AddFolderRequest: this.add_folder,\r\n      DeleteFolderRequest: this.delete_folder,\r\n      UpdateFolderRequest: this.update_folder,\r\n\r\n      // ROLE\r\n      GetRolesRequest: this.get_roles,\r\n      AddRoleRequest: this.add_role,\r\n      DeleteRoleRequest: this.delete_role,\r\n\r\n      // USER FOLDER SETTING\r\n      GetUserFolderSettingsRequest: this.get_user_folder_settings,\r\n      AddUserFolderSettingsRequest: this.add_user_folder_settings,\r\n      UpdateUserFolderSettingsRequest: this.set_user_folder_settings,\r\n      DeleteUserFolderSettingsRequest: this.delete_user_folder_settings,\r\n\r\n      // PERMISSION\r\n      GetPermissionsRequest: this.get_permissions,\r\n      AddPermissionRequest: this.add_permission,\r\n      DeletePermissionRequest: this.delete_permission,\r\n      GetUserPermissionsRequest: this.get_user_permissions,\r\n      GetUserPermissionsForFolderRequest: this.get_user_permissions_for_folder,\r\n\r\n      // USER SEARCH SCHEMA\r\n      GetUserSearchSchemaRequest: this.get_user_search_schema,\r\n      SetUserSearchSchemaRequest: this.set_user_search_schema,\r\n      DeleteUserSearchSchemaRequest: this.delete_user_search_schema,\r\n\r\n      // DOCUMENTS\r\n      GetDocumentRequest: this.get_document,\r\n      GetManyDocumentsRequest: this.get_many_documents,\r\n      GetWaitingDocumentApprovalsRequest: this.get_waiting_document_approvals,\r\n      SaveManyDocumentsRequest: this.save_many_documents,\r\n      DeleteManyDocumentsRequest: this.delete_many_documents,\r\n      DuplicateDocumentToUsergroupRequest: this.duplicate_document_to_usergroup,\r\n      DuplicateManyDocumentsToUsergroupRequest:\r\n        this.duplicate_many_documents_to_usergroup,\r\n      GetPreviousDocumentsRequest: this.get_previous_documents,\r\n      PushDocumentButtonRequest: this.push_document_button,\r\n\r\n      // TRANSMITTAL\r\n      DownloadTransmittalCoverSheetRequest: this.download_transmittal_cover_sheet,\r\n\r\n      // DOCUMENT APPROVALS\r\n      GetManyDocumentsApprovalsRequest: this.get_many_documents_approvals,\r\n      GetDocumentApprovalsRequest: this.get_document_approvals,\r\n      AddDocumentApprovalRequest: this.add_document_approval,\r\n      UpdateDocumentApprovalRequest: this.update_document_approval,\r\n      DeleteDocumentApprovalRequest: this.delete_document_approval,\r\n      DelegateDocumentApprovalRequest: this.delegate_document_approval,\r\n      GetDocumentApprovalSpareFilesRequest:\r\n        this.get_document_approval_spare_files,\r\n      UploadDocumentApprovalFileRequest: this.upload_document_approval_file,\r\n      DeleteDocumentApprovalFileRequest: this.delete_document_approval_file,\r\n\r\n      // DOCUMENT APPROVAL FLOW\r\n      GetDocumentApprovalFlowRequest: this.get_document_approval_flow,\r\n      SetDocumentApprovalFlowRequest: this.set_document_approval_flow,\r\n      StartDocumentApprovalFlowRequest: this.start_document_approval_flow,\r\n      StopDocumentApprovalFlowRequest: this.stop_document_approval_flow,\r\n\r\n      // CART\r\n      EmptyCartRequest: this.empty_cart,\r\n      GetCartDocumentsRequest: this.get_cart_documents,\r\n      AddDocumentToCartRequest: this.add_document_to_cart,\r\n      AddManyDocumentsToCartRequest: this.add_many_documents_to_cart,\r\n      RemoveDocumentFromCartRequest: this.remove_document_from_cart,\r\n\r\n      // FILES\r\n      UploadFileToFolderRequest: this.upload_file_to_folder,\r\n      DownloadFileFromFolderRequest: this.download_file_from_folder,\r\n      DownloadManyDocumentsFilesAsArchiveRequest:\r\n        this.download_many_documents_files_as_archive,\r\n      DownloadDocumentFilesAsArchiveRequest:\r\n        this.download_document_files_as_archive,\r\n      DeleteFileFromFolderRequest: this.delete_file_from_folder,\r\n      UpdateFileFromFolderRequest: this.update_file_from_folder,\r\n      GetFileInfoRequest: this.get_file_info,\r\n      GetSpareFilesRequest: this.get_spare_files,\r\n      GetUploadProgressRequest: this.get_upload_progress,\r\n\r\n      // SERVER SETTINGS\r\n      GetServerSettingsRequest: this.get_server_settings,\r\n      UpdateServerSettingRequest: this.update_server_setting,\r\n\r\n      // MAILBOXES\r\n      GetMailBoxesRequest: this.get_mailboxes,\r\n      AddMailBoxRequest: this.add_mailbox,\r\n      UpdateMailBoxRequest: this.update_mailbox,\r\n      DeleteMailBoxRequest: this.delete_mailbox,\r\n\r\n      // MAIL CHANNELS\r\n      GetMailChannelsRequest: this.get_mail_channels,\r\n      AddMailChannelRequest: this.add_mail_channel,\r\n      UpdateMailChannelRequest: this.update_mail_channel,\r\n      DeleteMailChannelRequest: this.delete_mail_channel,\r\n      AddMailChannelToMailBoxRequest: this.add_mail_channel_to_mailbox,\r\n      DeleteMailChannelFromMailBoxRequest:\r\n        this.delete_mail_channel_from_mailbox,\r\n      FetchMailChannelRequest: this.fetch_mail_channel,\r\n\r\n      // MAIL MESSAGES\r\n      GetMailMessagesRequest: this.get_mail_messages,\r\n      DeleteMailMessageRequest: this.delete_mail_message,\r\n      DownloadMailMessageRequest: this.download_mail_message,\r\n      DownloadMailMessageAttachmentRequest:\r\n        this.download_mail_message_attachment,\r\n\r\n      // SERVICE - PDF MERGE\r\n      GetPdfMergeFilesRequest: this.get_pdf_merge_files,\r\n      UploadPdfMergeFileRequest: this.upload_pdf_merge_file,\r\n      UpdatePdfMergeFileRequest: this.update_pdf_merge_file,\r\n      DeletePdfMergeFileRequest: this.delete_pdf_merge_file,\r\n      DownloadPdfMergeResultRequest: this.download_pdf_merge_result,\r\n      DownloadPdfMixResultRequest: this.download_pdf_mix_result,\r\n\r\n      // SERVICE - SHARE FILE\r\n      GetShareFilesRequest: this.get_share_files,\r\n      UploadShareFileRequest: this.upload_share_file,\r\n      DownloadShareFileRequest: this.download_share_file,\r\n      DeleteShareFileRequest: this.delete_share_file,\r\n\r\n      // SERVICE - COUNTER\r\n      GetCountersRequest: this.get_counters,\r\n      AddCounterRequest: this.add_counter,\r\n      UpdateCounterRequest: this.update_counter,\r\n      DeleteCounterRequest: this.delete_counter,\r\n\r\n      // WORKFLOW - FLOW\r\n      GetFlowsRequest: this.get_flows,\r\n      AddFlowRequest: this.add_flow,\r\n      UpdateFlowRequest: this.update_flow,\r\n      DeleteFlowRequest: this.delete_flow,\r\n\r\n      // WORKFLOW - FLOW ITEM\r\n      GetFlowItemRequest: this.get_flow_item,\r\n      RestartFlowItemRequest: this.restart_flow_item,\r\n      GetManyFlowItemsRequest: this.get_many_flow_items,\r\n      GetFlowItemStepsRequest: this.get_flow_item_steps,\r\n    };\r\n  }\r\n\r\n  async perform_request(\r\n    positive_response_class,\r\n    path,\r\n    {\r\n      method = \"get\",\r\n      data = null,\r\n      parameters = {},\r\n      content_type = \"application/json\",\r\n      response_type = \"text\",\r\n      set_upload_size_method = null,\r\n      set_download_size_method = null,\r\n      headers = {},\r\n    } = {}\r\n  ) {\r\n    try {\r\n      const result = await this.http_call(\r\n        path,\r\n        method,\r\n        content_type,\r\n        data,\r\n        parameters,\r\n        response_type,\r\n        set_upload_size_method,\r\n        set_download_size_method,\r\n        headers\r\n      );\r\n      return new positive_response_class(result);\r\n    } catch (e) {\r\n      console.log(e.message);\r\n      if (e instanceof HttpApiError) {\r\n        return new NegativeResponse({ code: e.message });\r\n      }\r\n\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  async http_call(\r\n    path,\r\n    method,\r\n    content_type,\r\n    data,\r\n    parameters,\r\n    response_type,\r\n    set_upload_size_method,\r\n    set_download_size_method,\r\n    headers\r\n  ) {\r\n    let url = new URL(`${this.api_url}${path}`);\r\n    url.search = new URLSearchParams(parameters).toString();\r\n\r\n    let response = null;\r\n    response = await new Promise((resolve, reject) => {\r\n      let xhr = new XMLHttpRequest();\r\n      xhr.open(method, url);\r\n\r\n      xhr.responseType = response_type;\r\n\r\n      if (content_type !== null) {\r\n        xhr.setRequestHeader(\"Content-Type\", content_type);\r\n      }\r\n\r\n      // Устанавливаем заголовки, в том числе для отслеживания прогресса закачки на сервере\r\n      if (Object.keys(headers).length !== 0) {\r\n        Object.keys(headers).forEach((key) => {\r\n          xhr.setRequestHeader(key, headers[key]);\r\n        });\r\n      }\r\n\r\n      // Устанавливаем авторизационный токен\r\n      if (this._auth_token && this._auth_token !== null) {\r\n        xhr.setRequestHeader(\"Authorization\", \"Token \" + this._auth_token);\r\n      }\r\n\r\n      if (set_download_size_method !== null)\r\n        xhr.onprogress = (event) => set_download_size_method(event.loaded);\r\n\r\n      // Если сервер недоступен\r\n      xhr.onerror = function () {\r\n        console.log(\"Server unavailable\");\r\n        reject(new HttpApiError(\"Api.Server.Unavailable\"));\r\n      };\r\n\r\n      xhr.onload = function () {\r\n        // Если сервер доступен, но код ответа не OK\r\n        if (xhr.status < 200 || xhr.status >= 300) {\r\n          console.log(\"HTTP status \" + xhr.status);\r\n          reject(new HttpApiError(\"Api.Server.InternalError\"));\r\n        }\r\n\r\n        const content_type = xhr.getResponseHeader(\"Content-Type\");\r\n        const content_length = Number.parseInt(\r\n          xhr.getResponseHeader(\"Content-Length\")\r\n        );\r\n        const content_disposition =\r\n          content_type === \"application/octet-stream\"\r\n            ? libmime.decodeWords(xhr.getResponseHeader(\"Content-Disposition\"))\r\n            : null;\r\n\r\n        // Если код ответа ОК\r\n        resolve({\r\n          content_type: content_type,\r\n          content_length: content_length,\r\n          content_disposition: content_disposition,\r\n          data: xhr.response,\r\n        });\r\n      };\r\n\r\n      // Отсылаем запрос\r\n      data === null ? xhr.send() : xhr.send(data);\r\n    });\r\n\r\n    // Если получен файл для скачивания\r\n    if (response.content_type === \"application/octet-stream\") {\r\n      // Достаем имя файла из Content-Disposition\r\n\r\n      // Проверяем вариант для английского имени файла\r\n      const regex_en = /filename\\s*=\\s*\"(?<filename>.+)\"/g;\r\n      const match_en = regex_en.exec(response.content_disposition);\r\n\r\n      // Проверяем вариант для русского имени файла\r\n      const regex_ru = /filename\\*=utf-8''(?<filename>.+)/g;\r\n      const match_ru = regex_ru.exec(response.content_disposition);\r\n\r\n      const match = match_en === null ? match_ru : match_en;\r\n      // Заменяем управляющие последовательности с % на символы\r\n      return {\r\n        file: response.data,\r\n        name: decodeURI(match.groups.filename)\r\n          .replace(/%2C/g, \",\")\r\n          .replace(/%40/g, \"@\")\r\n          .replace(/%3F/g, \"?\"),\r\n        size: response.content_length,\r\n      };\r\n    }\r\n\r\n    // Если это не файл, то должен быть формат JSON\r\n    let json_data = {};\r\n    try {\r\n      // Если JSON в формате Blob, то конвертируем в текст\r\n      if (\r\n        response.data instanceof Blob &&\r\n        response.data.type === \"application/json\"\r\n      ) {\r\n        json_data = JSON.parse(await response.data.text());\r\n      } else {\r\n        // Если JSON в формате Текст, то читаем без конвертации\r\n        json_data = JSON.parse(response.data);\r\n      }\r\n\r\n      // Если код ответа нормальный, но формат ответа не JSON\r\n    } catch (err) {\r\n      throw new HttpApiError(\"Api.Server.InternalError\");\r\n    }\r\n\r\n    // Если код ответа нормальный, формат JSON, но запрос не успешен\r\n    if (!json_data.success || json_data.code) {\r\n      console.log(\"Response error code \", json_data.code);\r\n      throw new HttpApiError(json_data.code);\r\n    }\r\n\r\n    // Если код ответа нормальный, формат JSON, запрос успешен\r\n    return json_data.data;\r\n  }\r\n\r\n  login_with_credentials = async (request) => {\r\n    return await this.perform_request(\r\n      LoginCredentialsResponse,\r\n      `/login/credentials/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          username: request.data.username,\r\n          password: request.data.password,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  login_with_token = async () => {\r\n    return await this.perform_request(LoginTokenResponse, `/login/token/`);\r\n  };\r\n\r\n  get_info = async () => {\r\n    return await this.perform_request(GetInfoResponse, `/my/info/`);\r\n  };\r\n\r\n  get_users = async () => {\r\n    return await this.perform_request(GetUsersResponse, `/users/`);\r\n  };\r\n\r\n  set_user = async (request) => {\r\n    return await this.perform_request(\r\n      SetUserResponse,\r\n      `/users/${request.data.username}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          is_active: request.data.is_active,\r\n          access_group_regex: request.data.access_group_regex,\r\n          role: request.data.role,\r\n          role_inside_group: request.data.role_inside_group,\r\n          role_outside_group: request.data.role_outside_group,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserResponse,\r\n      `/users/${request.data.username}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_user_replacements = async () => {\r\n    return await this.perform_request(\r\n      GetUserReplacementsResponse,\r\n      `/user-replacements/`\r\n    );\r\n  };\r\n\r\n  add_user_replacement = async (request) => {\r\n    return await this.perform_request(\r\n      AddUserReplacementResponse,\r\n      `/user-replacements/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          username: request.data.username,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user_replacement = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserReplacementResponse,\r\n      `/user-replacements/${request.data.username}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_user_replacements_of_user = async (request) => {\r\n    return await this.perform_request(\r\n      GetUserReplacementsOfUserResponse,\r\n      `/users/${request.data.username}/replacements/`,\r\n    );\r\n  };\r\n\r\n  add_user_replacement_to_user = async (request) => {\r\n    return await this.perform_request(\r\n      AddUserReplacementToUserResponse,\r\n      `/users/${request.data.username_to_be_replaced}/replacements/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          username: request.data.replaced_with_username,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user_replacement_from_user = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserReplacementFromUserResponse,\r\n      `/users/${request.data.username_to_be_replaced}/replacements/${request.data.replaced_with_username}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_on_behalf_users = async () => {\r\n    return await this.perform_request(GetOnBehalfUsersResponse, `/on-behalf/`);\r\n  };\r\n\r\n  set_on_behalf_user = async (request) => {\r\n    return await this.perform_request(\r\n      SetOnBehalfUserResponse,\r\n      `/on-behalf/${request.data.username}/`,\r\n      {\r\n        method: \"put\",\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_on_behalf_user = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteOnBehalfUserResponse,\r\n      `/on-behalf/${request.data.username}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_folders = async () => {\r\n    return await this.perform_request(GetFoldersResponse, `/folders/`);\r\n  };\r\n\r\n  add_folder = async (request) => {\r\n    return await this.perform_request(AddFolderResponse, `/folders/`, {\r\n      method: \"post\",\r\n      data: JSON.stringify({\r\n        name: request.data.name,\r\n        storage_path: request.data.storage_path,\r\n        master_usergroup_slug: request.data.master_usergroup_slug,\r\n        access_group: request.data.access_group,\r\n        settings: request.data.settings,\r\n      }),\r\n    });\r\n  };\r\n\r\n  update_folder = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateFolderResponse,\r\n      `/folders/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          storage_path: request.data.storage_path,\r\n          master_usergroup_slug: request.data.master_usergroup_slug,\r\n          access_group: request.data.access_group,\r\n          settings: request.data.settings,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_folder = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteFolderResponse,\r\n      `/folders/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_roles = async () => {\r\n    return await this.perform_request(GetRolesResponse, `/roles/`);\r\n  };\r\n\r\n  // OK\r\n  add_role = async (request) => {\r\n    return await this.perform_request(AddRoleResponse, `/roles/`, {\r\n      method: \"post\",\r\n      data: JSON.stringify({ name: request.data.name }),\r\n    });\r\n  };\r\n\r\n  delete_role = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteRoleResponse,\r\n      `/roles/${request.data.name}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  // OK\r\n  get_user_folder_settings = async () => {\r\n    return await this.perform_request(\r\n      GetUserFolderSettingsResponse,\r\n      `/user-folder-settings/`\r\n    );\r\n  };\r\n\r\n  add_user_folder_settings = async (request) => {\r\n    return await this.perform_request(\r\n      AddUserFolderSettingsResponse,\r\n      `/user-folder-settings/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          folder: request.data.folder_id,\r\n          usergroup: request.data.usergroup_slug,\r\n          user: request.data.username,\r\n          role: request.data.role,\r\n          search_schema: request.data.search_schema,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  set_user_folder_settings = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateUserFolderSettingsResponse,\r\n      `/user-folder-settings/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          folder: request.data.folder_id,\r\n          usergroup: request.data.usergroup_slug,\r\n          user: request.data.username,\r\n          role: request.data.role,\r\n          search_schema: request.data.search_schema,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user_folder_settings = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserFolderSettingsResponse,\r\n      `/user-folder-settings/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_permissions = async () => {\r\n    return await this.perform_request(GetPermissionsResponse, `/permissions/`);\r\n  };\r\n\r\n  add_permission = async (request) => {\r\n    return await this.perform_request(\r\n      AddPermissionResponse,\r\n      `/roles/${request.data.role}/permissions/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          name: request.data.permission,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_permission = async (request) => {\r\n    return await this.perform_request(\r\n      DeletePermissionResponse,\r\n      `/roles/${request.data.role}/permissions/${request.data.permission}/`,\r\n      { method: \"delete\" }\r\n    );\r\n  };\r\n\r\n  get_user_permissions = async () => {\r\n    return await this.perform_request(\r\n      GetUserPermissionsResponse,\r\n      `/my/permissions/`\r\n    );\r\n  };\r\n\r\n  get_user_permissions_for_folder = async (request) => {\r\n    return await this.perform_request(\r\n      GetUserPermissionsForFolderResponse,\r\n      `/my/permissions/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/`\r\n    );\r\n  };\r\n\r\n  get_user_search_schema = async (request) => {\r\n    return await this.perform_request(\r\n      GetUserSearchSchemaResponse,\r\n      `/my/folder-search-schema/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/`\r\n    );\r\n  };\r\n\r\n  set_user_search_schema = async (request) => {\r\n    return await this.perform_request(\r\n      SetUserSearchSchemaResponse,\r\n      `/my/folder-search-schema/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({ search_schema: request.data.search_schema }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user_search_schema = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserSearchSchemaResponse,\r\n      `/my/folder-search-schema/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/`,\r\n      { method: \"delete\" }\r\n    );\r\n  };\r\n\r\n  get_document = async (request) => {\r\n    return await this.perform_request(\r\n      GetDocumentResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/`\r\n    );\r\n  };\r\n\r\n  get_previous_documents = async (request) => {\r\n    return await this.perform_request(\r\n      GetPreviousDocumentsResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/previous/${request.data.count}/`\r\n    );\r\n  };\r\n\r\n  get_many_documents = async (request) => {\r\n    const query_without_empty_fields = {};\r\n\r\n    Object.keys(request.data.query).forEach((key) => {\r\n      const value = request.data.query[key];\r\n      if (value !== \"\") query_without_empty_fields[key] = value;\r\n    });\r\n\r\n    return await this.perform_request(\r\n      GetManyDocumentsResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/`,\r\n      {\r\n        parameters: query_without_empty_fields,\r\n      }\r\n    );\r\n  };\r\n\r\n  get_waiting_document_approvals = async () => {\r\n    return await this.perform_request(\r\n      GetWaitingDocumentApprovalsResponse,\r\n      \"/documents/waiting-approvals/\"\r\n    );\r\n  };\r\n\r\n  push_document_button = async (request) => {\r\n    return await this.perform_request(\r\n      PushDocumentButtonResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/actions/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({ action: request.data.action}),\r\n      }\r\n    );\r\n  };\r\n\r\n  // OK\r\n  save_many_documents = async (request) => {\r\n    return await this.perform_request(\r\n      SaveManyDocumentsResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify(request.data.docs),\r\n      }\r\n    );\r\n  };\r\n\r\n  duplicate_document_to_usergroup = async (request) => {\r\n    return await this.perform_request(\r\n      DuplicateDocumentToUsergroupResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.source_usergroup_id}/documents/${request.data.document_id}/copy_to_usergroup/${request.data.target_usergroup_id}/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({}),\r\n      }\r\n    );\r\n  };\r\n\r\n  duplicate_many_documents_to_usergroup = async (request) => {\r\n    return await this.perform_request(\r\n      DuplicateManyDocumentsToUsergroupResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.source_usergroup_id}/documents/copy_to_usergroup/${request.data.target_usergroup_id}/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify(request.data.document_ids),\r\n      }\r\n    );\r\n  };\r\n\r\n  // OK\r\n  delete_many_documents = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteManyDocumentsResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/`,\r\n      {\r\n        method: \"delete\",\r\n        data: JSON.stringify(request.data.ids),\r\n      }\r\n    );\r\n  };\r\n\r\n  upload_file_to_folder = async (request) => {\r\n    const data = new FormData();\r\n    data.append(\"id\", request.data.id);\r\n    data.append(\"file\", request.data.original_file);\r\n\r\n    return await this.perform_request(\r\n      UploadFileToFolderResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/files/`,\r\n      {\r\n        method: \"post\",\r\n        content_type: null,\r\n        data: data,\r\n        headers: {\r\n          \"X-FILE-ID\": request.data.id,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  download_file_from_folder = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadFileFromFolderResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/files/${request.data.id}/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  download_many_documents_files_as_archive = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadManyDocumentsFilesAsArchiveResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/download/archive/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          ids: request.data.document_ids,\r\n        }),\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  download_document_files_as_archive = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadDocumentFilesAsArchiveResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/download/archive/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  // OK\r\n  get_spare_files = async (request) => {\r\n    return await this.perform_request(\r\n      GetSpareFilesResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/files/spare/`\r\n    );\r\n  };\r\n\r\n  // OK\r\n  delete_file_from_folder = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteFileFromFolderResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/files/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  update_file_from_folder = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateFileFromFolderResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/files/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  get_file_info = async (request) => {\r\n    return await this.perform_request(\r\n      GetFileInfoResponse,\r\n      `/files/${request.data.id}/info/`\r\n    );\r\n  };\r\n\r\n  get_upload_progress = async () => {\r\n    return await this.perform_request(\r\n      GetUploadProgressResponse,\r\n      `/files/upload/progress/`\r\n    );\r\n  };\r\n\r\n  get_pdf_merge_files = async () => {\r\n    return await this.perform_request(\r\n      GetPdfMergeFilesResponse,\r\n      `/service/pdfmerge/files/`\r\n    );\r\n  };\r\n\r\n  upload_pdf_merge_file = async (request) => {\r\n    const data = new FormData();\r\n    data.append(\"id\", request.data.id);\r\n    data.append(\"order\", request.data.order);\r\n    data.append(\"file\", request.data.original_file);\r\n\r\n    return await this.perform_request(\r\n      UploadPdfMergeFileResponse,\r\n      `/service/pdfmerge/files/`,\r\n      {\r\n        method: \"post\",\r\n        content_type: null,\r\n        data: data,\r\n        headers: {\r\n          \"X-FILE-ID\": request.data.id,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  update_pdf_merge_file = async (request) => {\r\n    return await this.perform_request(\r\n      UpdatePdfMergeFileResponse,\r\n      `/service/pdfmerge/files/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          order: request.data.order,\r\n          page_from: request.data.page_from,\r\n          page_to: request.data.page_to,\r\n          angle: request.data.angle,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_pdf_merge_file = async (request) => {\r\n    return await this.perform_request(\r\n      DeletePdfMergeFileResponse,\r\n      `/service/pdfmerge/files/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  download_pdf_merge_result = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadPdfMergeResultResponse,\r\n      `/service/pdfmerge/merge/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n        parameters: {\r\n          keep_bookmarks: request.data.keep_bookmarks,\r\n          add_filenames_as_bookmarks: request.data.add_filenames_as_bookmarks,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  download_pdf_mix_result = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadPdfMixResultResponse,\r\n      `/service/pdfmerge/mix/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  get_user_groups = async () => {\r\n    return await this.perform_request(GetUserGroupsResponse, `/usergroups/`);\r\n  };\r\n\r\n  // get_my_user_groups = async () => {\r\n  //   return await this.perform_request(\r\n  //     GetMyUserGroupsResponse,\r\n  //     `/my/usergroups/`\r\n  //   );\r\n  // };\r\n\r\n  add_user_group = async (request) => {\r\n    return await this.perform_request(AddUserGroupResponse, `/usergroups/`, {\r\n      method: \"post\",\r\n      data: JSON.stringify({\r\n        name: request.data.name,\r\n        slug: request.data.slug,\r\n        is_private: request.data.is_private,\r\n      }),\r\n    });\r\n  };\r\n\r\n  set_user_group = async (request) => {\r\n    return await this.perform_request(\r\n      SetUserGroupResponse,\r\n      `/usergroups/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          slug: request.data.slug,\r\n          is_private: request.data.is_private,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user_group = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserGroupResponse,\r\n      `/usergroups/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  add_user_to_user_group = async (request) => {\r\n    return await this.perform_request(\r\n      AddUserToUserGroupResponse,\r\n      `/usergroups/${request.data.id}/users/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({ username: request.data.username }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_user_from_user_group = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteUserFromUserGroupResponse,\r\n      `/usergroups/${request.data.id}/users/${request.data.username}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_share_files = async () => {\r\n    return await this.perform_request(\r\n      GetShareFilesResponse,\r\n      `/service/share/files/`\r\n    );\r\n  };\r\n\r\n  upload_share_file = async (request) => {\r\n    const data = new FormData();\r\n    data.append(\"id\", request.data.id);\r\n    data.append(\"file\", request.data.original_file);\r\n\r\n    return await this.perform_request(\r\n      UploadShareFileResponse,\r\n      `/service/share/files/`,\r\n      {\r\n        method: \"post\",\r\n        content_type: null,\r\n        data: data,\r\n        headers: {\r\n          \"X-FILE-ID\": request.data.id,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_share_file = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteShareFileResponse,\r\n      `/service/share/files/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  download_share_file = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadShareFileResponse,\r\n      `/service/share/files/${request.data.id}/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  get_flows = async (request) => {\r\n    const query_without_empty_fields = {};\r\n\r\n    Object.keys(request.data.query).forEach((key) => {\r\n      const value = request.data.query[key];\r\n      if (value !== \"\") query_without_empty_fields[key] = value;\r\n    });\r\n\r\n    return await this.perform_request(GetFlowsResponse, `/workflow/flows/`, {\r\n      parameters: query_without_empty_fields,\r\n    });\r\n  };\r\n\r\n  add_flow = async (request) => {\r\n    return await this.perform_request(AddFlowResponse, `/workflow/flows/`, {\r\n      method: \"post\",\r\n      data: JSON.stringify({\r\n        name: request.data.name,\r\n        trigger: request.data.trigger,\r\n        is_active: request.data.is_active,\r\n        is_multiple: request.data.is_multiple,\r\n        message_if_fail: request.data.message_if_fail,\r\n        process: request.data.process,\r\n      }),\r\n    });\r\n  };\r\n\r\n  update_flow = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateFlowResponse,\r\n      `/workflow/flows/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          trigger: request.data.trigger,\r\n          is_active: request.data.is_active,\r\n          is_multiple: request.data.is_multiple,\r\n          message_if_fail: request.data.message_if_fail,\r\n          process: request.data.process,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_flow = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteFlowResponse,\r\n      `/workflow/flows/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_flow_item = async (request) => {\r\n    return await this.perform_request(\r\n      GetFlowItemResponse,\r\n      `/workflow/flowitems/${request.data.id}/`\r\n    );\r\n  };\r\n\r\n  restart_flow_item = async (request) => {\r\n    return await this.perform_request(\r\n      RestartFlowItemResponse,\r\n      `/workflow/flowitems/${request.data.id}/restart/`\r\n    );\r\n  };\r\n\r\n  get_many_flow_items = async (request) => {\r\n    const query_without_empty_fields = {};\r\n\r\n    Object.keys(request.data.query).forEach((key) => {\r\n      const value = request.data.query[key];\r\n      if (value !== \"\") query_without_empty_fields[key] = value;\r\n    });\r\n\r\n    return await this.perform_request(\r\n      GetManyFlowItemsResponse,\r\n      `/workflow/flowitems/`,\r\n      {\r\n        parameters: query_without_empty_fields,\r\n      }\r\n    );\r\n  };\r\n\r\n  get_flow_item_steps = async (request) => {\r\n    return await this.perform_request(\r\n      GetFlowItemStepsResponse,\r\n      `/workflow/flowitems/${request.data.flowitem_id}/steps/`\r\n    );\r\n  };\r\n\r\n  get_many_documents_approvals = async (request) => {\r\n    const query_without_empty_fields = {};\r\n\r\n    Object.keys(request.data.query).forEach((key) => {\r\n      const value = request.data.query[key];\r\n      if (value !== \"\") query_without_empty_fields[key] = value;\r\n    });\r\n\r\n    return await this.perform_request(GetManyDocumentsApprovalsResponse, `/documents/approvals/`, {\r\n      parameters: query_without_empty_fields,\r\n    });\r\n  };\r\n\r\n  get_document_approvals = async (request) => {\r\n    return await this.perform_request(\r\n      GetDocumentApprovalsResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/`\r\n    );\r\n  };\r\n\r\n  add_document_approval = async (request) => {\r\n    return await this.perform_request(\r\n      AddDocumentApprovalResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          username: request.data.username,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  update_document_approval = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateDocumentApprovalResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/${request.data.approval_id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          state: request.data.state,\r\n          files: request.data.files,\r\n          comments: request.data.comments,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_document_approval = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteDocumentApprovalResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/${request.data.approval_id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  delegate_document_approval = async (request) => {\r\n    return await this.perform_request(\r\n      DelegateDocumentApprovalResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/${request.data.approval_id}/delegate/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          username: request.data.username,\r\n          with_return: request.data.with_return,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  get_document_approval_spare_files = async (request) => {\r\n    return await this.perform_request(\r\n      GetDocumentApprovalSpareFilesResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/files/spare/`\r\n    );\r\n  };\r\n\r\n  upload_document_approval_file = async (request) => {\r\n    const data = new FormData();\r\n    data.append(\"id\", request.data.file_id);\r\n    data.append(\"file\", request.data.original_file);\r\n\r\n    return await this.perform_request(\r\n      UploadDocumentApprovalFileResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/files/`,\r\n      {\r\n        method: \"post\",\r\n        content_type: null,\r\n        data: data,\r\n        headers: {\r\n          \"X-FILE-ID\": request.data.file_id,\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_document_approval_file = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteDocumentApprovalFileResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approvals/files/${request.data.file_id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  empty_cart = async () => {\r\n    return await this.perform_request(EmptyCartResponse, `/cart/empty/`, {\r\n      method: \"delete\",\r\n    });\r\n  };\r\n\r\n  get_cart_documents = async () => {\r\n    return await this.perform_request(\r\n      GetCartDocumentsResponse,\r\n      `/cart/documents/`\r\n    );\r\n  };\r\n\r\n  add_many_documents_to_cart = async (request) => {\r\n    return await this.perform_request(\r\n      AddManyDocumentsToCartResponse,\r\n      `/cart/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          ids: request.data.document_ids,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  add_document_to_cart = async (request) => {\r\n    return await this.perform_request(\r\n      AddDocumentToCartResponse,\r\n      `/cart/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/`,\r\n      { method: \"post\" }\r\n    );\r\n  };\r\n\r\n  remove_document_from_cart = async (request) => {\r\n    return await this.perform_request(\r\n      RemoveDocumentFromCartResponse,\r\n      `/cart/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/`,\r\n      { method: \"delete\" }\r\n    );\r\n  };\r\n\r\n  get_document_approval_flow = async (request) => {\r\n    return await this.perform_request(\r\n      GetDocumentApprovalFlowResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approval-flow/`\r\n    );\r\n  };\r\n\r\n  set_document_approval_flow = async (request) => {\r\n    return await this.perform_request(\r\n      SetDocumentApprovalFlowResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approval-flow/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          steps: request.data.steps,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  start_document_approval_flow = async (request) => {\r\n    return await this.perform_request(\r\n      StartDocumentApprovalFlowResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approval-flow/start/`,\r\n      {\r\n        method: \"put\",\r\n      }\r\n    );\r\n  };\r\n\r\n  stop_document_approval_flow = async (request) => {\r\n    return await this.perform_request(\r\n      StopDocumentApprovalFlowResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/documents/${request.data.document_id}/approval-flow/stop/`,\r\n      {\r\n        method: \"put\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_server_settings = async () => {\r\n    return await this.perform_request(\r\n      GetServerSettingsResponse,\r\n      `/server-settings/`\r\n    );\r\n  };\r\n\r\n  update_server_setting = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateServerSettingResponse,\r\n      `/server-settings/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          value: request.data.value,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  get_mailboxes = async () => {\r\n    return await this.perform_request(GetMailBoxesResponse, `/mail/boxes/`);\r\n  };\r\n\r\n  add_mailbox = async (request) => {\r\n    return await this.perform_request(AddMailBoxResponse, `/mail/boxes/`, {\r\n      method: \"post\",\r\n      data: JSON.stringify({\r\n        out_protocol: request.data.out_protocol,\r\n        out_encryption: request.data.out_encryption,\r\n        out_port: request.data.out_port,\r\n        out_server: request.data.out_server,\r\n        in_protocol: request.data.in_protocol,\r\n        in_encryption: request.data.in_encryption,\r\n        in_port: request.data.in_port,\r\n        in_server: request.data.in_server,\r\n        username: request.data.username,\r\n        password: request.data.password,\r\n        name: request.data.name,\r\n      }),\r\n    });\r\n  };\r\n\r\n  update_mailbox = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateMailBoxResponse,\r\n      `/mail/boxes/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          out_protocol: request.data.out_protocol,\r\n          out_encryption: request.data.out_encryption,\r\n          out_port: request.data.out_port,\r\n          out_server: request.data.out_server,\r\n          in_protocol: request.data.in_protocol,\r\n          in_encryption: request.data.in_encryption,\r\n          in_port: request.data.in_port,\r\n          in_server: request.data.in_server,\r\n          username: request.data.username,\r\n          password: request.data.password,\r\n          name: request.data.name,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_mailbox = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteMailBoxResponse,\r\n      `/mail/boxes/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  get_mail_channels = async () => {\r\n    return await this.perform_request(\r\n      GetMailChannelsResponse,\r\n      `/mail/channels/`\r\n    );\r\n  };\r\n\r\n  add_mail_channel = async (request) => {\r\n    return await this.perform_request(\r\n      AddMailChannelResponse,\r\n      `/mail/channels/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          folder: request.data.folder,\r\n          storage_path: request.data.storage_path,\r\n          settings: request.data.settings,\r\n          is_active: request.data.is_active,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  update_mail_channel = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateMailChannelResponse,\r\n      `/mail/channels/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          folder: request.data.folder,\r\n          storage_path: request.data.storage_path,\r\n          settings: request.data.settings,\r\n          is_active: request.data.is_active,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_mail_channel = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteMailChannelResponse,\r\n      `/mail/channels/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  add_mail_channel_to_mailbox = async (request) => {\r\n    return await this.perform_request(\r\n      AddMailChannelToMailBoxResponse,\r\n      `/mail/boxes/${request.data.mailbox_id}/channels/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          id: request.data.mailchannel_id,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_mail_channel_from_mailbox = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteMailChannelFromMailBoxResponse,\r\n      `/mail/boxes/${request.data.mailbox_id}/channels/${request.data.mailchannel_id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  fetch_mail_channel = async (request) => {\r\n    return await this.perform_request(\r\n      FetchMailChannelResponse,\r\n      `/mail/channels/${request.data.id}/fetch/`\r\n    );\r\n  };\r\n\r\n  get_mail_messages = async (request) => {\r\n    const query_without_empty_fields = {};\r\n\r\n    Object.keys(request.data.query).forEach((key) => {\r\n      const value = request.data.query[key];\r\n      if (value !== \"\") query_without_empty_fields[key] = value;\r\n    });\r\n\r\n    return await this.perform_request(\r\n      GetMailMessagesResponse,\r\n      `/mail/messages/`,\r\n      {\r\n        parameters: query_without_empty_fields,\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_mail_message = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteMailMessageResponse,\r\n      `/mail/messages/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  download_mail_message = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadMailMessageResponse,\r\n      `/mail/messages/${request.data.id}/${request.data.format}/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  download_mail_message_attachment = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadMailMessageAttachmentResponse,\r\n      `/mail/messages/${request.data.message_id}/attachments/${request.data.id}/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n      }\r\n    );\r\n  };\r\n\r\n  get_counters = async () => {\r\n    return await this.perform_request(\r\n      GetCountersResponse,\r\n      `/service/counters/`\r\n    );\r\n  };\r\n\r\n  add_counter = async (request) => {\r\n    return await this.perform_request(\r\n      AddCounterResponse,\r\n      `/service/counters/`,\r\n      {\r\n        method: \"post\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          description: request.data.description,\r\n          value: request.data.value,\r\n          increment: request.data.increment,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  update_counter = async (request) => {\r\n    return await this.perform_request(\r\n      UpdateCounterResponse,\r\n      `/service/counters/${request.data.id}/`,\r\n      {\r\n        method: \"put\",\r\n        data: JSON.stringify({\r\n          name: request.data.name,\r\n          description: request.data.description,\r\n          value: request.data.value,\r\n          increment: request.data.increment,\r\n        }),\r\n      }\r\n    );\r\n  };\r\n\r\n  delete_counter = async (request) => {\r\n    return await this.perform_request(\r\n      DeleteCounterResponse,\r\n      `/service/counters/${request.data.id}/`,\r\n      {\r\n        method: \"delete\",\r\n      }\r\n    );\r\n  };\r\n\r\n  download_transmittal_cover_sheet = async (request) => {\r\n    return await this.perform_request(\r\n      DownloadTransmittalCoverSheetResponse,\r\n      `/folders/${request.data.folder_id}/usergroups/${request.data.usergroup_id}/transmittal_cover_sheets/`,\r\n      {\r\n        response_type: \"blob\",\r\n        set_download_size_method: request.data.set_size_method,\r\n        parameters: {\r\n          template: request.data.template,\r\n          document_ids: request.data.document_ids.join(','),\r\n        },\r\n      }\r\n    );\r\n  };\r\n}\r\n\r\nexport { HttpApi };\r\n","import { HttpApi } from \"./api_http\";\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass AbstractApiProvider {\r\n  get = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n}\r\n\r\nclass HttpApiProvider extends AbstractApiProvider {\r\n  get = () => {\r\n    return new HttpApi(\r\n      process.env.NODE_ENV === \"production\"\r\n        ? window.location.origin + \"/api/v1\"\r\n        : \"http://127.0.0.1:8000/api/v1\"\r\n    );\r\n  };\r\n}\r\n\r\nexport { HttpApiProvider };\r\n","import Noty from \"noty\";\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass AbstractNotificator {\r\n  success = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  info = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  warning = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n\r\n  error = () => {\r\n    throw new NotImplementedError();\r\n  };\r\n}\r\n\r\nclass ConsoleNotificator extends AbstractNotificator {\r\n  success = (message) => {\r\n    console.log(\"[SUCCESS]: \" + message);\r\n  };\r\n\r\n  info = (message) => {\r\n    console.log(\"[INFO]: \" + message);\r\n  };\r\n\r\n  warning = (message) => {\r\n    console.log(\"[WARNING]: \" + message);\r\n  };\r\n\r\n  error = (message) => {\r\n    console.log(\"[ERROR]: \" + message);\r\n  };\r\n}\r\n\r\nclass NotyNotificator extends AbstractNotificator {\r\n  constructor () {\r\n    super();\r\n    this.default = {\r\n      layout: \"topRight\",\r\n      theme: \"relax\",\r\n      timeout: \"3000\",\r\n      progressBar: false\r\n    }\r\n  }\r\n\r\n  do = (type, text) => {\r\n    new Noty(Object.assign(this.default, {\r\n      type: type,\r\n      text: text,\r\n    })).show();\r\n  }\r\n\r\n  success = (message) => {\r\n    this.do('success', message);\r\n  };\r\n\r\n  info = (message) => {\r\n    this.do('info', message);\r\n  };\r\n\r\n  warning = (message) => {\r\n    this.do('warning', message);\r\n  };\r\n\r\n  error = (message) => {\r\n    this.do('error', message);\r\n  };\r\n}\r\n\r\nexport { ConsoleNotificator, NotyNotificator };\r\n","import { reactive } from \"vue\";\r\n\r\nclass NotImplementedError extends Error {}\r\n\r\nclass AbstractTimer {\r\n  constructor(period) {\r\n    this._callback = () => {\r\n      throw new NotImplementedError();\r\n    };\r\n    this._period = period;\r\n    this._timer = null;\r\n  }\r\n\r\n  set_callback = (f) => {\r\n    this._callback = f;\r\n  };\r\n\r\n  start = () => {\r\n    this._timer = setInterval(this._callback, this._period);\r\n  };\r\n\r\n  stop = () => {\r\n    clearInterval(this._timer);\r\n    this._timer = null;\r\n  };\r\n}\r\n\r\nclass UploadProgressTimer extends AbstractTimer {\r\n  constructor(period) {\r\n    super(period);\r\n    this._folder_id = null;\r\n    this._ids = [];\r\n  }\r\n\r\n  start = () => {\r\n    if (this._ids.length !== 0)\r\n      this._timer = setInterval(this._callback, this._period);\r\n  };\r\n\r\n  add = (id) => {\r\n    if (!this._ids.includes(id)) {\r\n      this._ids.push(id);\r\n    }\r\n    if (this._timer === null) this.start();\r\n  };\r\n\r\n  remove = (id) => {\r\n    this._ids = this._ids.filter((x) => x !== id);\r\n    if (this._ids.length === 0) this.stop();\r\n  };\r\n}\r\n\r\nclass WaitSecondsTimer {\r\n  constructor(period = 1000) {\r\n    this._timer = null;\r\n    this._period = period;\r\n    this._seconds = reactive({});\r\n\r\n    this._decrease_seconds = () => {\r\n      Object.keys(this._seconds).forEach((key) => {\r\n        if (this._seconds[key] > 0) this._seconds[key]--;\r\n      });\r\n\r\n      if (Object.values(this._seconds).reduce((s, x) => s + x, 0) === 0)\r\n        this.stop();\r\n    };\r\n  }\r\n\r\n  start = () => {\r\n    this._timer = setInterval(this._decrease_seconds, this._period);\r\n  };\r\n\r\n  stop = () => {\r\n    clearInterval(this._timer);\r\n    this._timer = null;\r\n  };\r\n\r\n  get = (id) => this._seconds[id] || 0;\r\n\r\n  set = (id, count) => {\r\n    this._seconds[id] = count;\r\n    if (this._timer === null) this.start();\r\n  };\r\n}\r\n\r\nexport { UploadProgressTimer, WaitSecondsTimer };\r\n","import { VueBoxRepository } from \"./box_repository\";\r\n\r\nclass VueFolderSettings extends VueBoxRepository {}\r\nexport { VueFolderSettings };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\n\r\nconst ApprovalMixin = {\r\n  get_approval_actions_count() {\r\n    return this.get(\"approval_actions_count\");\r\n  },\r\n\r\n  set_approval_actions_count(value) {\r\n    if (value !== undefined) this.set(\"approval_actions_count\", value);\r\n  },\r\n\r\n  get_approval_orders_count() {\r\n    return this.get(\"approval_orders_count\");\r\n  },\r\n\r\n  set_approval_orders_count(value) {\r\n    if (value !== undefined) this.set(\"approval_orders_count\", value);\r\n  },\r\n};\r\n\r\nclass VueInfoRepository extends VueFlatRepository {}\r\nObject.assign(VueInfoRepository.prototype, ApprovalMixin);\r\n\r\nexport { VueInfoRepository };\r\n","import { VueBoxRepository } from \"./box_repository\";\r\n\r\nconst doc_box_name = \"documents\";\r\n\r\nconst VueDocMixin = {\r\n  reset_keeping_refs_for_docs() {\r\n    this.reset_keeping_refs(doc_box_name)\r\n  },\r\n\r\n  doc_values() {\r\n    return this.values(doc_box_name);\r\n  },\r\n\r\n  set_doc(name, value) {\r\n    this.set(doc_box_name, name, value);\r\n  },\r\n\r\n  get_doc(name) {\r\n    this.get(doc_box_name, name);\r\n  },\r\n\r\n  delete_doc(name) {\r\n    this.delete(doc_box_name, name);\r\n  },\r\n};\r\n\r\nclass VueCartRepository extends VueBoxRepository {}\r\nObject.assign(VueCartRepository.prototype, VueDocMixin);\r\n\r\nexport { VueCartRepository };\r\n","import { VueFlatRepository } from \"./flat_repository\";\r\nimport { CountMixin } from \"./mixins/count\";\r\n\r\n\r\nclass VueCountableFlatRepository extends VueFlatRepository {}\r\nObject.assign(VueFlatRepository.prototype, CountMixin);\r\n\r\nexport { VueCountableFlatRepository };\r\n","import { VueFlatRepository } from \"../adapters/flat_repository\";\r\nimport { VueBoxRepository } from \"../adapters/box_repository\";\r\nimport { VueUserRepository } from \"../adapters/user_repository\";\r\nimport { VueUserGroupRepository } from \"../adapters/usergroup_repository\";\r\nimport { VueTokenRepository } from \"../adapters/token_repository\";\r\nimport { VueFolderRepository } from \"../adapters/folder_repository\";\r\nimport { VueDocRepository } from \"../adapters/doc_repository\";\r\nimport { VueFileBoxRepository } from \"../adapters/file_box_repository\";\r\nimport { VueFileFlatRepository } from \"../adapters/file_flat_repository\";\r\nimport { VueUserFolderSettingsRepository } from \"../adapters/user_folder_settings_repository\";\r\nimport { VuePermissionRepository } from \"../adapters/permission_repository\";\r\nimport { VueRolePermissionsRepository } from \"../adapters/role_permissions_repository\";\r\nimport { VueFlatCurrentRepository } from \"../adapters/flat_current_repository\";\r\nimport { HttpApiProvider } from \"../adapters/api_provider\";\r\nimport { NotyNotificator } from \"../adapters/notificator\";\r\nimport { UploadProgressTimer, WaitSecondsTimer } from \"../adapters/timer\";\r\nimport { VueFolderSettings } from \"../adapters/folder_settings\";\r\nimport { VueInfoRepository } from \"../adapters/info_repository\";\r\nimport { VueCartRepository } from \"../adapters/cart_repository\";\r\nimport { VueCountableFlatRepository } from \"../adapters/countable_flat_repository\";\r\n\r\nclass AbstractUnitOfWork {\r\n  constructor() {\r\n    this.messages = [];\r\n  }\r\n\r\n  collect_new_messages = () => {\r\n    const messages = [...this.messages];\r\n    this.messages = [];\r\n\r\n    return messages;\r\n  };\r\n\r\n  push_message = (message) => {\r\n    // console.log('Push message \"' + message.constructor.name + '\"');\r\n    this.messages.push(message);\r\n  };\r\n}\r\n\r\nclass VueUnitOfWork extends AbstractUnitOfWork {\r\n  constructor() {\r\n    super();\r\n    this.api = new HttpApiProvider().get();\r\n    this.notificator = new NotyNotificator();\r\n    this.upload_progress_timer = new UploadProgressTimer(2000); // Обновлять прогресс каждые 2 сек\r\n    this.wait_seconds_timer = new WaitSecondsTimer(1000); // Таймер для ожидания активации кнопок\r\n\r\n    this.info_repository = new VueInfoRepository(\"info\");\r\n    this.user_repository = new VueUserRepository(\"users\");\r\n    this.user_replacement_repository = new VueBoxRepository(\"user_replacements\");\r\n    this.usergroup_repository = new VueUserGroupRepository(\"usergroups\");\r\n    this.token_repository = new VueTokenRepository(\"tokens\", 30); // Хранить auth_token 30 дней\r\n    this.folder_repository = new VueFolderRepository(\"folders\");\r\n    this.doc_repository = new VueDocRepository(\"documents\");\r\n    this.waiting_doc_approval_repository = new VueFlatRepository(\r\n      \"waiting_document_approvals\"\r\n    );\r\n    this.search_doc_approval_repository = new VueCountableFlatRepository(\r\n      \"search_document_approvals\"\r\n    );\r\n    this.doc_approval_repository = new VueBoxRepository(\"document_approvals\");\r\n    this.doc_approval_flow_repository = new VueFlatRepository(\"document_approval_flows\");\r\n    this.doc_approval_file_repository = new VueFileFlatRepository(\r\n      \"files_document_approval\"\r\n    );\r\n    this.cart_repository = new VueCartRepository(\"cart\");\r\n\r\n    this.file_in_folder_repository = new VueFileBoxRepository(\r\n      \"files_in_folders\"\r\n    );\r\n    this.file_common_repository = new VueFileFlatRepository(\"files_common\");\r\n    this.user_folder_settings_repository = new VueUserFolderSettingsRepository(\r\n      \"user_folder_settings\"\r\n    );\r\n    this.role_permissions_repository = new VueRolePermissionsRepository(\r\n      \"role_permissions\"\r\n    );\r\n    this.permission_repository = new VuePermissionRepository(\"permissions\");\r\n    this.download_progress = new VueFileFlatRepository(\"download_progress\");\r\n    this.folder_settings = new VueFolderSettings(\"folder_settings\");\r\n\r\n    this.pdf_merge_file_repository = new VueFileFlatRepository(\r\n      \"files_pdf_merge\"\r\n    );\r\n    this.share_file_repository = new VueFileFlatRepository(\"files_share\");\r\n    this.self_testing_question_repository = new VueFlatRepository(\r\n      \"self_testing_questions\"\r\n    );\r\n    this.context_repository = new VueBoxRepository(\"context\");\r\n\r\n    this.flow_repository = new VueFlatRepository(\"flows\");\r\n    this.flow_item_repository = new VueFlatCurrentRepository(\"flow_items\");\r\n    this.flow_item_step_repository = new VueFlatRepository(\"flow_item_steps\");\r\n\r\n    this.server_setting_repository = new VueFlatRepository(\"server_settings\");\r\n\r\n    this.mailbox_repository = new VueFlatRepository(\"mailboxes\");\r\n    this.mail_channel_repository = new VueFlatRepository(\"mail_channels\");\r\n    this.mail_message_repository = new VueFlatRepository(\"mail_messages\");\r\n\r\n    this.counter_repository = new VueFlatRepository(\"counters\");\r\n\r\n    this.api.set_auth_token(this.token_repository.get_auth_token());\r\n  }\r\n}\r\n\r\nexport { VueUnitOfWork };\r\n","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Вход\" size=\"middle\" />\r\n    <form class=\"page__input-block\">\r\n      <form-text-input\r\n        class=\"page__input\"\r\n        :value=\"credentials.username\"\r\n        @update=\"credentials.username = $event\"\r\n        @keyup.enter=\"login_action\"\r\n        :parameters=\"{ placeholder: 'Логин Windows без домена' }\"\r\n        autocomplete=\"username\"\r\n      />\r\n      <form-text-input\r\n        class=\"page__input\"\r\n        :value=\"credentials.password\"\r\n        @update=\"credentials.password = $event\"\r\n        @keyup.enter=\"login_action\"\r\n        :parameters=\"{ placeholder: 'Пароль Windows', secure: true }\"\r\n        autocomplete=\"current-password\"\r\n      />\r\n    </form>\r\n\r\n    <div class=\"page__button-block\">\r\n      <btn-component\r\n        class=\"page__button\"\r\n        @click=\"login_action\"\r\n        caption=\"Войти\"\r\n        type=\"primary\"\r\n      />\r\n      <btn-component\r\n        class=\"page__button\"\r\n        @click=\"logout_action\"\r\n        caption=\"Выйти\"\r\n        type=\"secondary\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"vue\";\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport { LoginWithCredentials, Logout } from \"../logic/domain/command\";\r\nimport { MessageBus } from \"../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport BtnComponent from \"../components/buttons/BtnComponent.vue\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport FormTextInput from \"../components/fields/FormTextInput.vue\";\r\n\r\nexport default {\r\n  components: { BtnComponent, HeadingComponent, FormTextInput },\r\n  name: \"LoginPage\",\r\n\r\n  setup() {\r\n    const credentials = reactive({\r\n      username: \"\",\r\n      password: \"\",\r\n    });\r\n\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n\r\n    const uow = new VueUnitOfWork();\r\n    const user = uow.user_repository.get_current();\r\n\r\n    const login_action = async () => {\r\n      const message = new LoginWithCredentials(\r\n        credentials.username,\r\n        credentials.password\r\n      );\r\n\r\n      await MessageBus.handle(message, uow);\r\n      if (uow.user_repository.is_authenticated())\r\n        router.push({\r\n          path:\r\n            route.query.url === undefined\r\n              ? \"/\"\r\n              : decodeURIComponent(route.query.url),\r\n        });\r\n        \r\n    };\r\n\r\n    const logout_action = async () => {\r\n      const message = new Logout();\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    return { user, credentials, login_action, logout_action, uow };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  background-image: url(\"../../public/background.jpg\");\r\n  background-repeat: repeat;\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  align-items: stretch;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n  color: white;\r\n}\r\n\r\n.page__input-block {\r\n  padding-bottom: 15px;\r\n  width: 300px;\r\n}\r\n.page__input {\r\n  margin-right: 10px;\r\n  border-color: white;\r\n}\r\n.page__button {\r\n  margin-right: 20px;\r\n}\r\n</style>\r\n","<template>\r\n  <button\r\n    class=\"btn\"\r\n    :class=\"{\r\n      btn_primary: type === 'primary',\r\n      btn_secondary: type === 'secondary',\r\n      btn_success: type === 'success',\r\n      btn_warning: type === 'warning',\r\n      btn_danger: type === 'danger',\r\n      btn_disabled: disabled === true,\r\n      btn_small: size === 'small',\r\n      btn_middle: size === 'middle',\r\n      btn_big: size === 'big',\r\n    }\"\r\n    :disabled=\"disabled\"\r\n  >\r\n    {{ caption }}\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BtnComponent\",\r\n  props: {\r\n    caption: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    type: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    size: {\r\n      type: String,\r\n      required: false,\r\n      default: \"middle\",\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.btn {\r\n  display: inline-block;\r\n  padding: 0.375em 0.75em 0.375em 0.75em;\r\n  border: 1px solid;\r\n  color: white;\r\n  box-sizing: border-box;\r\n  line-height: 1.5;\r\n}\r\n\r\n.btn_small {\r\n  border-radius: 3px;\r\n  font-size: 12px;\r\n}\r\n\r\n.btn_middle {\r\n  border-radius: 4px;\r\n  font-size: 16px;\r\n}\r\n\r\n.btn_big {\r\n  border-radius: 8px;\r\n  font-size: 32px;\r\n}\r\n\r\n.btn_disabled {\r\n  background-color: gray !important;\r\n  border-color: gray !important;\r\n}\r\n\r\n.btn_primary {\r\n  background-color: #007bff;\r\n  border-color: #007bff;\r\n}\r\n.btn_primary:hover {\r\n  background-color: rgb(11, 94, 215);\r\n  border-color: rgb(11, 94, 215);\r\n}\r\n.btn_secondary {\r\n  background-color: #6c757d;\r\n  border-color: #6c757d;\r\n}\r\n.btn_secondary:hover {\r\n  background-color: rgb(92, 99, 106);\r\n  border-color: rgb(92, 99, 106);\r\n}\r\n.btn_success {\r\n  background-color: #28a745;\r\n  border-color: #28a745;\r\n}\r\n.btn_success:hover {\r\n  background-color: rgb(21, 115, 71);\r\n  border-color: rgb(21, 115, 71);\r\n}\r\n.btn_danger {\r\n  background-color: #dc3545;\r\n  border-color: #dc3545;\r\n}\r\n.btn_danger:hover {\r\n  background-color: rgb(187, 45, 59);\r\n  border-color: rgb(187, 45, 59);\r\n}\r\n.btn_warning {\r\n  color: black;\r\n  background-color: #ffc107;\r\n  border-color: #ffc107;\r\n}\r\n.btn_warning:hover {\r\n  background-color: rgb(255, 202, 44);\r\n  border-color: rgb(255, 202, 44);\r\n}\r\n</style>","import { render } from \"./BtnComponent.vue?vue&type=template&id=6615cd5c\"\nimport script from \"./BtnComponent.vue?vue&type=script&lang=js\"\nexport * from \"./BtnComponent.vue?vue&type=script&lang=js\"\n\nimport \"./BtnComponent.vue?vue&type=style&index=0&id=6615cd5c&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <p\r\n    class=\"heading\"\r\n    v-bind:class=\"{\r\n      heading_big: size === 'big',\r\n      heading_middle: size === 'middle',\r\n      heading_small: size === 'small',\r\n    }\"\r\n  >\r\n    {{ text }}\r\n  </p>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"HeadingComponent\",\r\n  props: {\r\n    text: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    size: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.heading {\r\n  display: block;\r\n  font-weight: 500;\r\n}\r\n\r\n.heading_big {\r\n  font-size: 48px;\r\n}\r\n\r\n.heading_middle {\r\n  font-size: 28px;\r\n}\r\n\r\n.heading_small {\r\n  font-size: 20px;\r\n}\r\n</style>","import { render } from \"./HeadingComponent.vue?vue&type=template&id=e0de76cc\"\nimport script from \"./HeadingComponent.vue?vue&type=script&lang=js\"\nexport * from \"./HeadingComponent.vue?vue&type=script&lang=js\"\n\nimport \"./HeadingComponent.vue?vue&type=style&index=0&id=e0de76cc&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"formtextinput\">\r\n    <input\r\n      class=\"textinput\"\r\n      :style=\"style\"\r\n      :type=\"secure === true ? 'password' : 'text'\"\r\n      :value=\"value\"\r\n      :placeholder=\"placeholder\"\r\n      :disabled=\"is_disabled\"\r\n      @input=\"$emit('update', $event.target.value)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormTextInput\",\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: String,\r\n      required: false,\r\n      // default: \"\",\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || \"\";\r\n    if (props.value === undefined || props.value === null)\r\n      emit(\"update\", default_value);\r\n\r\n    const height = computed(() => props.parameters[\"height\"] || 0);\r\n    const style = computed(() =>\r\n      height.value == 0\r\n        ? { color: color.value }\r\n        : {\r\n            color: color.value,\r\n            \"min-height\": height.value.toString() + \"px\",\r\n            \"max-height\": height.value.toString() + \"px\",\r\n          }\r\n    );\r\n\r\n    const placeholder = computed(() => props.parameters[\"placeholder\"] || \"\");\r\n    const secure = computed(() => props.parameters[\"secure\"] || false);\r\n    const is_disabled = computed(\r\n      () => props.parameters[\"is_disabled\"] || false\r\n    );\r\n    const color = computed(() => props.parameters[\"color\"] || \"black\");\r\n\r\n    return { placeholder, secure, is_disabled, color, style };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formtextinput {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n}\r\n\r\n.textinput {\r\n  box-sizing: border-box;\r\n}\r\n</style>\r\n","import { render } from \"./FormTextInput.vue?vue&type=template&id=fae75948&scoped=true\"\nimport script from \"./FormTextInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormTextInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormTextInput.vue?vue&type=style&index=0&id=fae75948&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fae75948\"]])\n\nexport default __exports__","import { render } from \"./LoginPage.vue?vue&type=template&id=7e14fab0&scoped=true\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport \"./LoginPage.vue?vue&type=style&index=0&id=7e14fab0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7e14fab0\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"page\" v-if=\"folder_name\">\r\n      <heading-component\r\n        class=\"page__heading\"\r\n        :text=\"`${folder_name} ${\r\n          validation_progress < 100\r\n            ? '(валидация ' + validation_progress.toString() + '%)'\r\n            : ''\r\n        }`\"\r\n        size=\"middle\"\r\n      />\r\n      <div class=\"page__container\">\r\n        <div v-if=\"is_list_container_required\" class=\"page__listcontainer\">\r\n          <document-page-download-progress-row\r\n            class=\"page__downloadprogress\"\r\n            :files=\"downloading_files\"\r\n          />\r\n\r\n          <div class=\"page__buttonblock\">\r\n            <document-page-buttons-row\r\n              class=\"page__primarybuttonblock\"\r\n              :is_edit_mode=\"is_edit_mode\"\r\n              :is_files_shown=\"is_files_shown\"\r\n              :is_folder_saved=\"is_folder_saved\"\r\n              :can_add_doc=\"can_add_doc\"\r\n              :can_change_doc=\"can_change_doc\"\r\n              :can_view_file=\"can_view_file\"\r\n              :can_add_file=\"can_add_file\"\r\n              :can_delete_file=\"can_delete_file\"\r\n              :can_delete_doc=\"can_delete_doc\"\r\n              :is_tuning_mode=\"is_tuning_mode\"\r\n              :is_group_by_mode=\"is_group_by_mode\"\r\n              :group_by_settings=\"group_by_settings\"\r\n              @reset:search=\"is_search_clean_required = true\"\r\n              @toggle:shownfiles=\"is_files_shown = !is_files_shown\"\r\n              @toggle:editmode=\"\r\n                is_edit_mode = !is_edit_mode;\r\n                is_tuning_mode = is_edit_mode === true ? false : is_tuning_mode;\r\n              \"\r\n              @toggle:tuningmode=\"is_tuning_mode = !is_tuning_mode\"\r\n              @toggle:groupbymode=\"is_group_by_mode = !is_group_by_mode\"\r\n              @save:docs=\"handle_save_documents()\"\r\n              @flush:filecontainer=\"handle_flush_file_container()\"\r\n              @new:doc=\"add_empty_document()\"\r\n              @allocate:files=\"handle_allocate_files()\"\r\n              @reset:tuning=\"handle_delete_user_search_schema()\"\r\n              @delete:docs=\"mark_selected_documents_as_deleted()\"\r\n              @duplicate:docs=\"duplicate_selected_documents()\"\r\n              @download:excel=\"handle_download_excel_file()\"\r\n              @download:json=\"handle_download_json_file()\"\r\n              @download:files_archive=\"handle_download_files_in_archive()\"\r\n              @to:cart=\"handle_add_to_cart()\"\r\n            />\r\n            <div v-if=\"!is_edit_mode\" class=\"page__additionalbuttonblock\">\r\n              <text-button\r\n                v-for=\"(button, index) in action_buttons\"\r\n                :key=\"index\"\r\n                class=\"page__actionbutton\"\r\n                :title=\"button.caption\"\r\n                @click=\"handle_push_action_button(button.handler)\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          <document-page-search-row\r\n            class=\"page__searchrow\"\r\n            :search_schema=\"search_schema\"\r\n            :is_disabled=\"!is_folder_saved\"\r\n            :is_clean_required=\"is_search_clean_required\"\r\n            :is_tuning_mode=\"is_tuning_mode\"\r\n            :is_selection_required=\"true\"\r\n            :is_all_selected=\"is_all_selected\"\r\n            :required_space_for_link=\"true\"\r\n            @search:docs=\"\r\n              get_documents_action({ search_by_user: true, query: $event })\r\n            \"\r\n            @clean:query=\"is_search_clean_required = false\"\r\n            @change:size=\"\r\n              handle_tuning_change_field('size', $event.name, $event.value)\r\n            \"\r\n            @change:grow=\"\r\n              handle_tuning_change_field('grow', $event.name, $event.value)\r\n            \"\r\n            @delete:field=\"handle_tuning_delete_field($event)\"\r\n            @selectall:docs=\"handle_select_all_documents()\"\r\n          />\r\n          <document-page-sort-row\r\n            class=\"page__sortrow\"\r\n            :search_schema=\"search_schema\"\r\n            :sort_asc=\"sort_asc\"\r\n            :sort_by=\"sort_by\"\r\n            @toggle:direction=\"sort_asc = !sort_asc\"\r\n            @sort:by=\"[sort_by, sort_rule] = $event\"\r\n          />\r\n          <document-pagination-row\r\n            class=\"page__paginationrow\"\r\n            v-if=\"search_results.length > 0\"\r\n            :total_count=\"Math.max(search_count, search_results.length)\"\r\n            :count_per_page=\"pagination_count_per_page\"\r\n            :current_page=\"pagination_current_page\"\r\n            :variants=\"pagination_variants\"\r\n            :is_intermediate_part_shown=\"is_intermediate_pages_shown\"\r\n            @set:page_range=\"handle_set_page_range($event.min, $event.max)\"\r\n            @select:page=\"pagination_current_page = $event\"\r\n            @set:count_per_page=\"pagination_count_per_page = $event\"\r\n            @show:pages=\"is_intermediate_pages_shown = true\"\r\n          />\r\n          <div class=\"page__statusrow\">\r\n            <form-text-field :value=\"search_status\" />\r\n          </div>\r\n          <div class=\"page__resultblock\">\r\n            <div\r\n              class=\"page__documentblock\"\r\n              v-for=\"doc in sorted_results\"\r\n              :key=\"doc.id\"\r\n            >\r\n              <document-row\r\n                class=\"page__documentrow\"\r\n                :doc=\"doc\"\r\n                :search_schema=\"search_schema\"\r\n                :is_selected=\"doc.id in selected_document_ids\"\r\n                :is_edit_mode=\"is_edit_mode\"\r\n                :is_files_shown=\"is_files_shown\"\r\n                :is_dragging=\"is_uploaded_file_dragging\"\r\n                :has_link=\"true\"\r\n                :link_route_obj=\"generate_doc_link(doc.id)\"\r\n                @recover:doc=\"mark_document_as_not_deleted(doc.id)\"\r\n                @update:doc=\"\r\n                  handle_update_doc_attribute(\r\n                    $event.id,\r\n                    $event.name,\r\n                    $event.value\r\n                  )\r\n                \"\r\n                @delete:file=\"detach_file_from_document(doc, $event)\"\r\n                @attach:file=\"attach_file_to_document(doc, $event)\"\r\n                @download:file=\"handle_download_file(...$event)\"\r\n                @copy_link_to:file=\"\r\n                  handle_copy_link_to_file_into_clipboard($event)\r\n                \"\r\n                @select:doc=\"handle_select_document(doc.id)\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          class=\"page__servicecontainer\"\r\n          :class=\"{ page__servicecontainer_alone: !is_list_container_required }\"\r\n          v-if=\"is_edit_mode && (can_add_doc || can_add_file)\"\r\n        >\r\n          <json-file-drop-zone\r\n            class=\"page__docdropzone\"\r\n            v-if=\"can_add_doc && is_doc_container_required\"\r\n            :class=\"{ page__docdropzone_dragging: is_drag_above_doc_zone }\"\r\n            @update:dragging=\"is_drag_above_doc_zone = $event\"\r\n            @update:json=\"handle_new_docs_drop($event)\"\r\n            :default=\"[]\"\r\n            :parsers=\"doc_container_parsers\"\r\n          >\r\n            <span v-if=\"!is_drag_above_doc_zone\" class=\"page__dropzonetitle\"\r\n              >&gt; Документы (json) &lt;</span\r\n            >\r\n          </json-file-drop-zone>\r\n          <file-drop-zone\r\n            class=\"page__filedropzone\"\r\n            v-if=\"can_add_file\"\r\n            :class=\"{ page__filedropzone_dragging: is_drag_above_file_zone }\"\r\n            @add:file=\"handle_new_file_drop($event)\"\r\n            @update:dragging=\"is_drag_above_file_zone = $event\"\r\n          >\r\n            <span v-if=\"!is_drag_above_file_zone\" class=\"page__dropzonetitle\">\r\n              &lt; {{ max_file_size }} МБ</span\r\n            >\r\n          </file-drop-zone>\r\n          <div class=\"page__filelistlabel\">\r\n            Если файлы не удаляются, значит необходимо 'Cохранить изменения'.\r\n          </div>\r\n          <file-list\r\n            class=\"page__filelist\"\r\n            v-if=\"can_add_file\"\r\n            :files=\"spare_files\"\r\n            :can_be_dragged=\"is_edit_mode\"\r\n            :can_be_deleted=\"true\"\r\n            @dragstart:file=\"is_uploaded_file_dragging = true\"\r\n            @dragend:file=\"is_uploaded_file_dragging = false\"\r\n            @download:file=\"handle_download_file(...$event)\"\r\n            @delete:file=\"handle_delete_file($event)\"\r\n            @copy_link_to:file=\"handle_copy_link_to_file_into_clipboard($event)\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"page\" v-else>\r\n      <heading-component\r\n        class=\"page__heading\"\r\n        text=\"..невозможно загрузить данные..\"\r\n        size=\"small\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { onMounted, ref, computed, watch, onBeforeUnmount } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../logic/service_layer/message_bus\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetFolders,\r\n  useGetUserSearchSchema,\r\n  useGetSpareFiles,\r\n  useValidateIntOr404,\r\n  useGetUserGroups,\r\n} from \"../logic/service_layer/use_modules\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport {\r\n  GetManyDocuments,\r\n  SetDocumentAttribute,\r\n  SaveDocumentsInFolder,\r\n  MarkDocumentAsDeleted,\r\n  MarkDocumentAsNotDeleted,\r\n  AttachFileToDocument,\r\n  DetachFileFromDocument,\r\n  UploadFileToFolder,\r\n  DownloadFileFromFolder,\r\n  DeleteFileFromFolder,\r\n  FlushFileContainer,\r\n  AddDocument,\r\n  AllocateFilesToDocumentsUsingPattern,\r\n  SetUserSearchSchema,\r\n  DeleteUserSearchSchema,\r\n  UpdateUploadProgress,\r\n  DownloadExcelFile,\r\n  DownloadJsonFile,\r\n  SetCurrentUserGroup,\r\n  ValidateDocument,\r\n  AddManyDocumentsToCart,\r\n  DownloadManyDocumentsFilesAsArchive,\r\n  PerformActionOnDocuments,\r\n} from \"../logic/domain/command\";\r\nimport {\r\n  UploadFileTooBigError,\r\n  UploadEmptyFileError,\r\n  FileLinkCopied,\r\n} from \"../logic/domain/event\";\r\nimport DocumentRow from \"../components/document/DocumentRow.vue\";\r\nimport DocumentPageButtonsRow from \"../components/document/DocumentPageButtonsRow.vue\";\r\nimport DocumentPageSearchRow from \"../components/document/DocumentPageSearchRow.vue\";\r\nimport DocumentPageSortRow from \"../components/document/DocumentPageSortRow.vue\";\r\nimport FileList from \"../components/file/FileList.vue\";\r\nimport JsonFileDropZone from \"../components/file/JsonFileDropZone.vue\";\r\nimport FileDropZone from \"../components/file/FileDropZone.vue\";\r\nimport DocumentPageDownloadProgressRow from \"../components/document/DocumentPageDownloadProgressRow.vue\";\r\nimport DocumentPaginationRow from \"../components/document/DocumentPaginationRow.vue\";\r\nimport FormTextField from \"../components/fields/FormTextField.vue\";\r\nimport TextButton from \"../components/buttons/TextButton.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    DocumentRow,\r\n    DocumentPageButtonsRow,\r\n    DocumentPageSearchRow,\r\n    DocumentPageSortRow,\r\n    FileList,\r\n    JsonFileDropZone,\r\n    FileDropZone,\r\n    DocumentPageDownloadProgressRow,\r\n    DocumentPaginationRow,\r\n    FormTextField,\r\n    TextButton,\r\n  },\r\n  name: \"SearchDocumentPage\",\r\n  setup() {\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    // USER\r\n    const user = uow.user_repository.get_current();\r\n\r\n    // USERGROUP\r\n    const usergroup_id = useValidateIntOr404(route.params.usergroup_id);\r\n\r\n    // DOCUMENT\r\n    const generate_doc_link = (doc_id) => {\r\n      return {\r\n        name: \"DocumentPage\",\r\n        params: {\r\n          folder_id: folder_id,\r\n          usergroup_id: usergroup_id,\r\n          document_id: doc_id,\r\n        },\r\n      };\r\n    };\r\n\r\n    // FOLDER\r\n    const folder_id = useValidateIntOr404(route.params.folder_id);\r\n    const folder = uow.folder_repository.get(folder_id); // Ref\r\n\r\n    const folder_name = computed(() =>\r\n      folder.value === null ? \"\" : folder.value.name\r\n    );\r\n    const search_schema = computed(() => {\r\n      if (folder.value === null) return [];\r\n      return is_edit_mode.value === true\r\n        ? folder.value.search_schema\r\n        : folder.value.user_search_schema;\r\n    });\r\n\r\n    const is_empty_request_allowed = computed(() => {\r\n      return folder.value === null\r\n        ? false\r\n        : folder.value.is_empty_search_allowed;\r\n    });\r\n\r\n    const is_list_container_required = computed(() => {\r\n      return folder.value === null\r\n        ? true\r\n        : folder.value.is_list_container_required;\r\n    });\r\n\r\n    const is_doc_container_required = computed(() => {\r\n      return folder.value === null\r\n        ? true\r\n        : folder.value.is_doc_container_required;\r\n    });\r\n\r\n    const folder_default_mode = computed(() => {\r\n      return folder.value === null ? \"view\" : folder.value.default_mode;\r\n    });\r\n\r\n    const doc_container_parsers = computed(() => {\r\n      return folder.value === null ? [] : folder.value.doc_container_parsers;\r\n    });\r\n\r\n    // PERMISSIONS\r\n    const can_view_doc = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_view_document\"\r\n    );\r\n    const can_add_doc = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_add_document\"\r\n    );\r\n    const can_change_doc = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_change_document\"\r\n    );\r\n    const can_delete_doc = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_delete_document\"\r\n    );\r\n    const can_view_file = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_view_file\"\r\n    );\r\n    const can_add_file = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_add_file\"\r\n    );\r\n    const can_delete_file = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_delete_file\"\r\n    );\r\n\r\n    // QUERY\r\n    const is_search_clean_required = ref(false);\r\n    const search_query = ref({});\r\n\r\n    // EDIT MODE\r\n    const is_edit_mode = uow.folder_settings.get(folder_id, \"is_edit_mode\");\r\n    if (is_edit_mode.value === null)\r\n      is_edit_mode.value = folder_default_mode.value === \"edit\";\r\n\r\n    const handle_update_doc_attribute = (doc_id, name, value) => {\r\n      // Если аттрибут может быть закодирован, значит он правильный, отправляем его в Документ\r\n      // Если аттрибут = '' - не может быть закодирован, он не правильный\r\n      // Отправляем введенное значение в Документ, но разкодировка не требуется\r\n\r\n      const message = new SetDocumentAttribute(\r\n        folder_id,\r\n        usergroup_id,\r\n        doc_id,\r\n        name,\r\n        value\r\n      );\r\n      MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const is_folder_saved = computed(() => {\r\n      let result = true;\r\n      search_results.value.forEach((doc) => {\r\n        if (doc.is_saved === false || doc.is_deleted === true) result = false;\r\n      });\r\n      return result;\r\n    });\r\n\r\n    const handle_save_documents = () => {\r\n      MessageBus.handle(\r\n        new SaveDocumentsInFolder(folder_id, usergroup_id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const mark_selected_documents_as_deleted = () => {\r\n      selected_document_ids_flat_array.value.forEach((doc_id) =>\r\n        MessageBus.handle(new MarkDocumentAsDeleted(folder_id, doc_id), uow)\r\n      );\r\n    };\r\n\r\n    const mark_document_as_not_deleted = (doc_id) => {\r\n      MessageBus.handle(new MarkDocumentAsNotDeleted(folder_id, doc_id), uow);\r\n    };\r\n\r\n    const handle_new_docs_drop = (obj_array) => {\r\n      if (!Array.isArray(obj_array)) obj_array = [obj_array];\r\n\r\n      obj_array.forEach((obj) => {\r\n        MessageBus.handle(\r\n          new AddDocument(\r\n            folder_id, // folder_id\r\n            usergroup_id, // usergroup_id\r\n            uuidv4(), // document_id\r\n            null, // union_id\r\n            obj, // attributes\r\n            [], // files\r\n            true, // mark_as_modified\r\n            true, // is_created_first_time\r\n            false // is blocked\r\n          ),\r\n          uow\r\n        );\r\n      });\r\n    };\r\n\r\n    const add_empty_document = () => {\r\n      let init_obj = {};\r\n\r\n      MessageBus.handle(\r\n        new AddDocument(\r\n          folder_id, // folder_id\r\n          usergroup_id, // usergroup_id\r\n          uuidv4(), // document_id\r\n          null, // union_id\r\n          init_obj, // attributes\r\n          [], // files\r\n          true, // mark_as_modified\r\n          true, // is_created_first_time\r\n          false // is blocked\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const duplicate_selected_documents = () =>\r\n      selected_document_ids_flat_array.value.forEach((doc_id) => {\r\n        const init_doc = uow.doc_repository.get(folder_id, doc_id); // Ref\r\n        MessageBus.handle(\r\n          new AddDocument(\r\n            folder_id, // folder_id\r\n            usergroup_id, // usergroup_id\r\n            uuidv4(), // document_id\r\n            null, // union_id\r\n            init_doc.value.raw_attributes, // attributes\r\n            [], // files\r\n            true, // mark_as_modified\r\n            true, // is_created_first_time\r\n            false // is blocked\r\n          ),\r\n          uow\r\n        );\r\n      });\r\n\r\n    // FILES\r\n    const is_files_shown = uow.folder_settings.get(folder_id, \"is_files_shown\");\r\n    if (is_files_shown.value === null) is_files_shown.value = false;\r\n\r\n    const spare_files = computed(() =>\r\n      uow.file_in_folder_repository.values(folder_id).map((obj) => obj.value)\r\n    );\r\n    const downloading_files = computed(() =>\r\n      uow.download_progress.values().map((obj) => obj.value)\r\n    );\r\n\r\n    const detach_file_from_document = (doc, file_id) => {\r\n      if (!doc.is_blocked) {\r\n        MessageBus.handle(\r\n          new DetachFileFromDocument(folder_id, usergroup_id, doc.id, file_id),\r\n          uow\r\n        );\r\n      }\r\n    };\r\n\r\n    const attach_file_to_document = (doc, file_id) => {\r\n      if (!doc.is_blocked) {\r\n        MessageBus.handle(\r\n          new AttachFileToDocument(folder_id, usergroup_id, doc.id, file_id),\r\n          uow\r\n        );\r\n      }\r\n    };\r\n\r\n    const max_file_size = computed(() =>\r\n      folder.value === null ? 0 : folder.value.max_file_size\r\n    );\r\n\r\n    const handle_new_file_drop = async (file) => {\r\n      let message = null;\r\n      if (file.size === 0) {\r\n        message = new UploadEmptyFileError(file.name);\r\n      } else if (file.size > max_file_size.value * 1024 * 1024) {\r\n        message = new UploadFileTooBigError(file.name);\r\n      } else {\r\n        message = new UploadFileToFolder(\r\n          folder_id,\r\n          usergroup_id,\r\n          uuidv4(),\r\n          file\r\n        );\r\n      }\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const handle_download_file = async (file, inline) => {\r\n      const message = new DownloadFileFromFolder(\r\n        folder_id,\r\n        usergroup_id,\r\n        file.id,\r\n        file.name,\r\n        file.size,\r\n        inline\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const handle_flush_file_container = () => {\r\n      MessageBus.handle(new FlushFileContainer(folder_id, usergroup_id), uow);\r\n    };\r\n\r\n    const handle_delete_file = async (file_id) => {\r\n      await MessageBus.handle(\r\n        new DeleteFileFromFolder(folder_id, usergroup_id, file_id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_allocate_files = () => {\r\n      MessageBus.handle(\r\n        new AllocateFilesToDocumentsUsingPattern(folder_id, usergroup_id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_copy_link_to_file_into_clipboard = (file) => {\r\n      const props = router.resolve({\r\n        name: \"DownloadFileFromFolderPage\",\r\n        params: {\r\n          folder_id: folder_id,\r\n          usergroup_id: usergroup_id,\r\n          file_id: file.id,\r\n        },\r\n      });\r\n\r\n      navigator.clipboard\r\n        .writeText(window.location.origin + props.href)\r\n        .then(() => MessageBus.handle(new FileLinkCopied(), uow));\r\n    };\r\n\r\n    const handle_download_files_in_archive = async () => {\r\n      await MessageBus.handle(\r\n        new DownloadManyDocumentsFilesAsArchive(\r\n          folder_id,\r\n          usergroup_id,\r\n          selected_document_ids_flat_array.value,\r\n          // Сумма объема всех файлов во всех выделенных документах\r\n          selected_documents.value\r\n            .map((doc) =>\r\n              doc.files.map((x) => x.size).reduce((a, b) => a + b, 0)\r\n            )\r\n            .reduce((a, b) => a + b, 0)\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    // DRAGGING\r\n    const is_uploaded_file_dragging = ref(false);\r\n    const is_drag_above_file_zone = ref(false);\r\n    const is_drag_above_doc_zone = ref(false);\r\n\r\n    // SEARCH\r\n    const is_empty_request = ref(false);\r\n    uow.doc_repository.set_count(0);\r\n    const search_status = computed(() => {\r\n      if (is_searching.value === true) return \"Поиск...\";\r\n      if (\r\n        is_empty_request.value === true &&\r\n        is_empty_request_allowed.value === false\r\n      )\r\n        return \"На данной странице запрещены пустые запросы. Введите что-нибудь...\";\r\n\r\n      return (\r\n        \"Для поиска нажмите ENTER в любом окошке. Найдено \" +\r\n        search_count.value.toString() +\r\n        \"шт. (\" +\r\n        search_time.value.toString() +\r\n        \" сек.) Показаны \" +\r\n        (pagination_min_doc_index.value + 1).toString() +\r\n        \"-\" +\r\n        (pagination_max_doc_index.value + 1).toString() +\r\n        \". Выделено \" +\r\n        selected_document_count.value.toString() +\r\n        \"шт.\"\r\n      );\r\n    });\r\n\r\n    const search_results = computed(() =>\r\n      uow.doc_repository.values(folder_id).map((obj) => obj.value)\r\n    );\r\n    const search_count = uow.doc_repository.get_count(); // Ref\r\n    const is_searching = ref(false);\r\n    const search_time = ref(0);\r\n    const is_first_search_completed = ref(false);\r\n\r\n    const get_documents_action = async ({\r\n      search_by_user = false,\r\n      query = search_query.value,\r\n      without_limits = false,\r\n    }) => {\r\n      // Не позволяем автоматические запросы до первого запроса пользователя\r\n      if (!(search_by_user || is_first_search_completed.value)) return;\r\n\r\n      // Если запрос новый, то сбрасываем пагинацию\r\n      if (query !== search_query.value) reset_pagination();\r\n\r\n      search_query.value = query;\r\n\r\n      is_empty_request.value = false;\r\n\r\n      // Если запрос пустой\r\n      if (Object.values(query).filter((e) => e !== \"\").length === 0) {\r\n        is_empty_request.value = true;\r\n\r\n        // Если пустой запрос запрещен\r\n        if (is_empty_request_allowed.value === false) return;\r\n      }\r\n\r\n      if (is_searching.value === true) return;\r\n      const t0 = performance.now();\r\n\r\n      is_searching.value = true;\r\n\r\n      const limit =\r\n        without_limits || is_group_by_mode.value\r\n          ? null\r\n          : pagination_count_per_page.value;\r\n\r\n      const offset =\r\n        without_limits || is_group_by_mode.value\r\n          ? null\r\n          : pagination_count_per_page.value *\r\n            (pagination_current_page.value - 1);\r\n\r\n      const message = new GetManyDocuments(\r\n        folder_id,\r\n        usergroup_id,\r\n        query,\r\n        offset,\r\n        limit,\r\n        sort_by.value,\r\n        sort_asc.value,\r\n        sort_rule.value\r\n      );\r\n\r\n      await MessageBus.handle(message, uow);\r\n\r\n      const t1 = performance.now();\r\n      search_time.value = Math.round(t1 - t0) / 1000;\r\n      is_searching.value = false;\r\n      is_first_search_completed.value = true;\r\n    };\r\n\r\n    // PAGINATION\r\n    const default_count_per_page = 20;\r\n    const default_current_page = 1;\r\n    const pagination_variants = ref([20, 50, 100]);\r\n\r\n    const pagination_count_per_page = ref(0);\r\n    const pagination_current_page = ref(0);\r\n    const pagination_min_doc_index = ref(0);\r\n    const pagination_max_doc_index = ref(0);\r\n    const is_intermediate_pages_shown = ref(false);\r\n\r\n    const reset_pagination = () => {\r\n      pagination_count_per_page.value = default_count_per_page;\r\n      pagination_current_page.value = default_current_page;\r\n      pagination_min_doc_index.value =\r\n        (default_current_page - 1) * default_count_per_page;\r\n      pagination_max_doc_index.value =\r\n        default_current_page * default_count_per_page;\r\n    };\r\n\r\n    reset_pagination();\r\n\r\n    const handle_set_page_range = async (min, max) => {\r\n      pagination_min_doc_index.value = min;\r\n      pagination_max_doc_index.value = max;\r\n    };\r\n\r\n    watch(\r\n      pagination_count_per_page,\r\n      async () => await get_documents_action({})\r\n    );\r\n    watch(pagination_current_page, async () => await get_documents_action({}));\r\n\r\n    // SORTING\r\n    //  Получаем значения по умолчанию\r\n    const default_sort_attribute = computed(() => {\r\n      return folder.value === null ? null : folder.value.default_sort_attribute;\r\n    });\r\n\r\n    const default_sort_rule = computed(() => {\r\n      if (default_sort_attribute.value === null) return \"DEFAULT\";\r\n      // Осуществляем поиск по search_schema\r\n      // Ищем нужный блок с name = default_sort_attribute\r\n      const block = search_schema.value.find(\r\n        (x) => x[\"name\"] === default_sort_attribute.value\r\n      );\r\n      if (block) return block[\"sort_rule\"];\r\n      return \"DEFAULT\";\r\n    });\r\n\r\n    const default_sort_order = computed(() => {\r\n      return folder.value === null ? null : folder.value.default_sort_order;\r\n    });\r\n\r\n    const sort_by = ref(default_sort_attribute.value);\r\n    const sort_rule = ref(default_sort_rule.value);\r\n    const sort_asc = ref(default_sort_order.value);\r\n\r\n    watch(sort_by, async () => await get_documents_action({}));\r\n    watch(sort_asc, async () => await get_documents_action({}));\r\n    watch(sort_rule, async () => await get_documents_action({}));\r\n\r\n    const sorted_results = computed(() => grouped_results.value || []);\r\n\r\n    // GROUPS\r\n    const aggregate_functions = {\r\n      MAX: (a, b) => (Number.parseInt(a) > Number.parseInt(b) ? true : false),\r\n    };\r\n\r\n    const is_group_by_mode = ref(false);\r\n\r\n    watch(is_group_by_mode, async (newValue) => {\r\n      if (newValue) await get_documents_action({});\r\n    });\r\n\r\n    const group_by_settings = computed(() =>\r\n      folder.value ? folder.value.group_by : null\r\n    );\r\n\r\n    const grouped_results = computed(() => {\r\n      if (\r\n        group_by_settings.value === null ||\r\n        !is_group_by_mode.value ||\r\n        search_results.value === null\r\n      )\r\n        return search_results.value;\r\n\r\n      // Если настройки группировки присвоены\r\n      const order_by = group_by_settings.value.order_by;\r\n      const aggregate_function =\r\n        aggregate_functions[group_by_settings.value.aggregate_function];\r\n\r\n      // Функция формирования уникального ключа из полей группировки и их значений\r\n      const make_key_from_fields = (doc) => {\r\n        let key = \"\";\r\n        group_by_settings.value.fields.forEach((field) => {\r\n          let field_value = doc.get_raw_attribute(field);\r\n          if (!field_value) field_value = \"\";\r\n          key = key + field + \"|\" + field_value + \"|\";\r\n        });\r\n        return key;\r\n      };\r\n\r\n      // Создаем объект по ключам группировки\r\n      let aggregate_value = {};\r\n      search_results.value.forEach((e) => {\r\n        const key = make_key_from_fields(e);\r\n\r\n        if (Object.prototype.hasOwnProperty.call(aggregate_value, key)) {\r\n          const a = aggregate_value[key];\r\n          const b = e.get_raw_attribute(order_by);\r\n          aggregate_value[key] = aggregate_function(a, b) ? a : b;\r\n        } else {\r\n          aggregate_value[key] = e.get_raw_attribute(order_by);\r\n        }\r\n      });\r\n\r\n      // Отбираем из сортированных строк только те, которые попали в объект группировки\r\n      return search_results.value.filter(\r\n        (e) =>\r\n          e.get_raw_attribute(order_by) ===\r\n          aggregate_value[make_key_from_fields(e)]\r\n      );\r\n    });\r\n\r\n    // TUNING\r\n    const is_tuning_mode = ref(false);\r\n\r\n    const handle_tuning_change_field = (property, field, value) => {\r\n      let schema = search_schema.value;\r\n      const idx = schema.findIndex((e) => e.name === field);\r\n      schema[idx][property] = value;\r\n      uow.folder_repository.set_user_search_schema(folder_id, schema);\r\n    };\r\n\r\n    const handle_tuning_delete_field = (field) => {\r\n      uow.folder_repository.set_user_search_schema(\r\n        folder_id,\r\n        search_schema.value.filter((e) => e.name !== field)\r\n      );\r\n    };\r\n\r\n    const handle_save_user_search_schema = () => {\r\n      MessageBus.handle(\r\n        new SetUserSearchSchema(folder_id, usergroup_id, search_schema.value),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_delete_user_search_schema = () => {\r\n      MessageBus.handle(\r\n        new DeleteUserSearchSchema(folder_id, usergroup_id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    // TIMERS\r\n    const update_upload_progress = () => {\r\n      MessageBus.handle(new UpdateUploadProgress(), uow);\r\n    };\r\n\r\n    uow.upload_progress_timer.set_callback(update_upload_progress);\r\n\r\n    // EXCEL\r\n\r\n    const handle_download_excel_file = async () => {\r\n      // Определяем массив заголовков\r\n      const names = search_schema.value.map((e) => e.name);\r\n      const descriptions = search_schema.value.map((e) => e.description);\r\n\r\n      await get_documents_action({ without_limits: true });\r\n\r\n      //  Определяем массив строк\r\n      const rows = grouped_results.value.map((doc) => {\r\n        return names.map((key) => doc.get_attribute(key));\r\n      });\r\n\r\n      // Формируем XLSX файл из массива массивов\r\n      MessageBus.handle(\r\n        new DownloadExcelFile(\r\n          \"doc_list.xlsx\",\r\n          [names, descriptions].concat(rows)\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    // JSON\r\n\r\n    const handle_download_json_file = async () => {\r\n      await get_documents_action({ without_limits: true });\r\n\r\n      //  Определяем массив строк\r\n      const rows = grouped_results.value.map((doc) => {\r\n        const doc_copy = structuredClone(doc.raw_attributes);\r\n        delete doc_copy[\"_CREATED_AT_DATE\"];\r\n        delete doc_copy[\"_UPDATED_AT_DATE\"];\r\n        return doc_copy;\r\n      });\r\n\r\n      MessageBus.handle(new DownloadJsonFile(\"doc_list.json\", rows), uow);\r\n    };\r\n\r\n    // SELECTION\r\n    const selected_document_ids = ref({});\r\n    const selected_document_ids_flat_array = computed(() =>\r\n      Object.entries(selected_document_ids.value)\r\n        .filter((x) => x[1] === true)\r\n        .map((x) => x[0])\r\n    );\r\n\r\n    const selected_documents = computed(() =>\r\n      selected_document_ids_flat_array.value.map(\r\n        (document_id) => uow.doc_repository.get(folder_id, document_id).value\r\n      )\r\n    );\r\n\r\n    const selected_document_count = computed(\r\n      () =>\r\n        Object.values(selected_document_ids.value).filter((x) => x === true)\r\n          .length\r\n    );\r\n\r\n    const handle_select_document = (id) => {\r\n      if (id in selected_document_ids.value)\r\n        selected_document_ids.value[id] = !selected_document_ids.value[id];\r\n      else selected_document_ids.value[id] = true;\r\n    };\r\n\r\n    const reset_selection = () => {\r\n      selected_document_ids.value = {};\r\n      is_all_selected.value = false;\r\n    };\r\n\r\n    const is_all_selected = ref(false);\r\n\r\n    const handle_select_all_documents = () => {\r\n      if (is_all_selected.value === true) {\r\n        reset_selection();\r\n        is_all_selected.value = false;\r\n      } else {\r\n        is_all_selected.value = true;\r\n        sorted_results.value.forEach(\r\n          (x) => (selected_document_ids.value[x.id] = true)\r\n        );\r\n      }\r\n    };\r\n\r\n    // CART\r\n    const handle_add_to_cart = () => {\r\n      MessageBus.handle(\r\n        new AddManyDocumentsToCart(\r\n          folder_id,\r\n          usergroup_id,\r\n          selected_document_ids_flat_array.value\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    // VALIDATION\r\n    const validation_progress = computed(() =>\r\n      uow.doc_repository.validation_progress(folder_id)\r\n    );\r\n\r\n    const validate_documents = () => {\r\n      sorted_results.value\r\n        .filter((doc) => !doc.once_validated)\r\n        .forEach((doc) =>\r\n          MessageBus.handle(\r\n            new ValidateDocument(folder_id, usergroup_id, doc.id),\r\n            uow\r\n          )\r\n        );\r\n    };\r\n\r\n    // ACTION BUTTONS\r\n    const action_buttons = computed(() => {\r\n      return folder.value === null\r\n        ? []\r\n        : folder.value.search_action_buttons.filter((obj) =>\r\n            is_action_button_shown(obj)\r\n          );\r\n    });\r\n\r\n    const is_action_button_shown = (button_obj) =>\r\n      button_obj.allowed_usernames\r\n        ? button_obj.allowed_usernames.includes(user.value.username)\r\n        : true;\r\n\r\n    const handle_push_action_button = async (handler) => {\r\n      await MessageBus.handle(\r\n        new PerformActionOnDocuments(\r\n          handler,\r\n          user.value.username,\r\n          folder_id,\r\n          usergroup_id,\r\n          selected_document_ids_flat_array.value\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    // WATCH\r\n\r\n    //  При изменении списка выбранных результатов,\r\n    //  сбрасываем выделение и валидируем документы\r\n    watch(\r\n      () => sorted_results.value,\r\n      () => {\r\n        reset_selection();\r\n        if (is_edit_mode.value === true) validate_documents();\r\n      }\r\n    );\r\n\r\n    // При получении настроек папки, обновляем режим\r\n    watch(\r\n      folder_default_mode,\r\n      (newValue) => (is_edit_mode.value = newValue === \"edit\")\r\n    );\r\n\r\n    watch(is_edit_mode, (newValue) => {\r\n      // Синхронизируем режим редактирования с флагом необходимости валидацию\r\n      folder.value.is_necessary_validate = newValue;\r\n\r\n      // Если переключаемся в режим редактирования\r\n      if (newValue === true) {\r\n        // валидируем все документы в папке\r\n        validate_documents();\r\n        // выключаем режим группировки\r\n        is_group_by_mode.value = false;\r\n      }\r\n    });\r\n\r\n    // Отслеживаем обновление значений по умолчанию\r\n    // Нужно, если пользователь сразу зашел на данную страницу\r\n    watch(default_sort_attribute, (newValue) => {\r\n      if (newValue) {\r\n        sort_by.value = newValue;\r\n      }\r\n    });\r\n\r\n    watch(default_sort_rule, (newValue) => {\r\n      if (newValue) {\r\n        sort_rule.value = newValue;\r\n      }\r\n    });\r\n\r\n    watch(default_sort_order, (newValue) => {\r\n      if (newValue !== null && newValue !== undefined)\r\n        sort_asc.value = newValue;\r\n    });\r\n\r\n    // Если происходит изменение настроек группы,\r\n    watch(group_by_settings, (newValue) => {\r\n      if (newValue) is_group_by_mode.value = newValue.is_active === true;\r\n    });\r\n\r\n    watch(is_tuning_mode, (newValue) => {\r\n      if (newValue === false) handle_save_user_search_schema();\r\n    });\r\n\r\n    onMounted(async () => {\r\n      await useBeforeEnterPage(\r\n        uow,\r\n        [\"can_get_folders\", \"can_view_document\"],\r\n        folder_id,\r\n        usergroup_id\r\n      ); // Пытаемся автоматически зaлогинится\r\n      await Promise.all([useGetFolders(uow), useGetUserGroups(uow)]);\r\n\r\n      // Устанавливаем группу пользователей\r\n      const usergroup = uow.usergroup_repository.get(usergroup_id);\r\n      MessageBus.handle(new SetCurrentUserGroup(usergroup.value), uow);\r\n\r\n      // Получаем поисковую схему и неприкрепленные файлы\r\n      await Promise.all([\r\n        useGetUserSearchSchema(uow, folder_id, usergroup_id),\r\n        useGetSpareFiles(uow, folder_id, usergroup_id),\r\n      ]);\r\n    });\r\n\r\n    onBeforeUnmount(async () => uow.upload_progress_timer.stop());\r\n\r\n    return {\r\n      router,\r\n\r\n      // USER\r\n      user,\r\n\r\n      // PERMISSIONS\r\n      can_view_doc,\r\n      can_add_doc,\r\n      can_change_doc,\r\n      can_delete_doc,\r\n      can_view_file,\r\n      can_add_file,\r\n      can_delete_file,\r\n\r\n      // QUERY\r\n      is_search_clean_required,\r\n\r\n      // USERGROUP\r\n      usergroup_id,\r\n\r\n      // FOLDER\r\n      folder_id,\r\n      folder_name,\r\n      search_schema,\r\n      is_list_container_required,\r\n      is_doc_container_required,\r\n      doc_container_parsers,\r\n\r\n      // DOCUMENT\r\n      generate_doc_link,\r\n\r\n      // EDIT\r\n      is_edit_mode,\r\n      is_folder_saved,\r\n      handle_update_doc_attribute,\r\n      handle_save_documents,\r\n      handle_new_docs_drop,\r\n      mark_document_as_not_deleted,\r\n      mark_selected_documents_as_deleted,\r\n      add_empty_document,\r\n      duplicate_selected_documents,\r\n\r\n      // FILES\r\n      max_file_size,\r\n      is_files_shown,\r\n      spare_files,\r\n      downloading_files,\r\n      attach_file_to_document,\r\n      detach_file_from_document,\r\n      handle_new_file_drop,\r\n      handle_download_file,\r\n      handle_flush_file_container,\r\n      handle_delete_file,\r\n      handle_allocate_files,\r\n      handle_copy_link_to_file_into_clipboard,\r\n      handle_download_files_in_archive,\r\n\r\n      // DRAGGING\r\n      is_uploaded_file_dragging,\r\n      is_drag_above_file_zone,\r\n      is_drag_above_doc_zone,\r\n\r\n      // SEARCH\r\n      get_documents_action,\r\n      is_searching,\r\n      search_time,\r\n      search_status,\r\n      is_empty_request_allowed,\r\n      search_count,\r\n\r\n      // SORTING\r\n      sort_by,\r\n      sort_asc,\r\n      sort_rule,\r\n      search_results,\r\n      sorted_results,\r\n\r\n      // GROUPING\r\n      is_group_by_mode,\r\n      group_by_settings,\r\n      grouped_results,\r\n\r\n      // PAGINATION\r\n      handle_set_page_range,\r\n      pagination_variants,\r\n      pagination_count_per_page,\r\n      pagination_current_page,\r\n      pagination_min_doc_index,\r\n      pagination_max_doc_index,\r\n      is_intermediate_pages_shown,\r\n\r\n      // TUNING\r\n      is_tuning_mode,\r\n      handle_tuning_change_field,\r\n      handle_save_user_search_schema,\r\n      handle_tuning_delete_field,\r\n      handle_delete_user_search_schema,\r\n\r\n      // EXCEL\r\n      handle_download_excel_file,\r\n\r\n      // JSON\r\n      handle_download_json_file,\r\n\r\n      // SELECTION\r\n      selected_document_ids,\r\n      selected_documents,\r\n      selected_document_count,\r\n      handle_select_document,\r\n      is_all_selected,\r\n      handle_select_all_documents,\r\n\r\n      // CART\r\n      handle_add_to_cart,\r\n\r\n      // VALIDATION\r\n      validation_progress,\r\n      validate_documents,\r\n\r\n      // ACTION BUTTONS\r\n      action_buttons,\r\n      handle_push_action_button,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__listcontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n}\r\n\r\n.page__servicecontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 300px;\r\n  max-width: 300px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__servicecontainer_alone {\r\n  min-width: 500px;\r\n  max-width: 500px;\r\n}\r\n\r\n.page__documentblock {\r\n  cursor: pointer;\r\n}\r\n\r\n.page__documentblock:nth-child(even) {\r\n  background-color: rgb(215, 242, 255);\r\n}\r\n\r\n.page__filedropzone,\r\n.page__docdropzone {\r\n  height: 80px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 10px;\r\n}\r\n\r\n.page__filedropzone_dragging,\r\n.page__docdropzone_dragging {\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    #606dbc,\r\n    #606dbc 10px,\r\n    #465298 10px,\r\n    #465298 20px\r\n  );\r\n}\r\n\r\n.page__dropzonetitle {\r\n  font-size: 24px;\r\n}\r\n\r\n.page__downloadprogress {\r\n  min-height: 20px;\r\n}\r\n\r\n.page__buttonblock {\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.page__primarybuttonblock,\r\n.page__additionalbuttonblock {\r\n  display: flex;\r\n}\r\n\r\n\r\n.page__statusrow {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.page__sortrow {\r\n  margin-left: 60px;\r\n}\r\n\r\n.page__filelistlabel {\r\n  margin: 10px;\r\n}\r\n</style>\r\n","<template>\r\n  <div\r\n    class=\"documentrow\"\r\n    @drop.prevent=\"handle_drop($event)\"\r\n    @dragover.prevent\r\n    @dragenter.prevent\r\n  >\r\n    <document-buttons-row\r\n      class=\"documentrow__documentbuttonsrow\"\r\n      v-if=\"is_edit_mode\"\r\n      :is_deleted=\"doc.is_deleted\"\r\n      @recover:doc=\"$emit('recover:doc')\"\r\n    />\r\n    <document-attribute-row\r\n      class=\"documentrow__documentattributerow\"\r\n      v-if=\"!doc.is_deleted\"\r\n      :id=\"doc.id\"\r\n      :search_schema=\"search_schema\"\r\n      :attributes=\"is_edit_mode === true ? doc.raw_attributes : doc.attributes\"\r\n      :is_selection_required=\"true\"\r\n      :is_selected=\"is_selected\"\r\n      :is_edit_mode=\"is_edit_mode\"\r\n      :is_highlighted=\"!doc.is_saved\"\r\n      :is_disabled=\"doc.is_blocked\"\r\n      :has_link=\"has_link\"\r\n      :link_route_obj=\"link_route_obj\"\r\n      @update:doc=\"$emit('update:doc', $event)\"\r\n      @select:doc=\"$emit('select:doc')\"\r\n      @click=\"handle_click_attributerow\"\r\n    />\r\n    <document-files-row\r\n      class=\"documentrow__documentfilesrow\"\r\n      v-if=\"is_files_shown && !doc.is_deleted\"\r\n      :files=\"doc.files\"\r\n      :can_be_deleted=\"is_edit_mode && !doc.is_blocked\"\r\n      :can_be_dragged=\"is_edit_mode && !doc.is_blocked\"\r\n      :is_blocked=\"doc.is_blocked\"\r\n      @delete:file=\"$emit('delete:file', $event)\"\r\n      @download:file=\"$emit('download:file', $event)\"\r\n      @copy_link_to:file=\"$emit('copy_link_to:file', $event)\"\r\n    />\r\n    <document-errors-row\r\n      class=\"documentrow__documenterrorsrow\"\r\n      v-if=\"is_edit_mode && !doc.is_deleted\"\r\n      :errors=\"doc.errors\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport DocumentAttributeRow from \"./DocumentAttributeRow.vue\";\r\nimport DocumentButtonsRow from \"./DocumentButtonsRow.vue\";\r\nimport DocumentErrorsRow from \"./DocumentErrorsRow.vue\";\r\nimport DocumentFilesRow from \"./DocumentFilesRow.vue\";\r\nexport default {\r\n  name: \"DocumentRow\",\r\n  components: {\r\n    DocumentAttributeRow,\r\n    DocumentButtonsRow,\r\n    DocumentFilesRow,\r\n    DocumentErrorsRow,\r\n  },\r\n  props: {\r\n    doc: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    search_schema: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    is_selected: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_edit_mode: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_files_shown: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_dragging: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    has_link: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    link_route_obj: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n  emits: [\r\n    \"update:doc\",\r\n    \"delete:doc\",\r\n    \"duplicate:doc\",\r\n    \"recover:doc\",\r\n    \"select:doc\",\r\n    \"delete:file\",\r\n    \"attach:file\",\r\n    \"download:file\",\r\n    \"copy_link_to:file\",\r\n    \"click:attributerow\",\r\n  ],\r\n  setup(props, { emit }) {\r\n    const handle_drop = (evt) => {\r\n      const file_id = evt.dataTransfer.getData(\"text\");\r\n      emit(\"attach:file\", file_id);\r\n    };\r\n\r\n    const handle_click_attributerow = () => {\r\n      if (!props.is_edit_mode) emit(\"click:attributerow\");\r\n    };\r\n\r\n    return { handle_drop, handle_click_attributerow };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.documentrow {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.documentrow__dropzone {\r\n  display: flex;\r\n  min-height: 50px;\r\n  border: 2px dashed lightcoral;\r\n  align-items: stretch;\r\n}\r\n\r\n.documentrow__dropzonetitle {\r\n  flex-grow: 1;\r\n  font-size: 24px;\r\n  text-align: center;\r\n}\r\n</style>","<template>\r\n  <div\r\n    class=\"documentattributerow\"\r\n    :class=\"{ documentattributerow_modified: is_highlighted }\"\r\n  >\r\n    <sized-div\r\n      v-if=\"is_selection_required\"\r\n      class=\"documentattributerow__sizedblock_center\"\r\n      size=\"w30\"\r\n    >\r\n      <form-boolean-input\r\n        class=\"documentattributerow__checkbox\"\r\n        :value=\"is_selected\"\r\n        :parameters=\"{ size: 20 }\"\r\n        @click=\"$emit('select:doc')\"\r\n      />\r\n    </sized-div>\r\n    <sized-div\r\n      v-if=\"has_link\"\r\n      class=\"documentattributerow__sizedblock_center\"\r\n      size=\"w30\"\r\n    >\r\n      <router-link class=\"documentattributerow__href\" :to=\"link_route_obj\">\r\n        <form-text-field class=\"documentattributerow__textfield\" value=\"@\" />\r\n      </router-link>\r\n    </sized-div>\r\n\r\n    <sized-div\r\n      v-for=\"block in search_schema\"\r\n      :key=\"block.name\"\r\n      class=\"documentattributerow__sizedblock\"\r\n      :size=\"block.size\"\r\n      :grow=\"block.grow\"\r\n    >\r\n      <form-text-input\r\n        v-if=\"is_edit_mode && !block.name.toLowerCase().includes('date')\"\r\n        class=\"documentattributerow__textinput\"\r\n        :value=\"attributes[block.name]\"\r\n        :parameters=\"{\r\n          is_disabled: get_bool_attribute(block.is_disabled) || is_disabled,\r\n          default: block.default,\r\n        }\"\r\n        @update=\"\r\n          $emit('update:doc', { id: id, name: block.name, value: $event })\r\n        \"\r\n      />\r\n      <form-date-input\r\n        v-if=\"is_edit_mode && block.name.toLowerCase().includes('date')\"\r\n        class=\"documentattributerow__dateinput\"\r\n        :value=\"attributes[block.name]\"\r\n        :parameters=\"{\r\n          is_disabled: get_bool_attribute(block.is_disabled) || is_disabled,\r\n          default:\r\n            block.default === undefined || block.default === null\r\n              ? Math.round(Date.now() / 1000)\r\n              : block.default,\r\n        }\"\r\n        @update=\"\r\n          $emit('update:doc', { id: id, name: block.name, value: $event })\r\n        \"\r\n      />\r\n      <form-text-field\r\n        v-if=\"!is_edit_mode\"\r\n        class=\"documentattributerow__textfield\"\r\n        :value=\"attributes[block.name]\"\r\n        :parameters=\"{\r\n          align: block.align ? block.align : 'center',\r\n          default: block.default,\r\n        }\"\r\n      />\r\n    </sized-div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SizedDiv from \"../SizedDiv.vue\";\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport FormTextInput from \"../fields/FormTextInput.vue\";\r\nimport FormDateInput from \"../fields/FormDateInput.vue\";\r\nimport FormBooleanInput from \"../fields/FormBooleanInput.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    SizedDiv,\r\n    FormTextField,\r\n    FormTextInput,\r\n    FormDateInput,\r\n    FormBooleanInput,\r\n  },\r\n  name: \"DocumentAttributeRow\",\r\n  props: {\r\n    id: {\r\n      type: [String, Number],\r\n      required: true,\r\n    },\r\n    search_schema: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    attributes: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    is_selection_required: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_selected: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_edit_mode: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_highlighted: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_disabled: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    has_link: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    link_route_obj: {\r\n      type: Object,\r\n    },\r\n  },\r\n  emits: [\"update:doc\", \"select:doc\"],\r\n  setup() {\r\n    const get_bool_attribute = (value) => {\r\n      return value === true ? true : false;\r\n    };\r\n\r\n    return {\r\n      get_bool_attribute,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentattributerow {\r\n  display: flex;\r\n}\r\n.documentattributerow__sizedblock_center {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.documentattributerow__checkbox {\r\n  min-width: 20px;\r\n  max-width: 20px;\r\n  min-height: 20px;\r\n  max-height: 20px;\r\n}\r\n\r\n.documentattributerow__textfield {\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.documentattributerow__href {\r\n  flex-grow: 1;\r\n  text-decoration: none;\r\n}\r\n\r\n.documentattributerow__textinput,\r\n.documentattributerow__dateinput {\r\n  flex-grow: 1;\r\n  flex-shrink: 1;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.documentattributerow__textinput {\r\n  padding: 3px;\r\n}\r\n\r\n.documentattributerow__dateinput {\r\n  margin: 3px;\r\n}\r\n\r\n.documentattributerow_modified {\r\n  border: 2px solid orange;\r\n}\r\n\r\n.documentattributerow_blocked {\r\n  border: 2px solid red;\r\n}\r\n</style>","<template>\r\n  <div\r\n    class=\"sizeddiv\"\r\n    v-bind:class=\"{\r\n      sizeddiv_w30: size === 'w30' && grow === false,\r\n      sizeddiv_w35: size === 'w35' && grow === false,\r\n      sizeddiv_w40: size === 'w40' && grow === false,\r\n      sizeddiv_w50: size === 'w50' && grow === false,\r\n      sizeddiv_w100: size === 'w100' && grow === false,\r\n      sizeddiv_w150: size === 'w150' && grow === false,\r\n      sizeddiv_w200: size === 'w200' && grow === false,\r\n      sizeddiv_w250: size === 'w250' && grow === false,\r\n      sizeddiv_w300: size === 'w300' && grow === false,\r\n      sizeddiv_w350: size === 'w350' && grow === false,\r\n      sizeddiv_w400: size === 'w400' && grow === false,\r\n      sizeddiv_growable: grow === true,\r\n    }\"\r\n  >\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"SizedDiv\",\r\n  props: {\r\n    size: {\r\n      type: String,\r\n      required: false,\r\n      default: \"\",\r\n    },\r\n    grow: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.sizeddiv {\r\n  display: flex;\r\n}\r\n\r\n.sizeddiv_w30 {\r\n  min-width: 30px;\r\n  max-width: 30px;\r\n}\r\n\r\n.sizeddiv_w35 {\r\n  min-width: 35px;\r\n  max-width: 35px;\r\n}\r\n\r\n.sizeddiv_w40 {\r\n  min-width: 40px;\r\n  max-width: 40px;\r\n}\r\n\r\n.sizeddiv_w50 {\r\n  min-width: 50px;\r\n  max-width: 50px;\r\n}\r\n\r\n.sizeddiv_w100 {\r\n  min-width: 100px;\r\n  max-width: 100px;\r\n}\r\n\r\n.sizeddiv_w150 {\r\n  min-width: 150px;\r\n  max-width: 150px;\r\n}\r\n.sizeddiv_w200 {\r\n  min-width: 200px;\r\n  max-width: 200px;\r\n}\r\n.sizeddiv_w250 {\r\n  min-width: 250px;\r\n  max-width: 250px;\r\n}\r\n.sizeddiv_w300 {\r\n  min-width: 300px;\r\n  max-width: 300px;\r\n}\r\n.sizeddiv_w350 {\r\n  min-width: 350px;\r\n  max-width: 350px;\r\n}\r\n.sizeddiv_w400 {\r\n  min-width: 400px;\r\n  max-width: 400px;\r\n}\r\n\r\n.sizeddiv_growable {\r\n  width: 50px;\r\n  flex-grow: 1;\r\n}\r\n</style>","import { render } from \"./SizedDiv.vue?vue&type=template&id=09f6cb8c\"\nimport script from \"./SizedDiv.vue?vue&type=script&lang=js\"\nexport * from \"./SizedDiv.vue?vue&type=script&lang=js\"\n\nimport \"./SizedDiv.vue?vue&type=style&index=0&id=09f6cb8c&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div\r\n    class=\"formtextfield\"\r\n    :style=\"{ 'text-align': align, 'font-weight': font_weight }\"\r\n    :title=\"hint\"\r\n  >\r\n    {{ value }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormTextField\",\r\n\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  setup(props) {\r\n    const align = computed(() => props.parameters[\"align\"] || \"left\");\r\n    const font_weight = computed(\r\n      () => props.parameters[\"font_weight\"] || \"normal\"\r\n    );\r\n    const hint = computed(() => props.parameters[\"hint\"] || \"\");\r\n\r\n    return { align, font_weight, hint };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.formtextfield {\r\n  display: block;\r\n}\r\n</style>","import { render } from \"./FormTextField.vue?vue&type=template&id=43049fc2\"\nimport script from \"./FormTextField.vue?vue&type=script&lang=js\"\nexport * from \"./FormTextField.vue?vue&type=script&lang=js\"\n\nimport \"./FormTextField.vue?vue&type=style&index=0&id=43049fc2&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <input\r\n    class=\"formdateinput\"\r\n    type=\"date\"\r\n    :value=\"date_str\"\r\n    @input=\"handle_update_date($event)\"\r\n    :disabled=\"is_disabled\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormDateInput\",\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: Number,\r\n      required: false,\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || 0;\r\n\r\n    if (props.value === undefined || props.value === null)\r\n      emit(\"update\", default_value);\r\n\r\n    const is_disabled = props.parameters[\"is_disabled\"] || false;\r\n\r\n    const date_str = computed(() => {\r\n      const date = new Date((props.value || default_value) * 1000);\r\n      return date.toISOString().slice(0, 10);\r\n    });\r\n\r\n    const handle_update_date = (evt) =>\r\n      emit(\"update\", Math.floor(evt.target.valueAsNumber / 1000) || 0);\r\n\r\n    return { date_str, is_disabled, handle_update_date };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./FormDateInput.vue?vue&type=template&id=41f62af6\"\nimport script from \"./FormDateInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormDateInput.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"formbooleaninput\">\r\n    <input\r\n      class=\"booleaninput\"\r\n      :style=\"style\"\r\n      type=\"checkbox\"\r\n      :title=\"hint\"\r\n      :checked=\"value\"\r\n      :disabled=\"is_disabled\"\r\n      @change=\"$emit('update', $event.target.checked)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormBooleanInput\",\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: undefined,\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || false;\r\n    if (props.value === undefined || props.value === null)\r\n      emit(\"update\", default_value);\r\n\r\n    const size = computed(() => props.parameters[\"size\"] || 0);\r\n    const style = computed(() =>\r\n      size.value == 0\r\n        ? {}\r\n        : {\r\n            \"min-width\": size.value.toString() + \"px\",\r\n            \"max-width\": size.value.toString() + \"px\",\r\n            \"min-height\": size.value.toString() + \"px\",\r\n            \"max-height\": size.value.toString() + \"px\",\r\n          }\r\n    );\r\n\r\n    const hint = computed(() => props.parameters[\"hint\"] || \"\");\r\n    const is_disabled = computed(\r\n      () => props.parameters[\"is_disabled\"] || false\r\n    );\r\n\r\n    return { size, hint, is_disabled, style };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formbooleaninput {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.booleaninput {\r\n  margin: 0;\r\n  /* min-width: 100%;\r\n  min-height: 100%;\r\n  max-width: 100%;\r\n  max-height: 100%; */\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./FormBooleanInput.vue?vue&type=template&id=1381d60c&scoped=true\"\nimport script from \"./FormBooleanInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormBooleanInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormBooleanInput.vue?vue&type=style&index=0&id=1381d60c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1381d60c\"]])\n\nexport default __exports__","import { render } from \"./DocumentAttributeRow.vue?vue&type=template&id=6127c01a&scoped=true\"\nimport script from \"./DocumentAttributeRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentAttributeRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentAttributeRow.vue?vue&type=style&index=0&id=6127c01a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6127c01a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentbuttonsrow\" v-if=\"is_deleted\">\r\n    <text-button\r\n      class=\"documentbuttonsrow__button\"\r\n      title=\"Восстановить\"\r\n      @click=\"$emit('recover:doc')\"\r\n    />\r\n    <form-text-field\r\n      class=\"documentbuttonsrow__deletedmessage\"\r\n      value=\"ДОКУМЕНТ УДАЛЕН\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport TextButton from \"../buttons/TextButton.vue\";\r\n\r\nexport default {\r\n  name: \"DocumentButtonsRow\",\r\n  components: { FormTextField, TextButton },\r\n  props: {\r\n    is_deleted: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n  emits: [\"recover:doc\"],\r\n};\r\n</script>\r\n<style scoped>\r\n.documentbuttonsrow {\r\n  display: flex;\r\n}\r\n\r\n.documentbuttonsrow__button {\r\n  user-select: none;\r\n}\r\n\r\n.documentbuttonsrow__deletedmessage {\r\n  user-select: none;\r\n  color: red;\r\n}\r\n</style>","<template>\r\n  <div class=\"textbutton\" :class=\"{ textbutton_disabled: disabled }\">\r\n    {{ title }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"TextButton\",\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    disabled: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.textbutton {\r\n  color: #447e9b;\r\n  cursor: pointer;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  user-select: none;\r\n}\r\n.textbutton:hover {\r\n  color: #062a3b;\r\n}\r\n.textbutton_disabled {\r\n  pointer-events: none;\r\n  opacity: 0.4;\r\n}\r\n</style>","import { render } from \"./TextButton.vue?vue&type=template&id=2869d17a\"\nimport script from \"./TextButton.vue?vue&type=script&lang=js\"\nexport * from \"./TextButton.vue?vue&type=script&lang=js\"\n\nimport \"./TextButton.vue?vue&type=style&index=0&id=2869d17a&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DocumentButtonsRow.vue?vue&type=template&id=187047f8&scoped=true\"\nimport script from \"./DocumentButtonsRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentButtonsRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentButtonsRow.vue?vue&type=style&index=0&id=187047f8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-187047f8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documenterrorsrow\">\r\n    <form-text-field\r\n      class=\"documenterrorsrow__text\"\r\n      v-for=\"(error, index) in errors\"\r\n      :key=\"index\"\r\n      :value=\"(index+1).toString() + ') ' + error\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\n\r\nexport default {\r\n  components: { FormTextField },\r\n  name: \"DocumentErrorsRow\",\r\n  props: {\r\n    errors: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.documenterrorsrow {\r\n  display: flex;\r\n  flex-direction: column;\r\n  color: red;\r\n  padding: 3px;\r\n}\r\n</style>","import { render } from \"./DocumentErrorsRow.vue?vue&type=template&id=153e39d4&scoped=true\"\nimport script from \"./DocumentErrorsRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentErrorsRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentErrorsRow.vue?vue&type=style&index=0&id=153e39d4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-153e39d4\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentfilesrow\">\r\n    <div\r\n      class=\"documentfilesrow__fileblock\"\r\n      v-for=\"file in files\"\r\n      :key=\"file.id\"\r\n    >\r\n      <file-block\r\n        class=\"documentfilesrow__file\"\r\n        :file=\"file\"\r\n        :can_be_deleted=\"can_be_deleted\"\r\n        :can_be_dragged=\"can_be_dragged\"\r\n        @delete:file=\"$emit('delete:file', file.id)\"\r\n        @download:file=\"$emit('download:file', [file, $event])\"\r\n        @copy_link_to:file=\"$emit('copy_link_to:file', file)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FileBlock from \"../file/FileBlock.vue\";\r\n\r\nexport default {\r\n  components: { FileBlock },\r\n  name: \"DocumentFilesRow\",\r\n  props: {\r\n    files: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    can_be_deleted: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_be_dragged: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"delete:file\", \"download:file\", \"copy_link_to:file\"],\r\n};\r\n</script>\r\n<style scoped>\r\n.documentfilesrow {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.documentfilesrow__fileblock {\r\n  padding: 5px;\r\n}\r\n</style>","<template>\r\n  <div v-if=\"file.progress === 100\" class=\"fileblock\">\r\n    <span\r\n      v-if=\"can_be_deleted\"\r\n      class=\"fileblock__deletebutton\"\r\n      @click=\"$emit('delete:file')\"\r\n      >(X)\r\n    </span>\r\n    <span class=\"fileblock__linkbutton\" @click=\"$emit('download:file', false)\"\r\n      >&#129095;\r\n    </span>\r\n\r\n    <form-text-input\r\n      v-if=\"is_rename_active\"\r\n      class=\"fileblock__input\"\r\n      :value=\"filename\"\r\n      @update=\"filename = $event\"\r\n    />\r\n    <a\r\n      v-else\r\n      class=\"fileblock__link\"\r\n      href=\"#\"\r\n      :draggable=\"can_be_dragged\"\r\n      @dragstart=\"handle_drag_start($event)\"\r\n      @dragend=\"$emit('dragend:file')\"\r\n      @click=\"\r\n        if (is_uploaded === true) {\r\n          $emit('download:file', true);\r\n        }\r\n      \"\r\n    >\r\n      {{ file.name }} ({{ file.formatted_size() }})</a\r\n    >\r\n\r\n    <span class=\"fileblock__linkbutton\" @click=\"$emit('copy_link_to:file')\"\r\n      >&#128279;\r\n    </span>\r\n\r\n    <toggle-text-button\r\n      v-if=\"can_be_renamed && filename.length > 0\"\r\n      class=\"fileblock__renamebutton\"\r\n      :class=\"{fileblock__renamebutton_red: is_rename_active}\"\r\n      activeTitle=\"Сохранить\"\r\n      passiveTitle=\"Переименовать\"\r\n      :isActive=\"is_rename_active\"\r\n      @click=\"handle_click_on_rename_button()\"\r\n    />\r\n  </div>\r\n  <span v-else class=\"fileblock__title\"\r\n    >{{ file.name }} ({{ file.formatted_size() }}){{ progress_str }}</span\r\n  >\r\n</template>\r\n\r\n<script>\r\nimport { watch, ref, computed } from \"vue\";\r\nimport ToggleTextButton from \"../buttons/ToggleTextButton.vue\";\r\nimport FormTextInput from \"../fields/FormTextInput.vue\";\r\nimport { get_extension_of_file } from \"../../logic/service_layer/utils/filename\";\r\n\r\nexport default {\r\n  name: \"FileBlock\",\r\n  components: { ToggleTextButton, FormTextInput },\r\n  props: {\r\n    file: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    can_be_deleted: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_be_dragged: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_be_renamed: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\r\n    \"delete:file\",\r\n    \"dragstart:file\",\r\n    \"dragend:file\",\r\n    \"download:file\",\r\n    \"copy_link_to:file\",\r\n    \"rename:file\",\r\n    \"rename:activated\",\r\n  ],\r\n\r\n  setup(props, { emit }) {\r\n    const progress_str = ref(\"\");\r\n    watch(\r\n      () => props.file.progress,\r\n      (newValue) => {\r\n        progress_str.value = newValue < 100 ? ` (${newValue}%)` : \"\";\r\n      }\r\n    );\r\n\r\n    const handle_drag_start = (evt) => {\r\n      evt.dataTransfer.setData(\"text/plain\", props.file.id);\r\n      emit(\"dragstart:file\");\r\n    };\r\n\r\n    const is_uploaded = computed(() => props.file.progress === 100);\r\n\r\n    const ext = get_extension_of_file(props.file.name);\r\n    const basename = ext\r\n      ? props.file.name.substring(0, props.file.name.length - ext.length - 1)\r\n      : props.file.name;\r\n\r\n    const is_rename_active = ref(false);\r\n    const filename = ref(basename);\r\n\r\n    const handle_click_on_rename_button = () => {\r\n      if (is_rename_active.value) {\r\n        emit(\"rename:file\", filename.value + (ext ? \".\" + ext : \"\"));\r\n      } else {\r\n        emit(\"rename:activated\");\r\n      }\r\n      is_rename_active.value = !is_rename_active.value;\r\n    };\r\n\r\n    return {\r\n      progress_str,\r\n      handle_drag_start,\r\n      is_uploaded,\r\n      is_rename_active,\r\n      filename,\r\n      handle_click_on_rename_button,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.fileblock {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.fileblock__deletebutton,\r\n.fileblock__linkbutton {\r\n  user-select: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.fileblock__linkbutton_rename {\r\n  font-size: 20px;\r\n}\r\n\r\n.fileblock__renamebutton_red {\r\n  color: red;\r\n}\r\n\r\n.fileblock__renamebutton_red:hover {\r\n  color: red;\r\n}\r\n</style>","<template>\r\n  <div class=\"toggletextbutton\">\r\n    {{ isActive ? activeTitle : passiveTitle }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ToggleTextButton\",\r\n  props: {\r\n    isActive: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    activeTitle: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    passiveTitle: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style>\r\n.toggletextbutton {\r\n  color: #447e9b;\r\n  cursor: pointer;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n.toggletextbutton:hover {\r\n  color: #062a3b;\r\n}\r\n</style>","import { render } from \"./ToggleTextButton.vue?vue&type=template&id=cb9d649a\"\nimport script from \"./ToggleTextButton.vue?vue&type=script&lang=js\"\nexport * from \"./ToggleTextButton.vue?vue&type=script&lang=js\"\n\nimport \"./ToggleTextButton.vue?vue&type=style&index=0&id=cb9d649a&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./FileBlock.vue?vue&type=template&id=715ab352\"\nimport script from \"./FileBlock.vue?vue&type=script&lang=js\"\nexport * from \"./FileBlock.vue?vue&type=script&lang=js\"\n\nimport \"./FileBlock.vue?vue&type=style&index=0&id=715ab352&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DocumentFilesRow.vue?vue&type=template&id=7c3004b6&scoped=true\"\nimport script from \"./DocumentFilesRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentFilesRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentFilesRow.vue?vue&type=style&index=0&id=7c3004b6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c3004b6\"]])\n\nexport default __exports__","import { render } from \"./DocumentRow.vue?vue&type=template&id=18a3dd2d&scoped=true\"\nimport script from \"./DocumentRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentRow.vue?vue&type=style&index=0&id=18a3dd2d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-18a3dd2d\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentpagebuttonsrow\">\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      title=\"Очистить\"\r\n      @click=\"$emit('reset:search')\"\r\n    />\r\n    <toggle-text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"can_view_file\"\r\n      activeTitle=\"Скрыть файлы\"\r\n      passiveTitle=\"Показать файлы\"\r\n      :isActive=\"is_files_shown\"\r\n      @click=\"$emit('toggle:shownfiles')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      title=\"XLSX\"\r\n      @click=\"$emit('download:excel')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      title=\"JSON\"\r\n      @click=\"$emit('download:json')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      title=\"ZIP\"\r\n      @click=\"$emit('download:files_archive')\"\r\n    />\r\n    <toggle-text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"is_folder_saved && can_change_doc\"\r\n      activeTitle=\"Режим просмотра\"\r\n      passiveTitle=\"Режим редактирования\"\r\n      :isActive=\"is_edit_mode\"\r\n      @click=\"$emit('toggle:editmode')\"\r\n    />\r\n    <toggle-text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"!is_edit_mode\"\r\n      activeTitle=\"Скрыть настройки\"\r\n      passiveTitle=\"Настройка\"\r\n      :isActive=\"is_tuning_mode\"\r\n      @click=\"$emit('toggle:tuningmode')\"\r\n    />\r\n    <toggle-text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"!is_edit_mode && group_by_settings !== null\"\r\n      :activeTitle=\"group_by_active_title\"\r\n      :passiveTitle=\"group_by_passive_title\"\r\n      :isActive=\"is_group_by_mode\"\r\n      @click=\"$emit('toggle:groupbymode')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"!is_edit_mode\"\r\n      title=\"В корзину\"\r\n      @click=\"$emit('to:cart')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"is_tuning_mode\"\r\n      title=\"Сбросить\"\r\n      @click=\"$emit('reset:tuning')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"is_edit_mode && can_add_doc\"\r\n      title=\"Новый документ\"\r\n      @click=\"$emit('new:doc')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button documentpagebuttonsrow__button_red\"\r\n      v-if=\"!is_folder_saved && can_change_doc\"\r\n      title=\"Сохранить изменения\"\r\n      @click=\"$emit('save:docs')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button documentpagebuttonsrow__button_red\"\r\n      v-if=\"is_edit_mode && can_delete_doc\"\r\n      title=\"Удалить\"\r\n      @click=\"$emit('delete:docs')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"is_edit_mode\"\r\n      title=\"Дублировать\"\r\n      @click=\"$emit('duplicate:docs')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"is_edit_mode && is_folder_saved && can_delete_file\"\r\n      title=\"Очистить контейнер с файлами\"\r\n      @click=\"$emit('flush:filecontainer')\"\r\n    />\r\n    <text-button\r\n      class=\"documentpagebuttonsrow__button\"\r\n      v-if=\"is_edit_mode && can_add_file\"\r\n      title=\"Распределить файлы\"\r\n      @click=\"$emit('allocate:files')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ToggleTextButton from \"../buttons/ToggleTextButton.vue\";\r\nimport TextButton from \"../buttons/TextButton.vue\";\r\n\r\nexport default {\r\n  name: \"DocumentPageButtonsRow\",\r\n  components: { ToggleTextButton, TextButton },\r\n  props: {\r\n    is_folder_saved: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_edit_mode: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_files_shown: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    can_add_doc: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_change_doc: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_delete_file: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_add_file: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_view_file: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_delete_doc: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_tuning_mode: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_group_by_mode: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    group_by_settings: {\r\n      type: Object,\r\n      required: false, // Разрешаем NULL\r\n    },\r\n  },\r\n  emits: [\r\n    \"save:docs\",\r\n    \"delete:docs\",\r\n    \"duplicate:docs\",\r\n    \"toggle:editmode\",\r\n    \"toggle:tuningmode\",\r\n    \"toggle:groupbymode\",\r\n    \"toggle:shownfiles\",\r\n    \"reset:search\",\r\n    \"flush:filecontainer\",\r\n    \"new:doc\",\r\n    \"allocate:files\",\r\n    \"reset:tuning\",\r\n    \"download:excel\",\r\n    \"download:json\",\r\n    \"download:files_archive\",\r\n    \"to:cart\"\r\n  ],\r\n  setup(props) {\r\n    const group_by_active_title =\r\n      props.group_by_settings === null\r\n        ? \"\"\r\n        : props.group_by_settings.button_active_name;\r\n\r\n    const group_by_passive_title =\r\n      props.group_by_settings === null\r\n        ? \"\"\r\n        : props.group_by_settings.button_passive_name;\r\n\r\n    return { group_by_active_title, group_by_passive_title };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentpagebuttonsrow {\r\n  display: flex;\r\n}\r\n\r\n.documentpagebuttonsrow__button {\r\n  user-select: none;\r\n}\r\n\r\n.documentpagebuttonsrow__button_red {\r\n  color: red;\r\n}\r\n</style>","import { render } from \"./DocumentPageButtonsRow.vue?vue&type=template&id=59c3b184&scoped=true\"\nimport script from \"./DocumentPageButtonsRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentPageButtonsRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentPageButtonsRow.vue?vue&type=style&index=0&id=59c3b184&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-59c3b184\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentpagesearchrow\">\r\n    <sized-div\r\n      v-if=\"is_selection_required\"\r\n      class=\"documentpagesearchrow__sizedblock\"\r\n      size=\"w30\"\r\n    >\r\n      <form-boolean-input\r\n        class=\"documentpagesearchrow__input\"\r\n        :value=\"is_all_selected\"\r\n        :parameters=\"{ size: 30 }\"\r\n        @update=\"$emit('selectall:docs')\"\r\n      />\r\n    </sized-div>\r\n\r\n    <sized-div\r\n      class=\"documentpagesearchrow__sizedblock\"\r\n      size=\"w30\"\r\n      v-if=\"required_space_for_link\"\r\n    >\r\n    </sized-div>\r\n\r\n    <sized-div\r\n      v-for=\"block in search_schema\"\r\n      :key=\"block.name\"\r\n      class=\"documentpagesearchrow__sizedblock\"\r\n      :size=\"block.size\"\r\n      :grow=\"block.grow\"\r\n    >\r\n      <component\r\n        class=\"documentpagesearchrow__input\"\r\n        v-for=\"field in block.fields\"\r\n        :key=\"field\"\r\n        :is=\"get_component_name(field)\"\r\n        :value=\"get_query_value(block, field)\"\r\n        :parameters=\"get_parameters(block, field)\"\r\n        @keyup.enter=\"emit_search_event()\"\r\n        @update=\"set_query_value(block, field, $event)\"\r\n      />\r\n\r\n      <tuning-item\r\n        class=\"documentpagesearchrow__tuningitem\"\r\n        v-if=\"is_tuning_mode\"\r\n        :size=\"block.size\"\r\n        :grow=\"block.grow\"\r\n        @change:size=\"$emit('change:size', { name: block.name, value: $event })\"\r\n        @change:grow=\"$emit('change:grow', { name: block.name, value: $event })\"\r\n        @delete:field=\"$emit('delete:field', block.name)\"\r\n      />\r\n    </sized-div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, watch, computed } from \"vue\";\r\nimport { useDataEncode } from \"../../logic/service_layer/use_modules\";\r\nimport SizedDiv from \"../SizedDiv.vue\";\r\nimport FormTextInput from \"../fields/FormTextInput.vue\";\r\nimport FormSelectInput from \"../fields/FormSelectInput.vue\";\r\nimport FormFilteredSelectInput from \"../fields/FormFilteredSelectInput.vue\";\r\nimport FormBooleanInput from \"../fields/FormBooleanInput.vue\";\r\nimport TuningItem from \"./TuningItem.vue\";\r\nexport default {\r\n  name: \"DocumentPageSearchRow\",\r\n  components: {\r\n    SizedDiv,\r\n    FormTextInput,\r\n    FormSelectInput,\r\n    FormFilteredSelectInput,\r\n    TuningItem,\r\n    FormBooleanInput,\r\n  },\r\n  props: {\r\n    search_schema: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    is_disabled: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_clean_required: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_tuning_mode: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    required_space_for_link: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_selection_required: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_all_selected: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    should_emit_search_event_on_any_keypress: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\r\n    \"search:docs\",\r\n    \"selectall:docs\",\r\n    \"clean:query\",\r\n    \"change:size\",\r\n    \"change:grow\",\r\n    \"delete:field\",\r\n  ],\r\n\r\n  setup(props, { emit }) {\r\n    const query = reactive({});\r\n\r\n    const get_query_key = (name, rule) => {\r\n      return name + \"__\" + rule;\r\n    };\r\n\r\n    const encoded_query = computed(() => {\r\n      const result = {};\r\n      Object.keys(query).forEach((key) => {\r\n        const property = query[key];\r\n        const converter = property.converter ? property.converter : null;\r\n        let value = property.value;\r\n\r\n        // Проверяем правильность введенных данных на\r\n        // на соответствие регулярному выражению\r\n        if (property.re)\r\n          if (is_pattern_valid(property.re, property.value) === false)\r\n            value = \"\";\r\n\r\n        result[key] =\r\n          value === \"\" ? value : useDataEncode(value, property.rule, converter);\r\n      });\r\n      return result;\r\n    });\r\n\r\n    const get_initial_value = (type) => {\r\n      if (type === \"bool\") return false;\r\n      return \"\";\r\n    };\r\n\r\n    const reset_query = () => {\r\n      // Заполняем объект запроса пустыми полями,\r\n      // чтобы правильно работала реактивность валидации\r\n      props.search_schema.forEach((block) => {\r\n        block.fields.forEach((field) => {\r\n          query[get_query_key(block.name, field.rule)] = {\r\n            type: field.type,\r\n            name: block.name,\r\n            rule: field.rule,\r\n            re: field.re,\r\n            converter: field.converter,\r\n            value: get_initial_value(field.type),\r\n          };\r\n        });\r\n      });\r\n    };\r\n\r\n    const is_pattern_valid = (regexp_str, str) => {\r\n      return String.prototype.match.call(str, new RegExp(regexp_str)) !== null;\r\n    };\r\n\r\n    watch(\r\n      () => props.is_clean_required,\r\n      (newValue) => {\r\n        if (newValue === true) {\r\n          reset_query();\r\n          emit(\"clean:query\");\r\n        }\r\n      }\r\n    );\r\n\r\n    reset_query();\r\n\r\n    // SEACRH EVENT\r\n\r\n    const emit_search_event = () => emit(\"search:docs\", encoded_query.value);\r\n\r\n    // COMPONENT\r\n    const get_component_name = (field) => {\r\n      if (field.type === \"bool\") return \"FormBooleanInput\";\r\n      if (field.type === \"select\") return \"FormSelectInput\";\r\n      if (field.type === \"filtered_select\") return \"FormFilteredSelectInput\";\r\n      return \"FormTextInput\";\r\n    };\r\n\r\n    const get_query_item = (block, field) =>\r\n      query[get_query_key(block.name, field.rule)];\r\n\r\n    const get_query_value = (block, field) =>\r\n      get_query_item(block, field)[\"value\"];\r\n\r\n    const set_query_value = (block, field, value) => {\r\n      get_query_item(block, field)[\"value\"] = value;\r\n      if (props.should_emit_search_event_on_any_keypress) emit_search_event();\r\n    };\r\n\r\n    const get_parameters = (block, field) => {\r\n      if (field.type === \"bool\") return boolean_input_parameters(field);\r\n\r\n      if ([\"select\", \"filtered_select\"].includes(field.type))\r\n        return select_input_parameters(field);\r\n\r\n      return text_input_parameters(block, field);\r\n    };\r\n\r\n    const text_input_parameters = (block, field) => {\r\n      return {\r\n        color: !is_pattern_valid(\r\n          get_query_item(block, field)[\"re\"],\r\n          get_query_item(block, field)[\"value\"]\r\n        )\r\n          ? \"red\"\r\n          : \"\",\r\n\r\n        placeholder: field.placeholder,\r\n        is_disabled: props.is_disabled,\r\n        height: 30,\r\n      };\r\n    };\r\n\r\n    const boolean_input_parameters = (field) => {\r\n      return {\r\n        hint: field.placeholder,\r\n        is_disabled: props.is_disabled,\r\n        size: 28,\r\n      };\r\n    };\r\n\r\n    const select_input_parameters = (field) => {\r\n      return {\r\n        hint: field.placeholder,\r\n        is_disabled: props.is_disabled,\r\n        options: field.options,\r\n      };\r\n    };\r\n\r\n    return {\r\n      query,\r\n      encoded_query,\r\n      get_query_key,\r\n      is_pattern_valid,\r\n\r\n      // GETTERS\r\n      get_component_name,\r\n      get_parameters,\r\n      get_query_value,\r\n      set_query_value,\r\n\r\n      // EVENT\r\n      emit_search_event,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentpagesearchrow {\r\n  display: flex;\r\n}\r\n\r\n.documentpagesearchrow__sizedblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n}\r\n\r\n.documentpagesearchrow__input {\r\n  min-height: 30px;\r\n  max-height: 30px;\r\n  padding: 0px 1px;\r\n  box-sizing: border-box;\r\n}\r\n</style>","<template>\r\n    <select\r\n      class=\"formselectinput\"\r\n      :disabled=\"is_disabled\"\r\n      :size=\"size.toString()\"\r\n      @input=\"handle_choose_value($event.target.value)\"\r\n    >\r\n      <option\r\n        v-for=\"(option, index) in parameters.options\"\r\n        :selected=\"value !== undefined && value !== null && option.value === value\"\r\n        :key=\"option.value\"\r\n        :value=\"index\"\r\n      >\r\n        {{ option.name }}\r\n      </option>\r\n    </select>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormSelectInput\",\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      required: false,\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || \"\";\r\n    if ((props.value === undefined || props.value === null) && default_value) {\r\n      emit(\"update\", default_value);\r\n    }\r\n\r\n\r\n    const size = computed(() => props.parameters[\"size\"] || 1);\r\n    const is_disabled = computed(() => props.parameters[\"is_disabled\"] || false);\r\n\r\n    const handle_choose_value = (str_index) => {\r\n      emit('update', props.parameters.options[parseInt(str_index)].value)\r\n    }\r\n\r\n    return { size, is_disabled, handle_choose_value };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formselectinput {\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./FormSelectInput.vue?vue&type=template&id=20d58ba5&scoped=true\"\nimport script from \"./FormSelectInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormSelectInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormSelectInput.vue?vue&type=style&index=0&id=20d58ba5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-20d58ba5\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"formfilteredselectinput\">\r\n    <form-select-input\r\n      class=\"formfilteredselectinput__target\"\r\n      :parameters=\"{\r\n        options: parameters.options,\r\n        is_disabled: is_disabled,\r\n      }\"\r\n      :value=\"value\"\r\n      @mousedown=\"handle_click_on_target($event)\"\r\n    />\r\n    <form-text-input\r\n      v-if=\"!is_selected\"\r\n      class=\"formfilteredselectinput__search\"\r\n      :parameters=\"{\r\n        placeholder: placeholder,\r\n        height: 30\r\n      }\"\r\n      :value=\"query\"\r\n      @update=\"query = $event\"\r\n    />\r\n    <form-select-input\r\n      v-if=\"!is_selected\"\r\n      class=\"formfilteredselectinput__list\"\r\n      :parameters=\"{\r\n        options: filtered_options,\r\n        size: size,\r\n      }\"\r\n      :value=\"value\"\r\n      @update=\"\r\n        $emit('update', $event);\r\n        is_selected = !is_selected;\r\n      \"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from \"vue\";\r\n\r\nimport FormTextInput from \"./FormTextInput.vue\";\r\nimport FormSelectInput from \"./FormSelectInput.vue\";\r\n\r\nexport default {\r\n  name: \"FormFilteredSelectInput\",\r\n  components: {\r\n    FormTextInput,\r\n    FormSelectInput,\r\n  },\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      required: false,\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || \"\";\r\n    if ((props.value === undefined || props.value === null) && default_value) {\r\n      emit(\"update\", default_value);\r\n    }\r\n\r\n    const size = computed(() => props.parameters[\"size\"] || 3);\r\n    const is_disabled = computed(\r\n      () => props.parameters[\"is_disabled\"] || false\r\n    );\r\n    const placeholder = computed(() => props.parameters[\"placeholder\"] || \"\");\r\n\r\n    const is_selected = ref(true);\r\n    const query = ref(\"\");\r\n\r\n    const filtered_options = computed(() =>\r\n      props.parameters.options.filter((obj) =>\r\n        obj.name.toUpperCase().includes(query.value.toUpperCase())\r\n      )\r\n    );\r\n\r\n    const handle_click_on_target = (e) => {\r\n      e.preventDefault();\r\n      if (is_disabled.value === true) return;\r\n      is_selected.value = !is_selected.value;\r\n    };\r\n\r\n    return {\r\n      size,\r\n      is_disabled,\r\n      placeholder,\r\n      is_selected,\r\n      query,\r\n      filtered_options,\r\n      handle_click_on_target,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formfilteredselectinput {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./FormFilteredSelectInput.vue?vue&type=template&id=3d606cee&scoped=true\"\nimport script from \"./FormFilteredSelectInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormFilteredSelectInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormFilteredSelectInput.vue?vue&type=style&index=0&id=3d606cee&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3d606cee\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"tuningitem\">\r\n    <icon-button\r\n      class=\"tuningitem__button\"\r\n      icon_on=\"-\"\r\n      @click=\"$emit('change:size', prev_size(size))\"\r\n    />\r\n    <icon-button\r\n      class=\"tuningitem__button\"\r\n      icon_on=\"+\"\r\n      @click=\"$emit('change:size', next_size(size))\"\r\n    />\r\n    <icon-button\r\n      class=\"tuningitem__button\"\r\n      icon_on=\"&#8660;\"\r\n      icon_off=\"&#10500;\"\r\n      :is_active=\"grow\"\r\n      @click=\"$emit('change:grow', !grow)\"\r\n    />\r\n    <icon-button\r\n      class=\"tuningitem__button\"\r\n      icon_on=\"X\"\r\n      @click=\"$emit('delete:field')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport IconButton from \"../buttons/IconButton.vue\";\r\nexport default {\r\n  components: { IconButton },\r\n  name: \"TuningItem\",\r\n  props: {\r\n    size: {\r\n      type: String,\r\n      required: false,\r\n      default: \"w50\",\r\n    },\r\n    grow: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"change:size\", \"change:grow\", \"delete:field\"],\r\n  setup() {\r\n    const size_variants = [\r\n      \"w50\",\r\n      \"w100\",\r\n      \"w150\",\r\n      \"w200\",\r\n      \"w250\",\r\n      \"w300\",\r\n      \"w350\",\r\n      \"w400\",\r\n    ];\r\n\r\n    const prev_size = (size) => {\r\n      let idx = size_variants.indexOf(size) - 1;\r\n      idx = Math.max(0, idx);\r\n      return size_variants[idx];\r\n    };\r\n\r\n    const next_size = (size) => {\r\n      let idx = size_variants.indexOf(size) + 1;\r\n      idx = Math.min(idx, size_variants.length - 1);\r\n      return size_variants[idx];\r\n    };\r\n\r\n    return { prev_size, next_size };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.tuningitem {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  padding: 3px;\r\n}\r\n\r\n.tuningitem__button {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.tuningitem__sizecontainer {\r\n  display: flex;\r\n}\r\n</style>","<template>\r\n  <div class=\"iconbutton\" @click=\"$emit('toggle')\">\r\n    <div class=\"iconbutton__icon\">\r\n      {{ is_active === true ? icon_on : icon_off }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"IconButton\",\r\n  props: {\r\n    icon_on: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    icon_off: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    is_active: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.iconbutton {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.iconbutton__icon {\r\n  flex-grow: 1;\r\n  user-select: none;\r\n  cursor: pointer;\r\n  text-align: center;\r\n  vertical-align: middle;\r\n}\r\n</style>","import { render } from \"./IconButton.vue?vue&type=template&id=5f810ad4\"\nimport script from \"./IconButton.vue?vue&type=script&lang=js\"\nexport * from \"./IconButton.vue?vue&type=script&lang=js\"\n\nimport \"./IconButton.vue?vue&type=style&index=0&id=5f810ad4&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./TuningItem.vue?vue&type=template&id=9319ab66\"\nimport script from \"./TuningItem.vue?vue&type=script&lang=js\"\nexport * from \"./TuningItem.vue?vue&type=script&lang=js\"\n\nimport \"./TuningItem.vue?vue&type=style&index=0&id=9319ab66&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DocumentPageSearchRow.vue?vue&type=template&id=74028ffa&scoped=true\"\nimport script from \"./DocumentPageSearchRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentPageSearchRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentPageSearchRow.vue?vue&type=style&index=0&id=74028ffa&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-74028ffa\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentpagesortrow\">\r\n    <sized-div\r\n      v-for=\"block in search_schema\"\r\n      :key=\"block.name\"\r\n      class=\"documentpagesortrow__sizedblock\"\r\n      :size=\"block.size\"\r\n      :grow=\"block.grow\"\r\n    >\r\n      <arrow-switch\r\n        class=\"documentpagesortrow__arrow\"\r\n        :is_checked=\"sort_asc === true\"\r\n        :is_selected=\"sort_by === block.name\"\r\n        @click=\"\r\n          sort_by === block.name\r\n            ? $emit('toggle:direction')\r\n            : $emit(\r\n                'sort:by',\r\n                getSortNameAndFunction(block.name, block.sort_rule)\r\n              )\r\n        \"\r\n      />\r\n    </sized-div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SizedDiv from \"../SizedDiv.vue\";\r\nimport ArrowSwitch from \"../buttons/ArrowSwitch.vue\";\r\n\r\nexport default {\r\n  name: \"DocumentPageSortRow\",\r\n  components: { SizedDiv, ArrowSwitch },\r\n  props: {\r\n    search_schema: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    sort_asc: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    sort_by: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n  },\r\n  emits: [\"toggle:direction\", \"sort:by\"],\r\n  setup() {\r\n    const getSortNameAndFunction = (block_name, sort_rule_name) => [\r\n      block_name,\r\n      sort_rule_name,\r\n    ];\r\n\r\n    return { getSortNameAndFunction };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentpagesortrow {\r\n  display: flex;\r\n}\r\n\r\n.documentpagesortrow__sizedblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n\r\n.documentpagesortrow__arrow {\r\n  text-align: center;\r\n}\r\n</style>","<template>\r\n  <div\r\n    class=\"arrowswitch\"\r\n    v-bind:class=\"{\r\n      arrowswitch_selected: is_selected === true,\r\n      arrowswitch_checked: is_checked === true,\r\n    }\"\r\n  >\r\n    {{ is_checked ? \"&#x25bc;\" : \"&#x25b2;\" }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ArrowSwitch\",\r\n  props: {\r\n    is_selected: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_checked: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.arrowswitch {\r\n  display: block;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  color: lightgrey;\r\n  user-select: none;\r\n}\r\n\r\n.arrowswitch_selected {\r\n  color: lightsalmon;\r\n}\r\n</style>","import { render } from \"./ArrowSwitch.vue?vue&type=template&id=1e2cf47e\"\nimport script from \"./ArrowSwitch.vue?vue&type=script&lang=js\"\nexport * from \"./ArrowSwitch.vue?vue&type=script&lang=js\"\n\nimport \"./ArrowSwitch.vue?vue&type=style&index=0&id=1e2cf47e&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./DocumentPageSortRow.vue?vue&type=template&id=29807a96&scoped=true\"\nimport script from \"./DocumentPageSortRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentPageSortRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentPageSortRow.vue?vue&type=style&index=0&id=29807a96&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-29807a96\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"filelist\">\r\n    <file-block\r\n      class=\"filelist__fileblock\"\r\n      v-for=\"file in files\"\r\n      :key=\"file.id\"\r\n      :file=\"file\"\r\n      :can_be_dragged=\"can_be_dragged\"\r\n      :can_be_deleted=\"can_be_deleted\"\r\n      :can_be_renamed=\"can_be_renamed\"\r\n      @dragstart:file=\"$emit('dragstart:file')\"\r\n      @dragend=\"$emit('dragend:file')\"\r\n      @download:file=\"$emit('download:file', [file, $event])\"\r\n      @delete:file=\"$emit('delete:file', file.id)\"\r\n      @rename:file=\"$emit('rename:file', [file.id, $event])\"\r\n      @rename:activated=\"$emit('rename:activated', file.id)\"\r\n      @copy_link_to:file=\"$emit('copy_link_to:file', file)\"\r\n      >{{ file.name }}\r\n    </file-block>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FileBlock from \"./FileBlock.vue\";\r\n\r\nexport default {\r\n  components: { FileBlock },\r\n  name: \"FileList\",\r\n  props: {\r\n    files: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    can_be_dragged: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    can_be_deleted: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    can_be_renamed: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\r\n    \"dragstart:file\",\r\n    \"dragend:file\",\r\n    \"download:file\",\r\n    \"delete:file\",\r\n    \"rename:file\",\r\n    \"rename:activated\",\r\n    \"copy_link_to:file\",\r\n  ],\r\n};\r\n</script>\r\n<style scoped>\r\n.filelist {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.filelist__fileblock {\r\n  padding-top: 3px;\r\n  padding-bottom: 3px;\r\n}\r\n</style>","import { render } from \"./FileList.vue?vue&type=template&id=15d69ea0&scoped=true\"\nimport script from \"./FileList.vue?vue&type=script&lang=js\"\nexport * from \"./FileList.vue?vue&type=script&lang=js\"\n\nimport \"./FileList.vue?vue&type=style&index=0&id=15d69ea0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-15d69ea0\"]])\n\nexport default __exports__","<template>\r\n  <div\r\n    class=\"jsonfiledropzone\"\r\n    @drop.prevent=\"handleDrop($event)\"\r\n    @dragover.prevent\r\n    @dragenter.prevent=\"is_dragging = true\"\r\n    @dragleave.prevent=\"is_dragging = false\"\r\n  >\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport XLSX from \"xlsx\"; // SheetJS\r\nimport { watch, ref } from \"vue\";\r\nimport { UploadFileError } from \"../../logic/domain/event\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\n\r\nconst get_extension = (filename) => filename.split(\".\").pop();\r\nconst get_base_name = (filename) => filename.split(\".\")[0];\r\n\r\nconst default_json_parser = async (file) => {\r\n  if (get_extension(file.name) !== \"json\") return null;\r\n  return JSON.parse(await file.text());\r\n};\r\n\r\nconst parser_1868_amm_transmittal = async (file) => {\r\n  if (get_extension(file.name) !== \"xlsx\") return null;\r\n\r\n  // Так как надписи внутри EXCEL невозможно прочитать\r\n  // средствами JS, то имя трансмиттала берем из\r\n  // наименования файла.\r\n  const transmittal = get_base_name(file.name).trim();\r\n  const last_modified_unix_timestamp = Math.round(file.lastModified / 1000);\r\n\r\n  const workbook = XLSX.read(await file.arrayBuffer());\r\n\r\n  let result_json_data = [];\r\n\r\n  workbook.SheetNames.forEach((sheet_name) => {\r\n    const ws = workbook.Sheets[sheet_name];\r\n    const ws_json_data = XLSX.utils.sheet_to_json(ws, {\r\n      header: [\r\n        \"CODE\",\r\n        \"REVISION\",\r\n        \"SHEET_NAME\",\r\n        \"COUNT\",\r\n        \"STATUS\",\r\n        \"RESPONSE_CODE\",\r\n      ],\r\n      raw: false,\r\n    });\r\n\r\n    console.log(ws_json_data);\r\n\r\n    result_json_data = result_json_data.concat(\r\n      ws_json_data\r\n        .map((x) =>\r\n          Object.assign({}, x, {\r\n            TRANSMITTAL: transmittal,\r\n            DATE: last_modified_unix_timestamp,\r\n          })\r\n        )\r\n        .filter(\r\n          (x) => x[\"CODE\"] && !x[\"CODE\"].toLowerCase().includes(\"документ\")\r\n        )\r\n    );\r\n  });\r\n\r\n  return result_json_data;\r\n};\r\n\r\nconst parser_1882_dlenc_transmittal = async (file) => {\r\n  if (get_extension(file.name) !== \"xlsx\") return null;\r\n\r\n  // Конвертируем дату в формате М/Д/ГГГГ в unix timestamp\r\n  const parse_date = (str_date) => {\r\n    console.log(str_date);\r\n    if (!str_date) return 0;\r\n\r\n    const parts = str_date.split(\"/\");\r\n    const year = parseInt(parts[2]);\r\n    const month = parseInt(parts[1]) - 1; // Month counted from 0\r\n    const day = parseInt(parts[0]);\r\n    const mydate = new Date(year, month, day);\r\n    return Math.round(mydate / 1000);\r\n  };\r\n\r\n  const workbook = XLSX.read(await file.arrayBuffer());\r\n  const ws_trm = workbook.Sheets[\"transmittal\"];\r\n  const ws_list = workbook.Sheets[\"List\"];\r\n  const headers = [\r\n    \"ID\",\r\n    \"CODE\",\r\n    \"COL_1\",\r\n    \"SHEET_NAME\",\r\n    \"COL_2\",\r\n    \"REVISION\",\r\n    \"STATUS\",\r\n    \"LANGUAGE\",\r\n  ];\r\n\r\n  const ws_trm_json_data = XLSX.utils.sheet_to_json(ws_trm, {\r\n    header: headers,\r\n    raw: false,\r\n  });\r\n\r\n  const ws_list_json_data = XLSX.utils.sheet_to_json(ws_list, {\r\n    header: headers,\r\n    raw: false,\r\n  });\r\n\r\n  console.log(ws_trm_json_data);\r\n  console.log(ws_list_json_data);\r\n\r\n  let TRM = \"????\";\r\n  let ISSUED_DATE = 0;\r\n  let DUE_DATE = 0;\r\n\r\n  // Получаем общие данные для трансмиттала\r\n  const row_1 = ws_trm_json_data[1];\r\n  TRM = row_1[\"COL_1\"];\r\n  ISSUED_DATE = parse_date(row_1[\"LANGUAGE\"].trim());\r\n\r\n  const row_2 = ws_trm_json_data[2];\r\n  DUE_DATE = parse_date(row_2[\"LANGUAGE\"].trim());\r\n\r\n  console.log(\"TRM: \", TRM);\r\n  console.log(\"ISSUED_DATE: \", ISSUED_DATE);\r\n  console.log(\"DUE_DATE: \", DUE_DATE);\r\n\r\n  const transform_row = (x) => {\r\n    if (\r\n      x[\"CODE\"] ||\r\n      x[\"SHEET_NAME\"] ||\r\n      x[\"REVISION\"] ||\r\n      x[\"STATUS\"] ||\r\n      x[\"LANGUAGE\"]\r\n    ) {\r\n      let obj = Object.assign(\r\n        {\r\n          CODE: x[\"CODE\"],\r\n          SHEET_NAME: x[\"SHEET_NAME\"],\r\n          REVISION: x[\"REVISION\"],\r\n          STATUS: x[\"STATUS\"],\r\n          LANGUAGE: x[\"LANGUAGE\"],\r\n          KIND: \"\",\r\n        },\r\n        {\r\n          TRANSMITTAL: TRM,\r\n          DATE: ISSUED_DATE,\r\n          DUE_DATE: DUE_DATE,\r\n        }\r\n      );\r\n\r\n      return obj;\r\n    } else return null;\r\n  };\r\n\r\n  // Данные каждой строки\r\n  let result_json_data = [];\r\n  result_json_data = result_json_data\r\n    .concat(\r\n      ws_trm_json_data\r\n        .slice(4, 29)\r\n        .map((x) => transform_row(x))\r\n        .filter((x) => x !== null)\r\n    )\r\n    .concat(\r\n      ws_list_json_data\r\n        .slice(2)\r\n        .map((x) => transform_row(x))\r\n        .filter((x) => x !== null)\r\n    )\r\n\r\n  return result_json_data;\r\n};\r\n// const parser_1882_dlenc_transmittal = async (file) => {\r\n//   if (get_extension(file.name) !== \"xlsx\") return null;\r\n\r\n//   // Так как надписи внутри EXCEL невозможно прочитать\r\n//   // средствами JS, то имя трансмиттала берем из\r\n//   // наименования файла.\r\n//   // const transmittal = get_base_name(file.name).trim();\r\n//   // const last_modified_unix_timestamp = Math.round(file.lastModified / 1000);\r\n\r\n//   // Конвертируем дату в формате М/Д/ГГ в unix timestamp\r\n//   const parse_date = (str_date) => {\r\n//     if (!str_date) return 0;\r\n\r\n//     const parts = str_date.split(\"/\");\r\n//     const year = parseInt(parts[2]) + 2000;\r\n//     const month = parseInt(parts[0]) - 1; // Month counted from 0\r\n//     const day = parseInt(parts[1]);\r\n//     const mydate = new Date(year, month, day);\r\n//     return Math.round(mydate / 1000);\r\n//   };\r\n\r\n//   const workbook = XLSX.read(await file.arrayBuffer());\r\n//   const ws = workbook.Sheets[\"TRM\"];\r\n\r\n//   let result_json_data = [];\r\n//   const ws_json_data = XLSX.utils.sheet_to_json(ws, {\r\n//     header: [\r\n//       \"ID\",\r\n//       \"CODE\",\r\n//       \"SHEET_NAME\",\r\n//       \"CHANGE\",\r\n//       \"REVISION\",\r\n//       \"STATUS\",\r\n//       \"SHEETS\",\r\n//       \"LANGUAGE\",\r\n//       \"KIND\",\r\n//     ],\r\n//     raw: false,\r\n//   });\r\n\r\n//   console.log(ws_json_data);\r\n\r\n//   let TRM = \"????\";\r\n//   let ISSUED_DATE = 0;\r\n//   let DUE_DATE = 0;\r\n\r\n//   // Получаем общие данные для трансмиттала\r\n//   ws_json_data.forEach((row) => {\r\n//     if (\r\n//       Object.prototype.hasOwnProperty.call(row, \"ID\") &&\r\n//       Object.prototype.hasOwnProperty.call(row, \"SHEET_NAME\") &&\r\n//       row[\"ID\"].includes(\"TRM number\")\r\n//     )\r\n//       TRM = row[\"SHEET_NAME\"].trim();\r\n//     if (\r\n//       Object.prototype.hasOwnProperty.call(row, \"ID\") &&\r\n//       Object.prototype.hasOwnProperty.call(row, \"SHEET_NAME\") &&\r\n//       row[\"ID\"].includes(\"TRM creation date\")\r\n//     )\r\n//       ISSUED_DATE = parse_date(row[\"SHEET_NAME\"].trim());\r\n//     if (\r\n//       Object.prototype.hasOwnProperty.call(row, \"CHANGE\") &&\r\n//       Object.prototype.hasOwnProperty.call(row, \"LANGUAGE\") &&\r\n//       row[\"CHANGE\"].includes(\"Due date\")\r\n//     )\r\n//       DUE_DATE = parse_date(row[\"LANGUAGE\"].trim());\r\n//   });\r\n\r\n//   // Данные каждой строки\r\n//   result_json_data = result_json_data.concat(\r\n//     ws_json_data.slice(14).map((x) => {\r\n//       let obj = Object.assign({}, x, {\r\n//         TRANSMITTAL: TRM,\r\n//         DATE: ISSUED_DATE,\r\n//         DUE_DATE: DUE_DATE,\r\n//       });\r\n\r\n//       // if (DUE_DATE) obj['DUE_DATE'] = DUE_DATE\r\n\r\n//       if (!Object.prototype.hasOwnProperty.call(obj, \"KIND\"))\r\n//         obj[\"KIND\"] = \"DOC\";\r\n//       else if (obj[\"KIND\"].includes(\"ACRS\")) obj[\"KIND\"] = \"ACRS\";\r\n//       else if (obj[\"KIND\"].includes(\"CRS\")) obj[\"KIND\"] = \"CRS\";\r\n\r\n//       delete obj[\"ID\"];\r\n//       return obj;\r\n//     })\r\n//   );\r\n\r\n//   return result_json_data;\r\n// };\r\n\r\nexport default {\r\n  name: \"JsonFileDropZone\",\r\n  props: {\r\n    default: {\r\n      required: false,\r\n      default: null,\r\n    },\r\n\r\n    // Массив наименование функций, каждая из которых пытается\r\n    // обработать загруженный файл\r\n    // Первой выполняется стандартная функция парсинга JSON файла\r\n    parsers: {\r\n      type: Array,\r\n      required: false,\r\n      default: () => [],\r\n    },\r\n  },\r\n  emits: [\"update:json\", \"update:dragging\"],\r\n\r\n  setup(props, { emit }) {\r\n    const is_dragging = ref(false);\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const allowed_parsers = {\r\n      json_default: default_json_parser,\r\n      \"1868_amm_transmittal\": parser_1868_amm_transmittal,\r\n      \"1882_dlenc_transmittal\": parser_1882_dlenc_transmittal,\r\n    };\r\n\r\n    // Объединяем стандартный JSON парсер с дополнительными\r\n    const drop_parsers = [\"json_default\"].concat(props.parsers);\r\n\r\n    const handleDrop = async (e) => {\r\n      is_dragging.value = false;\r\n      await Array.prototype.forEach.call(e.dataTransfer.files, async (file) => {\r\n        try {\r\n          let result = null;\r\n\r\n          for (const parser_name of drop_parsers) {\r\n            if (result !== null) {\r\n              continue;\r\n            }\r\n            if (\r\n              !Object.prototype.hasOwnProperty.call(\r\n                allowed_parsers,\r\n                parser_name\r\n              )\r\n            ) {\r\n              console.log(\"Отсутствует парсер\", parser_name);\r\n              continue;\r\n            }\r\n            const parser = allowed_parsers[parser_name];\r\n            result = await parser(file);\r\n          }\r\n\r\n          if (result === null)\r\n            throw \"Ни один обработчик не смог обработать загруженный файл\";\r\n\r\n          emit(\"update:json\", result);\r\n        } catch (e) {\r\n          console.log(e);\r\n          const message = new UploadFileError(file.name);\r\n          MessageBus.handle(message, uow);\r\n          emit(\"update:json\", props.default);\r\n        }\r\n      });\r\n    };\r\n\r\n    watch(is_dragging, (newValue, oldValue) => {\r\n      if (newValue !== oldValue) {\r\n        emit(\"update:dragging\", newValue);\r\n      }\r\n    });\r\n\r\n    return { handleDrop, is_dragging };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./JsonFileDropZone.vue?vue&type=template&id=01352f1a\"\nimport script from \"./JsonFileDropZone.vue?vue&type=script&lang=js\"\nexport * from \"./JsonFileDropZone.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div\r\n    class=\"filedropzone\"\r\n    @drop.prevent=\"handleDrop($event)\"\r\n    @dragover.prevent\r\n    @dragenter.prevent=\"is_dragging = true\"\r\n    @dragleave.prevent=\"is_dragging = false\"\r\n  >\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { watch, ref } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FileDropZone\",\r\n  props: {\r\n    filename_pattern: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => /.*/,\r\n    },\r\n  },\r\n  emits: [\"add:file\", \"update:dragging\", \"wrong:filename\"],\r\n\r\n  setup(props, { emit }) {\r\n    const is_dragging = ref(false);\r\n    const regexp = new RegExp(props.filename_pattern);\r\n\r\n    const handleDrop = (e) => {\r\n      is_dragging.value = false;\r\n      Array.prototype.forEach.call(e.dataTransfer.files, (file) => {\r\n        if (file.name.toString().match(regexp))\r\n          emit(\"add:file\", file);\r\n        else emit(\"wrong:filename\", file.name.toString());\r\n      });\r\n    };\r\n\r\n    watch(is_dragging, (newValue, oldValue) => {\r\n      if (newValue !== oldValue) {\r\n        emit(\"update:dragging\", newValue);\r\n      }\r\n    });\r\n\r\n    return { handleDrop, is_dragging };\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./FileDropZone.vue?vue&type=template&id=1310559a\"\nimport script from \"./FileDropZone.vue?vue&type=script&lang=js\"\nexport * from \"./FileDropZone.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentpagedownloadprogressrow\">\r\n    <div\r\n      class=\"documentpagedownloadprogressrow__container\"\r\n      v-for=\"file in files\"\r\n      :key=\"file.id\"\r\n    >\r\n      <span\r\n        class=\"documentpagedownloadprogressrow__item\"\r\n        v-if=\"full_format\"\r\n        >Происходит скачивание файла \"{{file.name}}\" объемом {{ file.formatted_size() }} - {{ file.progress }}%</span\r\n      >\r\n      <span\r\n        class=\"documentpagedownloadprogressrow__item\"\r\n        v-if=\"!full_format && file.progress < 100\"\r\n        >({{ file.formatted_size() }} - {{ file.progress }}%)</span\r\n      >\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DocumentPageDownloadProgressRow\",\r\n  props: {\r\n    files: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    full_format: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentpagedownloadprogressrow {\r\n  display: flex;\r\n}\r\n.documentpagedownloadprogressrow__item {\r\n  padding: 3px;\r\n}\r\n</style>","import { render } from \"./DocumentPageDownloadProgressRow.vue?vue&type=template&id=30857a85&scoped=true\"\nimport script from \"./DocumentPageDownloadProgressRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentPageDownloadProgressRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentPageDownloadProgressRow.vue?vue&type=style&index=0&id=30857a85&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-30857a85\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"documentpaginationrow\">\r\n    <span>По</span>\r\n    <div\r\n      class=\"documentpaginationrow__variants\"\r\n      v-for=\"count in variants\"\r\n      :key=\"count\"\r\n    >\r\n      <text-button\r\n        class=\"documentpaginationrow__textbutton\"\r\n        :class=\"{\r\n          documentpaginationrow__textbutton_active: count === count_per_page,\r\n        }\"\r\n        :title=\"count.toString()\"\r\n        @click=\"\r\n          $emit('select:page', 1);\r\n          $emit('set:count_per_page', count);\r\n        \"\r\n      />\r\n    </div>\r\n    <span> | Страницы </span>\r\n\r\n    <div\r\n      v-if=\"!is_intermediate_part_shown && has_intermediate_part\"\r\n      class=\"documentpaginationrow__container\"\r\n    >\r\n      <div\r\n        class=\"documentpaginationrow__subcontainer\"\r\n        v-for=\"page in pages_before\"\r\n        :key=\"page.index\"\r\n      >\r\n        <text-button\r\n          class=\"documentpaginationrow__textbutton\"\r\n          :class=\"{\r\n            documentpaginationrow__textbutton_active:\r\n              page.index === current_page,\r\n          }\"\r\n          :title=\"page.index.toString()\"\r\n          @click=\"$emit('select:page', page.index)\"\r\n        />\r\n      </div>\r\n\r\n      <text-button\r\n        class=\"documentpaginationrow__textbutton\"\r\n        title=\"...\"\r\n        @click=\"$emit('show:pages')\"\r\n      />\r\n\r\n      <div\r\n        class=\"documentpaginationrow__subcontainer\"\r\n        v-for=\"page in pages_after\"\r\n        :key=\"page.index\"\r\n      >\r\n        <text-button\r\n          class=\"documentpaginationrow__textbutton\"\r\n          :class=\"{\r\n            documentpaginationrow__textbutton_active:\r\n              page.index === current_page,\r\n          }\"\r\n          :title=\"page.index.toString()\"\r\n          @click=\"$emit('select:page', page.index)\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <div v-else class=\"documentpaginationrow__container\">\r\n      <div\r\n        class=\"documentpaginationrow__subcontainer\"\r\n        v-for=\"page in pages\"\r\n        :key=\"page.index\"\r\n      >\r\n        <text-button\r\n          class=\"documentpaginationrow__textbutton\"\r\n          :class=\"{\r\n            documentpaginationrow__textbutton_active:\r\n              page.index === current_page,\r\n          }\"\r\n          :title=\"page.index.toString()\"\r\n          @click=\"$emit('select:page', page.index)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, watch, onMounted } from \"vue\";\r\nimport TextButton from \"../buttons/TextButton.vue\";\r\nexport default {\r\n  components: { TextButton },\r\n  name: \"DocumentPaginationRow\",\r\n  props: {\r\n    total_count: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    count_per_page: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    current_page: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    variants: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    max_count_of_pages: {\r\n      type: Number,\r\n      required: false,\r\n      default: 0,\r\n    },\r\n    count_before: {\r\n      type: Number,\r\n      required: false,\r\n      default: 10,\r\n    },\r\n    count_after: {\r\n      type: Number,\r\n      required: false,\r\n      default: 5,\r\n    },\r\n    is_intermediate_part_shown: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: true,\r\n    },\r\n  },\r\n  emits: [\"select:page\", \"set:count_per_page\", \"set:page_range\", \"show:pages\"],\r\n\r\n  setup(props, { emit }) {\r\n    const pages = computed(() => {\r\n      return Array.from(\r\n        Array(Math.ceil(props.total_count / props.count_per_page)).keys()\r\n      ).map((num) => {\r\n        const min = num * props.count_per_page;\r\n        const max = (num + 1) * props.count_per_page - 1;\r\n        return {\r\n          index: num + 1,\r\n          min: min,\r\n          max: Math.min(max, props.total_count - 1),\r\n        };\r\n      });\r\n    });\r\n\r\n    const has_intermediate_part = computed(\r\n      () => pages.value.length - props.count_before - props.count_after > 0\r\n    );\r\n\r\n    const pages_before = computed(() =>\r\n      pages.value.filter((x) => x.index <= props.count_before)\r\n    );\r\n\r\n    const pages_after = computed(() =>\r\n      pages.value.filter(\r\n        (x) => x.index >= pages.value.length - props.count_after + 1\r\n      )\r\n    );\r\n\r\n    const page = computed(() =>\r\n      pages.value.find((e) => e.index === props.current_page)\r\n    );\r\n\r\n    watch(page, (newValue) => emit(\"set:page_range\", newValue));\r\n\r\n    onMounted(() => emit(\"set:page_range\", page.value));\r\n\r\n    return {\r\n      page,\r\n      pages,\r\n      has_intermediate_part,\r\n      pages_before,\r\n      pages_after,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.documentpaginationrow,\r\n.documentpaginationrow__container,\r\n.documentpaginationrow__subcontainer {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n.documentpaginationrow__textbutton_active {\r\n  color: red;\r\n}\r\n</style>","import { render } from \"./DocumentPaginationRow.vue?vue&type=template&id=6eebb904&scoped=true\"\nimport script from \"./DocumentPaginationRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentPaginationRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentPaginationRow.vue?vue&type=style&index=0&id=6eebb904&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6eebb904\"]])\n\nexport default __exports__","import { render } from \"./SearchDocumentPage.vue?vue&type=template&id=687d5ab8&scoped=true\"\nimport script from \"./SearchDocumentPage.vue?vue&type=script&lang=js\"\nexport * from \"./SearchDocumentPage.vue?vue&type=script&lang=js\"\n\nimport \"./SearchDocumentPage.vue?vue&type=style&index=0&id=687d5ab8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-687d5ab8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <heading-component\r\n        :text=\"`Согласования ${\r\n          action_progress < 100\r\n            ? '(выполнение действий ' + action_progress.toString() + '%)'\r\n            : ''\r\n        }  ${\r\n          validation_progress < 100\r\n            ? '(валидация ' + validation_progress.toString() + '%)'\r\n            : ''\r\n        }`\"\r\n        size=\"middle\"\r\n      />\r\n    </div>\r\n    <div class=\"page__container\" v-show=\"action_progress === 100\">\r\n      <div class=\"page__searchcontainer\">\r\n        <div class=\"page__buttonrow buttonrow\">\r\n          <text-button\r\n            class=\"buttonrow__button buttonrow__button_left\"\r\n            title=\"Выделенные в корзину\"\r\n            :disabled=\"selected_item_count === 0\"\r\n            @click=\"perform_action_on_selected_items('add_to_cart')\"\r\n          />\r\n          <text-button\r\n            class=\"buttonrow__button\"\r\n            title=\"Согласовать\"\r\n            :disabled=\"selected_item_count === 0\"\r\n            @click=\"perform_action_on_selected_items('approve')\"\r\n          />\r\n          <text-button\r\n            class=\"buttonrow__button\"\r\n            title=\"Отклонить\"\r\n            :disabled=\"selected_item_count === 0\"\r\n            @click=\"perform_action_on_selected_items('reject')\"\r\n          />\r\n          <text-button\r\n            class=\"buttonrow__button\"\r\n            title=\"Делегировать с возвратом\"\r\n            :disabled=\"\r\n              selected_item_count === 0 ||\r\n              is_approval_action_username_chosen === false\r\n            \"\r\n            @click=\"\r\n              perform_action_on_selected_items('delegate_approval_with_return')\r\n            \"\r\n          />\r\n          <text-button\r\n            class=\"buttonrow__button\"\r\n            title=\"Делегировать без возврата\"\r\n            :disabled=\"\r\n              selected_item_count === 0 ||\r\n              is_approval_action_username_chosen === false\r\n            \"\r\n            @click=\"\r\n              perform_action_on_selected_items(\r\n                'delegate_approval_without_return'\r\n              )\r\n            \"\r\n          />\r\n          <form-filtered-select-input\r\n            class=\"buttonrow__button buttonrow__button_selectuser\"\r\n            :parameters=\"{\r\n              options: user_options,\r\n              placeholder: 'Поиск...',\r\n              size: 3,\r\n            }\"\r\n            :value=\"approval_action_username\"\r\n            @update=\"approval_action_username = $event\"\r\n          />\r\n          <text-button\r\n            class=\"buttonrow__button\"\r\n            title=\"ZIP\"\r\n            :disabled=\"selected_item_count === 0\"\r\n            @click=\"\r\n              perform_action_on_selected_items('download_files_as_archive')\r\n            \"\r\n          />\r\n\r\n          <text-button\r\n            class=\"buttonrow__button buttonrow__button_search\"\r\n            title=\"Поиск по согласованиям ...\"\r\n            @click=\"router.push({ name: 'DocumentApprovalSearchPage' })\"\r\n          />\r\n        </div>\r\n        <div class=\"page__searchblock\">\r\n          <form-boolean-input\r\n            class=\"page__checkboxbutton\"\r\n            :value=\"is_all_selected\"\r\n            :parameters=\"{ size: 30 }\"\r\n            @click=\"handle_select_all_approvals()\"\r\n          />\r\n          <form-text-input\r\n            class=\"page__searchtype\"\r\n            :parameters=\"{ placeholder: 'Тип', height: 30 }\"\r\n            :value=\"query.type\"\r\n            @update=\"query.type = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"page__searchuser\"\r\n            :parameters=\"{\r\n              placeholder: 'Кто запросил согласование?',\r\n              height: 30,\r\n            }\"\r\n            :value=\"query.from_user\"\r\n            @update=\"query.from_user = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"page__searchuser\"\r\n            :parameters=\"{ placeholder: 'Кому нужно согласовать?', height: 30 }\"\r\n            :value=\"query.to_user\"\r\n            @update=\"query.to_user = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"page__searchdescription\"\r\n            :value=\"query.description\"\r\n            :parameters=\"{ placeholdert: 'Что нужно согласовать?', height: 30 }\"\r\n            @update=\"query.description = $event\"\r\n          />\r\n        </div>\r\n        <div class=\"page__statusrow statusrow\" v-if=\"selected_item_count > 0\">\r\n          <form-text-field\r\n            class=\"statusrow__info\"\r\n            :value=\"\r\n              '*** Выделено ' + selected_item_count.toString() + ' шт. ***'\r\n            \"\r\n          />\r\n        </div>\r\n        <div class=\"page__listrow listrow\" v-for=\"item in items\" :key=\"item\">\r\n          <form-text-field\r\n            class=\"listrow__error\"\r\n            :class=\"{ listrow__error_exist: item.total_count > 1 }\"\r\n            :value=\"item.total_count.toString()\"\r\n            :parameters=\"{\r\n              hint: 'Количество незавершенных согласований документа',\r\n            }\"\r\n          />\r\n          <form-text-field\r\n            class=\"listrow__error\"\r\n            :class=\"{ listrow__error_exist: item.errors.length > 0 }\"\r\n            :value=\"item.errors.length.toString()\"\r\n            :parameters=\"{ hint: 'Количество ошибок при валидации' }\"\r\n          />\r\n          <form-boolean-input\r\n            class=\"listrow__checkbox\"\r\n            :value=\"item.id in selected_item_ids\"\r\n            :parameters=\"{ size: 30 }\"\r\n            @click=\"handle_select_approval(item.id)\"\r\n          />\r\n          <form-text-field\r\n            class=\"listrow__type\"\r\n            :parameters=\"{ align: 'center' }\"\r\n            :value=\"item.type\"\r\n          />\r\n          <form-text-field\r\n            class=\"listrow__user\"\r\n            :parameters=\"{ align: 'center' }\"\r\n            :value=\"item.from_user\"\r\n          />\r\n          <form-text-field\r\n            class=\"listrow__user\"\r\n            :parameters=\"{ align: 'center' }\"\r\n            :value=\"item.to_user\"\r\n          />\r\n          <router-link class=\"listrow__href\" :to=\"item.route_obj\">\r\n            <form-text-field\r\n              class=\"listrow__description\"\r\n              :value=\"item.description\"\r\n            />\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, reactive, ref, watch } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../logic/service_layer/message_bus\";\r\nimport {\r\n  filterArrayOfObjects,\r\n  useBeforeEnterPage,\r\n  useGetDocumentsWaitingApproval,\r\n  useGetFolders,\r\n  useGetUserGroups,\r\n  useGetUsers,\r\n} from \"../logic/service_layer/use_modules\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport TextButton from \"../components/buttons/TextButton.vue\";\r\nimport FormFilteredSelectInput from \"../components/fields/FormFilteredSelectInput.vue\";\r\nimport FormTextField from \"../components/fields/FormTextField.vue\";\r\nimport FormTextInput from \"../components/fields/FormTextInput.vue\";\r\nimport FormBooleanInput from \"../components/fields/FormBooleanInput.vue\";\r\nimport {\r\n  AddDocumentModel,\r\n  AddDocumentToCart,\r\n  UpdateDocumentApproval,\r\n  DelegateDocumentApproval,\r\n  DownloadDocumentFilesAsArchive,\r\n  ValidateDocument,\r\n} from \"../logic/domain/command\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    FormTextField,\r\n    TextButton,\r\n    FormFilteredSelectInput,\r\n    FormTextInput,\r\n    FormBooleanInput,\r\n  },\r\n  name: \"ApprovalsPage\",\r\n  setup() {\r\n    const router = useRouter()\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const generate_doc_route_obj = (doc) => {\r\n      return {\r\n        name: \"DocumentPage\",\r\n        params: {\r\n          folder_id: doc.folder_id,\r\n          usergroup_id: doc.usergroup_id,\r\n          document_id: doc.id,\r\n        },\r\n      };\r\n    };\r\n\r\n    const convert_doc_approval_to_item = (approval) => {\r\n      return {\r\n        id: approval.id,\r\n        type: \"Документ\",\r\n        total_count: approval.active_approvals_count_of_document,\r\n        description:\r\n          approval.document.raw_description == \"\"\r\n            ? \"Нет описания. Пересохраните документ.\"\r\n            : approval.document.raw_description,\r\n        from_user:\r\n          approval.from_last_name +\r\n          \" \" +\r\n          approval.from_first_name +\r\n          \" (\" +\r\n          approval.from_username +\r\n          \")\",\r\n        to_user:\r\n          approval.to_last_name +\r\n          \" \" +\r\n          approval.to_first_name +\r\n          \" (\" +\r\n          approval.to_username +\r\n          \")\",\r\n        route_obj: generate_doc_route_obj(approval.document),\r\n        errors: approval.document.errors,\r\n        actions: {\r\n          add_to_cart: async () =>\r\n            await MessageBus.handle(\r\n              new AddDocumentToCart(\r\n                approval.document.folder_id,\r\n                approval.document.usergroup_id,\r\n                approval.document.id\r\n              ),\r\n              uow\r\n            ),\r\n          approve: async () => {\r\n            await MessageBus.handle(\r\n              new UpdateDocumentApproval(\r\n                approval.document.folder_id,\r\n                approval.document.usergroup_id,\r\n                approval.document.id,\r\n                approval.id,\r\n                \"APPROVED\",\r\n                \"\"\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          reject: async () => {\r\n            await MessageBus.handle(\r\n              new UpdateDocumentApproval(\r\n                approval.document.folder_id,\r\n                approval.document.usergroup_id,\r\n                approval.document.id,\r\n                approval.id,\r\n                \"REJECTED\",\r\n                \"\"\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          delegate_approval_with_return: async () =>\r\n            await MessageBus.handle(\r\n              new DelegateDocumentApproval(\r\n                approval.document.folder_id,\r\n                approval.document.usergroup_id,\r\n                approval.document.id,\r\n                approval.id,\r\n                approval_action_username.value,\r\n                true\r\n              ),\r\n              uow\r\n            ),\r\n          delegate_approval_without_return: async () =>\r\n            await MessageBus.handle(\r\n              new DelegateDocumentApproval(\r\n                approval.document.folder_id,\r\n                approval.document.usergroup_id,\r\n                approval.document.id,\r\n                approval.id,\r\n                approval_action_username.value,\r\n                false\r\n              ),\r\n              uow\r\n            ),\r\n          download_files_as_archive: async () =>\r\n            await MessageBus.handle(\r\n              new DownloadDocumentFilesAsArchive(\r\n                approval.document.folder_id,\r\n                approval.document.usergroup_id,\r\n                approval.document.id,\r\n                approval.document.files\r\n                  .map((x) => x.size)\r\n                  .reduce((a, b) => a + b, 0)\r\n              ),\r\n              uow\r\n            ),\r\n        },\r\n      };\r\n    };\r\n\r\n    const doc_approvals = computed(() =>\r\n      uow.waiting_doc_approval_repository\r\n        .values()\r\n        .map((obj) => convert_doc_approval_to_item(obj.value))\r\n    );\r\n\r\n    const query = reactive({\r\n      type: \"\",\r\n      from_user: \"\",\r\n      to_user: \"\",\r\n      description: \"\",\r\n    });\r\n\r\n    const filter_objs = (objs, query) =>\r\n      // false - не чувствителен к регистру\r\n      filterArrayOfObjects(objs, query, false).sort((a, b) =>\r\n        a.description.localeCompare(b.description)\r\n      );\r\n\r\n    const items = computed(() => filter_objs(doc_approvals.value, query));\r\n\r\n    // SELECTION\r\n    const selected_item_ids = ref({});\r\n    const selected_item_count = computed(\r\n      () =>\r\n        Object.values(selected_item_ids.value).filter((x) => x === true).length\r\n    );\r\n\r\n    const handle_select_approval = (id) => {\r\n      if (id in selected_item_ids.value)\r\n        selected_item_ids.value[id] = !selected_item_ids.value[id];\r\n      else selected_item_ids.value[id] = true;\r\n    };\r\n    const reset_selection = () => {\r\n      is_all_selected.value = false;\r\n      selected_item_ids.value = {};\r\n    };\r\n    watch(\r\n      () => doc_approvals.value,\r\n      () => reset_selection()\r\n    );\r\n\r\n    const is_all_selected = ref(false);\r\n    const handle_select_all_approvals = () => {\r\n      if (is_all_selected.value === true) {\r\n        reset_selection();\r\n        is_all_selected.value = false;\r\n      } else {\r\n        is_all_selected.value = true;\r\n        items.value.forEach(\r\n          (item) => (selected_item_ids.value[item.id] = true)\r\n        );\r\n      }\r\n    };\r\n\r\n    // USERS\r\n    const users = computed(() =>\r\n      uow.user_repository.values().map((e) => e.value)\r\n    );\r\n    const user_options = computed(() =>\r\n      [{ name: \"Выберите пользователя\", value: \"NOT_CHOSEN\" }].concat(\r\n        users.value\r\n          .filter((e) => e.is_active === true)\r\n          .map((e) => {\r\n            return {\r\n              name: (\r\n                e.last_name +\r\n                \" \" +\r\n                e.first_name +\r\n                \" (\" +\r\n                e.username +\r\n                \")\"\r\n              ).trim(),\r\n              value: e.username,\r\n            };\r\n          })\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      )\r\n    );\r\n\r\n    const approval_action_username = ref(\"NOT_CHOSEN\");\r\n    const is_approval_action_username_chosen = computed(\r\n      () => approval_action_username.value !== \"NOT_CHOSEN\"\r\n    );\r\n\r\n    // ACTION\r\n    const action_progress = ref(100);\r\n\r\n    const perform_action_on_selected_items = async (action_name) => {\r\n      action_progress.value = 0;\r\n      let actions_executed = 0;\r\n\r\n      const actions = items.value\r\n        .filter(\r\n          (item) =>\r\n            item.id.toString() in selected_item_ids.value &&\r\n            selected_item_ids.value[item.id.toString()] === true\r\n        )\r\n        .filter((item) => item.actions[action_name])\r\n        .map((item) => item.actions[action_name]);\r\n\r\n      // Отправляем по 30 запросов\r\n      let start = 0;\r\n      const size = 30;\r\n\r\n      while (start < actions.length) {\r\n        await Promise.all(\r\n          actions.slice(start, start + size).map(async (f) => {\r\n            await f();\r\n            actions_executed++;\r\n            action_progress.value = Math.round(\r\n              (actions_executed / actions.length) * 100\r\n            );\r\n          })\r\n        );\r\n\r\n        start += size;\r\n      }\r\n    };\r\n\r\n    // VALIDATION\r\n    const validation_progress = ref(100); // TODO\r\n\r\n    onMounted(async () => {\r\n      useBeforeEnterPage(uow, [\"can_get_folders\"]); // Пытаемся автоматически зaлогинится\r\n      await Promise.all([useGetFolders(uow), useGetUserGroups(uow)]);\r\n      await Promise.all([\r\n        useGetDocumentsWaitingApproval(uow),\r\n        useGetUsers(uow),\r\n      ]);\r\n\r\n      //  Валидация документов\r\n      const actions = uow.waiting_doc_approval_repository\r\n        .values()\r\n        .map((obj) => obj.value.document)\r\n        .map((doc) => {\r\n          const folder = uow.folder_repository.get(doc.folder_id); // Ref\r\n          folder.value.is_necessary_validate = true;\r\n          doc.description_pattern = folder.value.description_pattern;\r\n\r\n          return async () => {\r\n            await MessageBus.handle(\r\n              new AddDocumentModel(doc.folder_id, doc.usergroup_id, doc, false),\r\n              uow\r\n            );\r\n            await MessageBus.handle(\r\n              new ValidateDocument(doc.folder_id, doc.usergroup_id, doc.id),\r\n              uow\r\n            );\r\n          };\r\n        });\r\n\r\n      // Отправляем по 6 запросов\r\n      let start = 0;\r\n      const size = 6;\r\n\r\n      let actions_executed = 0;\r\n      while (start < actions.length) {\r\n        await Promise.all(\r\n          actions.slice(start, start + size).map(async (f) => {\r\n            await f();\r\n            actions_executed++;\r\n            validation_progress.value = Math.round(\r\n              (actions_executed / actions.length) * 100\r\n            );\r\n          })\r\n        );\r\n\r\n        start += size;\r\n      }\r\n    });\r\n\r\n    return {\r\n      router,\r\n      doc_approvals,\r\n      generate_doc_route_obj,\r\n      items,\r\n      query,\r\n\r\n      // SELECTION\r\n      selected_item_ids,\r\n      selected_item_count,\r\n      handle_select_approval,\r\n      reset_selection,\r\n      is_all_selected,\r\n      handle_select_all_approvals,\r\n\r\n      // USERS\r\n      users,\r\n      user_options,\r\n      approval_action_username,\r\n      is_approval_action_username_chosen,\r\n\r\n      // ACTION\r\n      action_progress,\r\n      perform_action_on_selected_items,\r\n\r\n      // VALIDATION\r\n      validation_progress,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__header {\r\n  display: flex;\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__searchcontainer {\r\n  display: flex;\r\n  flex-grow: 1;\r\n  flex-direction: column;\r\n}\r\n\r\n.page__buttonrow {\r\n  display: flex;\r\n}\r\n\r\n.buttonrow__button {\r\n  padding: 3px;\r\n}\r\n\r\n.buttonrow__button_left {\r\n  margin-left: 60px;\r\n}\r\n\r\n.buttonrow__button_selectuser {\r\n  max-width: 400px;\r\n}\r\n\r\n.buttonrow__button_search {\r\n  margin-left: 50px;\r\n}\r\n\r\n.page__searchblock {\r\n  display: flex;\r\n}\r\n\r\n.listrow {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  min-height: 33px;\r\n}\r\n\r\n.page__checkboxbutton {\r\n  margin-left: 60px;\r\n}\r\n\r\n.page__checkboxbutton,\r\n.listrow__checkbox {\r\n  padding: 3px;\r\n}\r\n\r\n.listrow__error {\r\n  min-width: 30px;\r\n  font-weight: bold;\r\n  color: green;\r\n  cursor: pointer;\r\n}\r\n\r\n.listrow__error_exist {\r\n  color: red;\r\n}\r\n\r\n.page__searchtype,\r\n.listrow__type {\r\n  min-width: 150px;\r\n  width: 150px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__searchdescription,\r\n.listrow__description {\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n}\r\n\r\n.page__searchuser,\r\n.listrow__user {\r\n  min-width: 400px;\r\n  width: 400px;\r\n  padding: 3px;\r\n}\r\n\r\n.statusrow {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 3px;\r\n}\r\n\r\n.statusrow__info {\r\n  color: red;\r\n}\r\n</style>\r\n            ","import { render } from \"./ApprovalsPage.vue?vue&type=template&id=6c22ea89&scoped=true\"\nimport script from \"./ApprovalsPage.vue?vue&type=script&lang=js\"\nexport * from \"./ApprovalsPage.vue?vue&type=script&lang=js\"\n\nimport \"./ApprovalsPage.vue?vue&type=style&index=0&id=6c22ea89&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c22ea89\"]])\n\nexport default __exports__","<template>\r\n  <div>\r\n    <div class=\"page\" v-if=\"folder_name\">\r\n      <div class=\"page__header\">\r\n        <span\r\n          class=\"page__linkbutton\"\r\n          @click=\"handle_copy_link_to_document_into_clipboard\"\r\n          >&#128279;\r\n        </span>\r\n        <heading-component\r\n          :text=\"usergroup_name + ' > ' + folder_name\"\r\n          size=\"middle\"\r\n        />\r\n      </div>\r\n      <div class=\"page__container\" v-if=\"doc\">\r\n        <div class=\"page__doccontainer\">\r\n          <div class=\"page__docbuttonblock docbuttonblock\">\r\n            <toggle-text-button\r\n              v-if=\"\r\n                !doc.is_blocked &&\r\n                doc.is_saved &&\r\n                are_files_saved &&\r\n                can_change_doc\r\n              \"\r\n              class=\"docbuttonblock__button\"\r\n              activeTitle=\"Режим просмотра\"\r\n              passiveTitle=\"Режим редактирования\"\r\n              :isActive=\"is_edit_mode\"\r\n              @click=\"is_edit_mode = !is_edit_mode\"\r\n            />\r\n            <div v-if=\"doc.is_blocked\" class=\"docbuttonblock__lockicon\" />\r\n            <form-text-field\r\n              v-if=\"doc.is_blocked\"\r\n              class=\"docbuttonblock__locktext\"\r\n              value=\"Документ заблокирован\"\r\n            />\r\n            <text-button\r\n              class=\"docbuttonblock__button docbuttonblock__button_red\"\r\n              v-if=\"!doc.is_saved && can_change_doc\"\r\n              title=\"Сохранить изменения\"\r\n              @click=\"handle_save_document()\"\r\n            />\r\n            <text-button\r\n              class=\"docbuttonblock__button\"\r\n              v-if=\"doc.files.length > 0\"\r\n              title=\"Скачать все файлы\"\r\n              @click=\"handle_download_all_files()\"\r\n            />\r\n            <div class=\"docbuttonblock__grow\"></div>\r\n            <div\r\n              v-if=\"form_schema\"\r\n              class=\"docbuttonblock__linktoform\"\r\n              title=\"Открыть форму\"\r\n              @click=\"is_form_opened = true\"\r\n            >\r\n              &#9998;\r\n            </div>\r\n          </div>\r\n          <document-page-download-progress-row\r\n            class=\"page__filedownloadblock\"\r\n            :files=\"downloading_files\"\r\n          />\r\n          <document-page-download-progress-row\r\n            class=\"page__filedownloadblock\"\r\n            :files=\"uploading_files\"\r\n          />\r\n          <div class=\"page__docattributeblock\">\r\n            <document-attribute-block\r\n              :id=\"doc.id\"\r\n              :search_schema=\"search_schema\"\r\n              :attributes=\"\r\n                is_edit_mode === true ? doc.raw_attributes : doc.attributes\r\n              \"\r\n              :is_edit_mode=\"is_edit_mode\"\r\n              :is_highlighted=\"!doc.is_saved\"\r\n              :is_disabled=\"doc.is_blocked\"\r\n              @update:doc=\"\r\n                handle_update_doc_attribute(\r\n                  $event.id,\r\n                  $event.name,\r\n                  $event.value\r\n                )\r\n              \"\r\n            />\r\n          </div>\r\n          <file-drop-zone\r\n            v-if=\"is_edit_mode && can_change_doc\"\r\n            class=\"page__docfiledropzone\"\r\n            :class=\"{\r\n              page__docfiledropzone_dragging: is_drag_above_doc_file_zone,\r\n            }\"\r\n            @add:file=\"handle_document_file_drop($event)\"\r\n            @update:dragging=\"is_drag_above_doc_file_zone = $event\"\r\n          >\r\n            <span\r\n              v-if=\"!is_drag_above_doc_file_zone\"\r\n              class=\"page__docfiledropzonetitle\"\r\n            >\r\n              &lt; {{ doc_max_file_size }} МБ</span\r\n            >\r\n          </file-drop-zone>\r\n          <file-list\r\n            v-if=\"can_view_file\"\r\n            class=\"page__docfileblock\"\r\n            :files=\"doc.files\"\r\n            :can_be_dragged=\"false\"\r\n            :can_be_deleted=\"is_edit_mode\"\r\n            :can_be_renamed=\"is_edit_mode\"\r\n            @download:file=\"handle_download_file(...$event)\"\r\n            @rename:file=\"handle_rename_file(...$event)\"\r\n            @rename:activated=\"handle_rename_file_activated($event)\"\r\n            @delete:file=\"detach_file_from_document(doc, $event)\"\r\n            @copy_link_to:file=\"\r\n              handle_copy_link_to_document_file_into_clipboard($event)\r\n            \"\r\n          />\r\n          <div class=\"page__docerrorblock docerrorblock\">\r\n            <form-text-field\r\n              class=\"container__header\"\r\n              value=\"Результаты проверки правильности документа:\"\r\n            />\r\n            <document-errors-row\r\n              v-if=\"doc.errors.length > 0\"\r\n              class=\"docerrorblock__errors\"\r\n              :errors=\"doc.errors\"\r\n            />\r\n            <form-text-field\r\n              v-else\r\n              class=\"docerrorblock__noerrors\"\r\n              value=\"OK\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"page__copycontainer copycontainer\"\r\n            v-if=\"copy_list_usergroups.length > 0\"\r\n          >\r\n            <form-text-field\r\n              class=\"container__header\"\r\n              value=\"Действия над документом:\"\r\n            />\r\n            <div class=\"copycontainer__row\" v-if=\"!doc.is_blocked\">\r\n              <btn-component\r\n                class=\"copycontainer__button\"\r\n                type=\"warning\"\r\n                :disabled=\"\r\n                  get_seconds_before_button_copy_to_usergroup_activated() > 0\r\n                \"\r\n                :caption=\"\r\n                  get_text_of_action_button(\r\n                    'Копировать в группу',\r\n                    COPY_TO_USERGROUP_ACTION\r\n                  )\r\n                \"\r\n                @click=\"handle_copy_list_change_usergroup()\"\r\n              />\r\n              <form-select-input\r\n                class=\"copycontainer__usergroupselect\"\r\n                :parameters=\"{\r\n                  options: copy_list_usergroups,\r\n                }\"\r\n                :value=\"copy_list_usergroup_id.toString()\"\r\n                @update=\"copy_list_usergroup_id = parseInt($event)\"\r\n              />\r\n            </div>\r\n            <div class=\"copycontainer__row\" v-else>\r\n              <form-text-field class=\"copycontainer__text\" value=\"Пусто\" />\r\n            </div>\r\n            <div class=\"copycontainer__row\">\r\n              <div class=\"copycontainer__links\">\r\n                <router-link\r\n                  v-for=\"cloned_doc in doc.clones\"\r\n                  :key=\"cloned_doc.id\"\r\n                  class=\"copycontainer__cloneref\"\r\n                  :to=\"generate_doc_link(cloned_doc.id)\"\r\n                  >Созданная копия документа\r\n                </router-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            class=\"page__actioncontainer actioncontainer\"\r\n            v-if=\"action_buttons.length > 0\"\r\n          >\r\n            <btn-component\r\n              class=\"actioncontainer__button\"\r\n              v-for=\"(button, index) in action_buttons\"\r\n              :key=\"index\"\r\n              :type=\"button.type || 'primary'\"\r\n              :disabled=\"\r\n                is_action_button_disabled(button) ||\r\n                get_seconds_before_button_activated(button.action) > 0\r\n              \"\r\n              :caption=\"\r\n                get_text_of_action_button(button.caption, button.action)\r\n              \"\r\n              @click=\"handle_push_document_button(button.action)\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div\r\n          class=\"page__approvalcontainer\"\r\n          v-if=\"can_view_approval && !is_edit_mode\"\r\n        >\r\n          <form-text-field class=\"container__header\" value=\"Согласования:\" />\r\n          <div class=\"page__approvalorderblock approvalorderblock\">\r\n            <form-filtered-select-input\r\n              v-if=\"can_add_approval || can_delegate_approval\"\r\n              class=\"approvalorderblock__input\"\r\n              :parameters=\"{\r\n                placeholder: 'Поиск...',\r\n                size: 3,\r\n                options: user_options,\r\n              }\"\r\n              :value=\"approval_action_username\"\r\n              @update=\"approval_action_username = $event\"\r\n            />\r\n            <btn-component\r\n              v-if=\"can_add_approval\"\r\n              class=\"approvalorderblock__button\"\r\n              type=\"primary\"\r\n              caption=\"Запросить согласование\"\r\n              :disabled=\"is_approval_action_username_chosen === false\"\r\n              @click=\"handle_add_document_approval()\"\r\n            />\r\n            <btn-component\r\n              v-if=\"\r\n                can_delegate_approval &&\r\n                approvals_to_be_closed_ids &&\r\n                approvals_to_be_closed_ids.length == 1 &&\r\n                has_right_to_delegate_with_return\r\n              \"\r\n              class=\"approvalorderblock__button\"\r\n              type=\"success\"\r\n              caption=\"Делегировать с возвратом\"\r\n              :disabled=\"is_approval_action_username_chosen === false\"\r\n              title=\"Назначить согласование другому пользователю и оставить свое активным\"\r\n              @click=\"handle_delegate_document_approval(true)\"\r\n            />\r\n            <btn-component\r\n              v-if=\"\r\n                can_delegate_approval &&\r\n                approvals_to_be_closed_ids &&\r\n                approvals_to_be_closed_ids.length == 1 &&\r\n                has_right_to_delegate_without_return\r\n              \"\r\n              class=\"approvalorderblock__button\"\r\n              type=\"warning\"\r\n              caption=\"Делегировать без возвратa\"\r\n              :disabled=\"is_approval_action_username_chosen === false\"\r\n              title=\"Назначить согласование другому пользователю, а свое закрыть\"\r\n              @click=\"handle_delegate_document_approval(false)\"\r\n            />\r\n          </div>\r\n          <div\r\n            class=\"page__approvalactionblock\"\r\n            v-if=\"can_change_approval && approvals_to_be_closed_ids !== null\"\r\n          >\r\n            <div class=\"page__approvalbuttonblock approvalbuttonblock\">\r\n              <btn-component\r\n                v-if=\"has_right_to_approve\"\r\n                class=\"approvalbuttonblock__button\"\r\n                type=\"success\"\r\n                caption=\"Согласовать\"\r\n                @click=\"handle_approve_document()\"\r\n              />\r\n              <btn-component\r\n                v-if=\"has_right_to_reject\"\r\n                class=\"approvalbuttonblock__button\"\r\n                type=\"danger\"\r\n                caption=\"Отклонить\"\r\n                @click=\"handle_reject_document()\"\r\n              />\r\n            </div>\r\n            <div class=\"page__approvaldropblock approvaldropblock\">\r\n              <form-text-field\r\n                class=\"approvaldropblock__label\"\r\n                value=\"Напишите здесь (картинки вставляйте, как файлы) или перетащите файлы с комментариями. Данное текстовое поле для коротких комментариев. Если Вам приходится оформлять комментарий в отдельном файле, а потом сюда вставлять, это неправильно. Просто перетащите сюда этот файл.\"\r\n                :parameters=\"{ align: 'justify' }\"\r\n              />\r\n              <file-drop-zone\r\n                class=\"approvaldropblock__filedropzone\"\r\n                :class=\"{\r\n                  approvaldropblock__filedropzone_dragging:\r\n                    is_drag_above_approval_file_zone,\r\n                }\"\r\n                :filename_pattern=\"approval_filename_pattern\"\r\n                @add:file=\"handle_document_approval_file_drop($event)\"\r\n                @update:dragging=\"is_drag_above_approval_file_zone = $event\"\r\n                @wrong:filename=\"\r\n                  handle_document_approval_filename_wrong($event)\r\n                \"\r\n              >\r\n                <div\r\n                  v-show=\"!is_drag_above_approval_file_zone\"\r\n                  id=\"approvaldropblock__textzone\"\r\n                  class=\"approvaldropblock__dropzonetitle\"\r\n                  contenteditable=\"true\"\r\n                  @input=\"text_comments = $event.target.innerHTML\"\r\n                  @paste=\"handle_paste($event)\"\r\n                />\r\n              </file-drop-zone>\r\n            </div>\r\n            <div class=\"page__approvalfileblock approvalfileblock\">\r\n              <file-block\r\n                class=\"approvalfileblock__file\"\r\n                v-for=\"file in document_approval_files\"\r\n                :key=\"file.id\"\r\n                :file=\"file\"\r\n                :can_be_deleted=\"true\"\r\n                :can_be_dragged=\"false\"\r\n                @download:file=\"handle_download_file(file, $event)\"\r\n                @delete:file=\"handle_delete_document_approval_file(file.id)\"\r\n                @copy_link_to:file=\"\r\n                  handle_copy_link_to_document_file_into_clipboard(file)\r\n                \"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div\r\n            v-if=\"\r\n              approvals_after_last_update.length > 0 ||\r\n              approvals_before_last_update.length > 0\r\n            \"\r\n            class=\"page__approvalitemsblock\"\r\n          >\r\n            <approval-row\r\n              class=\"page__approvalitem\"\r\n              v-for=\"obj in approvals_after_last_update\"\r\n              :key=\"obj.id\"\r\n              :obj=\"obj\"\r\n              :can_be_deleted=\"\r\n                can_delete_approval &&\r\n                approval_ids_can_be_deleted.includes(obj.id)\r\n              \"\r\n              @delete:approval=\"handle_delete_document_approval(obj.id)\"\r\n              @download:file=\"handle_download_file(...$event)\"\r\n              @delete:file=\"handle_delete_document_approval_file($event)\"\r\n              @copy_link_to:file=\"\r\n                handle_copy_link_to_document_file_into_clipboard($event)\r\n              \"\r\n            />\r\n            <form-text-field\r\n              class=\"page__approvallastupdatetext\"\r\n              :value=\"\r\n                'Последнее обновление документа ' +\r\n                convertDateToDateTimeString(doc.updated_at)\r\n              \"\r\n            />\r\n            <approval-row\r\n              class=\"page__approvalitem\"\r\n              v-for=\"obj in approvals_before_last_update\"\r\n              :key=\"obj.id\"\r\n              :obj=\"obj\"\r\n              :can_be_deleted=\"\r\n                can_delete_approval &&\r\n                approval_ids_can_be_deleted.includes(obj.id)\r\n              \"\r\n              @delete:approval=\"handle_delete_document_approval(obj.id)\"\r\n              @download:file=\"handle_download_file(...$event)\"\r\n              @delete:file=\"handle_delete_document_approval_file($event)\"\r\n              @copy_link_to:file=\"\r\n                handle_copy_link_to_document_file_into_clipboard($event)\r\n              \"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          v-if=\"can_view_approvalflow && !is_edit_mode\"\r\n          class=\"page__approvalflowcontainer\"\r\n        >\r\n          <form-text-field\r\n            class=\"container__header\"\r\n            value=\"Поток согласований:\"\r\n          />\r\n          <text-button\r\n            class=\"approvalflowcontainer__createbutton\"\r\n            v-if=\"!approval_flow && can_change_approvalflow\"\r\n            title=\"Создать поток\"\r\n            @click=\"handle_create_approval_flow()\"\r\n          />\r\n          <approval-flow\r\n            v-if=\"approval_flow\"\r\n            class=\"approvalflowcontainer__flow\"\r\n            :is_active=\"approval_flow.is_active\"\r\n            :is_saved=\"approval_flow.is_saved\"\r\n            :success=\"approval_flow.success\"\r\n            :created_at=\"approval_flow.created_at\"\r\n            :updated_at=\"approval_flow.updated_at\"\r\n            :steps=\"approval_flow.steps\"\r\n            :states=\"approval_flow_states\"\r\n            :users=\"users\"\r\n            :can_be_modified=\"can_change_approvalflow\"\r\n            @add:step=\"handle_add_approval_flow_step()\"\r\n            @delete:step=\"handle_delete_approval_flow_step($event)\"\r\n            @attach:user=\"handle_attach_user_to_approval_flow_step(...$event)\"\r\n            @delete:user=\"handle_delete_user_from_approval_flow_step(...$event)\"\r\n            @save=\"handle_save_approval_flow()\"\r\n            @start=\"handle_start_approval_flow()\"\r\n            @stop=\"handle_stop_approval_flow()\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"page__form-backdrop\"\r\n        v-if=\"doc && is_form_opened && form_pages\"\r\n      >\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"\r\n            is_edit_mode === true ? doc.raw_attributes : doc.attributes\r\n          \"\r\n          :settings=\"form_pages\"\r\n          :context=\"form_context\"\r\n          @update=\"\r\n            handle_update_doc_attribute(doc.id, $event.name, $event.value)\r\n          \"\r\n          @close=\"is_form_opened = false\"\r\n        >\r\n        </base-form>\r\n      </div>\r\n    </div>\r\n    <div class=\"page\" v-else>\r\n      <div class=\"page__header\">\r\n        <heading-component\r\n          text=\"..невозможно загрузить данные..\"\r\n          size=\"small\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { onMounted, computed, onBeforeUnmount, ref, watch } from \"vue\";\r\nimport { useRoute, useRouter } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../logic/service_layer/message_bus\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetUsers,\r\n  useGetFolders,\r\n  useGetUserSearchSchema,\r\n  useGetDocument,\r\n  useGetContext,\r\n  useValidateDocument,\r\n  useValidateIntOr404,\r\n  useGetUserGroups,\r\n  useGetDocumentApprovalsWithSpareFiles,\r\n  useGetDocumentApprovalFlow,\r\n  convertDateToDateTimeString,\r\n  generate_states_obj_from_approvals,\r\n} from \"../logic/service_layer/use_modules\";\r\nimport BtnComponent from \"../components/buttons/BtnComponent.vue\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport TextButton from \"../components/buttons/TextButton.vue\";\r\nimport ToggleTextButton from \"../components/buttons/ToggleTextButton.vue\";\r\nimport DocumentErrorsRow from \"../components/document/DocumentErrorsRow.vue\";\r\nimport DocumentAttributeBlock from \"../components/document/DocumentAttributeBlock.vue\";\r\nimport FileList from \"../components/file/FileList.vue\";\r\nimport FileBlock from \"../components/file/FileBlock.vue\";\r\nimport FileDropZone from \"../components/file/FileDropZone.vue\";\r\nimport DocumentPageDownloadProgressRow from \"../components/document/DocumentPageDownloadProgressRow.vue\";\r\nimport ApprovalRow from \"../components/approval/ApprovalRow.vue\";\r\nimport ApprovalFlow from \"../components/approval/ApprovalFlow.vue\";\r\nimport FormTextField from \"../components/fields/FormTextField.vue\";\r\nimport FormSelectInput from \"../components/fields/FormSelectInput.vue\";\r\nimport FormFilteredSelectInput from \"../components/fields/FormFilteredSelectInput.vue\";\r\nimport BaseForm from \"../components/forms/BaseForm.vue\";\r\nimport {\r\n  SetDocumentAttribute,\r\n  SaveDocumentsInFolder,\r\n  DownloadFileFromFolder,\r\n  AddDocumentApproval,\r\n  UpdateDocumentApproval,\r\n  DeleteDocumentApproval,\r\n  DelegateDocumentApproval,\r\n  UploadDocumentApprovalFile,\r\n  DeleteDocumentApprovalFile,\r\n  DuplicateDocumentToUsergroup,\r\n  DownloadDocumentFilesAsArchive,\r\n  UploadFileToFolder,\r\n  AttachFileToDocument,\r\n  DetachFileFromDocument,\r\n  PushDocumentButton,\r\n  UpdateFileFromFolder,\r\n  CreateDocumentApprovalFlow,\r\n  AddDocumentApprovalFlowStep,\r\n  DeleteDocumentApprovalFlowStep,\r\n  AttachUserToDocumentApprovalFlowStep,\r\n  DeleteUserFromDocumentApprovalFlowStep,\r\n  SetDocumentApprovalFlow,\r\n  StartDocumentApprovalFlow,\r\n  StopDocumentApprovalFlow,\r\n  UpdateUploadProgress,\r\n} from \"../logic/domain/command\";\r\n\r\nimport {\r\n  DocumentLinkCopied,\r\n  FileLinkCopied,\r\n  UploadEmptyFileError,\r\n  UploadFileTooBigError,\r\n  UploadFileWrongFilenameError,\r\n} from \"../logic/domain/event\";\r\n\r\nexport default {\r\n  components: {\r\n    BtnComponent,\r\n    HeadingComponent,\r\n    TextButton,\r\n    ToggleTextButton,\r\n    DocumentErrorsRow,\r\n    DocumentAttributeBlock,\r\n    FileList,\r\n    FileBlock,\r\n    FileDropZone,\r\n    DocumentPageDownloadProgressRow,\r\n    ApprovalRow,\r\n    ApprovalFlow,\r\n    FormTextField,\r\n    FormSelectInput,\r\n    FormFilteredSelectInput,\r\n    BaseForm,\r\n  },\r\n  name: \"DocumentPage\",\r\n  setup() {\r\n    const route = useRoute();\r\n    const router = useRouter();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const route_full_path = route.fullPath;\r\n\r\n    // PARAMS\r\n    const usergroup_id = useValidateIntOr404(route.params.usergroup_id);\r\n    const folder_id = useValidateIntOr404(route.params.folder_id);\r\n    const document_id = route.params.document_id;\r\n\r\n    // USER\r\n    const user = uow.user_repository.get_current();\r\n    const users = computed(() =>\r\n      uow.user_repository\r\n        .values()\r\n        .map((e) => e.value)\r\n        .filter((e) => e.is_active === true)\r\n    );\r\n    const user_options = computed(() =>\r\n      [{ name: \"Выберите пользователя\", value: \"NOT_CHOSEN\" }].concat(\r\n        users.value\r\n          .map((e) => {\r\n            return {\r\n              name: (\r\n                e.last_name +\r\n                \" \" +\r\n                e.first_name +\r\n                \" (\" +\r\n                e.username +\r\n                \")\"\r\n              ).trim(),\r\n              value: e.username,\r\n            };\r\n          })\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      )\r\n    );\r\n\r\n    const approval_action_username = ref(\"NOT_CHOSEN\");\r\n    const is_approval_action_username_chosen = computed(\r\n      () => approval_action_username.value !== \"NOT_CHOSEN\"\r\n    );\r\n\r\n    // FOLDER\r\n    const folder = uow.folder_repository.get(folder_id); // Ref\r\n\r\n    const folder_name = computed(() =>\r\n      folder.value === null ? \"\" : folder.value.name\r\n    );\r\n\r\n    const search_schema = computed(() =>\r\n      folder.value === null ? [] : folder.value.search_schema\r\n    );\r\n\r\n    const form_schema = computed(() => folder.value.form_schema);\r\n    const form_pages = computed(() => {\r\n      if (!form_schema.value) return {};\r\n\r\n      return form_schema.value.pages.map((e) => {\r\n        return {\r\n          size: e.size,\r\n          name: e.name,\r\n          fields: e.fields[is_edit_mode.value ? \"edit_mode\" : \"read_mode\"],\r\n        };\r\n      });\r\n    });\r\n\r\n    // USERGROUP\r\n    const usergroup = uow.usergroup_repository.get(usergroup_id);\r\n\r\n    const usergroup_name = computed(() =>\r\n      usergroup.value === null ? \"\" : usergroup.value.name\r\n    );\r\n\r\n    const copy_list_usergroups = computed(() => {\r\n      let arr = uow.usergroup_repository\r\n        .values()\r\n        .filter(\r\n          (obj) =>\r\n            obj.value.id != usergroup.value.id &&\r\n            (!obj.value.is_private ||\r\n              obj.value.has_username(user.value.username))\r\n        )\r\n        .map((obj) => {\r\n          return {\r\n            id: obj.value.id,\r\n            name: obj.value.name,\r\n            value: obj.value.id.toString(),\r\n          };\r\n        });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const copy_list_usergroup_id = ref(0);\r\n\r\n    // Следим за изменениями groups, изменяем group_id соответственно\r\n    watch(copy_list_usergroups, (newValue) => {\r\n      if (copy_list_usergroup_id.value === 0 && newValue.length > 0) {\r\n        copy_list_usergroup_id.value = newValue[0].id;\r\n      }\r\n    });\r\n\r\n    const handle_copy_list_change_usergroup = () => {\r\n      MessageBus.handle(\r\n        new DuplicateDocumentToUsergroup(\r\n          folder_id,\r\n          usergroup_id,\r\n          copy_list_usergroup_id.value,\r\n          document_id\r\n        ),\r\n        uow\r\n      );\r\n      set_seconds_before_button_copy_to_usergroup_activated(10);\r\n    };\r\n\r\n    // DOCUMENT\r\n    const doc = uow.doc_repository.get(folder_id, document_id); // Ref\r\n    const is_edit_mode = ref(false);\r\n\r\n    watch(doc, (newValue) => {\r\n      if (!newValue || newValue.is_blocked === true) is_edit_mode.value = false;\r\n    });\r\n\r\n    const handle_update_doc_attribute = (doc_id, name, value) => {\r\n      // Если аттрибут может быть закодирован, значит он правильный, отправляем его в Документ\r\n      // Если аттрибут = '' - не может быть закодирован, он не правильный\r\n      // Отправляем введенное значение в Документ, но разкодировка не требуется\r\n      MessageBus.handle(\r\n        new SetDocumentAttribute(folder_id, usergroup_id, doc_id, name, value),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_save_document = async () => {\r\n      await MessageBus.handle(\r\n        new SaveDocumentsInFolder(folder_id, usergroup_id),\r\n        uow\r\n      );\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n    };\r\n\r\n    const handle_download_file = async (file, inline) => {\r\n      const message = new DownloadFileFromFolder(\r\n        folder_id,\r\n        usergroup_id,\r\n        file.id,\r\n        file.name,\r\n        file.size,\r\n        inline\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const handle_rename_file = async (file_id, filename) => {\r\n      const message = new UpdateFileFromFolder(\r\n        folder_id,\r\n        usergroup_id,\r\n        file_id,\r\n        filename\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n      delete file_ids_are_being_renamed.value[file_id];\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n    };\r\n\r\n    const file_ids_are_being_renamed = ref({});\r\n    const are_files_saved = computed(\r\n      () => Object.keys(file_ids_are_being_renamed.value).length == 0\r\n    );\r\n\r\n    const handle_rename_file_activated = (file_id) => {\r\n      file_ids_are_being_renamed.value[file_id] = true;\r\n    };\r\n\r\n    const handle_copy_link_to_document_into_clipboard = () => {\r\n      navigator.clipboard\r\n        .writeText(window.location.href)\r\n        .then(() => MessageBus.handle(new DocumentLinkCopied(), uow));\r\n    };\r\n\r\n    const handle_copy_link_to_document_file_into_clipboard = (file) => {\r\n      const props = router.resolve({\r\n        name: \"DownloadFileFromFolderPage\",\r\n        params: {\r\n          folder_id: folder_id,\r\n          usergroup_id: usergroup_id,\r\n          file_id: file.id,\r\n        },\r\n      });\r\n\r\n      navigator.clipboard\r\n        .writeText(window.location.origin + props.href)\r\n        .then(() => MessageBus.handle(new FileLinkCopied(), uow));\r\n    };\r\n\r\n    const generate_doc_link = (doc_id) => {\r\n      return {\r\n        name: \"DocumentPage\",\r\n        params: {\r\n          folder_id: folder_id,\r\n          usergroup_id: copy_list_usergroup_id.value,\r\n          document_id: doc_id,\r\n        },\r\n      };\r\n    };\r\n\r\n    // DRAGGING\r\n    const is_drag_above_doc_file_zone = ref(false);\r\n    const is_drag_above_approval_file_zone = ref(false);\r\n\r\n    // FILES\r\n    const approval_max_file_size = 64; // MB\r\n\r\n    const uploading_files = computed(() =>\r\n      uow.file_in_folder_repository\r\n        .values(folder_id)\r\n        .map((obj) => obj.value)\r\n        .filter((file) => !file.uploaded)\r\n    );\r\n\r\n    const downloading_files = computed(() =>\r\n      uow.download_progress.values().map((obj) => obj.value)\r\n    );\r\n\r\n    const handle_document_approval_file_drop = async (file) => {\r\n      let message = null;\r\n      if (file.size === 0) {\r\n        message = new UploadEmptyFileError(file.name);\r\n      } else if (file.size > approval_max_file_size * 1024 * 1024) {\r\n        message = new UploadFileTooBigError(file.name);\r\n      } else {\r\n        message = new UploadDocumentApprovalFile(\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id,\r\n          uuidv4(),\r\n          file\r\n        );\r\n      }\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const handle_document_approval_filename_wrong = async (filename) =>\r\n      await MessageBus.handle(new UploadFileWrongFilenameError(filename), uow);\r\n\r\n    const handle_delete_document_approval_file = async (file_id) => {\r\n      await MessageBus.handle(\r\n        new DeleteDocumentApprovalFile(\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id,\r\n          file_id\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const document_approval_files = computed(() =>\r\n      uow.doc_approval_file_repository.values().map((obj) => obj.value)\r\n    );\r\n\r\n    const handle_download_all_files = async () => {\r\n      await MessageBus.handle(\r\n        new DownloadDocumentFilesAsArchive(\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id,\r\n          doc.value.files.map((x) => x.size).reduce((a, b) => a + b, 0)\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const doc_max_file_size = computed(() =>\r\n      folder.value === null ? 0 : folder.value.max_file_size\r\n    );\r\n\r\n    const handle_document_file_drop = async (file) => {\r\n      if (!doc.is_blocked) {\r\n        if (file.size === 0) {\r\n          MessageBus.handle(new UploadEmptyFileError(file.name), uow);\r\n          return;\r\n        }\r\n        if (file.size > doc_max_file_size.value * 1024 * 1024) {\r\n          MessageBus.handle(new UploadFileTooBigError(file.name), uow);\r\n          return;\r\n        }\r\n\r\n        const file_id = uuidv4();\r\n\r\n        const message = new UploadFileToFolder(\r\n          folder_id,\r\n          usergroup_id,\r\n          file_id,\r\n          file\r\n        );\r\n\r\n        await MessageBus.handle(message, uow);\r\n\r\n        await MessageBus.handle(\r\n          new AttachFileToDocument(\r\n            folder_id,\r\n            usergroup_id,\r\n            document_id,\r\n            file_id\r\n          ),\r\n          uow\r\n        );\r\n      }\r\n    };\r\n\r\n    const detach_file_from_document = (doc, file_id) => {\r\n      if (!doc.is_blocked) {\r\n        MessageBus.handle(\r\n          new DetachFileFromDocument(folder_id, usergroup_id, doc.id, file_id),\r\n          uow\r\n        );\r\n      }\r\n    };\r\n\r\n    // APPROVAL\r\n    const text_comments = ref(\"\");\r\n\r\n    const approvals = computed(() => {\r\n      let arr = uow.doc_approval_repository\r\n        .values(doc.value.id)\r\n        .map((obj) => obj.value);\r\n      arr.sort((a, b) => b.updated_at - a.updated_at);\r\n      return arr;\r\n    });\r\n\r\n    const approvals_before_last_update = computed(() =>\r\n      approvals.value\r\n        .filter((obj) => obj.updated_at <= doc.value.updated_at)\r\n        .sort((a, b) => b.updated_at - a.updated_at)\r\n    );\r\n\r\n    const approvals_after_last_update = computed(() =>\r\n      approvals.value\r\n        .filter((obj) => obj.updated_at > doc.value.updated_at)\r\n        .sort((a, b) => b.updated_at - a.updated_at)\r\n    );\r\n\r\n    const approval_ids_can_be_deleted = computed(() => {\r\n      return approvals.value\r\n        .filter((obj) => {\r\n          // Если согласование не закрыто\r\n          // Если данный пользователь запросил согласование либо должен согласовать\r\n          if (\r\n            obj.state === \"NONE\" &&\r\n            (user.value.username === obj.from_username ||\r\n              user.value.username === obj.to_username)\r\n          )\r\n            return true;\r\n          return false;\r\n        })\r\n        .map((obj) => obj.id);\r\n    });\r\n\r\n    const approvals_to_be_closed_ids = computed(() => {\r\n      const to_be_closed = approvals.value\r\n        .filter(\r\n          (obj) =>\r\n            obj.state === \"NONE\" && obj.to_username === user.value.username\r\n        )\r\n        .map((obj) => obj.id);\r\n      return to_be_closed.length === 0 ? null : to_be_closed;\r\n    });\r\n\r\n    const handle_paste = (e) => {\r\n      e.stopPropagation();\r\n      e.preventDefault();\r\n\r\n      const clipboardData = e.clipboardData || window.clipboardData;\r\n      insert_text_in_editable(clipboardData.getData(\"Text\"));\r\n    };\r\n\r\n    const insert_text_in_editable = (text) => {\r\n      if (window.getSelection) {\r\n        const sel = window.getSelection();\r\n        if (sel.getRangeAt && sel.rangeCount) {\r\n          const range = sel.getRangeAt(0);\r\n          range.deleteContents();\r\n          range.insertNode(document.createTextNode(text));\r\n        }\r\n      } else if (document.selection && document.selection.createRange) {\r\n        document.selection.createRange().text = text;\r\n      }\r\n\r\n      const DOM_elem_with_text = document.getElementById(\r\n        \"approvaldropblock__textzone\"\r\n      );\r\n      text_comments.value = DOM_elem_with_text.textContent;\r\n    };\r\n\r\n    const handle_add_document_approval = async () => {\r\n      await MessageBus.handle(\r\n        new AddDocumentApproval(\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id,\r\n          approval_action_username.value\r\n        ),\r\n        uow\r\n      );\r\n      await useGetDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n    };\r\n\r\n    const handle_delete_document_approval = async (approval_id) => {\r\n      await MessageBus.handle(\r\n        new DeleteDocumentApproval(\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id,\r\n          approval_id\r\n        ),\r\n        uow\r\n      );\r\n      await useGetDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useGetDocumentApprovalsWithSpareFiles(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n    };\r\n\r\n    const handle_delegate_document_approval = async (with_return) => {\r\n      await MessageBus.handle(\r\n        new DelegateDocumentApproval(\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id,\r\n          approvals_to_be_closed_ids.value[0],\r\n          approval_action_username.value,\r\n          with_return\r\n        ),\r\n        uow\r\n      );\r\n      await useGetDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useGetDocumentApprovalsWithSpareFiles(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n    };\r\n\r\n    const handle_approve_document = () =>\r\n      handle_update_document_approval(\"APPROVED\");\r\n    const handle_reject_document = () =>\r\n      handle_update_document_approval(\"REJECTED\");\r\n\r\n    const handle_update_document_approval = async (state) => {\r\n      approvals_to_be_closed_ids.value.forEach(\r\n        async (approval_to_be_closed_id) =>\r\n          await MessageBus.handle(\r\n            new UpdateDocumentApproval(\r\n              folder_id,\r\n              usergroup_id,\r\n              doc.value.id,\r\n              approval_to_be_closed_id,\r\n              state,\r\n              text_comments.value\r\n            ),\r\n            uow\r\n          )\r\n      );\r\n      await useGetDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n\r\n      await Promise.all([\r\n        await useGetDocumentApprovalsWithSpareFiles(\r\n          uow,\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id\r\n        ),\r\n        await useGetDocumentApprovalFlow(\r\n          uow,\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id\r\n        ),\r\n      ]);\r\n    };\r\n\r\n    const approval_rules = computed(() =>\r\n      folder.value === null ? {} : folder.value.approval_rules\r\n    );\r\n\r\n    const approval_rules_filename = computed(() =>\r\n      approval_rules.value === null ? {} : approval_rules.value.filename\r\n    );\r\n\r\n    const approval_filename_pattern = computed(() => {\r\n      if (!approval_rules_filename.value) return undefined;\r\n\r\n      const flags =\r\n        approval_rules_filename.value.case_insensitive || false ? \"i\" : \"\";\r\n\r\n      return new RegExp(approval_rules_filename.value.pattern, flags);\r\n    });\r\n\r\n    const approval_rules_can_approve = computed(() =>\r\n      approval_rules.value === null ? null : approval_rules.value.can_approve\r\n    );\r\n\r\n    const approval_rules_can_reject = computed(() =>\r\n      approval_rules.value === null ? null : approval_rules.value.can_reject\r\n    );\r\n\r\n    const approval_rules_can_delegate_with_return = computed(() =>\r\n      approval_rules.value === null\r\n        ? null\r\n        : approval_rules.value.can_delegate_with_return\r\n    );\r\n\r\n    const approval_rules_can_delegate_without_return = computed(() =>\r\n      approval_rules.value === null\r\n        ? null\r\n        : approval_rules.value.can_delegate_without_return\r\n    );\r\n\r\n    const is_user_included_rights_list = (list) =>\r\n      Array.isArray(list) ? list.includes(user.value.username) : true;\r\n\r\n    const has_right_to_approve = computed(() =>\r\n      is_user_included_rights_list(approval_rules_can_approve.value)\r\n    );\r\n\r\n    const has_right_to_reject = computed(() =>\r\n      is_user_included_rights_list(approval_rules_can_reject.value)\r\n    );\r\n\r\n    const has_right_to_delegate_with_return = computed(() =>\r\n      is_user_included_rights_list(\r\n        approval_rules_can_delegate_with_return.value\r\n      )\r\n    );\r\n\r\n    const has_right_to_delegate_without_return = computed(() =>\r\n      is_user_included_rights_list(\r\n        approval_rules_can_delegate_without_return.value\r\n      )\r\n    );\r\n\r\n    // APPROVAL FLOW\r\n    const approval_flow = uow.doc_approval_flow_repository.get(document_id); // ref\r\n\r\n    const approval_flow_states = computed(() =>\r\n      generate_states_obj_from_approvals(approvals_after_last_update.value)\r\n    );\r\n\r\n    const handle_create_approval_flow = () => {\r\n      MessageBus.handle(new CreateDocumentApprovalFlow(document_id), uow);\r\n    };\r\n\r\n    const handle_add_approval_flow_step = () => {\r\n      MessageBus.handle(new AddDocumentApprovalFlowStep(document_id), uow);\r\n    };\r\n\r\n    const handle_delete_approval_flow_step = (index) => {\r\n      MessageBus.handle(\r\n        new DeleteDocumentApprovalFlowStep(document_id, index),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_attach_user_to_approval_flow_step = (index, username) => {\r\n      MessageBus.handle(\r\n        new AttachUserToDocumentApprovalFlowStep(document_id, index, username),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_delete_user_from_approval_flow_step = (index, username) => {\r\n      MessageBus.handle(\r\n        new DeleteUserFromDocumentApprovalFlowStep(\r\n          document_id,\r\n          index,\r\n          username\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_save_approval_flow = () => {\r\n      MessageBus.handle(\r\n        new SetDocumentApprovalFlow(folder_id, usergroup_id, document_id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_start_approval_flow = async () => {\r\n      await MessageBus.handle(\r\n        new StartDocumentApprovalFlow(folder_id, usergroup_id, document_id),\r\n        uow\r\n      );\r\n\r\n      await useGetDocumentApprovalsWithSpareFiles(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n      await useGetDocumentApprovalFlow(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n      await useGetDocument(uow, folder_id, usergroup_id, document_id);\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n    };\r\n\r\n    const handle_stop_approval_flow = async () => {\r\n      await MessageBus.handle(\r\n        new StopDocumentApprovalFlow(folder_id, usergroup_id, document_id),\r\n        uow\r\n      );\r\n      await useGetDocumentApprovalsWithSpareFiles(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n    };\r\n\r\n    // FORM\r\n    const form_uid = uuidv4();\r\n    const is_form_opened = ref(false);\r\n\r\n    // Формируем контекст для формы\r\n    const form_context = computed(() => {\r\n      if (!form_schema.value || !form_schema.value[\"context\"]) return {};\r\n      let result = {};\r\n      form_schema.value[\"context\"].forEach((e) => {\r\n        const ctx = uow.context_repository.get(form_uid, e.name);\r\n        result[e.name] = ctx.value;\r\n      });\r\n      return result;\r\n    });\r\n\r\n    // PERMISSIONS\r\n    const calculate_strict_permission = (perm_name) => {\r\n      return (\r\n        uow.permission_repository.has_for_folder(folder_id, perm_name) &&\r\n        !(\r\n          uow.folder_repository.get_strict_validation(folder_id, perm_name) &&\r\n          uow.doc_repository.has_errors(folder_id, document_id)\r\n        )\r\n      );\r\n    };\r\n\r\n    const can_change_doc = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_change_document\"\r\n    );\r\n    const can_view_file = uow.permission_repository.has_for_folder(\r\n      folder_id,\r\n      \"can_view_file\"\r\n    );\r\n\r\n    const can_view_approval = computed(() =>\r\n      calculate_strict_permission(\"can_view_documentapproval\")\r\n    );\r\n    const can_add_approval = computed(() =>\r\n      calculate_strict_permission(\"can_add_documentapproval\")\r\n    );\r\n    const can_change_approval = computed(() =>\r\n      calculate_strict_permission(\"can_change_documentapproval\")\r\n    );\r\n    const can_delete_approval = computed(() =>\r\n      calculate_strict_permission(\"can_delete_documentapproval\")\r\n    );\r\n    const can_delegate_approval = computed(() =>\r\n      calculate_strict_permission(\"can_delegate_documentapproval\")\r\n    );\r\n\r\n    const can_view_approvalflow = computed(() =>\r\n      calculate_strict_permission(\"can_view_documentapprovalflow\")\r\n    );\r\n    const can_change_approvalflow = computed(() =>\r\n      calculate_strict_permission(\"can_change_documentapprovalflow\")\r\n    );\r\n\r\n    onMounted(async () => {\r\n      await useBeforeEnterPage(\r\n        uow,\r\n        [\"can_get_folders\", \"can_view_document\"],\r\n        folder_id,\r\n        usergroup_id\r\n      ); // Пытаемся автоматически зaлогинится\r\n      await Promise.all([useGetFolders(uow), useGetUserGroups(uow)]);\r\n\r\n      if (!folder.value) return;\r\n\r\n      // Устанавливаем группу пользователей\r\n      // Группа пользователей используется только для получения ее имени\r\n      // Пользователи, не входящие в группу, не увидят имя\r\n      // const usergroup = uow.usergroup_repository.get(usergroup_id);\r\n      // MessageBus.handle(new SetCurrentUserGroup(usergroup.value), uow);\r\n\r\n      // Получаем поисковую схему\r\n      await Promise.all([\r\n        useGetUserSearchSchema(uow, folder_id, usergroup_id),\r\n        useGetDocument(uow, folder_id, usergroup_id, document_id),\r\n      ]);\r\n\r\n      folder.value.is_necessary_validate = true;\r\n      await useValidateDocument(uow, folder_id, usergroup_id, document_id);\r\n\r\n      await useGetDocumentApprovalsWithSpareFiles(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n      await useGetUsers(uow);\r\n      await useGetDocumentApprovalFlow(\r\n        uow,\r\n        folder_id,\r\n        usergroup_id,\r\n        document_id\r\n      );\r\n\r\n      // Получаем контекст для использования в форме\r\n      if (form_schema.value && form_schema.value.context) {\r\n        await useGetContext(\r\n          uow,\r\n          form_uid,\r\n          form_schema.value.context,\r\n          // REQUIRED PARAMETERS FOR DOCUMENT CONTEXT\r\n          folder_id,\r\n          usergroup_id,\r\n          document_id\r\n        );\r\n      }\r\n    });\r\n\r\n    // TIMERS\r\n    const update_upload_progress = () => {\r\n      MessageBus.handle(new UpdateUploadProgress(), uow);\r\n    };\r\n\r\n    uow.upload_progress_timer.set_callback(update_upload_progress);\r\n\r\n    onBeforeUnmount(async () => uow.upload_progress_timer.stop());\r\n\r\n    // ACTION BUTTONS\r\n    const action_buttons = computed(() =>\r\n      folder.value === null\r\n        ? []\r\n        : folder.value.action_buttons.filter((obj) =>\r\n            is_action_button_shown(obj)\r\n          )\r\n    );\r\n\r\n    const APPROVED_after_last_update_usernames = computed(() =>\r\n      approvals_after_last_update.value\r\n        .filter((obj) => obj.state == \"APPROVED\")\r\n        .map((obj) => obj.to_username)\r\n    );\r\n\r\n    const is_action_button_shown = (button_obj) =>\r\n      button_obj.allowed_usernames\r\n        ? button_obj.allowed_usernames.includes(user.value.username)\r\n        : true;\r\n\r\n    const is_action_button_disabled = (button_obj) => {\r\n      let result = false;\r\n\r\n      if (!button_obj.required_approvals) return result;\r\n\r\n      if (button_obj.required_approvals.all)\r\n        result =\r\n          button_obj.required_approvals.all.filter(\r\n            (username) =>\r\n              !APPROVED_after_last_update_usernames.value.includes(username)\r\n          ).length > 0;\r\n\r\n      if (button_obj.required_approvals.anyOf)\r\n        result =\r\n          result ||\r\n          button_obj.required_approvals.anyOf.filter(\r\n            (username) =>\r\n              !APPROVED_after_last_update_usernames.value.includes(username)\r\n          ).length == button_obj.required_approvals.anyOf.length;\r\n\r\n      return result;\r\n    };\r\n\r\n    const handle_push_document_button = async (action) => {\r\n      await MessageBus.handle(\r\n        new PushDocumentButton(folder_id, usergroup_id, document_id, action),\r\n        uow\r\n      );\r\n      set_seconds_before_button_activated(action, 10);\r\n    };\r\n\r\n    // Кол-во секунд до активации кнопки\r\n\r\n    const COPY_TO_USERGROUP_ACTION = \"__COPY_TO_USERGROUP__\";\r\n\r\n    const get_text_of_action_button = (caption, action) =>\r\n      get_seconds_before_button_activated(action) === 0\r\n        ? caption\r\n        : caption +\r\n          \" (через \" +\r\n          get_seconds_before_button_activated(action).toString() +\r\n          \" сек.)\";\r\n\r\n    const get_seconds_before_button_activated = (action) =>\r\n      uow.wait_seconds_timer.get(action);\r\n\r\n    const set_seconds_before_button_activated = (action, value) =>\r\n      uow.wait_seconds_timer.set(action, value);\r\n\r\n    const get_seconds_before_button_copy_to_usergroup_activated = () =>\r\n      uow.wait_seconds_timer.get(COPY_TO_USERGROUP_ACTION);\r\n\r\n    const set_seconds_before_button_copy_to_usergroup_activated = (value) =>\r\n      uow.wait_seconds_timer.set(COPY_TO_USERGROUP_ACTION, value);\r\n\r\n    return {\r\n      route_full_path,\r\n      router,\r\n      convertDateToDateTimeString,\r\n\r\n      // USERS\r\n      users,\r\n      user_options,\r\n      approval_action_username,\r\n      is_approval_action_username_chosen,\r\n\r\n      // PERMISSIONS\r\n      can_change_doc,\r\n      can_view_file,\r\n      can_view_approval,\r\n      can_add_approval,\r\n      can_change_approval,\r\n      can_delete_approval,\r\n      can_delegate_approval,\r\n\r\n      // PARAMS\r\n      folder_id,\r\n      usergroup_id,\r\n      document_id,\r\n\r\n      // FOLDER\r\n      folder,\r\n      folder_name,\r\n      search_schema,\r\n\r\n      // USERGROUP\r\n      usergroup_name,\r\n      copy_list_usergroups,\r\n      copy_list_usergroup_id,\r\n      handle_copy_list_change_usergroup,\r\n\r\n      // DOCUMENT\r\n      doc,\r\n      is_edit_mode,\r\n      handle_update_doc_attribute,\r\n      handle_save_document,\r\n      handle_copy_link_to_document_into_clipboard,\r\n      generate_doc_link,\r\n      handle_push_document_button,\r\n\r\n      // APPROVAL\r\n      text_comments,\r\n      approvals,\r\n      approvals_before_last_update,\r\n      approvals_after_last_update,\r\n      approval_ids_can_be_deleted,\r\n      approvals_to_be_closed_ids,\r\n      handle_paste,\r\n      insert_text_in_editable,\r\n      handle_add_document_approval,\r\n      handle_delete_document_approval,\r\n      handle_update_document_approval,\r\n      handle_delegate_document_approval,\r\n      handle_approve_document,\r\n      handle_reject_document,\r\n      approval_filename_pattern,\r\n      has_right_to_approve,\r\n      has_right_to_reject,\r\n      has_right_to_delegate_with_return,\r\n      has_right_to_delegate_without_return,\r\n\r\n      // APPROVAL FLOW\r\n      can_view_approvalflow,\r\n      can_change_approvalflow,\r\n      approval_flow,\r\n      approval_flow_states,\r\n      handle_create_approval_flow,\r\n      handle_add_approval_flow_step,\r\n      handle_delete_approval_flow_step,\r\n      handle_attach_user_to_approval_flow_step,\r\n      handle_delete_user_from_approval_flow_step,\r\n      handle_save_approval_flow,\r\n      handle_start_approval_flow,\r\n      handle_stop_approval_flow,\r\n\r\n      // DRAGGING\r\n      is_drag_above_doc_file_zone,\r\n      is_drag_above_approval_file_zone,\r\n\r\n      // FILE\r\n      are_files_saved,\r\n      approval_max_file_size,\r\n      doc_max_file_size,\r\n      downloading_files,\r\n      uploading_files,\r\n      document_approval_files,\r\n      handle_download_file,\r\n      handle_rename_file,\r\n      handle_rename_file_activated,\r\n      handle_copy_link_to_document_file_into_clipboard,\r\n      handle_document_approval_file_drop,\r\n      handle_document_approval_filename_wrong,\r\n      handle_delete_document_approval_file,\r\n      handle_download_all_files,\r\n      handle_document_file_drop,\r\n      detach_file_from_document,\r\n\r\n      // FORM\r\n      is_form_opened,\r\n      form_uid,\r\n      form_schema,\r\n      form_pages,\r\n      form_context,\r\n\r\n      // ACTION BUTTONS\r\n      action_buttons,\r\n      is_action_button_shown,\r\n      is_action_button_disabled,\r\n      APPROVED_after_last_update_usernames,\r\n      get_seconds_before_button_activated,\r\n      set_seconds_before_button_activated,\r\n      get_seconds_before_button_copy_to_usergroup_activated,\r\n      set_seconds_before_button_copy_to_usergroup_activated,\r\n      get_text_of_action_button,\r\n      COPY_TO_USERGROUP_ACTION,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__header {\r\n  display: flex;\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__linkbutton {\r\n  font-size: 28px;\r\n  user-select: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__doccontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n  min-width: 550px;\r\n  max-width: 550px;\r\n  padding-right: 15px;\r\n}\r\n.page__docbuttonblock {\r\n  display: flex;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.docbuttonblock__lockicon {\r\n  min-width: 20px;\r\n  min-height: 20px;\r\n  max-width: 20px;\r\n  max-height: 20px;\r\n  background: url(\"../../public/lock.png\") top left/20px 20px no-repeat;\r\n}\r\n\r\n.docbuttonblock__locktext {\r\n  margin-left: 5px;\r\n  color: red;\r\n}\r\n\r\n.page__docattributeblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 5px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n}\r\n\r\n.page__docfileblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.page__docerrorblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  overflow-wrap: break-word;\r\n}\r\n\r\n.page__copycontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.container__header {\r\n  font-weight: 500;\r\n  padding: 3px;\r\n}\r\n\r\n.copycontainer__text {\r\n  padding: 3px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.copycontainer__row {\r\n  display: flex;\r\n}\r\n\r\n.copycontainer__button {\r\n  min-width: 200px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.copycontainer__usergroupselect {\r\n  flex-grow: 1;\r\n}\r\n\r\n.page__approvalcontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  align-items: stretch;\r\n}\r\n\r\n.page__approvalorderblock {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 10px;\r\n}\r\n\r\n.approvalorderblock__button {\r\n  margin-left: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.page__approvalactionblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 10px;\r\n}\r\n\r\n.page__approvalbuttonblock {\r\n  display: flex;\r\n  width: 150px;\r\n  padding: 5px;\r\n}\r\n.approvalbuttonblock__button {\r\n  margin: 3px;\r\n  cursor: pointer;\r\n}\r\n\r\n.page__approvaldropblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.page__docfiledropzone {\r\n  min-height: 80px;\r\n  max-height: 80px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  padding: 3px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.approvaldropblock__filedropzone {\r\n  min-height: 80px;\r\n  max-height: 80px;\r\n  overflow-y: auto;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  width: 100%;\r\n  padding: 3px;\r\n}\r\n\r\n.page__docfiledropzone_dragging,\r\n.approvaldropblock__filedropzone_dragging {\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    #606dbc,\r\n    #606dbc 10px,\r\n    #465298 10px,\r\n    #465298 20px\r\n  );\r\n}\r\n\r\n.page__docfiledropzonetitle {\r\n  font-size: 24px;\r\n}\r\n\r\n.approvaldropblock__dropzonetitle {\r\n  width: 100%;\r\n  display: block;\r\n}\r\n\r\n.page__approvalfileblock {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  flex-grow: 1;\r\n}\r\n\r\n.approvalfileblock__file {\r\n  padding: 3px;\r\n}\r\n\r\n.page__approvaltextblock {\r\n  display: inline-block;\r\n  border: solid 1px #000;\r\n  min-height: 30px;\r\n}\r\n\r\n.page__approvalitemsblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 10px;\r\n}\r\n\r\n.page__approvalitem {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.page__approvallastupdatetext {\r\n  color: red;\r\n  margin-top: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.docbuttonblock__button {\r\n  user-select: none;\r\n}\r\n\r\n.docbuttonblock__grow {\r\n  flex-grow: 1;\r\n}\r\n\r\n.docbuttonblock__linktoform {\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.docbuttonblock__button_red {\r\n  color: red;\r\n}\r\n\r\n.docerrorblock__noerrors {\r\n  color: green;\r\n}\r\n\r\n.page__approvalflowcontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 500px;\r\n}\r\n\r\n.approvalflowcontainer__createbutton {\r\n  margin-left: 7px;\r\n}\r\n\r\n.page__form-backdrop {\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background-color: rgba(0, 0, 0, 0.3);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.page__form {\r\n  background: #ffffff;\r\n  box-shadow: 2px 2px 20px 1px;\r\n  padding: 20px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.copycontainer__links {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.actioncontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n","<template>\r\n  <div\r\n    class=\"documentattributeblock\"\r\n    :class=\"{ documentattributeblock_modified: is_highlighted }\"\r\n  >\r\n    <div\r\n      v-for=\"block in search_schema\"\r\n      :key=\"block.name\"\r\n      class=\"documentattributeblock__row\"\r\n    >\r\n      <div class=\"documentattributeblock__labelcontainer\">\r\n        <form-text-field\r\n          class=\"documentattributeblock__textfield\"\r\n          :value=\"block.description + ':'\"\r\n        />\r\n      </div>\r\n      <div class=\"documentattributeblock__valuecontainer\">\r\n        <form-text-input\r\n          v-if=\"is_edit_mode && !block.name.toLowerCase().includes('date')\"\r\n          class=\"documentattributeblock__textinput\"\r\n          :value=\"get_str_attribute(attributes[block.name], block.default)\"\r\n          :parameters=\"{\r\n            is_disabled: get_bool_attribute(block.is_disabled) || is_disabled,\r\n          }\"\r\n          @update=\"\r\n            $emit('update:doc', { id: id, name: block.name, value: $event })\r\n          \"\r\n        />\r\n        <form-date-input\r\n          v-if=\"is_edit_mode && block.name.toLowerCase().includes('date')\"\r\n          class=\"documentattributeblock__dateinput\"\r\n          :parameters=\"{\r\n            is_disabled: get_bool_attribute(block.is_disabled) || is_disabled,\r\n          }\"\r\n          :value=\"attributes[block.name]\"\r\n          @update=\"\r\n            $emit('update:doc', { id: id, name: block.name, value: $event })\r\n          \"\r\n        />\r\n        <form-text-field\r\n          v-if=\"!is_edit_mode\"\r\n          class=\"documentattributeblock__textfield\"\r\n          :value=\"get_str_attribute(attributes[block.name], block.default)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport FormTextInput from \"../fields/FormTextInput.vue\";\r\nimport FormDateInput from \"../fields/FormDateInput.vue\";\r\nexport default {\r\n  components: { FormTextField, FormTextInput, FormDateInput },\r\n  name: \"DocumentAttributeBlock\",\r\n  props: {\r\n    id: {\r\n      type: [String, Number],\r\n      required: true,\r\n    },\r\n    search_schema: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    attributes: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    is_edit_mode: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_highlighted: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_disabled: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"update:doc\"],\r\n  setup() {\r\n    const get_str_attribute = (value, default_value) => {\r\n      const str_default_value = default_value ? default_value : \"\";\r\n      return value !== undefined && value !== null ? value : str_default_value;\r\n    };\r\n\r\n    const get_bool_attribute = (value) => {\r\n      return value === true ? true : false;\r\n    };\r\n    return { get_str_attribute, get_bool_attribute };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentattributeblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n\r\n.documentattributeblock__row {\r\n  display: flex;\r\n  padding: 1px;\r\n}\r\n\r\n.documentattributeblock__labelcontainer {\r\n  display: flex;\r\n  min-width: 150px;\r\n  font-weight: 500;\r\n}\r\n\r\n.documentattributeblock__valuecontainer {\r\n  display: flex;\r\n  flex-grow: 1;\r\n}\r\n\r\n.documentattributeblock__textinput {\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./DocumentAttributeBlock.vue?vue&type=template&id=4b59af1a&scoped=true\"\nimport script from \"./DocumentAttributeBlock.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentAttributeBlock.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentAttributeBlock.vue?vue&type=style&index=0&id=4b59af1a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4b59af1a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"approvalrow\">\r\n    <div class=\"approvalrow__infoblock\">\r\n      <div\r\n        class=\"approvalrow__state\"\r\n        :class=\"{\r\n          approvalrow__state_approved: obj.state === 'APPROVED',\r\n          approvalrow__state_rejected: obj.state === 'REJECTED',\r\n          approvalrow__state_delegated: obj.state === 'DELEGATED',\r\n          approvalrow__state_waiting: obj.state === 'NONE',\r\n        }\"\r\n        title=\"Статус согласования\"\r\n      />\r\n      <form-text-field\r\n        class=\"approvalrow__user\"\r\n        :value=\"\r\n          obj.to_last_name +\r\n          ' ' +\r\n          obj.to_first_name +\r\n          ' (' +\r\n          obj.to_username +\r\n          ')'\r\n        \"\r\n      />\r\n      <form-text-field class=\"approvalrow__request\" value=\"по запросу\" />\r\n      <form-text-field\r\n        class=\"approvalrow__user\"\r\n        :value=\"\r\n          obj.from_last_name +\r\n          ' ' +\r\n          obj.from_first_name +\r\n          ' (' +\r\n          obj.from_username +\r\n          ')'\r\n        \"\r\n      />\r\n      <form-text-field\r\n        class=\"approvalrow__date\"\r\n        :value=\"convertDateToDateTimeString(obj.updated_at)\"\r\n      />\r\n      <div\r\n        class=\"approvalrow__delete\"\r\n        :class=\"{\r\n          approvalrow__delete_active: can_be_deleted === true,\r\n          approvalrow__delete_passive: can_be_deleted === false,\r\n        }\"\r\n        title=\"Удалить строку\"\r\n        @click=\"handle_delete_action()\"\r\n      />\r\n    </div>\r\n    <div class=\"approvalrow__fileblock\">\r\n      <file-block\r\n        class=\"approvalrow__file\"\r\n        v-for=\"file in obj.files\"\r\n        :key=\"file.id\"\r\n        :file=\"file\"\r\n        :can_be_deleted=\"false\"\r\n        :can_be_dragged=\"false\"\r\n        @delete:file=\"$emit('delete:file', file.id)\"\r\n        @download:file=\"$emit('download:file', [file, $event])\"\r\n        @copy_link_to:file=\"$emit('copy_link_to:file', file)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport FileBlock from \"../file/FileBlock.vue\";\r\nimport { convertDateToDateTimeString } from \"../../logic/service_layer/use_modules\";\r\nexport default {\r\n  components: { FormTextField, FileBlock },\r\n  name: \"ApprovalRow\",\r\n  props: {\r\n    obj: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    can_be_deleted: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\r\n    \"delete:approval\",\r\n    \"delete:file\",\r\n    \"download:file\",\r\n    \"copy_link_to:file\",\r\n  ],\r\n  setup(props, { emit }) {\r\n    const handle_delete_action = () => {\r\n      if (props.can_be_deleted === true) emit(\"delete:approval\");\r\n    };\r\n    return { convertDateToDateTimeString, handle_delete_action };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.approvalrow {\r\n  display: flex;\r\n  flex-direction: column;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n  padding: 5px;\r\n}\r\n\r\n.approvalrow__infoblock {\r\n  display: flex;\r\n  min-height: 30px\r\n}\r\n\r\n.approvalrow__fileblock {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.approvalrow__file {\r\n  padding: 1px;\r\n}\r\n\r\n.approvalrow__state,\r\n.approvalrow__delete {\r\n  min-width: 26px;\r\n  min-height: 26px;\r\n  max-width: 26px;\r\n  max-height: 26px;\r\n  margin: 3px;\r\n  transition: all 0.25s;\r\n}\r\n\r\n.approvalrow__state_waiting {\r\n  background: url(\"../../../public/question.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalrow__state_approved {\r\n  background: url(\"../../../public/check.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalrow__state_rejected {\r\n  background: url(\"../../../public/cancel.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalrow__state_delegated {\r\n  background: url(\"../../../public/right-arrow.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalrow__delete_active:hover {\r\n  transform: rotate(30deg);\r\n}\r\n\r\n.approvalrow__delete_active {\r\n  cursor: pointer;\r\n  background: url(\"../../../public/delete.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalrow__delete_passive {\r\n  background: url(\"../../../public/delete.png\") top left/26px 26px no-repeat;\r\n  filter: grayscale(100%);\r\n}\r\n\r\n.approvalrow__id {\r\n  min-width: 50px;\r\n  padding: 3px;\r\n}\r\n\r\n.approvalrow__user {\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n}\r\n\r\n.approvalrow__request {\r\n  min-width: 100px;\r\n  padding: 3px;\r\n}\r\n\r\n.approvalrow__date {\r\n  min-width: 100px;\r\n  padding: 3px;\r\n}\r\n</style>","import { render } from \"./ApprovalRow.vue?vue&type=template&id=4f03de9f&scoped=true\"\nimport script from \"./ApprovalRow.vue?vue&type=script&lang=js\"\nexport * from \"./ApprovalRow.vue?vue&type=script&lang=js\"\n\nimport \"./ApprovalRow.vue?vue&type=style&index=0&id=4f03de9f&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4f03de9f\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"approvalflow\">\r\n    <div class=\"approvalflow__infoblock\">\r\n      <form-text-field class=\"approvalflow__label\" :value=\"created_date_info\" />\r\n      <div class=\"approvalflow__empty\" />\r\n      <form-text-field class=\"approvalflow__label\" :value=\"updated_date_info\" />\r\n    </div>\r\n    <div v-if=\"can_be_modified\" class=\"approvalflow__buttonblock\">\r\n      <div\r\n        v-if=\"!is_saved\"\r\n        class=\"approvalflow__button approvalflow__button_save\"\r\n        title=\"Сохранить поток\"\r\n        @click=\"handle_save()\"\r\n      />\r\n      <div\r\n        v-if=\"is_saved && !is_active\"\r\n        class=\"approvalflow__button approvalflow__button_start\"\r\n        title=\"Запустить поток\"\r\n        @click=\"$emit('start')\"\r\n      />\r\n      <div\r\n        v-if=\"is_saved && is_active\"\r\n        class=\"approvalflow__button approvalflow__button_stop\"\r\n        title=\"Остановить поток\"\r\n        @click=\"$emit('stop')\"\r\n      />\r\n      <div v-if=\"!is_active\" class=\"approvalflow__empty\" />\r\n      <form-filtered-select-input\r\n        v-if=\"!is_active\"\r\n        class=\"approvalflow__username\"\r\n        :parameters=\"{\r\n          options: user_options,\r\n          placeholder: 'Поиск...',\r\n          size: 3,\r\n        }\"\r\n        :value=\"action_username\"\r\n        @update=\"action_username = $event\"\r\n      />\r\n      <div\r\n        v-if=\"!is_active\"\r\n        class=\"approvalflow__button approvalflow__button_add\"\r\n        :class=\"{ approvalflow__button_gray: !is_action_username_chosen }\"\r\n        title=\"Добавить пользователя\"\r\n        @click=\"handle_add_user()\"\r\n      />\r\n    </div>\r\n    <div v-if=\"!is_active\" class=\"approvalflow__userblock\">\r\n      <approval-flow-step-item\r\n        class=\"approvalflow__user\"\r\n        v-for=\"(username, index) in non_attached_usernames\"\r\n        :key=\"index\"\r\n        :id=\"username\"\r\n        :text=\"find_user_description(username)\"\r\n        :can_be_deleted=\"false\"\r\n        :can_be_dragged=\"true\"\r\n      />\r\n    </div>\r\n    <div class=\"approvalflow__stepblock\">\r\n      <approval-flow-step\r\n        class=\"approvalflow__step\"\r\n        v-for=\"(step, index) in steps\"\r\n        :key=\"index\"\r\n        :id=\"index + 1\"\r\n        :items=\"modify_step(step)\"\r\n        :states=\"states\"\r\n        :can_be_modified=\"!is_active && can_be_modified\"\r\n        @delete:step=\"$emit('delete:step', index)\"\r\n        @delete:item=\"handle_delete_user_from_step(index, $event)\"\r\n        @attach=\"handle_attach_user_to_step(index, $event)\"\r\n      />\r\n\r\n      <div v-if=\"!is_active && can_be_modified\" class=\"approvalflow__row\">\r\n        <div\r\n          class=\"\r\n            approvalflow__button\r\n            approvalflow__button_large\r\n            approvalflow__button_add_large\r\n          \"\r\n          title=\"Добавить шаг потока\"\r\n          @click=\"$emit('add:step')\"\r\n        />\r\n      </div>\r\n      <div v-if=\"is_active\" class=\"approvalflow__row\">\r\n        <div\r\n          class=\"\r\n            approvalflow__button\r\n            approvalflow__button_large\r\n            approvalflow__button_onprogress\r\n            approvalflow__button_rotating\r\n          \"\r\n          title=\"Поток запущен и работает\"\r\n        />\r\n      </div>\r\n      <div class=\"approvalflow__row\">\r\n        <div\r\n          class=\"\r\n            approvalflow__button\r\n            approvalflow__button_large\r\n            approvalflow__button_download_large\r\n          \"\r\n          title=\"Скачать поток\"\r\n          @click=\"handle_download_json_file()\"\r\n        />\r\n      </div>\r\n      <div class=\"approvalflow__row\">\r\n        <json-file-drop-zone\r\n          class=\"approvalflow__dropzone\"\r\n          :class=\"{\r\n            approvalflow__dropzone_dragging: is_drag_above_json_file_zone,\r\n          }\"\r\n          :default=\"[]\"\r\n          @update:dragging=\"is_drag_above_json_file_zone = $event\"\r\n          @update:json=\"handle_drop_json_file($event)\"\r\n        >\r\n          <span\r\n            v-if=\"!is_drag_above_json_file_zone\"\r\n            class=\"approvalflow_dropzonetitle\"\r\n          >\r\n            Сюда можно загрузить JSON файл потока</span\r\n          >\r\n        </json-file-drop-zone>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from \"vue\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\n\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport ApprovalFlowStep from \"./ApprovalFlowStep.vue\";\r\nimport ApprovalFlowStepItem from \"./ApprovalFlowStepItem.vue\";\r\nimport FormFilteredSelectInput from \"../fields/FormFilteredSelectInput.vue\";\r\nimport JsonFileDropZone from \"../file/JsonFileDropZone.vue\";\r\n\r\nimport { ApprovalFlowUploadError } from \"../../logic/domain/event\";\r\nimport { DownloadJsonFile } from \"../../logic/domain/command\";\r\nimport { convertDateToDateTimeString } from \"../../logic/service_layer/use_modules\";\r\n\r\nexport default {\r\n  components: {\r\n    FormTextField,\r\n    ApprovalFlowStep,\r\n    ApprovalFlowStepItem,\r\n    FormFilteredSelectInput,\r\n    JsonFileDropZone,\r\n  },\r\n  name: \"ApprovalFlow\",\r\n  props: {\r\n    is_active: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    is_saved: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    success: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    created_at: {\r\n      type: Date,\r\n      required: true,\r\n    },\r\n    updated_at: {\r\n      type: Date,\r\n      required: true,\r\n    },\r\n    steps: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    states: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    // Array of User objects\r\n    users: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    can_be_modified: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n  emits: [\r\n    \"add:step\",\r\n    \"delete:step\",\r\n    \"delete:user\",\r\n    \"attach:user\",\r\n    \"save\",\r\n    \"start\",\r\n    \"stop\",\r\n  ],\r\n\r\n  setup(props, { emit }) {\r\n    const uow = new VueUnitOfWork();\r\n    const created_date_info = computed(\r\n      () => \"Создан: \" + convertDateToDateTimeString(props.created_at)\r\n    );\r\n    const updated_date_info = computed(\r\n      () => \"Обновлен: \" + convertDateToDateTimeString(props.updated_at)\r\n    );\r\n\r\n    const action_username = ref(\"NOT_CHOSEN\");\r\n    const is_action_username_chosen = computed(\r\n      () => action_username.value !== \"NOT_CHOSEN\"\r\n    );\r\n\r\n    const non_attached_usernames = ref([]);\r\n\r\n    const is_drag_above_json_file_zone = ref(false);\r\n\r\n    const user_options = computed(() =>\r\n      [{ name: \"Выберите пользователя\", value: \"NOT_CHOSEN\" }].concat(\r\n        props.users\r\n          .map((e) => {\r\n            return {\r\n              name: (\r\n                e.last_name +\r\n                \" \" +\r\n                e.first_name +\r\n                \" (\" +\r\n                e.username +\r\n                \")\"\r\n              ).trim(),\r\n              value: e.username,\r\n            };\r\n          })\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      )\r\n    );\r\n\r\n    const usernames = computed(() => props.users.map((e) => e.username));\r\n\r\n    const find_user_description = (username) => {\r\n      const index = user_options.value.map((e) => e[\"value\"]).indexOf(username);\r\n      return user_options.value[index][\"name\"];\r\n    };\r\n\r\n    const modify_step = (arr_of_usernames) =>\r\n      arr_of_usernames.map((username) => {\r\n        return { id: username, text: find_user_description(username) };\r\n      });\r\n\r\n    const handle_add_user = () => {\r\n      if (!is_action_username_chosen.value) return;\r\n      non_attached_usernames.value.push(action_username.value);\r\n    };\r\n\r\n    const handle_attach_user_to_step = (index, username) => {\r\n      emit(\"attach:user\", [index, username]);\r\n      non_attached_usernames.value = non_attached_usernames.value.filter(\r\n        (e) => e != username\r\n      );\r\n    };\r\n\r\n    const handle_delete_user_from_step = (index, username) => {\r\n      emit(\"delete:user\", [index, username]);\r\n      non_attached_usernames.value.push(username);\r\n    };\r\n\r\n    const handle_save = () => {\r\n      non_attached_usernames.value = [];\r\n      emit(\"save\");\r\n    };\r\n\r\n    const handle_drop_json_file = (arr) => {\r\n      const count = props.steps.length;\r\n      for (let i = 0; i < count; i++) emit(\"delete:step\", 0);\r\n\r\n      try {\r\n        let index = 0;\r\n        arr.forEach((step_arr) => {\r\n          emit(\"add:step\");\r\n\r\n          step_arr.forEach((username) => {\r\n            if (usernames.value.indexOf(username) == -1)\r\n              throw new Error(\"Wrong username: \" + username);\r\n\r\n            emit(\"attach:user\", [index, username]);\r\n          });\r\n          index++;\r\n        });\r\n      } catch (err) {\r\n        console.log(err);\r\n        MessageBus.handle(new ApprovalFlowUploadError(), uow);\r\n      }\r\n    };\r\n\r\n    const handle_download_json_file = async () => {\r\n      await MessageBus.handle(\r\n        new DownloadJsonFile(\"flow.json\", props.steps),\r\n        uow\r\n      );\r\n    };\r\n\r\n    return {\r\n      convertDateToDateTimeString,\r\n      created_date_info,\r\n      updated_date_info,\r\n      action_username,\r\n      is_action_username_chosen,\r\n      non_attached_usernames,\r\n      user_options,\r\n      usernames,\r\n      is_drag_above_json_file_zone,\r\n      find_user_description,\r\n      modify_step,\r\n      handle_add_user,\r\n      handle_attach_user_to_step,\r\n      handle_delete_user_from_step,\r\n      handle_drop_json_file,\r\n      handle_save,\r\n      handle_download_json_file,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.approvalflow,\r\n.approvalflow__stepblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.approvalflow__step {\r\n  margin: 10px 10px 10px 10px;\r\n}\r\n\r\n.approvalflow__row {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 5px;\r\n}\r\n\r\n.approvalflow__infoblock,\r\n.approvalflow__buttonblock,\r\n.approvalflow__userblock {\r\n  display: flex;\r\n  padding: 3px;\r\n}\r\n\r\n.approvalflow__buttonblock {\r\n  justify-content: center;\r\n}\r\n\r\n.approvalflow__userblock {\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.approvalflow__button {\r\n  transition: all 0.25s;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n  min-height: 30px;\r\n  min-width: 30px;\r\n}\r\n\r\n.approvalflow__button_large {\r\n  min-height: 40px;\r\n  min-width: 40px;\r\n}\r\n\r\n.approvalflow__button:hover {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.approvalflow__button_save {\r\n  background: url(\"../../../public/save.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.approvalflow__button_start {\r\n  background: url(\"../../../public/start.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.approvalflow__button_stop {\r\n  background: url(\"../../../public/stop.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.approvalflow__button_add {\r\n  background: url(\"../../../public/plus.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.approvalflow__button_add_large {\r\n  background: url(\"../../../public/plus.png\") top left/40px 40px no-repeat;\r\n}\r\n\r\n.approvalflow__button_download_large {\r\n  background: url(\"../../../public/download.png\") top left/40px 40px no-repeat;\r\n}\r\n\r\n.approvalflow__button_gray {\r\n  filter: grayscale(100%);\r\n}\r\n\r\n.approvalflow__empty {\r\n  flex-grow: 1;\r\n}\r\n\r\n.approvalflow__username {\r\n  margin-top: 7px;\r\n  max-width: 300px;\r\n}\r\n\r\n.approvalflow__user {\r\n  margin: 3px;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n@keyframes rotate {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.approvalflow__button_rotating {\r\n  animation: rotate 3s infinite linear;\r\n}\r\n\r\n.approvalflow__dropzone {\r\n  min-height: 80px;\r\n  max-height: 80px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 350px;\r\n  padding: 3px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.approvalflow__dropzone_dragging {\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    #606dbc,\r\n    #606dbc 10px,\r\n    #465298 10px,\r\n    #465298 20px\r\n  );\r\n}\r\n\r\n.approvalflow__dropzonetitle {\r\n  font-size: 24px;\r\n}\r\n</style>","<template>\r\n  <div\r\n    class=\"approvalflowstep\"\r\n    @drop.prevent=\"handle_drop($event)\"\r\n    @dragover.prevent\r\n    @dragenter.prevent\r\n  >\r\n    <div class=\"approvalflowstep__row\">\r\n      <form-text-field class=\"approvalflowstep__index\" :value=\"id.toString()\" />\r\n      <div class=\"approvalflowstep__container\">\r\n        <approval-flow-step-item\r\n          class=\"approvalflowstep__item\"\r\n          v-for=\"(item, index) in items\"\r\n          :key=\"index\"\r\n          :id=\"item.id\"\r\n          :text=\"item.text\"\r\n          :can_be_deleted=\"can_be_modified\"\r\n          :can_be_dragged=\"false\"\r\n          :state=\"states[item.id]\"\r\n          @delete=\"$emit('delete:item', item.id)\"\r\n        />\r\n        <div class=\"approvalflowstep__emptyblock\" v-if=\"items.length == 0\" />\r\n      </div>\r\n      <div\r\n        v-if=\"can_be_modified\"\r\n        class=\"approvalflowstep__button approvalflowstep__button_delete\"\r\n        title=\"Удалить шаг потока\"\r\n        @click=\"$emit('delete:step')\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ApprovalFlowStepItem from \"./ApprovalFlowStepItem.vue\";\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nexport default {\r\n  components: { ApprovalFlowStepItem, FormTextField },\r\n  name: \"ApprovalFlowStep\",\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    items: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    states: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    can_be_modified: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  emits: [\"delete:step\", \"delete:item\", \"attach\"],\r\n\r\n  setup(props, { emit }) {\r\n    const handle_drop = (evt) => {\r\n      const id = evt.dataTransfer.getData(\"text\");\r\n      emit(\"attach\", id);\r\n    };\r\n\r\n    return { handle_drop };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.approvalflowstep {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.approvalflowstep__row {\r\n  display: flex;\r\n  min-height: 30px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  align-items: center;\r\n}\r\n\r\n.approvalflowstep__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n}\r\n\r\n.approvalflowstep__index {\r\n  /* background-color: lightgreen; */\r\n  padding: 5px 10px 5px 10px;\r\n  font-weight: 500;\r\n  font-size: 20px;\r\n  min-width: 35px;\r\n  /* border-right: 1px solid black; */\r\n}\r\n\r\n.approvalflowstep__emptyblock {\r\n  flex-grow: 1;\r\n}\r\n\r\n.approvalflowstep__item {\r\n  flex-grow: 1;\r\n  margin: 3px;\r\n}\r\n\r\n.approvalflowstep__button {\r\n  transition: all 0.25s;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n  min-height: 26px;\r\n  min-width: 26px;\r\n}\r\n\r\n.approvalflowstep__button:hover {\r\n  transform: rotate(30deg);\r\n}\r\n\r\n.approvalflowstep__button_delete {\r\n  background: url(\"../../../public/delete.png\") top left/26px 26px no-repeat;\r\n}\r\n</style>","<template>\r\n  <div\r\n    class=\"approvalflowstepitem\"\r\n    :draggable=\"can_be_dragged\"\r\n    @dragstart=\"handle_drag_start($event)\"\r\n    @dragend=\"$emit('dragend')\"\r\n    @click=\"handle_delete()\"\r\n  >\r\n    <div\r\n      v-if=\"state\"\r\n      class=\"approvalflowstepitem__state\"\r\n      :class=\"{\r\n        approvalflowstepitem__state_approved: state === 'APPROVED',\r\n        approvalflowstepitem__state_rejected: state === 'REJECTED',\r\n        approvalflowstepitem__state_waiting: state === 'NONE',\r\n      }\"\r\n      title=\"Статус согласования\"\r\n    />\r\n    <div class=\"approvalflowstepitem__text\">{{ text }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ApprovalFlowStepItem\",\r\n  props: {\r\n    id: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    text: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    state: {\r\n      type: String,\r\n      validator: (value) => [\"APPROVED\", \"REJECTED\", \"NONE\"].includes(value),\r\n    },\r\n    can_be_deleted: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    can_be_dragged: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n  emits: [\"delete\", \"dragstart\", \"dragend\"],\r\n  setup(props, { emit }) {\r\n    const handle_drag_start = (evt) => {\r\n      evt.dataTransfer.setData(\"text/plain\", props.id);\r\n      emit(\"dragstart\");\r\n    };\r\n\r\n    const handle_delete = () => {\r\n      if (!props.can_be_deleted) return;\r\n      emit(\"delete\");\r\n    };\r\n\r\n    return { handle_drag_start, handle_delete };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.approvalflowstepitem {\r\n  display: flex;\r\n  padding: 3px;\r\n  border: 1px solid black;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.approvalflowstepitem__state {\r\n  min-width: 26px;\r\n  min-height: 26px;\r\n  max-width: 26px;\r\n  max-height: 26px;\r\n  margin: 3px;\r\n  transition: all 0.25s;\r\n}\r\n\r\n.approvalflowstepitem__text {\r\n  flex-grow: 1;\r\n}\r\n\r\n.approvalflowstepitem__state_waiting {\r\n  background: url(\"../../../public/question.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalflowstepitem__state_approved {\r\n  background: url(\"../../../public/check.png\") top left/26px 26px no-repeat;\r\n}\r\n\r\n.approvalflowstepitem__state_rejected {\r\n  background: url(\"../../../public/cancel.png\") top left/26px 26px no-repeat;\r\n}\r\n</style>","import { render } from \"./ApprovalFlowStepItem.vue?vue&type=template&id=4a3a4911&scoped=true\"\nimport script from \"./ApprovalFlowStepItem.vue?vue&type=script&lang=js\"\nexport * from \"./ApprovalFlowStepItem.vue?vue&type=script&lang=js\"\n\nimport \"./ApprovalFlowStepItem.vue?vue&type=style&index=0&id=4a3a4911&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4a3a4911\"]])\n\nexport default __exports__","import { render } from \"./ApprovalFlowStep.vue?vue&type=template&id=330bf1f6&scoped=true\"\nimport script from \"./ApprovalFlowStep.vue?vue&type=script&lang=js\"\nexport * from \"./ApprovalFlowStep.vue?vue&type=script&lang=js\"\n\nimport \"./ApprovalFlowStep.vue?vue&type=style&index=0&id=330bf1f6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-330bf1f6\"]])\n\nexport default __exports__","import { render } from \"./ApprovalFlow.vue?vue&type=template&id=1248b4b2&scoped=true\"\nimport script from \"./ApprovalFlow.vue?vue&type=script&lang=js\"\nexport * from \"./ApprovalFlow.vue?vue&type=script&lang=js\"\n\nimport \"./ApprovalFlow.vue?vue&type=style&index=0&id=1248b4b2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1248b4b2\"]])\n\nexport default __exports__","<template>\r\n    <div\r\n      class=\"baseform\"\r\n      :style=\"{width: form_width.toString() + 'px'}\"\r\n    >\r\n      <div class=\"baseform-header\" v-if=\"is_header_required\">\r\n        <div class=\"baseform-header__pagenum\">{{ page_index + 1 }}.</div>\r\n        <div class=\"baseform-header__name\">{{ page_name }}</div>\r\n        <div\r\n          class=\"baseform-header__button baseform-header__button_left\"\r\n          title=\"Предыдущая страница\"\r\n          v-if=\"page_index > 0\"\r\n          @click=\"page_index = Math.max(0, page_index - 1)\"\r\n        />\r\n        <div\r\n          class=\"baseform-header__button baseform-header__button_right\"\r\n          title=\"Следующая страница\"\r\n          v-if=\"page_index < page_count - 1\"\r\n          @click=\"page_index = Math.min(page_index + 1, page_count - 1)\"\r\n        />\r\n        <div\r\n          class=\"baseform-header__button baseform-header__button_close\"\r\n          title=\"Закрыть\"\r\n          @click=\"$emit('close')\"\r\n        />\r\n      </div>\r\n      <div class=\"baseform-body\">\r\n        <component\r\n          class=\"baseform-body__field\"\r\n          v-for=\"(field, index) in page_fields\"\r\n          :is=\"field.type\"\r\n          :key=\"page_index.toString() + '|' + field.type + '|' + index.toString()\"\r\n          :parameters=\"field.parameters\"\r\n          :context=\"make_field_context(field)\"\r\n          :value=\"field.value ? field.value : attributes[field.bind]\"\r\n          @update=\"\r\n            if (field.bind) {\r\n              $emit('update', { name: field.bind, value: $event });\r\n            }\r\n          \"\r\n        >\r\n          {{ attributes }}\r\n        </component>\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from \"vue\";\r\n\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport FormHtmlField from \"../fields/FormHtmlField.vue\";\r\nimport FormBooleanInput from \"../fields/FormBooleanInput.vue\";\r\nimport FormTextInput from \"../fields/FormTextInput.vue\";\r\nimport FormMultilineTextInput from \"../fields/FormMultilineTextInput.vue\";\r\nimport FormDateInput from \"../fields/FormDateInput.vue\";\r\nimport FormEmailToAddressField from \"../fields/FormEmailToAddressField.vue\";\r\nimport FormEmailToAddressInput from \"../fields/FormEmailToAddressInput.vue\";\r\nimport FormHtmlInput from \"../fields/FormHtmlInput.vue\";\r\nimport FormHiddenInput from \"../fields/FormHiddenInput.vue\";\r\nimport FormSelectInput from \"../fields/FormSelectInput.vue\";\r\nimport FormFilteredSelectInput from \"../fields/FormFilteredSelectInput.vue\";\r\n\r\nexport default {\r\n  name: \"BaseForm\",\r\n  components: {\r\n    FormTextField,\r\n    FormHtmlField,\r\n    FormBooleanInput,\r\n    FormTextInput,\r\n    FormMultilineTextInput,\r\n    FormEmailToAddressField,\r\n    FormEmailToAddressInput,\r\n    FormDateInput,\r\n    FormHtmlInput,\r\n    FormHiddenInput,\r\n    FormSelectInput,\r\n    FormFilteredSelectInput,\r\n  },\r\n  props: {\r\n    settings: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    context: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    attributes: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    is_header_required: {\r\n      type:Boolean,\r\n      required: false,\r\n      default: true\r\n    }\r\n  },\r\n  emits: [\"close\", \"update\"],\r\n\r\n  setup(props) {\r\n    // PAGE\r\n    const page_index = ref(0);\r\n    const page_count = computed(() => props.settings.length);\r\n\r\n    const page_settings = computed(\r\n      () => props.settings[page_index.value]\r\n    );\r\n\r\n    // GEOMETRY\r\n    const form_width = computed(\r\n      () => page_settings.value[\"size\"] || \"w500\"\r\n    );\r\n    const page_name = computed(\r\n      () => page_settings.value[\"name\"] || \"\"\r\n    );\r\n\r\n    // FIELDS\r\n    const page_fields = computed(() => page_settings.value[\"fields\"] || []);\r\n\r\n    // CONTEXT\r\n    const make_field_context = (field) => {\r\n      if (!field.bind_context) return {};\r\n\r\n      let result = {};\r\n      Object.keys(field.bind_context).forEach(\r\n        (key) => (result[key] = props.context[field.bind_context[key]])\r\n      );\r\n\r\n      return result;\r\n    };\r\n\r\n    return {\r\n      // PAGE\r\n      page_settings,\r\n      page_index,\r\n      page_count,\r\n      page_name,\r\n\r\n      // GEOMETRY\r\n      form_width,\r\n\r\n      // FIELDS\r\n      page_fields,\r\n\r\n      // CONTEXT\r\n      make_field_context,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.baseform {\r\n  overflow-x: auto;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.baseform-header {\r\n  display: flex;\r\n  height: 33px;\r\n  border-bottom: 1px solid black;\r\n  align-items: center;\r\n}\r\n\r\n.baseform-header__pagenum {\r\n  font-size: 20px;\r\n  padding: 3px;\r\n}\r\n\r\n.baseform-header__name {\r\n  font-size: 20px;\r\n  padding: 3px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.baseform-header__button {\r\n  min-width: 30px;\r\n  min-height: 30px;\r\n  padding: 3px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  color: lightcoral;\r\n}\r\n\r\n.baseform-header__button:hover {\r\n  mask-image: linear-gradient(rgba(0, 0, 0, 1), transparent, rgba(0, 0, 0, 1));\r\n}\r\n\r\n.baseform-header__button_left {\r\n  background: url(\"../../../public/left.png\") center center/24px 24px no-repeat;\r\n}\r\n\r\n.baseform-header__button_right {\r\n  background: url(\"../../../public/right.png\") center center/24px 24px no-repeat;\r\n}\r\n\r\n.baseform-header__button_close {\r\n  background: url(\"../../../public/cancel.png\") center center/24px 24px\r\n    no-repeat;\r\n}\r\n\r\n.baseform-body {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n}\r\n\r\n.baseform-body__field {\r\n  margin: 3px 0px;\r\n}\r\n</style>","<template>\r\n  <div class=\"formhtmlfield\" :style=\"{ height: height.toString() + 'px' }\">\r\n    <iframe class=\"formhtmlfield__iframe\" :srcdoc=\"value\"> </iframe>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormHtmlField\",\r\n\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  setup(props) {\r\n    const height = computed(() => props.parameters[\"height\"] || 500);\r\n    return { height };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.formhtmlfield {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.formhtmlfield__iframe {\r\n  flex-grow: 1;\r\n  border: none;\r\n}\r\n</style>","import { render } from \"./FormHtmlField.vue?vue&type=template&id=be019dbe\"\nimport script from \"./FormHtmlField.vue?vue&type=script&lang=js\"\nexport * from \"./FormHtmlField.vue?vue&type=script&lang=js\"\n\nimport \"./FormHtmlField.vue?vue&type=style&index=0&id=be019dbe&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"form-multiline-text-input\">\r\n    <textarea\r\n      class=\"multiline-text-input\"\r\n      :style=\"{ color: color, resize: resize}\"\r\n      :disabled=\"is_disabled\"\r\n      :rows=\"rows\"\r\n      v-model=\"text\"\r\n      @input=\"$emit('update', $event.target.value)\"\r\n      ></textarea\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch, computed} from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormMultilineTextInput\",\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: String,\r\n      required: false,\r\n      // default: \"\",\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || \"\";\r\n    // if (!props.value) emit(\"update\", default_value);\r\n    if (props.value === undefined || props.value === null)\r\n      emit(\"update\", default_value);\r\n\r\n\r\n    const rows = computed(() => props.parameters[\"rows\"] || 10);\r\n    const is_disabled = computed(() => props.parameters[\"is_disabled\"] || false);\r\n    const color = computed(() => props.parameters[\"color\"] || 'black');\r\n    const resize = computed(() => props.parameters[\"resize\"] || 'none');\r\n\r\n    const text = ref(\"\")\r\n    watch(() => props.value, (newValue) => text.value = newValue);\r\n\r\n    return { rows, is_disabled, color, resize, text};\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.form-multiline-text-input {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./FormMultilineTextInput.vue?vue&type=template&id=67b6f645&scoped=true\"\nimport script from \"./FormMultilineTextInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormMultilineTextInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormMultilineTextInput.vue?vue&type=style&index=0&id=67b6f645&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67b6f645\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"formemailaddressfield\">\r\n    <form-text-field\r\n      v-if=\"to\"\r\n      class=\"formemailaddressfield__label\"\r\n      :parameters=\"{ font_weight: 'bold' }\"\r\n      value=\"Кому:\"\r\n    />\r\n    <form-text-field\r\n      v-if=\"to\"\r\n      class=\"formemailaddressfield__address\"\r\n      :value=\"convert(to)\"\r\n    />\r\n    <form-text-field\r\n      v-if=\"cc\"\r\n      class=\"formemailaddressfield__label\"\r\n      :parameters=\"{ font_weight: 'bold' }\"\r\n      value=\"Копия:\"\r\n    />\r\n    <form-text-field\r\n      v-if=\"cc\"\r\n      class=\"formemailaddressfield__address\"\r\n      :value=\"convert(cc)\"\r\n    />\r\n    <form-text-field\r\n      v-if=\"bcc\"\r\n      class=\"formemailaddressfield__label\"\r\n      :parameters=\"{ font_weight: 'bold' }\"\r\n      value=\"Скрытая копия:\"\r\n    />\r\n    <form-text-field\r\n      v-if=\"bcc\"\r\n      class=\"formemailaddressfield__address\"\r\n      :value=\"convert(bcc)\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\nimport FormTextField from \"./FormTextField.vue\";\r\n\r\nexport default {\r\n  name: \"FormEmailToAddressField\",\r\n  components: {\r\n    FormTextField,\r\n  },\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  setup(props) {\r\n    const address = computed(() => props.value || { TO: \"\", CC: \"\", BCC: \"\" });\r\n    const to = computed(() => address.value[\"TO\"]);\r\n    const cc = computed(() => address.value[\"CC\"]);\r\n    const bcc = computed(() => address.value[\"BCC\"]);\r\n\r\n    const convert = (text) => text.split(\" \").join(\"; \");\r\n\r\n    return {\r\n      to,\r\n      cc,\r\n      bcc,\r\n      convert,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formemailaddressfield {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","import { render } from \"./FormEmailToAddressField.vue?vue&type=template&id=2e722576&scoped=true\"\nimport script from \"./FormEmailToAddressField.vue?vue&type=script&lang=js\"\nexport * from \"./FormEmailToAddressField.vue?vue&type=script&lang=js\"\n\nimport \"./FormEmailToAddressField.vue?vue&type=style&index=0&id=2e722576&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2e722576\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"formemailaddressinput\">\r\n    <div class=\"formemailaddressinput__container\">\r\n      <form-text-field\r\n        class=\"formemailaddressinput__label\"\r\n        :parameters=\"{ align: 'center' }\"\r\n        :value=\"\r\n          variant_idx == 0\r\n            ? 'Текущее письмо'\r\n            : 'Адресаты из прошлых писем: ' + variant_idx.toString()\r\n        \"\r\n      />\r\n      <div class=\"formemailaddressinput__header\">\r\n        <div\r\n          class=\"\r\n            formemailaddressinput__button formemailaddressinput__button_left\r\n          \"\r\n          :class=\"{\r\n            formemailaddressinput__button_inactive:\r\n              variant_idx === variant_count - 1,\r\n          }\"\r\n          @click=\"goto_next_letter()\"\r\n          title=\"Предыдущее письмо\"\r\n        />\r\n        <div\r\n          class=\"\r\n            formemailaddressinput__button formemailaddressinput__button_right\r\n          \"\r\n          :class=\"{ formemailaddressinput__button_inactive: variant_idx === 0 }\"\r\n          title=\"Следующее письмо\"\r\n          @click=\"goto_previous_letter()\"\r\n        />\r\n        <form-text-input\r\n          class=\"formemailaddressinput__search\"\r\n          :parameters=\"search_field_parameters\"\r\n          :value=\"search_query\"\r\n          @update=\"search_query = $event\"\r\n        />\r\n        <div\r\n          class=\"\r\n            formemailaddressinput__button formemailaddressinput__button_add\r\n          \"\r\n          :class=\"{\r\n            formemailaddressinput__button_inactive:\r\n              validate_email(search_query) === false || variant_idx > 0,\r\n          }\"\r\n          @click=\"add_email(search_query)\"\r\n          title=\"Добавить e-mail\"\r\n        />\r\n        <div\r\n          class=\"\r\n            formemailaddressinput__button formemailaddressinput__button_approve\r\n          \"\r\n          :class=\"{\r\n            formemailaddressinput__button_inactive:\r\n              variant_idx === 0 || search_query != '',\r\n          }\"\r\n          @click=\"use_the_letter_as_current()\"\r\n          title=\"Использовать адресатов из данного письма\"\r\n        />\r\n      </div>\r\n      <div class=\"formemailaddressinput__rowcontainer\">\r\n        <div\r\n          class=\"formemailaddressinput__row\"\r\n          :class=\"{\r\n            formemailaddressinput__row_to: row.designation == 1,\r\n            formemailaddressinput__row_cc: row.designation == 2,\r\n            formemailaddressinput__row_bcc: row.designation == 3,\r\n          }\"\r\n          v-for=\"row in sorted_current_variant\"\r\n          :key=\"row.full_email\"\r\n          :title=\"get_row_title(row.designation)\"\r\n          @click=\"change_designation(row.full_email)\"\r\n        >\r\n          <div class=\"formemailaddressinput__description\">\r\n            {{ row.description }}\r\n          </div>\r\n          <div class=\"formemailaddressinput__email\">\r\n            {{ row.email }}\r\n          </div>\r\n          <div class=\"formemailaddressinput__@\">@</div>\r\n          <div class=\"formemailaddressinput__domain\">\r\n            {{ row.domain }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed } from \"vue\";\r\nimport FormTextInput from \"./FormTextInput.vue\";\r\nimport FormTextField from \"./FormTextField.vue\";\r\n\r\nexport default {\r\n  name: \"FormEmailToAddressInput\",\r\n  components: {\r\n    FormTextInput,\r\n    FormTextField,\r\n  },\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    // REQUIRED CONTEXT EXPLANATION\r\n    // 1. ADDRESS\r\n    //      Array of objects. Each objects has keys TO, CC, BCC with value\r\n    //      as string of email addresses separated by space ' '\r\n    // 2. KNOWN_EMAILS\r\n    //      Objects with addresses as keys, description of user as values\r\n    context: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: Object,\r\n      required: false,\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const default_value = props.parameters[\"default\"] || {\r\n      TO: \"\",\r\n      CC: \"\",\r\n      BCC: \"\",\r\n    };\r\n    // if (!props.value) emit(\"update\", default_value);\r\n    if (props.value === undefined || props.value === null)\r\n      emit(\"update\", default_value);\r\n\r\n    // Computes is used because might be async value\r\n    const addresses = computed(() => props.context[\"ADDRESS\"]);\r\n    const known_emails = computed(() => props.context[\"KNOWN_EMAILS\"]);\r\n\r\n    // DECODE\r\n\r\n    const address_decode_str = (result, text, designation) => {\r\n      if (!text) return;\r\n      text\r\n        .split(\" \")\r\n        .filter((e) => e != \"\")\r\n        .forEach((e) => (result[e] = designation));\r\n    };\r\n\r\n    const address_decode = (obj) => {\r\n      let result = {};\r\n\r\n      address_decode_str(result, obj[\"NA\"], 4);\r\n      address_decode_str(result, obj[\"BCC\"], 3);\r\n      address_decode_str(result, obj[\"CC\"], 2);\r\n      address_decode_str(result, obj[\"TO\"], 1);\r\n\r\n      return Object.entries(result).map(([a, b]) => {\r\n        return {\r\n          description: known_emails.value ? known_emails.value[a] || \"\" : \"\",\r\n          email: a.split(\"@\")[0],\r\n          domain: a.split(\"@\")[1],\r\n          full_email: a,\r\n          designation: b,\r\n        };\r\n      });\r\n    };\r\n\r\n    // ENCODE\r\n    const address_encode = (obj) => {\r\n      let result = { 1: [], 2: [], 3: [], 4: [] };\r\n      obj.forEach((row) => result[row.designation].push(row.full_email));\r\n      return {\r\n        TO: result[1].join(\" \"),\r\n        CC: result[2].join(\" \"),\r\n        BCC: result[3].join(\" \"),\r\n      };\r\n    };\r\n\r\n    // VARIANTS\r\n    const obj_with_all_NA_addresses = computed(() => {\r\n      let all = [];\r\n      if (props.value)\r\n        all = all.concat(\r\n          props.value[\"TO\"],\r\n          props.value[\"CC\"],\r\n          props.value[\"BCC\"]\r\n        );\r\n\r\n      if (addresses.value) {\r\n        addresses.value.forEach(\r\n          (e) =>\r\n            (all = all\r\n              .concat(e[\"TO\"] || [])\r\n              .concat(e[\"CC\"] || [])\r\n              .concat(e[\"BCC\"] || []))\r\n        );\r\n      }\r\n\r\n      if (known_emails.value) all = all.concat(Object.keys(known_emails.value));\r\n      return { NA: all.filter((e) => e != \"\").join(\" \") };\r\n    });\r\n\r\n    const variants = computed(() => {\r\n      let arr = [\r\n        address_decode(\r\n          Object.assign({}, props.value, obj_with_all_NA_addresses.value)\r\n        ),\r\n      ];\r\n      if (!addresses.value) return arr;\r\n\r\n      addresses.value.forEach((e) => arr.push(address_decode(e)));\r\n      return arr;\r\n    });\r\n\r\n    const variant_idx = ref(0);\r\n    const variant_count = computed(() => variants.value.length);\r\n\r\n    const current_variant = computed(() => {\r\n      return variants.value[variant_idx.value];\r\n    });\r\n\r\n    // PAGES\r\n    const goto_previous_letter = () => {\r\n      variant_idx.value = Math.max(0, variant_idx.value - 1);\r\n    };\r\n\r\n    const goto_next_letter = () => {\r\n      variant_idx.value = Math.min(\r\n        variant_idx.value + 1,\r\n        variant_count.value - 1\r\n      );\r\n    };\r\n\r\n    const use_the_letter_as_current = () => {\r\n      if (variant_idx.value == 0 || search_query.value != \"\") return;\r\n      emit(\"update\", addresses.value[variant_idx.value - 1]);\r\n      variant_idx.value = 0;\r\n    };\r\n\r\n    const get_row_title = (designation) => {\r\n      switch (designation) {\r\n        case 1:\r\n          return \"Кому\";\r\n        case 2:\r\n          return \"Копия\";\r\n        case 3:\r\n          return \"Скрытая копия\";\r\n        default:\r\n          return null;\r\n      }\r\n    };\r\n\r\n    // NEW EMAIL\r\n    const validate_email = (text) =>\r\n      /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n        text\r\n      );\r\n\r\n    const add_email = (email) => {\r\n      if (validate_email(email) === false || variant_idx.value > 0) return;\r\n      let modified_current_variant = structuredClone(current_variant.value);\r\n      modified_current_variant.push({\r\n        description: \"\",\r\n        designation: 1,\r\n        domain: \"\",\r\n        email: \"\",\r\n        full_email: email.toLowerCase(),\r\n      });\r\n      emit(\"update\", address_encode(modified_current_variant));\r\n      search_query.value = \"\";\r\n    };\r\n\r\n    // CHOOSING\r\n    const next_designation = (x) => (x == 4 ? 1 : x + 1);\r\n\r\n    const change_designation = (full_email) => {\r\n      if (variant_idx.value > 0) return;\r\n\r\n      let modified_current_variant = structuredClone(current_variant.value);\r\n      modified_current_variant.forEach((e) => {\r\n        if (e.full_email === full_email)\r\n          e.designation = next_designation(e.designation);\r\n      });\r\n\r\n      emit(\"update\", address_encode(modified_current_variant));\r\n    };\r\n\r\n    // SEARCH\r\n    const search_query = ref(\"\");\r\n    const search_field_parameters = {\r\n      placeholder: \"Введите email или имя пользователя..\",\r\n      height: 30\r\n    };\r\n\r\n    const filtered_current_variant = computed(() => {\r\n      return current_variant.value.filter(\r\n        (e) =>\r\n          e.description\r\n            .toLowerCase()\r\n            .includes(search_query.value.toLowerCase()) ||\r\n          (e.email + \"@\" + e.domain)\r\n            .toLowerCase()\r\n            .includes(search_query.value.toLowerCase())\r\n      );\r\n    });\r\n\r\n    // SORT\r\n    const sorted_current_variant = computed(() => {\r\n      let arr = structuredClone(filtered_current_variant.value);\r\n      arr.sort((a, b) => {\r\n        let cmp = 0;\r\n\r\n        if (a.designation == 4 || b.designation == 4)\r\n          cmp = a.designation - b.designation;\r\n        if (cmp != 0) return cmp;\r\n\r\n        cmp = a.description.localeCompare(b.description);\r\n        if (cmp != 0) return cmp;\r\n\r\n        cmp = a.email.localeCompare(b.email);\r\n        return cmp;\r\n      });\r\n      return arr;\r\n    });\r\n\r\n    return {\r\n      variants,\r\n      variant_idx,\r\n      variant_count,\r\n      current_variant,\r\n      sorted_current_variant,\r\n      search_query,\r\n      search_field_parameters,\r\n      obj_with_all_NA_addresses,\r\n      change_designation,\r\n\r\n      // PAGES\r\n      get_row_title,\r\n      goto_previous_letter,\r\n      goto_next_letter,\r\n      use_the_letter_as_current,\r\n\r\n      // NEW EMAIL\r\n      validate_email,\r\n      add_email,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.formemailaddressinput {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.formemailaddressinput__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n}\r\n\r\n.formemailaddressinput__header,\r\n.formemailaddressinput__row {\r\n  display: flex;\r\n}\r\n\r\n.formemailaddressinput__email,\r\n.formemailaddressinput__description,\r\n.formemailaddressinput__domain {\r\n  flex-grow: 1;\r\n  flex-basis: 100px;\r\n}\r\n\r\n.formemailaddressinput__email {\r\n  margin-right: 10px;\r\n  text-align: right;\r\n}\r\n\r\n.formemailaddressinput__designation {\r\n  width: 50px;\r\n}\r\n\r\n.formemailaddressinput__search {\r\n  flex-grow: 1;\r\n}\r\n\r\n.formemailaddressinput__button {\r\n  min-width: 30px;\r\n  min-height: 30px;\r\n  padding: 3px;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  user-select: none;\r\n  color: lightcoral;\r\n}\r\n\r\n.formemailaddressinput__button:hover {\r\n  mask-image: linear-gradient(rgba(0, 0, 0, 1), transparent, rgba(0, 0, 0, 1));\r\n}\r\n\r\n.formemailaddressinput__button_left {\r\n  background: url(\"../../../public/left.png\") center center/24px 24px\r\n    no-repeat;\r\n}\r\n\r\n.formemailaddressinput__button_right {\r\n  background: url(\"../../../public/right.png\") center center/24px 24px\r\n    no-repeat;\r\n}\r\n\r\n.formemailaddressinput__button_approve {\r\n  background: url(\"../../../public/check.png\") center center/24px 24px\r\n    no-repeat;\r\n}\r\n\r\n.formemailaddressinput__button_add {\r\n  background: url(\"../../../public/plus.png\") center center/24px 24px\r\n    no-repeat;\r\n}\r\n\r\n.formemailaddressinput__button_inactive {\r\n  filter: gray;\r\n  -webkit-filter: grayscale(100%);\r\n}\r\n\r\n.formemailaddressinput__label {\r\n  padding: 3px;\r\n}\r\n\r\n.formemailaddressinput__rowcontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 300px;\r\n  max-height: 300px;\r\n  overflow-y: scroll;\r\n  padding: 3px;\r\n}\r\n.formemailaddressinput__row {\r\n  margin: 1px;\r\n  padding: 1px 30px;\r\n  cursor: pointer;\r\n  user-select: none;\r\n}\r\n\r\n.formemailaddressinput__row_to {\r\n  background-color: rgb(152, 251, 152);\r\n}\r\n\r\n.formemailaddressinput__row_cc {\r\n  background-color: rgb(255, 250, 205);\r\n}\r\n\r\n.formemailaddressinput__row_bcc {\r\n  background-color: rgb(240, 240, 240);\r\n}\r\n</style>\r\n","import { render } from \"./FormEmailToAddressInput.vue?vue&type=template&id=c2578df8&scoped=true\"\nimport script from \"./FormEmailToAddressInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormEmailToAddressInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormEmailToAddressInput.vue?vue&type=style&index=0&id=c2578df8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c2578df8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"formhtmlinput\">\r\n    <ckeditor\r\n      id=\"formhtmlinput-editor\"\r\n      class=\"formhtmlinput__editor\"\r\n      :style=\"{ height: height }\"\r\n      v-model=\"body_html\"\r\n      :config=\"editor_config\"\r\n      @namespaceloaded=\"onNamespaceLoaded\"\r\n    ></ckeditor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, watch, ref } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FormHtmlInput\",\r\n\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n  },\r\n\r\n  setup(props, { emit }) {\r\n    const height = computed(() => props.parameters[\"height\"] || 500);\r\n    const default_value = computed(() => props.parameters[\"default\"] || \"\");\r\n\r\n    const body_html = ref(props.value || default_value.value);\r\n\r\n    const height_in_px = height.value - 30;\r\n\r\n    const editor_config = {\r\n      fullPage: true,\r\n      allowedContent: true,\r\n      extraPlugins: [\"autogrow\", \"colorbutton\"],\r\n      resize_enabled: false,\r\n      autoGrow_minHeight: height_in_px,\r\n      autoGrow_maxHeight: height_in_px,\r\n      toolbar: [\r\n        { name: \"clipboard\", items: [\"Undo\"] },\r\n        { name: \"basicstyles\", items: [\"Bold\", \"Italic\", \"RemoveFormat\"] },\r\n        { name: \"colorbutton\", items: [\"BGColor\", \"TextColor\"] },\r\n      ],\r\n      colorButton_colors:\r\n        \"000,800000,8B4513,2F4F4F,008080,000080,4B0082,696969,\" +\r\n        \"B22222,A52A2A,DAA520,006400,40E0D0,0000CD,800080,808080,\" +\r\n        \"F00,FF8C00,FFD700,008000,0FF,00F,EE82EE,A9A9A9,\" +\r\n        \"FFA07A,FFA500,FFFF00,00FF00,AFEEEE,ADD8E6,DDA0DD,D3D3D3,\" +\r\n        \"FFF0F5,FAEBD7,FFFFE0,F0FFF0,F0FFFF,F0F8FF,E6E6FA,FFF\",\r\n      removePlugins: \"elementspath\",\r\n    };\r\n\r\n    const onNamespaceLoaded = (CKEDITOR) => {\r\n      // Plugin расположен в public\r\n      CKEDITOR.plugins.addExternal(\"colorbutton\", \"/colorbutton/\");\r\n    };\r\n\r\n    watch(body_html, (newValue) => emit(\"update\", newValue));\r\n\r\n    return { height, body_html, editor_config, onNamespaceLoaded };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.formhtmlinput {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.formhtmlinput__editor {\r\n  flex-grow: 1;\r\n  border: none;\r\n}\r\n</style>","import { render } from \"./FormHtmlInput.vue?vue&type=template&id=74cfadbf\"\nimport script from \"./FormHtmlInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormHtmlInput.vue?vue&type=script&lang=js\"\n\nimport \"./FormHtmlInput.vue?vue&type=style&index=0&id=74cfadbf&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"formhiddeninput\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, watch } from \"vue\";\r\nimport { evaluate_pattern } from \"../../logic/domain/model\";\r\n\r\nexport default {\r\n  name: \"FormHiddenInput\",\r\n  props: {\r\n    parameters: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    // ALLOWED CONTEXT EXPLANATION\r\n    // 1. ATTRIBUTES\r\n    //      Object (key, value), which can be user to generate VALUE\r\n    context: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    value: {\r\n      required: false,\r\n      default: \"\",\r\n    },\r\n  },\r\n\r\n  emits: [\"update\"],\r\n\r\n  setup(props, { emit }) {\r\n    const pattern = computed(() => props.parameters[\"pattern\"] || \"\");\r\n\r\n    const evaluated_value = computed(() => {\r\n      if (pattern.value || props.context[\"ATTRIBUTES\"])\r\n        try {\r\n          return evaluate_pattern(pattern, props.context[\"ATTRIBUTES\"], false);\r\n        } catch (e) {\r\n          console.log(\r\n            `Error during evaluation of FormHiddenInput with ` +\r\n              `pattern \"${pattern.value}\" and attributes \"${props.context[\"ATTRIBUTES\"]}\"`\r\n          );\r\n        }\r\n\r\n      return null;\r\n    });\r\n\r\n    if (evaluated_value.value && props.value != evaluated_value.value) {\r\n      emit(\"update\", evaluated_value.value);\r\n    }\r\n\r\n    watch(evaluated_value, (newValue) => {\r\n      if (newValue && props.value != newValue) emit(\"update\", newValue);\r\n    });\r\n\r\n    const default_value = props.parameters[\"default\"] || \"\";\r\n    // Эмитируем даже \"\", чтобы была возможность инициализировать атрибут\r\n    // через скрытое поле\r\n    if (!props.value && !evaluated_value.value) emit(\"update\", default_value);\r\n\r\n    return { pattern, evaluated_value, default_value };\r\n  },\r\n};\r\n</script>","import { render } from \"./FormHiddenInput.vue?vue&type=template&id=52d4f2ea\"\nimport script from \"./FormHiddenInput.vue?vue&type=script&lang=js\"\nexport * from \"./FormHiddenInput.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./BaseForm.vue?vue&type=template&id=636131d2&scoped=true\"\nimport script from \"./BaseForm.vue?vue&type=script&lang=js\"\nexport * from \"./BaseForm.vue?vue&type=script&lang=js\"\n\nimport \"./BaseForm.vue?vue&type=style&index=0&id=636131d2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-636131d2\"]])\n\nexport default __exports__","import { render } from \"./DocumentPage.vue?vue&type=template&id=87ace392&scoped=true\"\nimport script from \"./DocumentPage.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentPage.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentPage.vue?vue&type=style&index=0&id=87ace392&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-87ace392\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Выборки по типам документов\"\r\n      size=\"middle\"\r\n    />\r\n    <form-text-input\r\n      class=\"page__search\"\r\n      :value=\"query\"\r\n      :parameters=\"{ placeholder: 'Поиск...' }\"\r\n      @update=\"query = $event\"\r\n    />\r\n    <toggle-text-button\r\n      class=\"page__expandbutton\"\r\n      activeTitle=\"Вернуться в обычный режим\"\r\n      passiveTitle=\"Развернуть все\"\r\n      :isActive=\"is_all_expanded\"\r\n      @click=\"is_all_expanded = !is_all_expanded\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <folder-tree-node\r\n        :tree=\"folders\"\r\n        :usergroup_id=\"usergroup_id\"\r\n        :expand_all=\"is_all_expanded\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, ref } from \"vue\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport FormTextInput from \"../components/fields/FormTextInput.vue\";\r\nimport FolderTreeNode from \"../components/folder/FolderTreeNode.vue\";\r\nimport ToggleTextButton from \"../components/buttons/ToggleTextButton.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetFolders,\r\n  useGetUserGroups,\r\n} from \"../logic/service_layer/use_modules\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    FolderTreeNode,\r\n    FormTextInput,\r\n    ToggleTextButton,\r\n  },\r\n  name: \"FoldersPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    // USERGROUP\r\n    const usergroup_id = computed(() => {\r\n      const current_group = uow.usergroup_repository.get_current();\r\n      return current_group.value === null ? 0 : current_group.value.id;\r\n    });\r\n\r\n    // FOLDER\r\n\r\n    const folders = computed(() => {\r\n      // Сортируем массив по именам папок\r\n      let arr = uow.folder_repository\r\n        .values()\r\n        .map((obj) => obj.value)\r\n        .filter((folder) =>\r\n          folder.name.toLowerCase().includes(query.value.toLowerCase())\r\n        );\r\n      arr.sort((a, b) => a.name - b.name);\r\n\r\n      // Функция для формирования дерева\r\n      const insert_into = (obj, array_of_keys, value) => {\r\n        Array.prototype.forEach.call(array_of_keys, (key) => {\r\n          if (!Object.prototype.hasOwnProperty.call(obj, key)) obj[key] = {};\r\n          obj = obj[key];\r\n        });\r\n\r\n        obj[\"_target\"] = value;\r\n      };\r\n\r\n      // Формирование дерева папок\r\n      let folder_tree = {};\r\n      arr.forEach((folder) => {\r\n        // Разделяем имена по символу |\r\n        insert_into(\r\n          folder_tree,\r\n          folder.name.split(\"|\").map((value) => value.trim()),\r\n          folder\r\n        );\r\n      });\r\n\r\n      return folder_tree;\r\n    });\r\n\r\n    // SEARCH\r\n    const query = ref(\"\");\r\n\r\n    // EXPAND\r\n    const is_all_expanded = ref(false);\r\n\r\n    const user = uow.user_repository.get_current();\r\n\r\n    onMounted(async () => {\r\n      await useBeforeEnterPage(uow, [\"can_get_folders\"]); // Пытаемся автоматически зaлогинится\r\n      await Promise.all([useGetFolders(uow), useGetUserGroups(uow)]);\r\n    });\r\n\r\n    return {\r\n      usergroup_id,\r\n      folders,\r\n      query,\r\n      user,\r\n      is_all_expanded,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.page__search {\r\n  width: 50%;\r\n  height: 40px;\r\n  font-size: 1.2em;\r\n}\r\n</style>\r\n","<template>\r\n  <ul class=\"foldertreenode\">\r\n    <li\r\n      v-for=\"name in keysWithoutTarget\"\r\n      :key=\"name\"\r\n      class=\"foldertreenode__element\"\r\n    >\r\n      <div class=\"foldertreenode__list\">\r\n        <icon-button\r\n          v-if=\"hasNonTargetKeys(tree[name])\"\r\n          class=\"foldertreenode__listicon\"\r\n          icon_on=\"&#10148;\"\r\n          icon_off=\"&#9660;\"\r\n          :is_active=\"(is_opened[name] || expand_all) ? false : true\"\r\n          @click=\"is_opened[name] = !is_opened[name]\"\r\n        />\r\n\r\n        <router-link\r\n          v-if=\"hasTargetKey(tree[name])\"\r\n          class=\"foldertreenode__label\"\r\n          :to=\"{\r\n            name: 'SearchDocumentPage',\r\n            params: {\r\n              folder_id: tree[name]['_target'].id,\r\n              usergroup_id: usergroup_id,\r\n            },\r\n          }\"\r\n        >\r\n          {{ name }}\r\n        </router-link>\r\n\r\n        <span v-else class=\"foldertreenode__label\">{{ name }}</span>\r\n      </div>\r\n\r\n      <folder-tree-node\r\n        v-if=\"\r\n          hasNonTargetKeys(tree[name]) &&\r\n          name !== '_target' &&\r\n          (is_opened[name] || expand_all)\r\n        \"\r\n        :tree=\"tree[name]\"\r\n        :usergroup_id=\"usergroup_id\"\r\n        :expand_all=\"expand_all\"\r\n      />\r\n    </li>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, computed } from \"vue\";\r\nimport IconButton from \"../buttons/IconButton.vue\";\r\n\r\nexport default {\r\n  components: { IconButton },\r\n  name: \"FolderTreeNode\",\r\n  props: {\r\n    tree: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    usergroup_id: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    expand_all: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const keysWithoutTarget = computed(() => {\r\n      let arr = Object.keys(props.tree).filter((name) => name !== \"_target\");\r\n      arr.sort();\r\n      return arr;\r\n    });\r\n\r\n    const is_opened = reactive({});\r\n\r\n    const hasTargetKey = (obj) =>\r\n      Object.prototype.hasOwnProperty.call(obj, \"_target\");\r\n\r\n    const hasNonTargetKeys = (obj) =>\r\n      Object.keys(obj).filter((name) => name !== \"_target\").length > 0;\r\n\r\n    return { keysWithoutTarget, hasNonTargetKeys, hasTargetKey, is_opened };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\nul.foldertreenode {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.foldertreenode__element {\r\n  margin-left: 10px;\r\n}\r\n\r\n.foldertreenode__list {\r\n  display: flex;\r\n}\r\n\r\n.foldertreenode__label {\r\n  padding: 5px;\r\n  font-size: 24px;\r\n  text-decoration: none;\r\n  user-select: none;\r\n}\r\n</style>","import { render } from \"./FolderTreeNode.vue?vue&type=template&id=2c04dcae\"\nimport script from \"./FolderTreeNode.vue?vue&type=script&lang=js\"\nexport * from \"./FolderTreeNode.vue?vue&type=script&lang=js\"\n\nimport \"./FolderTreeNode.vue?vue&type=style&index=0&id=2c04dcae&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./FoldersPage.vue?vue&type=template&id=80e01fc0&scoped=true\"\nimport script from \"./FoldersPage.vue?vue&type=script&lang=js\"\nexport * from \"./FoldersPage.vue?vue&type=script&lang=js\"\n\nimport \"./FoldersPage.vue?vue&type=style&index=0&id=80e01fc0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-80e01fc0\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <heading-component\r\n        :text=\"`Корзина ${\r\n          action_progress < 100\r\n            ? '(выполнение действий ' + action_progress.toString() + '%)'\r\n            : ''\r\n        }`\"\r\n        size=\"middle\"\r\n      />\r\n    </div>\r\n    <div class=\"page__container\" v-show=\"action_progress === 100\">\r\n      <div class=\"page__searchcontainer\">\r\n        <div class=\"page__searchblock\">\r\n          <form-boolean-input\r\n            class=\"page__checkboxbutton\"\r\n            :parameters=\"{ size: 30 }\"\r\n            :value=\"is_all_selected\"\r\n            @click=\"handle_select_all_items()\"\r\n          />\r\n          <form-text-input\r\n            class=\"page__searchtype\"\r\n            :value=\"query.type\"\r\n            :parameters=\"{\r\n              height: 30,\r\n              placeholder: 'Тип',\r\n            }\"\r\n            @update=\"query.type = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"page__searchdescription\"\r\n            :value=\"query.description\"\r\n            :parameters=\"{\r\n              height: 30,\r\n              placeholder: 'Описание',\r\n            }\"\r\n            @update=\"query.description = $event\"\r\n          />\r\n        </div>\r\n        <div\r\n          class=\"page__listrow listrow\"\r\n          v-for=\"item in filtered_items\"\r\n          :key=\"item\"\r\n        >\r\n          <div\r\n            class=\"listrow__delete\"\r\n            title=\"Удалить строку\"\r\n            @click=\"item.remove_from_cart()\"\r\n          />\r\n          <div\r\n            class=\"listrow__lockicon\"\r\n            :class=\"{\r\n              listrow__lockicon_closed: item.is_blocked === true,\r\n            }\"\r\n          />\r\n          <form-boolean-input\r\n            class=\"listrow__checkbox\"\r\n            :value=\"item.id in selected_item_ids\"\r\n            :parameters=\"{ size: 30 }\"\r\n            @click=\"handle_select_item(item.id)\"\r\n          />\r\n          <form-text-field\r\n            class=\"listrow__type\"\r\n            :parameters=\"{ align: 'center' }\"\r\n            :value=\"item.type\"\r\n          />\r\n          <router-link class=\"listrow__href\" :to=\"item.route_obj\">\r\n            <form-text-field\r\n              class=\"listrow__description\"\r\n              :value=\"item.description\"\r\n            />\r\n          </router-link>\r\n        </div>\r\n      </div>\r\n      <div\r\n        v-if=\"count_of_selected_items == 0\"\r\n        class=\"page__actioncontainer actioncontainer\"\r\n      >\r\n        <form-text-field\r\n          class=\"actioncontainer__header\"\r\n          value=\"Произведите выбор объектов и здесь появятся возможные действия\"\r\n          :parameters=\"{ align: 'left' }\"\r\n        />\r\n      </div>\r\n      <div\r\n        v-if=\"count_of_selected_items > 0\"\r\n        class=\"page__actioncontainer actioncontainer\"\r\n      >\r\n        <form-text-field\r\n          class=\"actioncontainer__header\"\r\n          value=\"Действия над незаблокированными объектами:\"\r\n          :parameters=\"{ align: 'left' }\"\r\n        />\r\n        <div class=\"actioncontainer__row\">\r\n          <form-text-field\r\n            class=\"container__header\"\r\n            value=\"Действия над документами:\"\r\n            :parameters=\"{ align: 'left' }\"\r\n          />\r\n        </div>\r\n        <div class=\"actioncontainer__row\">\r\n          <div class=\"actioncontainer__cell actioncontainer__cell_left\">\r\n            <text-button\r\n              :disabled=\"seconds_before_document_copy_is_allowed > 0\"\r\n              :title=\"\r\n                seconds_before_document_copy_is_allowed == 0\r\n                  ? 'Копировать в группу'\r\n                  : 'Копировать в группу (через ' +\r\n                    seconds_before_document_copy_is_allowed.toString() +\r\n                    ' сек.)'\r\n              \"\r\n              @click=\"handle_copy_documents_to_usergroup()\"\r\n            />\r\n          </div>\r\n          <div class=\"actioncontainer__cell\">\r\n            <form-select-input\r\n              class=\"copycontainer__usergroupselect\"\r\n              :value=\"copy_list_usergroup_id.toString()\"\r\n              :parameters=\"{\r\n                options: copy_list_usergroups,\r\n              }\"\r\n              @update=\"copy_list_usergroup_id = parseInt($event)\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"actioncontainer__row\">\r\n          <form-text-field\r\n            class=\"container__header\"\r\n            value=\"Согласования:\"\r\n            :parameters=\"{ align: 'left' }\"\r\n          />\r\n        </div>\r\n        <div class=\"actioncontainer__row\">\r\n          <div class=\"actioncontainer__cell actioncontainer__cell_left\">\r\n            <text-button\r\n              title=\"Запросить согласование\"\r\n              :disabled=\"is_approval_action_username_chosen === false\"\r\n              @click=\"perform_action_on_selected_items('add_approval')\"\r\n            />\r\n          </div>\r\n          <div class=\"actioncontainer__cell\">\r\n            <form-filtered-select-input\r\n              class=\"approvalorderblock__input\"\r\n              :parameters=\"{\r\n                options: user_options,\r\n                placeholder: 'Поиск...',\r\n                size: 3,\r\n              }\"\r\n              :value=\"approval_action_username\"\r\n              @update=\"approval_action_username = $event\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"actioncontainer__row\">\r\n          <div\r\n            class=\"actioncontainer__approvalflowcontainer approvalflowcontainer\"\r\n          >\r\n            <text-button\r\n              v-if=\"!approval_flow\"\r\n              class=\"approvalflowcontainer__createbutton\"\r\n              title=\"Создать поток согласований\"\r\n              @click=\"handle_create_approval_flow()\"\r\n            />\r\n            <approval-flow\r\n              v-if=\"approval_flow\"\r\n              class=\"approvalflowcontainer__flow\"\r\n              :is_active=\"approval_flow.is_active\"\r\n              :is_saved=\"approval_flow.is_saved\"\r\n              :success=\"approval_flow.success\"\r\n              :created_at=\"approval_flow.created_at\"\r\n              :updated_at=\"approval_flow.updated_at\"\r\n              :steps=\"approval_flow.steps\"\r\n              :states=\"{}\"\r\n              :users=\"users\"\r\n              :can_be_modified=\"true\"\r\n              @add:step=\"handle_add_approval_flow_step()\"\r\n              @delete:step=\"handle_delete_approval_flow_step($event)\"\r\n              @attach:user=\"handle_attach_user_to_approval_flow_step(...$event)\"\r\n              @delete:user=\"\r\n                handle_delete_user_from_approval_flow_step(...$event)\r\n              \"\r\n              @save=\"handle_save_approval_flow()\"\r\n              @start=\"handle_start_approval_flow()\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"actioncontainer__row\">\r\n          <text-button\r\n            title=\"Остановить поток согласований\"\r\n            @click=\"handle_stop_approval_flow()\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, reactive, ref, watch } from \"vue\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../logic/service_layer/message_bus\";\r\nimport {\r\n  filterArrayOfObjects,\r\n  useBeforeEnterPage,\r\n  useGetCart,\r\n  useGetFolders,\r\n  useGetUsers,\r\n  useGetUserGroups,\r\n  useSelectionMixin,\r\n  usePerformActionMixin,\r\n} from \"../logic/service_layer/use_modules\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport TextButton from \"../components/buttons/TextButton.vue\";\r\nimport ApprovalFlow from \"../components/approval/ApprovalFlow.vue\";\r\nimport FormTextField from \"../components/fields/FormTextField.vue\";\r\nimport FormTextInput from \"../components/fields/FormTextInput.vue\";\r\nimport FormBooleanInput from \"../components/fields/FormBooleanInput.vue\";\r\nimport FormSelectInput from \"../components/fields/FormSelectInput.vue\";\r\nimport FormFilteredSelectInput from \"../components/fields/FormFilteredSelectInput.vue\";\r\n\r\nimport {\r\n  AddDocumentApproval,\r\n  DuplicateManyDocumentsToUsergroup,\r\n  RemoveDocumentFromCart,\r\n  CreateDocumentApprovalFlow,\r\n  AddDocumentApprovalFlowStep,\r\n  DeleteDocumentApprovalFlowStep,\r\n  AttachUserToDocumentApprovalFlowStep,\r\n  DeleteUserFromDocumentApprovalFlowStep,\r\n  SetDocumentApprovalFlow,\r\n  StartDocumentApprovalFlow,\r\n  StopDocumentApprovalFlow,\r\n} from \"../logic/domain/command\";\r\n\r\nimport { ApprovalFlow as ApprovalFlowModel } from \"../logic/domain/model\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    TextButton,\r\n    ApprovalFlow,\r\n    FormTextField,\r\n    FormTextInput,\r\n    FormBooleanInput,\r\n    FormSelectInput,\r\n    FormFilteredSelectInput,\r\n  },\r\n  name: \"CartPage\",\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n    // Перенесен в начало, иначе user = undefined внутри copy_list_usergroups\r\n    const user = uow.user_repository.get_current();\r\n\r\n    // USERGROUP\r\n    const copy_list_usergroups = computed(() => {\r\n      let arr = uow.usergroup_repository\r\n        .values()\r\n        .filter(\r\n          (obj) =>\r\n            !obj.value.is_private || obj.value.has_username(user.value.username)\r\n        )\r\n        .map((obj) => {\r\n          return {\r\n            id: obj.value.id,\r\n            name: obj.value.name,\r\n            value: obj.value.id.toString(),\r\n          };\r\n        });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const copy_list_usergroup_id = ref(0);\r\n\r\n    // Следим за изменениями groups, изменяем group_id соответственно\r\n    watch(copy_list_usergroups, (newValue) => {\r\n      if (copy_list_usergroup_id.value === 0 && newValue.length > 0) {\r\n        copy_list_usergroup_id.value = newValue[0].id;\r\n      }\r\n    });\r\n\r\n    // Кол-во секунд до активации кнопки копирования документа\r\n    const seconds_before_document_copy_is_allowed = ref(0);\r\n    const decrease_seconds_before_document_copy = () => {\r\n      if (seconds_before_document_copy_is_allowed.value > 0)\r\n        seconds_before_document_copy_is_allowed.value--;\r\n    };\r\n\r\n    //  Запускаем таймер\r\n    setInterval(decrease_seconds_before_document_copy, 1000);\r\n\r\n    // DOCUMENT\r\n    const generate_doc_route_obj = (doc) => {\r\n      return {\r\n        name: \"DocumentPage\",\r\n        params: {\r\n          folder_id: doc.folder_id,\r\n          usergroup_id: doc.usergroup_id,\r\n          document_id: doc.id,\r\n        },\r\n      };\r\n    };\r\n\r\n    const convert_doc_to_item = (doc) => {\r\n      return {\r\n        type: \"Документ\",\r\n        id: doc.id, // Работает правильно, если у всех сущностей id это uuid\r\n        folder_id: doc.folder_id,\r\n        usergroup_id: doc.usergroup_id,\r\n        is_blocked: doc.is_blocked,\r\n        description:\r\n          doc.raw_description == \"\"\r\n            ? \"Нет описания. Пересохраните документ.\"\r\n            : doc.raw_description,\r\n        route_obj: generate_doc_route_obj(doc),\r\n        remove_from_cart: async () => {\r\n          await MessageBus.handle(\r\n            new RemoveDocumentFromCart(doc.folder_id, doc.usergroup_id, doc.id),\r\n            uow\r\n          );\r\n        },\r\n        actions: {\r\n          add_approval: async () => {\r\n            await MessageBus.handle(\r\n              new AddDocumentApproval(\r\n                doc.folder_id,\r\n                doc.usergroup_id,\r\n                doc.id,\r\n                approval_action_username.value\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          create_approval_flow: async () => {\r\n            await MessageBus.handle(\r\n              new CreateDocumentApprovalFlow(doc.id),\r\n              uow\r\n            );\r\n          },\r\n          add_approval_flow_step: async () => {\r\n            await MessageBus.handle(\r\n              new AddDocumentApprovalFlowStep(doc.id),\r\n              uow\r\n            );\r\n          },\r\n          delete_approval_flow_step: async () => {\r\n            await MessageBus.handle(\r\n              new DeleteDocumentApprovalFlowStep(\r\n                doc.id,\r\n                approval_flow_step_index.value\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          attach_user_to_approval_flow_step: async () => {\r\n            await MessageBus.handle(\r\n              new AttachUserToDocumentApprovalFlowStep(\r\n                doc.id,\r\n                approval_flow_step_index.value,\r\n                approval_flow_step_username.value\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          delete_user_from_approval_flow_step: async () => {\r\n            await MessageBus.handle(\r\n              new DeleteUserFromDocumentApprovalFlowStep(\r\n                doc.id,\r\n                approval_flow_step_index.value,\r\n                approval_flow_step_username.value\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          save_approval_flow: async () => {\r\n            await MessageBus.handle(\r\n              new SetDocumentApprovalFlow(\r\n                doc.folder_id,\r\n                doc.usergroup_id,\r\n                doc.id\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          start_approval_flow: async () => {\r\n            await MessageBus.handle(\r\n              new StartDocumentApprovalFlow(\r\n                doc.folder_id,\r\n                doc.usergroup_id,\r\n                doc.id\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n          stop_approval_flow: async () => {\r\n            await MessageBus.handle(\r\n              new StopDocumentApprovalFlow(\r\n                doc.folder_id,\r\n                doc.usergroup_id,\r\n                doc.id\r\n              ),\r\n              uow\r\n            );\r\n          },\r\n        },\r\n      };\r\n    };\r\n\r\n    const docs = computed(() =>\r\n      uow.cart_repository\r\n        .doc_values()\r\n        .map((obj) => convert_doc_to_item(obj.value))\r\n    );\r\n\r\n    const query = reactive({\r\n      type: \"\",\r\n      description: \"\",\r\n    });\r\n\r\n    const filter_objs = (objs, query) =>\r\n      // false - не чувствителен к регистру\r\n      filterArrayOfObjects(objs, query, false).sort((a, b) =>\r\n        a.description.localeCompare(b.description)\r\n      );\r\n\r\n    const filtered_items = computed(() => filter_objs(docs.value, query));\r\n\r\n    // SELECTION\r\n    const {\r\n      selected_item_ids,\r\n      selected_items,\r\n      is_all_selected,\r\n      count_of_selected_items,\r\n      handle_select_all_items,\r\n      handle_select_item,\r\n      reset_selection,\r\n    } = useSelectionMixin(docs, filtered_items);\r\n\r\n    // USERS\r\n    const users = computed(() =>\r\n      uow.user_repository.values().map((e) => e.value)\r\n    );\r\n    const user_options = computed(() =>\r\n      [{ name: \"Выберите пользователя\", value: \"NOT_CHOSEN\" }].concat(\r\n        users.value\r\n          .filter((e) => e.is_active === true)\r\n          .map((e) => {\r\n            return {\r\n              name: (\r\n                e.last_name +\r\n                \" \" +\r\n                e.first_name +\r\n                \" (\" +\r\n                e.username +\r\n                \")\"\r\n              ).trim(),\r\n              value: e.username,\r\n            };\r\n          })\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      )\r\n    );\r\n\r\n    const approval_action_username = ref(\"NOT_CHOSEN\");\r\n    const is_approval_action_username_chosen = computed(\r\n      () => approval_action_username.value !== \"NOT_CHOSEN\"\r\n    );\r\n\r\n    // ACTION\r\n    const {\r\n      action_progress,\r\n      perform_action_on_items: perform_action_on_selected_items,\r\n    } =\r\n      // Отправляем по 30 запросов\r\n      usePerformActionMixin(selected_items, 30);\r\n\r\n    // COPY DOCUMENT TO USERGROUP\r\n    const handle_copy_documents_to_usergroup = async () => {\r\n      seconds_before_document_copy_is_allowed.value = 10;\r\n\r\n      // Распределяем документы по папкам и группам пользователей\r\n      let doc_lists = {};\r\n      selected_items.value.forEach((doc) => {\r\n        const key =\r\n          doc.folder_id.toString() + \" \" + doc.usergroup_id.toString();\r\n\r\n        if (key in doc_lists) {\r\n          doc_lists[key].push(doc.id);\r\n        } else doc_lists[key] = [doc.id];\r\n      });\r\n\r\n      // Для каждой группы документов формируем запрос\r\n      let messages = [];\r\n      Object.keys(doc_lists).forEach((key) => {\r\n        const temp = key.split(\" \");\r\n        const folder_id = parseInt(temp[0]);\r\n        const usergroup_id = parseInt(temp[1]);\r\n\r\n        messages.push(\r\n          MessageBus.handle(\r\n            new DuplicateManyDocumentsToUsergroup(\r\n              folder_id,\r\n              usergroup_id,\r\n              copy_list_usergroup_id.value,\r\n              doc_lists[key]\r\n            ),\r\n            uow\r\n          )\r\n        );\r\n      });\r\n\r\n      await Promise.all(messages);\r\n    };\r\n\r\n    // APPROVAL FLOW\r\n    const approval_flow = ref(null);\r\n    const approval_flow_step_index = ref(null);\r\n    const approval_flow_step_username = ref(null);\r\n\r\n    const handle_create_approval_flow = () => {\r\n      approval_flow.value = new ApprovalFlowModel(\r\n        null, // id\r\n        false, // is_active\r\n        false, // success,\r\n        [[]], // steps,\r\n        new Date(), // created_at\r\n        new Date() // updated_at\r\n      );\r\n      perform_action_on_selected_items(\"create_approval_flow\");\r\n    };\r\n\r\n    const handle_add_approval_flow_step = () => {\r\n      approval_flow.value.add_step();\r\n      perform_action_on_selected_items(\"add_approval_flow_step\");\r\n    };\r\n\r\n    const handle_delete_approval_flow_step = (index) => {\r\n      approval_flow.value.delete_step(index);\r\n      approval_flow_step_index.value = index;\r\n      perform_action_on_selected_items(\"delete_approval_flow_step\");\r\n    };\r\n\r\n    const handle_attach_user_to_approval_flow_step = (index, username) => {\r\n      approval_flow.value.add_username_to_step(index, username);\r\n      approval_flow_step_index.value = index;\r\n      approval_flow_step_username.value = username;\r\n      perform_action_on_selected_items(\"attach_user_to_approval_flow_step\");\r\n    };\r\n\r\n    const handle_delete_user_from_approval_flow_step = (index, username) => {\r\n      approval_flow.value.delete_username_from_step(index, username);\r\n      approval_flow_step_index.value = index;\r\n      approval_flow_step_username.value = username;\r\n      perform_action_on_selected_items(\"delete_user_from_approval_flow_step\");\r\n    };\r\n\r\n    const handle_save_approval_flow = () => {\r\n      approval_flow.value.flush_empty_steps();\r\n      approval_flow.value.save();\r\n      perform_action_on_selected_items(\"save_approval_flow\");\r\n    };\r\n\r\n    const handle_start_approval_flow = () => {\r\n      perform_action_on_selected_items(\"start_approval_flow\");\r\n    };\r\n\r\n    const handle_stop_approval_flow = () => {\r\n      perform_action_on_selected_items(\"stop_approval_flow\");\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      useBeforeEnterPage(uow, [\"can_get_folders\"]);\r\n\r\n      await Promise.all([useGetFolders(uow), useGetCart(uow)]);\r\n      await Promise.all([useGetUserGroups(uow), useGetUsers(uow)]);\r\n    });\r\n\r\n    return {\r\n      // DOCUMENT\r\n      docs,\r\n      filtered_items,\r\n      query,\r\n\r\n      // SELECTION\r\n      selected_item_ids,\r\n      selected_items,\r\n      count_of_selected_items,\r\n      handle_select_item,\r\n      reset_selection,\r\n      is_all_selected,\r\n      handle_select_all_items,\r\n\r\n      // USERS\r\n      user,\r\n      users,\r\n      user_options,\r\n      approval_action_username,\r\n      is_approval_action_username_chosen,\r\n\r\n      // USERGROUP\r\n      copy_list_usergroups,\r\n      copy_list_usergroup_id,\r\n\r\n      // ACTION\r\n      action_progress,\r\n      seconds_before_document_copy_is_allowed,\r\n      perform_action_on_selected_items,\r\n      handle_copy_documents_to_usergroup,\r\n\r\n      // APPROVAL FLOW\r\n      approval_flow,\r\n      approval_flow_step_index,\r\n      handle_create_approval_flow,\r\n      handle_add_approval_flow_step,\r\n      handle_delete_approval_flow_step,\r\n      handle_attach_user_to_approval_flow_step,\r\n      handle_delete_user_from_approval_flow_step,\r\n      handle_save_approval_flow,\r\n      handle_start_approval_flow,\r\n      handle_stop_approval_flow,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__header {\r\n  display: flex;\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__searchcontainer {\r\n  display: flex;\r\n  flex-grow: 1;\r\n  flex-direction: column;\r\n  max-width: 600px;\r\n}\r\n\r\n.page__actioncontainer {\r\n  min-width: 300px;\r\n  margin-left: 50px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.actioncontainer__header {\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.actioncontainer__row {\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  width: 100%;\r\n}\r\n\r\n.actioncontainer__cell {\r\n  display: flex;\r\n  flex-grow: 1;\r\n}\r\n\r\n.actioncontainer__cell_left {\r\n  min-width: 200px;\r\n  max-width: 200px;\r\n}\r\n\r\n.page__searchblock {\r\n  display: flex;\r\n}\r\n\r\n.listrow {\r\n  display: flex;\r\n  width: 100%;\r\n  align-items: center;\r\n  padding-top: 3px;\r\n}\r\n\r\n.page__checkboxbutton {\r\n  margin-left: 60px;\r\n}\r\n\r\n.page__searchtype,\r\n.listrow__type {\r\n  min-width: 150px;\r\n  width: 150px;\r\n  padding-left: 5px\r\n}\r\n\r\n.page__searchdescription,\r\n.listrow__description {\r\n  flex-grow: 1;\r\n  padding-left: 5px\r\n}\r\n\r\n.listrow__lockicon {\r\n  min-width: 30px;\r\n  min-height: 30px;\r\n  max-width: 30px;\r\n  max-height: 30px;\r\n}\r\n\r\n.listrow__lockicon_closed {\r\n  background: url(\"../../public/lock.png\") center center/26px 26px no-repeat;\r\n}\r\n\r\n.listrow__delete:hover {\r\n  transform: rotate(30deg);\r\n}\r\n\r\n.listrow__delete {\r\n  min-width: 30px;\r\n  min-height: 30px;\r\n  max-width: 30px;\r\n  max-height: 30px;\r\n  transition: all 0.25s;\r\n  cursor: pointer;\r\n  background: url(\"../../public/delete.png\") center center/26px 26px no-repeat;\r\n}\r\n\r\n/* .listrow__checkbox {\r\n  width: 30px;\r\n  height: 30px;\r\n  padding: 3px;\r\n} */\r\n\r\n.container__header {\r\n  font-weight: 500;\r\n  padding: 3px;\r\n}\r\n\r\n.approvalflowcontainer {\r\n  flex-grow: 1;\r\n}\r\n</style>\r\n            ","import { render } from \"./CartPage.vue?vue&type=template&id=0a15f685&scoped=true\"\nimport script from \"./CartPage.vue?vue&type=script&lang=js\"\nexport * from \"./CartPage.vue?vue&type=script&lang=js\"\n\nimport \"./CartPage.vue?vue&type=style&index=0&id=0a15f685&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a15f685\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <heading-component :text=\"'Мой профиль'\" size=\"middle\" />\r\n    </div>\r\n    <div class=\"page__container\">\r\n      <form-text-field\r\n        class=\"container__header\"\r\n        value=\"Настройка замещения пользователя:\"\r\n        :parameters=\"{ align: 'left' }\"\r\n      />\r\n      <div class=\"container__row\">\r\n        <div class=\"container__cell container__cell_left\">\r\n          <text-button\r\n            title=\"Назначить заместителя\"\r\n            :disabled=\"is_replacement_username_chosen === false\"\r\n            @click=\"handle_add_user_replacement()\"\r\n          />\r\n        </div>\r\n        <div class=\"container__cell\">\r\n          <form-filtered-select-input\r\n            :value=\"replacement_username\"\r\n            :parameters=\"{\r\n              options: user_options,\r\n              placeholder: 'Поиск...',\r\n              size: 3,\r\n            }\"\r\n            @update=\"replacement_username = $event\"\r\n          />\r\n        </div>\r\n        <div class=\"container__cell\">\r\n          <text-button\r\n            class=\"container__cellbutton\"\r\n            v-for=\"user in user_replacements\"\r\n            :key=\"user.id\"\r\n            :title=\"user.last_name + ' ' + user.first_name + ' (X)'\"\r\n            @click=\"handle_delete_user_replacement(user.username)\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"container__row\">\r\n        <div class=\"container__cell container__cell_left\">\r\n          <form-text-field\r\n            class=\"container__celllabel\"\r\n            value=\"Работаю от имени:\"\r\n          />\r\n        </div>\r\n        <div class=\"container__cell\">\r\n          <form-select-input\r\n            :value=\"behalf_username\"\r\n            :parameters=\"{\r\n              options: behalf_users_options,\r\n            }\"\r\n            @update=\"handle_change_on_behalf_user($event)\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, ref } from \"vue\";\r\nimport { VueUnitOfWork } from \"../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../logic/service_layer/message_bus\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetUsers,\r\n  useGetUserReplacements,\r\n  useGetOnBehalfUsers,\r\n} from \"../logic/service_layer/use_modules\";\r\nimport HeadingComponent from \"../components/HeadingComponent.vue\";\r\nimport TextButton from \"../components/buttons/TextButton.vue\";\r\nimport {\r\n  AddUserReplacement,\r\n  DeleteUserReplacement,\r\n  SetOnBehalfUser,\r\n} from \"../logic/domain/command\";\r\nimport FormTextField from \"../components/fields/FormTextField.vue\";\r\nimport FormSelectInput from \"../components/fields/FormSelectInput.vue\";\r\nimport FormFilteredSelectInput from \"../components/fields/FormFilteredSelectInput.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    TextButton,\r\n    FormTextField,\r\n    FormSelectInput,\r\n    FormFilteredSelectInput,\r\n  },\r\n  name: \"CartPage\",\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    // USERS\r\n    const user = uow.user_repository.get_current();\r\n    const users = computed(() =>\r\n      uow.user_repository.values().map((e) => e.value)\r\n    );\r\n    const user_replacements = computed(() =>\r\n      uow.user_replacement_repository\r\n        .values(user.value.username)\r\n        .map((e) => e.value)\r\n    );\r\n    const user_options = computed(() =>\r\n      [{ name: \"Выберите пользователя\", value: \"NOT_CHOSEN\" }].concat(\r\n        users.value\r\n          .filter((e) => e.is_active === true)\r\n          .map((e) => {\r\n            return {\r\n              name: (\r\n                e.last_name +\r\n                \" \" +\r\n                e.first_name +\r\n                \" (\" +\r\n                e.username +\r\n                \")\"\r\n              ).trim(),\r\n              value: e.username,\r\n            };\r\n          })\r\n          .sort((a, b) => a.name.localeCompare(b.name))\r\n      )\r\n    );\r\n\r\n    const replacement_username = ref(\"NOT_CHOSEN\");\r\n    const is_replacement_username_chosen = computed(\r\n      () => replacement_username.value !== \"NOT_CHOSEN\"\r\n    );\r\n\r\n    const handle_add_user_replacement = async () => {\r\n      MessageBus.handle(\r\n        new AddUserReplacement(replacement_username.value),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_delete_user_replacement = async (username) => {\r\n      MessageBus.handle(new DeleteUserReplacement(username), uow);\r\n    };\r\n\r\n    // ON BEHALF USERS\r\n    const behalf_users = uow.user_repository.get_on_behalf_users(); //Ref\r\n    const behalf_users_options = computed(() => {\r\n      if (behalf_users.value === null) return [];\r\n\r\n      let arr = behalf_users.value.map((obj) => {\r\n        return {\r\n          name: obj.last_name + \" \" + obj.first_name,\r\n          value: obj.username,\r\n        };\r\n      });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const behalf_username = computed(() => {\r\n      if (user.value === null) return null;\r\n\r\n      return user.value.on_behalf === null\r\n        ? user.value.username\r\n        : user.value.on_behalf;\r\n    });\r\n\r\n    const handle_change_on_behalf_user = (username) => {\r\n      if (username) MessageBus.handle(new SetOnBehalfUser(username), uow);\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      useBeforeEnterPage(uow, []);\r\n      await Promise.all([\r\n        useGetUsers(uow),\r\n        useGetUserReplacements(uow),\r\n        useGetOnBehalfUsers(uow),\r\n      ]);\r\n    });\r\n\r\n    return {\r\n      // USERS\r\n      user,\r\n      users,\r\n\r\n      // USER REPLACEMENT\r\n      user_replacements,\r\n      user_options,\r\n      replacement_username,\r\n      is_replacement_username_chosen,\r\n      handle_add_user_replacement,\r\n      handle_delete_user_replacement,\r\n\r\n      // BEHALF USERS\r\n      behalf_users,\r\n      behalf_users_options,\r\n      behalf_username,\r\n      handle_change_on_behalf_user,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__header {\r\n  display: flex;\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.container__header {\r\n  font-weight: bold;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.container__row {\r\n  display: flex;\r\n  margin-bottom: 5px;\r\n  align-items: flex-start;\r\n}\r\n\r\n.container__cell {\r\n  display: flex;\r\n}\r\n\r\n.container__cell_left {\r\n  min-width: 200px;\r\n}\r\n\r\n.container__celllabel {\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n</style>\r\n            ","import { render } from \"./ProfilePage.vue?vue&type=template&id=672bfaef&scoped=true\"\nimport script from \"./ProfilePage.vue?vue&type=script&lang=js\"\nexport * from \"./ProfilePage.vue?vue&type=script&lang=js\"\n\nimport \"./ProfilePage.vue?vue&type=style&index=0&id=672bfaef&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-672bfaef\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Настройки\" size=\"middle\" />\r\n    <router-link class=\"page__item\" :to=\"{ name: 'UserSettingsPage' }\">\r\n      Пользователи\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'UserReplacementsPage' }\">\r\n      Заместители пользователей\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'UserGroupSettingsPage' }\">\r\n      Группы пользователей\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'UsersInUserGroupsSettingsPage' }\">\r\n      Пользователи в группах\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'FolderSettingsPage' }\">\r\n      Выборки\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'UserFolderSettingsPage' }\">\r\n      Настройки пользователей в папках\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'PermissionSettingsPage' }\">\r\n      Права\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'FlowsPage' }\">\r\n      Потоки\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'FlowItemsPage' }\">\r\n      Экземпляры потоков\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'ServerSettingsPage' }\">\r\n      Серверные переменные\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'CounterSettingsPage' }\">\r\n      Счетчики\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'MailBoxSettingsPage' }\">\r\n      Почтовые ящики\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'MailChannelSettingsPage' }\">\r\n      Почтовые каналы\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'MailChannelsInMailBoxesSettingsPage' }\">\r\n      Привязка почтовых каналов к ящикам\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'MailMessagesPage' }\">\r\n      Письма\r\n    </router-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\";\r\nimport { useBeforeEnterPage } from \"../../logic/service_layer/use_modules\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\n\r\nexport default {\r\n  components: { HeadingComponent },\r\n  name: \"UserSettingsPage\",\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n    onMounted(() => {\r\n      useBeforeEnterPage(uow, [\"can_view_settings\"]); // Пытаемся автоматически зaлогинится\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__item {\r\n  font-size: 24px;\r\n  padding-bottom: 15px;\r\n  text-decoration: none;\r\n}\r\n</style>","import { render } from \"./SettingsPage.vue?vue&type=template&id=baa4e3c8&scoped=true\"\nimport script from \"./SettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./SettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./SettingsPage.vue?vue&type=style&index=0&id=baa4e3c8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-baa4e3c8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Пользователи\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport { SetUser, DeleteUser } from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  useCurrentMixin,\r\n  useGetRoles,\r\n  useGetUsers,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"UserSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.username,\r\n        attributes: {\r\n          username: obj.username,\r\n          email: obj.email,\r\n          first_name: obj.first_name,\r\n          last_name: obj.last_name,\r\n          is_active: obj.is_active === true ? \"Y\" : \"N\",\r\n          access_group_regex: obj.access_group_regex,\r\n          role: obj.role,\r\n          role_inside_group: obj.role_inside_group,\r\n          role_outside_group: obj.role_outside_group,\r\n          on_behalf: obj.on_behalf,\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.user_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_change = uow.permission_repository.has(\"can_change_user\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_user\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) => (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"username\",\r\n        size: \"w200\",\r\n        grow: true,\r\n        align: 'left',\r\n        fields: [\r\n          {\r\n            placeholder: \"Имя пользователя\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"email\",\r\n        size: \"w300\",\r\n        fields: [\r\n          {\r\n            placeholder: \"E-mail\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"last_name\",\r\n        size: \"w200\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Фамилия\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"first_name\",\r\n        grow: true,\r\n        size: \"w200\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Имя\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"is_active\",\r\n        size: \"w30\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Активен?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      username: \"\",\r\n      email: \"\",\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      patronomic: \"\",\r\n      position: \"\",\r\n      department: \"\",\r\n      is_active: false,\r\n      access_group_regex: \"^$\",\r\n      role: \"\",\r\n      role_inside_group: \"\",\r\n      role_outside_group: \"\",\r\n      on_behalf: null,\r\n    };\r\n\r\n    const to_repository_convertion = {\r\n    };\r\n\r\n    const from_repository_convertion = {\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.user_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_edit_block_valid = computed(() => true);\r\n\r\n    const update_action = async () => {\r\n      const message = new SetUser(\r\n        ...[\r\n          \"username\",\r\n          \"is_active\",\r\n          \"access_group_regex\",\r\n          \"role\",\r\n          \"role_inside_group\",\r\n          \"role_outside_group\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteUser(\r\n        ...[\"username\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const role_variants =\r\n      uow.user_folder_settings_repository.get_role_variants();\r\n\r\n    const role_options = computed(() =>\r\n      role_variants.value\r\n        ? role_variants.value.map((x) => ({ name: x, value: x }))\r\n        : []\r\n    );\r\n\r\n    const form_pages = computed(() => [\r\n      {\r\n        size: \"w450\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Имя пользователя:\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"username\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"E-mail:\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"email\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Фамилия:\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"last_name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Имя:\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"first_name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Позиция:\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"position\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Департамент\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"department\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Активен ?\",\r\n          },\r\n          {\r\n            type: \"FormBooleanInput\",\r\n            parameters: { size: 20 },\r\n            bind: \"is_active\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Регулярное выражение группы доступа:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"access_group_regex\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Роль общая:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: {\r\n              options: role_options.value,\r\n            },\r\n            bind: \"role\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Роль внутри группы пользователей:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: {\r\n              options: role_options.value,\r\n            },\r\n            bind: \"role_inside_group\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Роль вне группы пользователей:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: {\r\n              options: role_options.value,\r\n            },\r\n            bind: \"role_outside_group\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Работает от имени пользователя:\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"on_behalf\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_user\"]);\r\n      await Promise.all([useGetRoles(uow), useGetUsers(uow)]);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 350px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"searchcomponent\">\r\n    <document-page-search-row\r\n      class=\"searchcomponent__searchrow\"\r\n      :search_schema=\"schema\"\r\n      :should_emit_search_event_on_any_keypress=\"\r\n        should_emit_search_event_on_any_keypress\r\n      \"\r\n      :required_space_for_link=\"has_link\"\r\n      :is_selection_required=\"is_selection_required\"\r\n      :is_all_selected=\"false\"\r\n      @search:docs=\"$emit('search', $event)\"\r\n      @selectall:docs=\"handle_select_all_items()\"\r\n    />\r\n    <document-search-status-row\r\n      class=\"searchcomponent__searchstatus\"\r\n      :count=\"items.length\"\r\n      :time=\"search_time\"\r\n      :min_index=\"pagination_min_index\"\r\n      :max_index=\"pagination_max_index\"\r\n    />\r\n    <document-page-sort-row\r\n      class=\"searchcomponent__sortrow\"\r\n      :search_schema=\"schema\"\r\n      :sort_asc=\"var_sort_asc\"\r\n      :sort_by=\"var_sort_by\"\r\n      @toggle:direction=\"var_sort_asc = !var_sort_asc\"\r\n      @sort:by=\"[var_sort_by, var_sort_rule] = $event\"\r\n    />\r\n    <document-pagination-row\r\n      class=\"searchcomponent__paginationrow\"\r\n      v-if=\"items.length > 0\"\r\n      :total_count=\"items.length\"\r\n      :count_per_page=\"pagination_count_per_page\"\r\n      :current_page=\"pagination_current_page\"\r\n      :variants=\"pagination_variants\"\r\n      @set:page_range=\"handle_set_page_range($event.min, $event.max)\"\r\n      @select:page=\"pagination_current_page = $event\"\r\n      @set:count_per_page=\"pagination_count_per_page = $event\"\r\n    />\r\n    <!-- <div v-if=\"is_object_list_shown\" class=\"searchcomponent__listcontainer\"> -->\r\n    <div\r\n      class=\"searchcomponent__row\"\r\n      v-for=\"obj in paginated_items\"\r\n      :key=\"obj.id\"\r\n      :class=\"{ searchcomponent__row_selected: current_id === obj.id }\"\r\n      @click=\"$emit('choose', obj.id)\"\r\n    >\r\n      <document-attribute-row\r\n        class=\"searchcomponent__attributerow\"\r\n        :id=\"obj.id\"\r\n        :search_schema=\"schema\"\r\n        :has_link=\"has_link\"\r\n        :link_route_obj=\"obj.link_to_single_page\"\r\n        :attributes=\"obj.attributes\"\r\n        :is_selection_required=\"is_selection_required\"\r\n        :is_selected=\"obj.id in selected_item_ids\"\r\n        @select:doc=\"handle_select_item(obj.id)\"\r\n      />\r\n      <document-files-row\r\n        class=\"searchcomponent__filerow\"\r\n        v-if=\"is_files_shown\"\r\n        :files=\"obj.attachments\"\r\n        @download:file=\"\r\n          $emit('download:file', {\r\n            id: obj.id,\r\n            file: $event[0],\r\n            inline: $event[1],\r\n          })\r\n        \"\r\n        @copy_link_to:file=\"\r\n          $emit('copy_link_to:file', { id: obj.id, file: $event })\r\n        \"\r\n      />\r\n    </div>\r\n    <!-- </div> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, watch } from \"vue\";\r\nimport {\r\n  useGetSortFunction,\r\n  usePaginationMixin,\r\n  useSelectionMixin,\r\n} from \"../logic/service_layer/use_modules\";\r\nimport DocumentPageSearchRow from \"./document/DocumentPageSearchRow.vue\";\r\nimport DocumentAttributeRow from \"./document/DocumentAttributeRow.vue\";\r\nimport DocumentPageSortRow from \"./document/DocumentPageSortRow.vue\";\r\nimport DocumentPaginationRow from \"./document/DocumentPaginationRow.vue\";\r\nimport DocumentSearchStatusRow from \"./document/DocumentSearchStatusRow.vue\";\r\nimport DocumentFilesRow from \"./document/DocumentFilesRow.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    DocumentPageSearchRow,\r\n    DocumentAttributeRow,\r\n    DocumentPageSortRow,\r\n    DocumentPaginationRow,\r\n    DocumentSearchStatusRow,\r\n    DocumentFilesRow,\r\n  },\r\n  name: \"SearchComponent\",\r\n\r\n  props: {\r\n    model_objects: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    // total_count_of_model_objects: {\r\n    //   type: Number,\r\n    //   required: false,\r\n    //   default: 0\r\n    // },\r\n    schema: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    sort_by: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    sort_asc: { type: Boolean, required: false, default: false },\r\n    sort_rule: {\r\n      type: String,\r\n      required: false,\r\n      default: \"DEFAULT\",\r\n    },\r\n    convert_obj_to_item: {\r\n      type: Function,\r\n      required: true,\r\n    },\r\n    current_id: {\r\n      type: [Number, String],\r\n      required: false,\r\n      default: 0,\r\n    },\r\n    search_time: {\r\n      type: Number,\r\n      required: false,\r\n      default: 0,\r\n    },\r\n    is_searching: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    should_emit_search_event_on_any_keypress: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    // should_sort: {\r\n    //   type: Boolean,\r\n    //   required: false,\r\n    //   default: false,\r\n    // },\r\n    is_selection_required: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    has_link: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    is_files_shown: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    // is_search_row_shown: {\r\n    //   type: Boolean,\r\n    //   required: false,\r\n    //   default: true,\r\n    // },\r\n    // is_search_status_shown: {\r\n    //   type: Boolean,\r\n    //   required: false,\r\n    //   default: true,\r\n    // },\r\n    // is_sorting_shown: {\r\n    //   type: Boolean,\r\n    //   required: false,\r\n    //   default: true,\r\n    // },\r\n    // is_pagination_shown: {\r\n    //   type: Boolean,\r\n    //   required: false,\r\n    //   default: true,\r\n    // },\r\n    // is_object_list_shown: {\r\n    //   type: Boolean,\r\n    //   required: false,\r\n    //   default: true,\r\n    // },\r\n  },\r\n\r\n  emits: [\r\n    \"choose\",\r\n    \"search\",\r\n    \"download:file\",\r\n    \"copy_link_to:file\",\r\n    \"select\",\r\n    // \"select:sort_by\",\r\n    // \"select:sort_asc\",\r\n    // \"select:page\",\r\n    // \"select:count_per_page\",\r\n  ],\r\n\r\n  setup(props, { emit }) {\r\n    // SEARCH\r\n    const var_sort_by = ref(props.sort_by);\r\n    const var_sort_asc = ref(props.sort_asc);\r\n    const var_sort_rule = ref(props.sort_rule);\r\n    const var_sort_func = ref(useGetSortFunction(var_sort_rule.value));\r\n\r\n    // watch(\r\n    //   var_sort_by,\r\n    //   () => emit('select:sort_by', var_sort_by.value)\r\n    // );\r\n\r\n    // watch(\r\n    //   var_sort_asc,\r\n    //   () => emit('select:sort_asc', var_sort_asc.value)\r\n    // );\r\n\r\n    watch(\r\n      var_sort_rule,\r\n      (newValue) => (var_sort_func.value = useGetSortFunction(newValue))\r\n    );\r\n\r\n    // ITEMS\r\n    const items = computed(() => {\r\n      let arr = props.model_objects;\r\n\r\n      arr.sort(\r\n        (a, b) =>\r\n          (var_sort_asc.value === true ? 1 : -1) *\r\n          var_sort_func.value(a[var_sort_by.value], b[var_sort_by.value])\r\n      );\r\n      return arr.map((obj) => props.convert_obj_to_item(obj));\r\n    });\r\n\r\n    // PAGINATION\r\n    const {\r\n      pagination_variants,\r\n      pagination_count_per_page,\r\n      pagination_current_page,\r\n      pagination_min_index,\r\n      pagination_max_index,\r\n      paginated_items,\r\n      handle_set_page_range,\r\n    } = usePaginationMixin(items);\r\n    // } = usePaginationMixin(items, props.total_count_of_model_objects);\r\n\r\n    // watch(\r\n    //   pagination_current_page,\r\n    //   () => emit('select:page', pagination_current_page.value)\r\n    // );\r\n\r\n    // watch(\r\n    //   pagination_count_per_page,\r\n    //   () => emit('select:count_per_page', pagination_count_per_page.value)\r\n    // );\r\n\r\n    // SELECTION\r\n    const {\r\n      selected_item_ids,\r\n      selected_items,\r\n      count_of_selected_items,\r\n      handle_select_all_items,\r\n      handle_select_item,\r\n      reset_selection,\r\n    } = useSelectionMixin(items, paginated_items);\r\n\r\n    watch(selected_items, (newValue) => emit(\"select\", newValue));\r\n\r\n    return {\r\n      items,\r\n\r\n      // SEARCH\r\n      var_sort_by,\r\n      var_sort_asc,\r\n      var_sort_rule,\r\n\r\n      // PAGINATION\r\n      paginated_items,\r\n      handle_set_page_range,\r\n      pagination_variants,\r\n      pagination_count_per_page,\r\n      pagination_current_page,\r\n      pagination_min_index,\r\n      pagination_max_index,\r\n\r\n      // SELECTION\r\n      selected_item_ids,\r\n      selected_items,\r\n      count_of_selected_items,\r\n      handle_select_all_items,\r\n      handle_select_item,\r\n      reset_selection,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.searchcomponent {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.searchcomponent__searchstatus {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 10px;\r\n}\r\n\r\n.searchcomponent__searchrow {\r\n  display: flex;\r\n}\r\n\r\n.searchcomponent__row {\r\n  cursor: pointer;\r\n}\r\n\r\n.searchcomponent__row:nth-child(even) {\r\n  background-color: rgb(215, 242, 255);\r\n}\r\n\r\n.searchcomponent__row_selected {\r\n  background-color: lightyellow !important;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"documentsearchstatusrow\">\r\n    <form-text-field :value=\"status\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nexport default {\r\n  components: { FormTextField },\r\n  name: \"DocumentSearchStatusRow\",\r\n  props: {\r\n    time: {\r\n      type: Number,\r\n      required: false,\r\n    },\r\n    count: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    min_index: {\r\n      type: Number,\r\n      required: false,\r\n    },\r\n    max_index: {\r\n      type: Number,\r\n      required: false,\r\n    },\r\n    count_of_selected: {\r\n      type: Number,\r\n      required: false,\r\n    },\r\n    is_searching: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  setup(props) {\r\n    const status = computed(() => {\r\n      if (props.is_searching) return ('Поиск...')\r\n      \r\n      let result =\r\n        \"Для поиска нажмите ENTER в любом окошке. Найдено \" + props.count.toString() + \"шт.\";\r\n      if (props.time) result += \" (\" + props.time.toString() + \" сек.)\";\r\n\r\n      if (props.min_index !== undefined && props.max_index !== undefined)\r\n        result +=\r\n          \" Показаны \" +\r\n          (props.min_index + 1).toString() +\r\n          \"-\" +\r\n          (props.max_index + 1).toString() +\r\n          \".\";\r\n\r\n      if (props.count_of_selected !== undefined)\r\n        result += \" Выделено \" + props.count_of_selected.toString() + \"шт.\";\r\n\r\n      return result;\r\n    });\r\n\r\n    return { status };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.documentsearchstatusrow {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>","import { render } from \"./DocumentSearchStatusRow.vue?vue&type=template&id=8c4e4b98&scoped=true\"\nimport script from \"./DocumentSearchStatusRow.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentSearchStatusRow.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentSearchStatusRow.vue?vue&type=style&index=0&id=8c4e4b98&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8c4e4b98\"]])\n\nexport default __exports__","import { render } from \"./SearchComponent.vue?vue&type=template&id=1a8d1a54&scoped=true\"\nimport script from \"./SearchComponent.vue?vue&type=script&lang=js\"\nexport * from \"./SearchComponent.vue?vue&type=script&lang=js\"\n\nimport \"./SearchComponent.vue?vue&type=style&index=0&id=1a8d1a54&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a8d1a54\"]])\n\nexport default __exports__","import { render } from \"./UserSettingsPage.vue?vue&type=template&id=68ce86f4&scoped=true\"\nimport script from \"./UserSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./UserSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./UserSettingsPage.vue?vue&type=style&index=0&id=68ce86f4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-68ce86f4\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Заместители пользователей\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__halfcontainer halfcontainer\">\r\n        <div class=\"page__titleblock\">\r\n          <form-text-field\r\n            class=\"halfcontainer__title\"\r\n            value=\"Все пользователи:\"\r\n          />\r\n        </div>\r\n        <div class=\"halfcontainer__searchblock searchblock\">\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.last_name\"\r\n            :parameters=\"{ placeholder: 'Фамилия' }\"\r\n            @update=\"query_left.last_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.first_name\"\r\n            :parameters=\"{ placeholder: 'Имя' }\"\r\n            @update=\"query_left.first_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.username\"\r\n            :parameters=\"{ placeholder: 'Имя пользователя' }\"\r\n            @update:value=\"query_left.username = $event\"\r\n          />\r\n        </div>\r\n        <user-item\r\n          class=\"searchblock__useritem\"\r\n          v-for=\"user in users_excluded_from_replacements\"\r\n          :key=\"user.username\"\r\n          :obj=\"user\"\r\n          :can_delete=\"false\"\r\n          :can_add=\"true\"\r\n          @add=\"handle_add(user)\"\r\n        />\r\n      </div>\r\n      <div class=\"page__halfcontainer halfcontainer\">\r\n        <div class=\"page__titleblock\">\r\n          <form-text-field class=\"halfcontainer__title\" value=\"Пользователь:\" />\r\n          <form-select-input\r\n            class=\"halfcontainer__selectgroup\"\r\n            :parameters=\"{ options: users }\"\r\n            :value=\"current_username\"\r\n            @update=\"current_username = $event\"\r\n          />\r\n        </div>\r\n        <div class=\"halfcontainer__searchblock searchblock\">\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :parameters=\"{ placeholder: 'Фамилия' }\"\r\n            :value=\"query_right.last_name\"\r\n            @update=\"query_right.last_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :parameters=\"{ placeholder: 'Имя' }\"\r\n            :value=\"query_right.first_name\"\r\n            @update=\"query_right.first_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_right.username\"\r\n            :parameters=\"{ placeholder: 'Имя пользователя' }\"\r\n            @update=\"query_right.username = $event\"\r\n          />\r\n        </div>\r\n        <user-item\r\n          class=\"searchblock__useritem\"\r\n          v-for=\"user in users_included_in_replacements\"\r\n          :key=\"user.username\"\r\n          :obj=\"user\"\r\n          :can_delete=\"true\"\r\n          :can_add=\"false\"\r\n          @delete=\"handle_delete(user)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, reactive, ref, watch } from \"vue\";\r\nimport {\r\n  GetUserReplacementsOfUser,\r\n  AddUserReplacementToUser,\r\n  DeleteUserReplacementFromUser,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetUsers,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport UserItem from \"../../components/user/UserItem.vue\";\r\nimport FormTextInput from \"../../components/fields/FormTextInput.vue\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\nimport FormSelectInput from \"../../components/fields/FormSelectInput.vue\";\r\nimport { filterArrayOfObjects } from \"../../logic/service_layer/use_modules\";\r\n\r\nexport default {\r\n  name: \"UserReplacementsPage\",\r\n  components: {\r\n    HeadingComponent,\r\n    UserItem,\r\n    FormTextInput,\r\n    FormTextField,\r\n    FormSelectInput,\r\n  },\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const users = computed(() => {\r\n      let arr = uow.user_repository.values().map((obj) => {\r\n        return {\r\n          id: obj.value.username,\r\n          name: obj.value.last_name + \" \" + obj.value.first_name,\r\n          value: obj.value.username,\r\n        };\r\n      });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const current_username = ref(null);\r\n\r\n    // Следим за изменениями users, изменяем current_username соответственно\r\n    watch(users, (newValue) => {\r\n      if (current_username.value === null && newValue.length > 0) {\r\n        current_username.value = newValue[0].id;\r\n      }\r\n    });\r\n\r\n    // Следим за изменениями current_username, отправляем запрос на получение заместителей\r\n    watch(current_username, () => handle_get());\r\n\r\n    const current_user_replacements = computed(() => {\r\n      if (current_username.value === null) return [];\r\n      return uow.user_replacement_repository\r\n        .values(current_username.value)\r\n        .map((e) => e.value.username);\r\n    });\r\n\r\n    const filter_users = (query, condition_func) => {\r\n      let objs = filterArrayOfObjects(\r\n        uow.user_repository.values().map((e) => e.value),\r\n        query\r\n      );\r\n\r\n      if (objs === null) objs = [];\r\n      objs = objs.filter((obj) => condition_func(obj.username));\r\n      objs.sort((a, b) => a.last_name.localeCompare(b.last_name));\r\n      return objs;\r\n    };\r\n\r\n    const users_included_in_replacements = computed(() =>\r\n      filter_users(query_right, (x) =>\r\n        current_user_replacements.value.includes(x)\r\n      )\r\n    );\r\n\r\n    const users_excluded_from_replacements = computed(() =>\r\n      filter_users(\r\n        query_left,\r\n        (x) => !current_user_replacements.value.includes(x)\r\n      )\r\n    );\r\n\r\n    // const users_included_in_replacements = computed(() => {\r\n    //   let objs = filterArrayOfObjects(\r\n    //     uow.user_repository.values().map((e) => e.value),\r\n    //     query_right\r\n    //   );\r\n\r\n    //   if (objs === null) objs = [];\r\n    //   objs = objs.filter((obj) =>\r\n    //     current_user_replacements.value.includes(obj.username)\r\n    //   );\r\n    //   objs.sort((a, b) => a.last_name.localeCompare(b.last_name));\r\n    //   return objs;\r\n    // });\r\n\r\n    // const users_excluded_from_replacements = computed(() => {\r\n    //   let objs = filterArrayOfObjects(\r\n    //     uow.user_repository.values().map((e) => e.value),\r\n    //     query_left\r\n    //   );\r\n\r\n    //   if (objs === null) objs = [];\r\n    //   objs = objs.filter(\r\n    //     (obj) => !current_user_replacements.value.includes(obj.username)\r\n    //   );\r\n    //   objs.sort((a, b) => a.last_name.localeCompare(b.last_name));\r\n    //   return objs;\r\n    // });\r\n\r\n    const handle_get = async () => {\r\n      await MessageBus.handle(\r\n        new GetUserReplacementsOfUser(current_username.value),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_add = async (user) => {\r\n      await MessageBus.handle(\r\n        new AddUserReplacementToUser(current_username.value, user.username),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_delete = async (user) => {\r\n      await MessageBus.handle(\r\n        new DeleteUserReplacementFromUser(\r\n          current_username.value,\r\n          user.username\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const query_left = reactive({\r\n      username: \"\",\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n    });\r\n\r\n    const query_right = reactive({\r\n      username: \"\",\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n    });\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_user\"]);\r\n      await Promise.all([useGetUsers(uow)]);\r\n    });\r\n\r\n    return {\r\n      users,\r\n      current_username,\r\n      current_user_replacements,\r\n      users_included_in_replacements,\r\n      users_excluded_from_replacements,\r\n      query_left,\r\n      query_right,\r\n      handle_add,\r\n      handle_delete,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__titleblock {\r\n  display: flex;\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n}\r\n\r\n.halfcontainer__selectgroup {\r\n  margin-left: 5px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.halfcontainer {\r\n  width: 300px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.searchblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 3px;\r\n}\r\n\r\n.searchinput {\r\n  margin: 1px 5px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"useritem\">\r\n    <form-text-field\r\n      class=\"useritem__description\"\r\n      :value=\"obj.last_name + ' ' + obj.first_name + ' (' + obj.username + ')'\"\r\n    />\r\n    <btn-component\r\n      class=\"useritem__button\"\r\n      v-if=\"can_add\"\r\n      caption=\"Добавить\"\r\n      type=\"success\"\r\n      @click=\"$emit('add')\"\r\n    />\r\n    <btn-component\r\n      class=\"useritem__button\"\r\n      v-if=\"can_delete\"\r\n      caption=\"Удалить\"\r\n      type=\"danger\"\r\n      @click=\"$emit('delete')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport BtnComponent from \"../buttons/BtnComponent.vue\";\r\nexport default {\r\n  components: { FormTextField, BtnComponent },\r\n  name: \"UserItem\",\r\n  props: {\r\n    obj: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    can_delete: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_add: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"delete\", \"add\"],\r\n};\r\n</script>\r\n\r\n<style>\r\n.useritem {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 3px;\r\n}\r\n\r\n.useritem__button {\r\n  margin: 1px 5px;\r\n}\r\n\r\n.useritem__description {\r\n  margin: 1px 5px;\r\n  width: 260px;\r\n}\r\n</style>","import { render } from \"./UserItem.vue?vue&type=template&id=b08b1a68\"\nimport script from \"./UserItem.vue?vue&type=script&lang=js\"\nexport * from \"./UserItem.vue?vue&type=script&lang=js\"\n\nimport \"./UserItem.vue?vue&type=style&index=0&id=b08b1a68&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./UserReplacementsPage.vue?vue&type=template&id=077a0600&scoped=true\"\nimport script from \"./UserReplacementsPage.vue?vue&type=script&lang=js\"\nexport * from \"./UserReplacementsPage.vue?vue&type=script&lang=js\"\n\nimport \"./UserReplacementsPage.vue?vue&type=style&index=0&id=077a0600&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-077a0600\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Настройки пользователей в выборках\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"username\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddUserFolderSettings,\r\n  UpdateUserFolderSettings,\r\n  DeleteUserFolderSettings,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  useCurrentMixin,\r\n  useGetUserFolderSettings,\r\n  useGetRoles,\r\n  useGetFolders,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"UserFolderSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          folder_id: obj.folder_id,\r\n          usergroup_slug: obj.usergroup_slug,\r\n          username: obj.username,\r\n          role: obj.role,\r\n          search_schema: obj.search_schema ? \"Y\" : \"N\",\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.user_folder_settings_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_role\");\r\n    const can_change = uow.permission_repository.has(\"can_change_role\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_role\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) => (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"username\",\r\n        size: \"w200\",\r\n        align: \"left\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Имя пользователя\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"folder_id\",\r\n        size: \"w100\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID выборки\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"usergroup_slug\",\r\n        size: \"w300\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Группа пользователей\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"role\",\r\n        size: \"w200\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Роль\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"search_schema\",\r\n        size: \"w100\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Есть схема?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      id: null,\r\n      folder_id: \"\",\r\n      usergroup_slug: \"\",\r\n      username: \"\",\r\n      role: null,\r\n      search_schema: null,\r\n    };\r\n\r\n    const to_repository_convertion = {\r\n      folder_id: parseInt,\r\n      role: (x) => x === '__NONE__' ? null : x,\r\n      search_schema: (x) => JSON.parse(x),\r\n    };\r\n\r\n    const from_repository_convertion = {\r\n      folder_id: (x) => x.toString(),\r\n      role: (x) => x === null ? '__NONE__' : x,\r\n      search_schema: (x) => JSON.stringify(x, null, 3), // Каждый новый отступ - 3 пробела\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.user_folder_settings_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_edit_block_valid = computed(\r\n      () =>\r\n        current.value.folder_id > 0 &&\r\n        current.value.usergroup_slug.length > 0 &&\r\n        current.value.username.length > 0 &&\r\n        current.value.role !== null &&\r\n        current.value.role.length > 0\r\n    );\r\n\r\n    const add_action = async () => {\r\n      const message = new AddUserFolderSettings(\r\n        ...[\r\n          \"folder_id\",\r\n          \"usergroup_slug\",\r\n          \"username\",\r\n          \"role\",\r\n          \"search_schema\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateUserFolderSettings(\r\n        ...[\r\n          \"id\",\r\n          \"folder_id\",\r\n          \"usergroup_slug\",\r\n          \"username\",\r\n          \"role\",\r\n          \"search_schema\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteUserFolderSettings(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const role_variants =\r\n      uow.user_folder_settings_repository.get_role_variants();\r\n\r\n    const role_options = computed(() =>\r\n      role_variants.value\r\n            ? [{ name: \"Отсутствует\", value: '__NONE__' }].concat(\r\n        role_variants.value\r\n            .map((x) => ({ name: x, value: x })))\r\n        : []\r\n    );\r\n\r\n    const form_pages = computed(() => [\r\n      {\r\n        size: \"w450\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"id\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"ID выборки:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"folder_id\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Slug группы пользователей:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"usergroup_slug\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Имя пользователя:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"username\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Роль:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: {\r\n              options: role_options.value,\r\n            },\r\n            bind: \"role\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Схема поиска в формате JSON\",\r\n          },\r\n          {\r\n            type: \"FormMultilineTextInput\",\r\n            parameters: {\r\n              rows: 15,\r\n              resize: \"vertical\",\r\n              is_disabled: true,\r\n            },\r\n            bind: \"search_schema\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_role\"]);\r\n      await Promise.all([\r\n        useGetRoles(uow),\r\n        useGetUserFolderSettings(uow),\r\n        useGetFolders(uow),\r\n      ]);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./UserFolderSettingsPage.vue?vue&type=template&id=41a68488&scoped=true\"\nimport script from \"./UserFolderSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./UserFolderSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./UserFolderSettingsPage.vue?vue&type=style&index=0&id=41a68488&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41a68488\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Выборки\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddFolder,\r\n  UpdateFolder,\r\n  DeleteFolder,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  validate_json,\r\n  useCurrentMixin,\r\n  useGetFolders\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport { FolderSettings } from \"../../logic/adapters/api_responses/models/folder/folder_settings\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"FolderSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          storage_path: obj.storage_path,\r\n          master_usergroup_slug: obj.master_usergroup_slug,\r\n          access_group: obj.access_group,\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.folder_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_folder\");\r\n    const can_change = uow.permission_repository.has(\"can_change_folder\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_folder\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) =>\r\n      (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        size: \"w200\",\r\n        align: \"left\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"storage_path\",\r\n        size: \"w400\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Хранилище\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      id: null,\r\n      name: \"\",\r\n      settings: \"\",\r\n      storage_path: \"\",\r\n      master_usergroup_slug: \"\",\r\n      access_group: \"ACCESS_RESTRICTED\",\r\n    };\r\n\r\n    const to_repository_convertion = {\r\n      settings: (x) => JSON.parse(x),\r\n    };\r\n\r\n    const from_repository_convertion = {\r\n      settings: (x) => JSON.stringify(x, null, 3), // Каждый новый отступ - 3 пробела\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.folder_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_settings_valid = computed(() =>\r\n      validate_json(current.value.settings, FolderSettings)\r\n    );\r\n\r\n    const is_edit_block_valid = computed(\r\n      () => is_settings_valid.value && current.value.name.length > 0\r\n    );\r\n\r\n    const add_action = async () => {\r\n      const message = new AddFolder(\r\n        ...[\"name\", \"storage_path\", \"master_usergroup_slug\", \"access_group\", \"settings\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateFolder(\r\n        ...[\r\n          \"id\",\r\n          \"name\",\r\n          \"storage_path\",\r\n          \"master_usergroup_slug\",\r\n          \"access_group\",\r\n          \"settings\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteFolder(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const form_pages = computed(() => [\r\n      {\r\n        size: \"w450\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"id\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Выборка:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Название хранилища / имя папки:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"storage_path\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Короткое имя (slug) мастер группы пользователей:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"master_usergroup_slug\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Группа доступа:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"access_group\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Описание в формате JSON\",\r\n          },\r\n          {\r\n            type: \"FormMultilineTextInput\",\r\n            parameters: {\r\n              rows: 15,\r\n              resize: \"vertical\",\r\n              color: is_settings_valid.value ? \"green\" : \"red\",\r\n            },\r\n            bind: \"settings\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_flow\"]);\r\n      await useGetFolders(uow);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./FolderSettingsPage.vue?vue&type=template&id=d709dc8c&scoped=true\"\nimport script from \"./FolderSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./FolderSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./FolderSettingsPage.vue?vue&type=style&index=0&id=d709dc8c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d709dc8c\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Права\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__row\">\r\n        <form-text-input\r\n          class=\"page__roleinput\"\r\n          :value=\"new_role\"\r\n          :parameters=\"{ placeholder: 'Имя роли' }\"\r\n          @change.prevent=\"new_role = $event.target.value\"\r\n        />\r\n        <btn-component\r\n          class=\"page__rolebutton\"\r\n          caption=\"Добавить роль\"\r\n          type=\"success\"\r\n          @click.prevent=\"add_role()\"\r\n        />\r\n        <btn-component\r\n          class=\"page__rolebutton\"\r\n          caption=\"Удалить роль\"\r\n          type=\"danger\"\r\n          @click.prevent=\"delete_role()\"\r\n        />\r\n      </div>\r\n      <div class=\"page__row\">\r\n        <div class=\"page__namecolumn\"></div>\r\n        <div\r\n          v-for=\"role in role_variants\"\r\n          :key=\"role\"\r\n          class=\"page__valuecolumn\"\r\n        >\r\n          {{ role }}\r\n        </div>\r\n      </div>\r\n      <div v-for=\"perm in permission_names\" :key=\"perm.name\" class=\"page__row\">\r\n        <div class=\"page__namecolumn\">{{ perm.description }}</div>\r\n        <div\r\n          v-for=\"role in role_variants\"\r\n          :key=\"role\"\r\n          class=\"page__valuecolumn\"\r\n        >\r\n          <input\r\n            type=\"checkbox\"\r\n            class=\"page__checkbox\"\r\n            :checked=\"permissions[role][perm.name].value\"\r\n            @click.prevent=\"\r\n              permissions[role][perm.name].value === true\r\n                ? delete_permission(role, perm.name)\r\n                : add_permission(role, perm.name)\r\n            \"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddPermission,\r\n  DeletePermission,\r\n  AddRole,\r\n  DeleteRole,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetRoles,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport FormTextInput from \"../../components/fields/FormTextInput.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\n\r\nexport default {\r\n  name: \"PermissionSettingsPage\",\r\n  components: { HeadingComponent, FormTextInput, BtnComponent },\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const role_variants =\r\n      uow.user_folder_settings_repository.get_role_variants(); // Ref\r\n\r\n    const permission_names = [\r\n      { name: \"can_get_folders\", description: \"Данные о папках - просмотр\" },\r\n      { name: \"can_view_settings\", description: \"Настройки - Просмотр\" },\r\n\r\n      { name: \"can_view_folder\", description: \"Папка - Просмотр\" },\r\n      { name: \"can_add_folder\", description: \"Папка - Добавление\" },\r\n      { name: \"can_change_folder\", description: \"Папка - Изменение\" },\r\n      { name: \"can_delete_folder\", description: \"Папка - Удаление\" },\r\n\r\n      {\r\n        name: \"can_view_usergroup\",\r\n        description: \"Группа пользователей - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_usergroup\",\r\n        description: \"Группа пользователей - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_change_usergroup\",\r\n        description: \"Группа пользователей - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_usergroup\",\r\n        description: \"Группа пользователей - Удаление\",\r\n      },\r\n\r\n      { name: \"can_view_user\", description: \"Пользователь - Просмотр\" },\r\n      { name: \"can_change_user\", description: \"Пользователь - Изменение\" },\r\n      { name: \"can_delete_user\", description: \"Пользователь - Удаление\" },\r\n\r\n      { name: \"can_view_role\", description: \"Роль - Просмотр\" },\r\n      { name: \"can_view_permission\", description: \"Права - Просмотр\" },\r\n      { name: \"can_change_permission\", description: \"Права - Изменение\" },\r\n      { name: \"can_add_role\", description: \"Роль - Добавление\" },\r\n      { name: \"can_change_role\", description: \"Роль - Изменение\" },\r\n      { name: \"can_delete_role\", description: \"Роль - Удаление\" },\r\n      {\r\n        name: \"can_view_userfoldersetting\",\r\n        description: \"Настройки пользователя для папки - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_userfoldersetting\",\r\n        description: \"Настройки пользователя для папки - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_change_userfoldersetting\",\r\n        description: \"Настройки пользователя для папки - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_userfoldersetting\",\r\n        description: \"Настройки пользователя для папки - Удаление\",\r\n      },\r\n      { name: \"can_view_document\", description: \"Документ - Просмотр\" },\r\n      { name: \"can_add_document\", description: \"Документ - Добавление\" },\r\n      { name: \"can_change_document\", description: \"Документ - Изменение\" },\r\n      { name: \"can_delete_document\", description: \"Документ - Удаление\" },\r\n\r\n      { name: \"can_view_file\", description: \"Файл - Просмотр\" },\r\n      { name: \"can_add_file\", description: \"Файл - Добавление\" },\r\n      { name: \"can_delete_file\", description: \"Файл - Удаление\" },\r\n\r\n      { name: \"can_view_service\", description: \"Сервис - Просмотр\" },\r\n\r\n      { name: \"can_view_flow\", description: \"Поток - Просмотр\" },\r\n      { name: \"can_add_flow\", description: \"Поток - Добавление\" },\r\n      { name: \"can_change_flow\", description: \"Поток - Изменение\" },\r\n      { name: \"can_delete_flow\", description: \"Поток - Удаление\" },\r\n      { name: \"can_view_flowitem\", description: \"Экземпляр потока - Просмотр\" },\r\n      {\r\n        name: \"can_add_flowitem\",\r\n        description: \"Экземпляр потока - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_change_flowitem\",\r\n        description: \"Экземпляр потока - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_flowitem\",\r\n        description: \"Экземпляр потока - Удаление\",\r\n      },\r\n      { name: \"can_view_flowitemstep\", description: \"Шаг потока - Просмотр\" },\r\n\r\n      {\r\n        name: \"can_view_documentapproval\",\r\n        description: \"Согласование документа - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_documentapproval\",\r\n        description: \"Согласование документа - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_change_documentapproval\",\r\n        description: \"Согласование документа - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_documentapproval\",\r\n        description: \"Согласование документа - Удаление\",\r\n      },\r\n      {\r\n        name: \"can_delegate_documentapproval\",\r\n        description: \"Согласование документа - Делегирование\",\r\n      },\r\n\r\n      {\r\n        name: \"can_view_documentapprovalflow\",\r\n        description: \"Поток согласований документа - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_change_documentapprovalflow\",\r\n        description: \"Поток согласований документа - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_documentapprovalflow\",\r\n        description: \"Поток согласований документа - Удаление\",\r\n      },\r\n\r\n      { name: \"can_empty_cart\", description: \"Корзина - Очистка\" },\r\n      { name: \"can_view_cart\", description: \"Корзина - Просмотр\" },\r\n      { name: \"can_add_to_cart\", description: \"Корзина - Добавление\" },\r\n      { name: \"can_remove_from_cart\", description: \"Корзина - Удаление\" },\r\n\r\n      {\r\n        name: \"can_view_userreplacement\",\r\n        description: \"Замещение своего пользователя - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_userreplacement\",\r\n        description: \"Замещение своего пользователя - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_delete_userreplacement\",\r\n        description: \"Замещение своего пользователя - Удаление\",\r\n      },\r\n      {\r\n        name: \"can_view_alluserreplacement\",\r\n        description: \"Замещение любого пользователя - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_alluserreplacement\",\r\n        description: \"Замещение любого пользователя - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_delete_alluserreplacement\",\r\n        description: \"Замещение любого пользователя - Удаление\",\r\n      },\r\n\r\n      {\r\n        name: \"can_view_onbehalfuser\",\r\n        description: \"Работа от имени другого пользователя - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_change_onbehalfuser\",\r\n        description: \"Работа от имени другого пользователя - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_onbehalfuser\",\r\n        description: \"Работа от имени другого пользователя - Удаление\",\r\n      },\r\n\r\n      {\r\n        name: \"can_view_serversetting\",\r\n        description: \"Серверные переменные - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_change_serversetting\",\r\n        description: \"Серверные переменные - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_view_mailbox\",\r\n        description: \"Почтовый ящик - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_mailbox\",\r\n        description: \"Почтовый ящик - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_change_mailbox\",\r\n        description: \"Почтовый ящик - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_mailbox\",\r\n        description: \"Почтовый ящик - Удаление\",\r\n      },\r\n      {\r\n        name: \"can_view_mailchannel\",\r\n        description: \"Почтовый канал - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_add_mailchannel\",\r\n        description: \"Почтовый канал - Добавление\",\r\n      },\r\n      {\r\n        name: \"can_change_mailchannel\",\r\n        description: \"Почтовый канал - Изменение\",\r\n      },\r\n      {\r\n        name: \"can_delete_mailchannel\",\r\n        description: \"Почтовый канал - Удаление\",\r\n      },\r\n      {\r\n        name: \"can_fetch_mailchannel\",\r\n        description: \"Почтовый канал - Получение писем\",\r\n      },\r\n      {\r\n        name: \"can_view_mail\",\r\n        description: \"Письмо - Просмотр\",\r\n      },\r\n      {\r\n        name: \"can_delete_mail\",\r\n        description: \"Письмо - Удаление\",\r\n      },\r\n    ];\r\n\r\n    const permissions = computed(() => {\r\n      let obj = {};\r\n      const names = permission_names.map((e) => e.name);\r\n      role_variants.value.forEach((role) => {\r\n        let role_perms = {};\r\n        names.forEach(\r\n          (name) =>\r\n            (role_perms[name] = uow.role_permissions_repository.get(\r\n              role,\r\n              name,\r\n              false\r\n            ))\r\n        );\r\n        obj[role] = role_perms;\r\n      });\r\n\r\n      return obj;\r\n    });\r\n\r\n    const add_permission = async (role, perm) => {\r\n      await MessageBus.handle(new AddPermission(role, perm), uow);\r\n    };\r\n\r\n    const delete_permission = async (role, perm) => {\r\n      await MessageBus.handle(new DeletePermission(role, perm), uow);\r\n    };\r\n\r\n    const new_role = ref(\"\");\r\n\r\n    const add_role = async () => {\r\n      await MessageBus.handle(new AddRole(new_role.value), uow);\r\n    };\r\n\r\n    const delete_role = async () => {\r\n      await MessageBus.handle(new DeleteRole(new_role.value), uow);\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_role\", \"can_view_permission\"]);\r\n      await useGetRoles(uow);\r\n    });\r\n\r\n    return {\r\n      permission_names,\r\n      role_variants,\r\n      permissions,\r\n      add_permission,\r\n      delete_permission,\r\n      new_role,\r\n      add_role,\r\n      delete_role,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.page__row {\r\n  display: flex;\r\n  padding: 3px;\r\n}\r\n\r\n.page__namecolumn {\r\n  width: 400px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__valuecolumn {\r\n  display: flex;\r\n  justify-content: center;\r\n  min-width: 80px;\r\n  max-width: 80px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__roleinput {\r\n  width: 300px;\r\n}\r\n\r\n.page__roleinput,\r\n.page__rolebutton {\r\n  margin: 3px;\r\n}\r\n</style>\r\n\r\n","import { render } from \"./PermissionSettingsPage.vue?vue&type=template&id=9ea14bf8&scoped=true\"\nimport script from \"./PermissionSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./PermissionSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./PermissionSettingsPage.vue?vue&type=style&index=0&id=9ea14bf8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9ea14bf8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Группы пользователей\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddUserGroup,\r\n  UpdateUserGroup,\r\n  DeleteUserGroup,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  useCurrentMixin,\r\n  useGetUserGroups,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"UserGroupSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          slug: obj.slug,\r\n          is_private: obj.is_private === true ? \"Y\" : \"N\",\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.usergroup_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_usergroup\");\r\n    const can_change = uow.permission_repository.has(\"can_change_usergroup\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_usergroup\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) => (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        grow: true,\r\n        size: \"w300\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"slug\",\r\n        grow: true,\r\n        size: \"w300\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Короткое имя\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"is_private\",\r\n        size: \"w30\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Закрытая?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = { id: null, name: \"\", slug: \"\", is_private: true };\r\n\r\n    const to_repository_convertion = {};\r\n    const from_repository_convertion = {};\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.usergroup_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_edit_block_valid = computed(() => current.value.name.length > 0);\r\n\r\n    const add_action = async () => {\r\n      const message = new AddUserGroup(\r\n        ...[\"name\", \"slug\", \"is_private\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateUserGroup(\r\n        ...[\"id\", \"name\", \"slug\", \"is_private\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteUserGroup(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const form_pages = computed(() => [\r\n      {\r\n        size: \"w450\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"id\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Наименование:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Короткое имя (slug):\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"slug\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            parameters: { font_weight: \"bold\" },\r\n            value: \"Закрытая группа ?\",\r\n          },\r\n          {\r\n            type: \"FormBooleanInput\",\r\n            parameters: { size: 20 },\r\n            bind: \"is_private\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\r\n        \"can_view_usergroup\",\r\n        \"can_view_settings\",\r\n      ]);\r\n      await useGetUserGroups(uow);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 600px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./UserGroupSettingsPage.vue?vue&type=template&id=3efc68f5&scoped=true\"\nimport script from \"./UserGroupSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./UserGroupSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./UserGroupSettingsPage.vue?vue&type=style&index=0&id=3efc68f5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3efc68f5\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Пользователи в группах\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__halfcontainer halfcontainer\">\r\n        <div class=\"page__titleblock\">\r\n        <form-text-field\r\n          class=\"halfcontainer__title\"\r\n          value=\"Все пользователи:\"\r\n        />\r\n      </div>\r\n        <div class=\"halfcontainer__searchblock searchblock\">\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.last_name\"\r\n            :parameters=\"{placeholder: 'Фамилия'}\"\r\n            @update=\"query_left.last_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.first_name\"\r\n            :parameters=\"{placeholder: 'Имя'}\"\r\n            @update=\"query_left.first_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.username\"\r\n            :parameters=\"{placeholder: 'Имя пользователя'}\"\r\n            @update:value=\"query_left.username = $event\"\r\n          />\r\n        </div>\r\n        <user-item\r\n          class=\"searchblock__useritem\"\r\n          v-for=\"user in users_excluded_from_group\"\r\n          :key=\"user.username\"\r\n          :obj=\"user\"\r\n          :can_delete=\"false\"\r\n          :can_add=\"true\"\r\n          @add=\"handle_add(user)\"\r\n        />\r\n      </div>\r\n      <div class=\"page__halfcontainer halfcontainer\">\r\n        <div class=\"page__titleblock\">\r\n          <form-text-field\r\n            class=\"halfcontainer__title\"\r\n            value=\"Группа:\"\r\n          />\r\n          <form-select-input\r\n            class=\"halfcontainer__selectgroup\"\r\n            :parameters=\"{options: groups}\"\r\n            :value=\"group_id.toString()\"\r\n            @update=\"group_id = Number.parseInt($event)\"\r\n          />\r\n        </div>\r\n        <div class=\"halfcontainer__searchblock searchblock\">\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :parameters=\"{placeholder: 'Фамилия'}\"\r\n            :value=\"query_right.last_name\"\r\n            @update=\"query_right.last_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :parameters=\"{placeholder: 'Имя'}\"\r\n            :value=\"query_right.first_name\"\r\n            @update=\"query_right.first_name = $event\"\r\n          />\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_right.username\"\r\n            :parameters=\"{placeholder: 'Имя пользователя'}\"\r\n            @update=\"query_right.username = $event\"\r\n          />\r\n        </div>\r\n        <user-item\r\n          class=\"searchblock__useritem\"\r\n          v-for=\"user in users_included_to_group\"\r\n          :key=\"user.username\"\r\n          :obj=\"user\"\r\n          :can_delete=\"true\"\r\n          :can_add=\"false\"\r\n          @delete=\"handle_delete(user)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, reactive, ref, watch } from \"vue\";\r\nimport {\r\n  AddUserToUserGroup,\r\n  DeleteUserFromUserGroup,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetUsers,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport UserItem from \"../../components/user/UserItem.vue\";\r\nimport FormTextInput from \"../../components/fields/FormTextInput.vue\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\nimport FormSelectInput from \"../../components/fields/FormSelectInput.vue\";\r\nimport {\r\n  useGetUserGroups,\r\n  filterArrayOfObjects,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nexport default {\r\n  name: \"UsersInUserGroupsSettingsPage\",\r\n  components: { HeadingComponent, UserItem, FormTextInput, FormTextField, FormSelectInput },\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const groups = computed(() => {\r\n      let arr = uow.usergroup_repository.values().map((obj) => {\r\n        return {\r\n          id: obj.value.id,\r\n          name: obj.value.name,\r\n          value: obj.value.id.toString(),\r\n        };\r\n      });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const group_id = ref(0);\r\n\r\n    // Следим за изменениями groups, изменяем group_id соответственно\r\n    watch(groups, (newValue) => {\r\n      if (group_id.value === 0 && newValue.length > 0) {\r\n        group_id.value = newValue[0].id;\r\n      }\r\n    });\r\n\r\n    const actual_group_usernames = computed(() => {\r\n      if (group_id.value === 0) return [];\r\n      const group = uow.usergroup_repository.get(group_id.value);\r\n      return group.value.users.map((user) => user.username);\r\n    });\r\n\r\n    const users_included_to_group = computed(() => {\r\n      let objs = filterArrayOfObjects(\r\n        uow.user_repository.values().map((e) => e.value),\r\n        query_right\r\n      );\r\n\r\n      if (objs === null) objs = [];\r\n      objs = objs.filter((obj) =>\r\n        actual_group_usernames.value.includes(obj.username)\r\n      );\r\n      return objs;\r\n    });\r\n\r\n    const users_excluded_from_group = computed(() => {\r\n      let objs = filterArrayOfObjects(\r\n        uow.user_repository.values().map((e) => e.value),\r\n        query_left\r\n      );\r\n\r\n      if (objs === null) objs = [];\r\n      objs = objs.filter(\r\n        (obj) => !actual_group_usernames.value.includes(obj.username)\r\n      );\r\n      return objs;\r\n    });\r\n\r\n    const handle_add = async (user) => {\r\n      await MessageBus.handle(\r\n        new AddUserToUserGroup(group_id.value, user.username),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_delete = async (user) => {\r\n      await MessageBus.handle(\r\n        new DeleteUserFromUserGroup(group_id.value, user.username),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const query_left = reactive({\r\n      username: \"\",\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n    });\r\n\r\n    const query_right = reactive({\r\n      username: \"\",\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n    });\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_usergroup\"]);\r\n      await Promise.all([useGetUsers(uow), useGetUserGroups(uow)]);\r\n    });\r\n\r\n    return {\r\n      groups,\r\n      group_id,\r\n      actual_group_usernames,\r\n      users_included_to_group,\r\n      users_excluded_from_group,\r\n      query_left,\r\n      query_right,\r\n      handle_add,\r\n      handle_delete,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container{\r\n  display: flex;\r\n}\r\n\r\n.page__titleblock {\r\n  display: flex;\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n}\r\n\r\n.halfcontainer__selectgroup {\r\n  margin-left: 5px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.halfcontainer {\r\n  width: 300px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.searchblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 3px;\r\n}\r\n\r\n.searchinput {\r\n  margin: 1px 5px;\r\n}\r\n</style>\r\n","import { render } from \"./UsersInUserGroupsSettingsPage.vue?vue&type=template&id=27907846&scoped=true\"\nimport script from \"./UsersInUserGroupsSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./UsersInUserGroupsSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./UsersInUserGroupsSettingsPage.vue?vue&type=style&index=0&id=27907846&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-27907846\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Серверные переменные\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__row\" v-for=\"item in items\" :key=\"item.id\">\r\n        <form-text-field\r\n          class=\"page__rowitem page__rowitem_name\"\r\n          :parameters=\"{align: 'left'}\"\r\n          :value=\"item.name\"\r\n        />\r\n        <form-text-input\r\n          class=\"page__rowitem page__rowitem_value\"\r\n          :value=\"item.value\"\r\n          @update=\"item.value = $event\"\r\n        />\r\n        <btn-component\r\n          v-if=\"item.has_modified && can_change\"\r\n          class=\"page__button\"\r\n          @click=\"update_action(item.id, item.value)\"\r\n          caption=\"Сохранить\"\r\n          type=\"warning\"\r\n          size=\"small\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed } from \"vue\";\r\nimport { UpdateServerSetting } from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useGetServerSettings,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport FormTextInput from \"../../components/fields/FormTextInput.vue\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\n\r\nexport default {\r\n  components: { HeadingComponent, BtnComponent, FormTextInput, FormTextField },\r\n  name: \"ServerSettingSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const items = computed(() => {\r\n      let arr = uow.server_setting_repository.values().map((obj) => obj.value);\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const can_change = uow.permission_repository.has(\r\n      \"can_change_serversetting\"\r\n    );\r\n\r\n    const update_action = async (id, value) => {\r\n      const message = new UpdateServerSetting(id, value);\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_settings\"]);\r\n      await useGetServerSettings(uow);\r\n    });\r\n\r\n    return {\r\n      items,\r\n      update_action,\r\n      can_change,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  width: 800px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.page__row {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 3px;\r\n}\r\n\r\n.page__button {\r\n  margin-left: 10px;\r\n}\r\n\r\n.page__rowitem_name {\r\n  min-width: 300px;\r\n}\r\n\r\n.page__rowitem_value {\r\n  flex-grow: 1;\r\n}\r\n</style>\r\n","import { render } from \"./ServerSettingsPage.vue?vue&type=template&id=3012b6e8&scoped=true\"\nimport script from \"./ServerSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./ServerSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./ServerSettingsPage.vue?vue&type=style&index=0&id=3012b6e8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3012b6e8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Счетчики\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddCounter,\r\n  UpdateCounter,\r\n  DeleteCounter,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  useCurrentMixin,\r\n  useGetCounters,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"CounterSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          description: obj.description,\r\n          value: obj.value,\r\n          increment: obj.increment,\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.counter_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_counter\");\r\n    const can_change = uow.permission_repository.has(\"can_change_counter\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_counter\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) => (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        size: \"w300\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"description\",\r\n        size: \"w300\",\r\n        grow: true,\r\n        align: \"left\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Описание\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"value\",\r\n        size: \"w150\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Значение\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"increment\",\r\n        size: \"w150\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Приращение\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      id: null,\r\n      name: \"\",\r\n      description: \"\",\r\n      value: 0,\r\n      increment: 1,\r\n    };\r\n\r\n    const to_repository_convertion = { value: parseInt, increment: parseInt };\r\n    const from_repository_convertion = {\r\n      value: (x) => x.toString(),\r\n      increment: (x) => x.toString(),\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.counter_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_edit_block_valid = computed(\r\n      () =>\r\n        current.value.name.length > 0 &&\r\n        current.value.description.length > 0 &&\r\n        current.value.value >= 0\r\n    );\r\n\r\n    const add_action = async () => {\r\n      const message = new AddCounter(\r\n        ...[\"name\", \"description\", \"value\", \"increment\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateCounter(\r\n        ...[\"id\", \"name\", \"description\", \"value\", \"increment\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteCounter(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const form_pages = [\r\n      {\r\n        size: 400,\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Наименование:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Описание:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"description\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Значение:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"value\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Шаг:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"increment\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_counter\", \"can_view_settings\"]);\r\n      await useGetCounters(uow);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 420px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./CounterSettingsPage.vue?vue&type=template&id=78bfade5&scoped=true\"\nimport script from \"./CounterSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./CounterSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./CounterSettingsPage.vue?vue&type=style&index=0&id=78bfade5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-78bfade5\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Почтовые ящики\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddMailBox,\r\n  UpdateMailBox,\r\n  DeleteMailBox,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  useCurrentMixin,\r\n  useGetMailBoxes,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"MailBoxSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          username: obj.username,\r\n          password: obj.password,\r\n          out_protocol: obj.out_protocol,\r\n          out_encryption: obj.out_encryption,\r\n          out_port: obj.out_port,\r\n          out_server: obj.out_server,\r\n          in_protocol: obj.in_protocol,\r\n          in_encryption: obj.in_encryption,\r\n          in_port: obj.in_port,\r\n          in_server: obj.in_server,\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.mailbox_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_mailbox\");\r\n    const can_change = uow.permission_repository.has(\"can_change_mailbox\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_mailbox\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) => (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        size: \"w300\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"username\",\r\n        size: \"w300\",\r\n        grow: true,\r\n        align: \"left\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Имя пользователя\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      id: null,\r\n      name: \"\",\r\n      username: \"\",\r\n      password: \"\",\r\n      out_protocol: \"SMTP\",\r\n      in_protocol: \"IMAP\",\r\n      out_encryption: \"NONE\",\r\n      in_encryption: \"NONE\",\r\n      out_port: 25,\r\n      in_port: 143,\r\n      out_server: \"\",\r\n      in_server: \"\",\r\n    };\r\n\r\n    const to_repository_convertion = { in_port: parseInt, out_port: parseInt };\r\n    const from_repository_convertion = {\r\n      in_port: (x) => x.toString(),\r\n      out_port: (x) => x.toString(),\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.mailbox_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_edit_block_valid = computed(\r\n      () =>\r\n        current.value.name.length > 0 &&\r\n        current.value.username.length > 0 &&\r\n        current.value.password.length > 0 &&\r\n        current.value.out_protocol.length > 0 &&\r\n        current.value.in_protocol.length > 0 &&\r\n        current.value.out_encryption.length > 0 &&\r\n        current.value.in_encryption.length > 0 &&\r\n        current.value.out_port > 0 &&\r\n        current.value.out_port < 1000 &&\r\n        current.value.in_port > 0 &&\r\n        current.value.in_port < 1000 &&\r\n        current.value.out_server.length > 0 &&\r\n        current.value.in_server.length > 0\r\n    );\r\n\r\n    const add_action = async () => {\r\n      const message = new AddMailBox(\r\n        ...[\r\n          \"out_protocol\",\r\n          \"out_encryption\",\r\n          \"out_port\",\r\n          \"out_server\",\r\n          \"in_protocol\",\r\n          \"in_encryption\",\r\n          \"in_port\",\r\n          \"in_server\",\r\n          \"username\",\r\n          \"password\",\r\n          \"name\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateMailBox(\r\n        ...[\r\n          \"id\",\r\n          \"out_protocol\",\r\n          \"out_encryption\",\r\n          \"out_port\",\r\n          \"out_server\",\r\n          \"in_protocol\",\r\n          \"in_encryption\",\r\n          \"in_port\",\r\n          \"in_server\",\r\n          \"username\",\r\n          \"password\",\r\n          \"name\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteMailBox(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const encryption_options = [\r\n      { name: \"NONE\", value: \"NONE\" },\r\n      { name: \"STARTTLS\", value: \"STARTTLS\" },\r\n      { name: \"SSL/TLS\", value: \"SSL/TLS\" },\r\n    ];\r\n\r\n    const form_pages = [\r\n      {\r\n        size: \"w600\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Наименование:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Имя пользователя:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"username\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Пароль:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            parameters: { secure: true },\r\n            bind: \"password\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Протокол исходящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: { options: [{ name: \"SMTP\", value: \"SMTP\" }] },\r\n            bind: \"out_protocol\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Шифрование исходящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: { options: encryption_options },\r\n            bind: \"out_encryption\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Порт исходящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"out_port\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Сервер исходящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"out_server\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Протокол входящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: { options: [{ name: \"IMAP\", value: \"IMAP\" }] },\r\n            bind: \"in_protocol\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Шифрование входящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormSelectInput\",\r\n            parameters: { options: encryption_options },\r\n            bind: \"in_encryption\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Порт входящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"in_port\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Сервер входящих писем:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"in_server\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_mailbox\", \"can_view_settings\"]);\r\n      await useGetMailBoxes(uow);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 420px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./MailBoxSettingsPage.vue?vue&type=template&id=ef6ff230&scoped=true\"\nimport script from \"./MailBoxSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./MailBoxSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./MailBoxSettingsPage.vue?vue&type=style&index=0&id=ef6ff230&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ef6ff230\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Почтовые каналы\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  AddMailChannel,\r\n  UpdateMailChannel,\r\n  DeleteMailChannel,\r\n  FetchMailChannel,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjectsByQuery,\r\n  validate_json,\r\n  useCurrentMixin,\r\n  useGetMailChannels,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport { MailChannelSettings } from \"../../logic/adapters/api_responses/models/mail_channel/mail_channel_settings\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"MailChannelSettingsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          folder: obj.folder,\r\n          storage_path: obj.storage_path,\r\n          settings: obj.settings,\r\n          is_active: obj.is_active === true ? \"Y\" : \"N\",\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.mail_channel_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_mailchannel\");\r\n    const can_change = uow.permission_repository.has(\"can_change_mailchannel\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_mailchannel\");\r\n    const can_fetch = uow.permission_repository.has(\"can_fetch_mailchannel\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = (query) => (query_for_internal_search.value = query);\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        size: \"w200\",\r\n        align: \"left\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"folder\",\r\n        size: \"w300\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Выборка\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"storage_path\",\r\n        size: \"w300\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Хранилище\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"is_active\",\r\n        size: \"w30\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Активен?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      id: null,\r\n      name: \"\",\r\n      folder: \"\",\r\n      storage_path: \"\",\r\n      settings: \"\",\r\n      is_active: false,\r\n    };\r\n\r\n    const to_repository_convertion = {\r\n      settings: (x) => JSON.parse(x),\r\n    };\r\n\r\n    const from_repository_convertion = {\r\n      settings: (x) => JSON.stringify(x, null, 3), // Каждый новый отступ - 3 пробела\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.mail_channel_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_settings_valid = computed(() =>\r\n      validate_json(current.value.settings, MailChannelSettings)\r\n    );\r\n\r\n    const is_edit_block_valid = computed(\r\n      () =>\r\n        current.value.name.length > 0 &&\r\n        current.value.folder.length > 0 &&\r\n        current.value.storage_path.length > 0 &&\r\n        is_settings_valid.value\r\n    );\r\n\r\n    const form_pages = computed(() => [\r\n      {\r\n        size: \"w500\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Наименование:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Наименование папки\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"folder\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Название хранилища / имя папки:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            bind: \"storage_path\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Активен ?\",\r\n          },\r\n          {\r\n            type: \"FormBooleanInput\",\r\n            bind: \"is_active\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Описание в формате JSON\",\r\n          },\r\n          {\r\n            type: \"FormMultilineTextInput\",\r\n            parameters: {\r\n              rows: 15,\r\n              resize: \"vertical\",\r\n              color: is_settings_valid.value ? \"green\" : \"red\",\r\n            },\r\n            bind: \"settings\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n\r\n    const add_action = async () => {\r\n      const message = new AddMailChannel(\r\n        ...[\"name\", \"folder\", \"storage_path\", \"settings\", \"is_active\"].map(\r\n          (k) => convertObject(current.value, to_repository_convertion)[k]\r\n        )\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateMailChannel(\r\n        ...[\r\n          \"id\",\r\n          \"name\",\r\n          \"folder\",\r\n          \"storage_path\",\r\n          \"settings\",\r\n          \"is_active\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteMailChannel(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const fetch_action = async (id) => {\r\n      const message = new FetchMailChannel(id);\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\r\n        \"can_view_mailchannel\",\r\n        \"can_view_settings\",\r\n      ]); \r\n      await useGetMailChannels(uow);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n      fetch_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n      can_fetch,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_settings_valid,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 550px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./MailChannelSettingsPage.vue?vue&type=template&id=2b02d070&scoped=true\"\nimport script from \"./MailChannelSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./MailChannelSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./MailChannelSettingsPage.vue?vue&type=style&index=0&id=2b02d070&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2b02d070\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Привязка почтовых каналов к ящикам\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__halfcontainer halfcontainer\">\r\n        <div class=\"page__titleblock\">\r\n          <form-text-field\r\n            class=\"halfcontainer__title\"\r\n            value=\"Все почтовые каналы:\"\r\n          />\r\n        </div>\r\n        <div class=\"halfcontainer__searchblock searchblock\">\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_left.name\"\r\n            :parameters=\"{placeholder: 'Наименование'}\"\r\n            @update=\"query_left.name = $event\"\r\n          />\r\n        </div>\r\n        <group-item\r\n          class=\"searchblock__groupitem\"\r\n          v-for=\"item in items_excluded_from_group\"\r\n          :key=\"item.id\"\r\n          :description=\"item.name\"\r\n          :can_delete=\"false\"\r\n          :can_add=\"true\"\r\n          @add=\"handle_add(item)\"\r\n        />\r\n      </div>\r\n      <div class=\"page__halfcontainer halfcontainer\">\r\n        <div class=\"page__titleblock\">\r\n          <form-text-field\r\n            class=\"halfcontainer__title\"\r\n            value=\"Почтовый ящик:\"\r\n          />\r\n          <form-select-input\r\n            class=\"halfcontainer__selectgroup\"\r\n            :parameters=\"{options: groups}\"\r\n            :value=\"group_id.toString()\"\r\n            @update=\"group_id = Number.parseInt($event)\"\r\n          />\r\n        </div>\r\n        <div class=\"halfcontainer__searchblock searchblock\">\r\n          <form-text-input\r\n            class=\"searchblock__searchinput searchinput\"\r\n            :value=\"query_right.name\"\r\n            :parameters=\"{placeholder: 'Наименование'}\"\r\n            @update=\"query_right.name = $event\"\r\n          />\r\n        </div>\r\n        <group-item\r\n          class=\"searchblock__groupitem\"\r\n          v-for=\"item in items_included_to_group\"\r\n          :key=\"item.id\"\r\n          :description=\"item.name\"\r\n          :can_delete=\"true\"\r\n          :can_add=\"false\"\r\n          @delete=\"handle_delete(item)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, computed, reactive, ref, watch } from \"vue\";\r\nimport {\r\n  AddMailChannelToMailBox,\r\n  DeleteMailChannelFromMailBox,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  filterArrayOfObjects,\r\n  useGetMailBoxes,\r\n  useGetMailChannels\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport GroupItem from \"../../components/GroupItem.vue\";\r\nimport FormTextInput from \"../../components/fields/FormTextInput.vue\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\nimport FormSelectInput from \"../../components/fields/FormSelectInput.vue\";\r\n\r\nexport default {\r\n  name: \"MailChannelsInMailBoxesSettingsPage\",\r\n  components: { HeadingComponent, GroupItem, FormTextInput, FormTextField, FormSelectInput },\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const groups = computed(() => {\r\n      let arr = uow.mailbox_repository.values().map((obj) => {\r\n        return {\r\n          id: obj.value.id,\r\n          name: obj.value.name,\r\n          value: obj.value.id.toString(),\r\n        };\r\n      });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    const group_id = ref(0);\r\n\r\n    // Следим за изменениями groups, изменяем group_id соответственно\r\n    watch(groups, (newValue) => {\r\n      if (group_id.value === 0 && newValue.length > 0) {\r\n        group_id.value = newValue[0].id;\r\n      }\r\n    });\r\n\r\n    const actual_group_ids = computed(() => {\r\n      if (group_id.value === 0) return [];\r\n      const group = uow.mailbox_repository.get(group_id.value);\r\n      return group.value.mail_channels.map((channel) => channel.id);\r\n    });\r\n\r\n    const items_included_to_group = computed(() => {\r\n      let objs = filterArrayOfObjects(\r\n        uow.mail_channel_repository.values().map((e) => e.value),\r\n        query_right\r\n      );\r\n\r\n      if (objs === null) objs = [];\r\n      objs = objs.filter((obj) => actual_group_ids.value.includes(obj.id));\r\n      return objs;\r\n    });\r\n\r\n    const items_excluded_from_group = computed(() => {\r\n      let objs = filterArrayOfObjects(\r\n        uow.mail_channel_repository.values().map((e) => e.value),\r\n        query_left\r\n      );\r\n\r\n      if (objs === null) objs = [];\r\n      objs = objs.filter((obj) => !actual_group_ids.value.includes(obj.id));\r\n      return objs;\r\n    });\r\n\r\n    const handle_add = async (item) => {\r\n      await MessageBus.handle(\r\n        new AddMailChannelToMailBox(group_id.value, item.id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_delete = async (item) => {\r\n      await MessageBus.handle(\r\n        new DeleteMailChannelFromMailBox(group_id.value, item.id),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const query_left = reactive({ name: \"\" });\r\n    const query_right = reactive({ name: \"\" });\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_mailbox\"]);\r\n      await Promise.all([useGetMailBoxes(uow), useGetMailChannels(uow)]);\r\n    });\r\n\r\n    return {\r\n      groups,\r\n      group_id,\r\n      actual_group_ids,\r\n      items_included_to_group,\r\n      items_excluded_from_group,\r\n      query_left,\r\n      query_right,\r\n      handle_add,\r\n      handle_delete,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__titleblock {\r\n  display: flex;\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n}\r\n\r\n.halfcontainer__title {\r\n  width: 200px;\r\n}\r\n\r\n.halfcontainer__selectgroup {\r\n  margin-left: 5px;\r\n  flex-grow: 1;\r\n}\r\n\r\n.halfcontainer {\r\n  width: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.searchblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 3px;\r\n}\r\n\r\n.searchinput {\r\n  margin: 1px 5px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"groupitem\">\r\n    <form-text-field\r\n      class=\"groupitem__description\"\r\n      :value=\"description\"\r\n    />\r\n    <btn-component\r\n      class=\"groupitem__button\"\r\n      v-if=\"can_add\"\r\n      caption=\"Добавить\"\r\n      type=\"success\"\r\n      @click=\"$emit('add')\"\r\n    />\r\n    <btn-component\r\n      class=\"groupitem__button\"\r\n      v-if=\"can_delete\"\r\n      caption=\"Удалить\"\r\n      type=\"danger\"\r\n      @click=\"$emit('delete')\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FormTextField from \"./fields/FormTextField.vue\";\r\nimport BtnComponent from \"./buttons/BtnComponent.vue\";\r\nexport default {\r\n  components: { FormTextField, BtnComponent },\r\n  name: \"GroupItem\",\r\n  props: {\r\n    description: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    can_delete: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n    can_add: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"delete\", \"add\"],\r\n};\r\n</script>\r\n\r\n<style>\r\n.groupitem {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 3px;\r\n}\r\n\r\n.groupitem__button {\r\n  margin: 1px 5px;\r\n}\r\n\r\n.groupitem__description {\r\n  margin: 1px 5px;\r\n  width: 260px;\r\n}\r\n</style>","import { render } from \"./GroupItem.vue?vue&type=template&id=a0f86538\"\nimport script from \"./GroupItem.vue?vue&type=script&lang=js\"\nexport * from \"./GroupItem.vue?vue&type=script&lang=js\"\n\nimport \"./GroupItem.vue?vue&type=style&index=0&id=a0f86538&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./MailChannelsInMailBoxesSettingsPage.vue?vue&type=template&id=3a6d5912&scoped=true\"\nimport script from \"./MailChannelsInMailBoxesSettingsPage.vue?vue&type=script&lang=js\"\nexport * from \"./MailChannelsInMailBoxesSettingsPage.vue?vue&type=script&lang=js\"\n\nimport \"./MailChannelsInMailBoxesSettingsPage.vue?vue&type=style&index=0&id=3a6d5912&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3a6d5912\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Письма\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__searchblock\">\r\n        <div class=\"page__searchrow\">\r\n          <toggle-text-button\r\n            class=\"page__buttonrow\"\r\n            activeTitle=\"Скрыть файлы\"\r\n            passiveTitle=\"Показать файлы\"\r\n            :isActive=\"is_files_shown\"\r\n            @click=\"is_files_shown = !is_files_shown\"\r\n          />\r\n          <div class=\"page__buttonrow\">\r\n            <text-button\r\n              class=\"page__buttonrow page__buttonrow_red\"\r\n              title=\"Удалить\"\r\n              @click=\"perform_action_on_items('delete')\"\r\n            />\r\n          </div>\r\n          <div class=\"page__buttonrow\">\r\n            <text-button\r\n              class=\"page__buttonrow\"\r\n              title=\"TEXT\"\r\n              @click=\"perform_action_on_items('download_in_text_format')\"\r\n            />\r\n          </div>\r\n          <div class=\"page__buttonrow\">\r\n            <text-button\r\n              class=\"page__buttonrow\"\r\n              title=\"HTML\"\r\n              @click=\"perform_action_on_items('download_in_html_format')\"\r\n            />\r\n          </div>\r\n          <div class=\"page__buttonrow\">\r\n            <text-button\r\n              class=\"page__buttonrow\"\r\n              title=\"EML\"\r\n              @click=\"perform_action_on_items('download_in_raw_format')\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <search-component\r\n          class=\"page__searchblock\"\r\n          :schema=\"search_schema\"\r\n          :model_objects=\"model_objects\"\r\n          :convert_obj_to_item=\"convert_model_to_item\"\r\n          :current_id=\"current_id\"\r\n          sort_by=\"received_at\"\r\n          :search_time=\"search_time\"\r\n          :is_searching=\"is_searching\"\r\n          :should_emit_search_event_on_any_keypress=\"false\"\r\n          :is_files_shown=\"is_files_shown\"\r\n          :is_selection_required=\"true\"\r\n          @choose=\"current_id = $event\"\r\n          @search=\"search_action($event)\"\r\n          @download:file=\"handle_download_file($event)\"\r\n          @copy_link_to:file=\"handle_copy_link_to_file_into_clipboard($event)\"\r\n          @select=\"handle_change_selected_items($event)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref, computed } from \"vue\";\r\nimport {\r\n  GetMailMessages,\r\n  DeleteMailMessage,\r\n  DownloadMailMessageInTextFormat,\r\n  DownloadMailMessageInHtmlFormat,\r\n  DownloadMailMessageInRawFormat,\r\n  DownloadMailMessageAttachment,\r\n} from \"../../logic/domain/command\";\r\nimport { FileLinkCopied } from \"../../logic/domain/event\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  convertDateToDateTimeString,\r\n  useGetMailBoxes,\r\n  useGetMailChannels,\r\n  useExecutionTimeDecorator,\r\n  usePerformActionMixin,\r\n  filterArrayOfObjectsByQuery,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport TextButton from \"../../components/buttons/TextButton.vue\";\r\nimport ToggleTextButton from \"../../components/buttons/ToggleTextButton.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nimport { useRouter } from \"vue-router\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    TextButton,\r\n    ToggleTextButton,\r\n    SearchComponent,\r\n  },\r\n  name: \"MailMessagesPage\",\r\n\r\n  setup() {\r\n    const router = useRouter();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          subject: obj.subject,\r\n          mailbox: uow.mailbox_repository.get(obj.mailbox).value\r\n            ? uow.mailbox_repository.get(obj.mailbox).value.name\r\n            : obj.mailbox.toString(),\r\n          mailchannel: uow.mail_channel_repository.get(obj.mailchannel).value\r\n            ? uow.mail_channel_repository.get(obj.mailchannel).value.name\r\n            : obj.mailchannel.toString(),\r\n          has_text: obj.has_text === true ? \"Y\" : \"N\",\r\n          has_html: obj.has_html === true ? \"Y\" : \"N\",\r\n          received_at: convertDateToDateTimeString(obj.received_at),\r\n        },\r\n        attachments: obj.attachments,\r\n        actions: {\r\n          delete: async () => {\r\n            await MessageBus.handle(new DeleteMailMessage(obj.id), uow);\r\n          },\r\n          download_in_text_format: async () => {\r\n            await MessageBus.handle(\r\n              new DownloadMailMessageInTextFormat(obj.id),\r\n              uow\r\n            );\r\n          },\r\n          download_in_html_format: async () => {\r\n            await MessageBus.handle(\r\n              new DownloadMailMessageInHtmlFormat(obj.id),\r\n              uow\r\n            );\r\n          },\r\n          download_in_raw_format: async () => {\r\n            await MessageBus.handle(\r\n              new DownloadMailMessageInRawFormat(obj.id),\r\n              uow\r\n            );\r\n          },\r\n        },\r\n      };\r\n    };\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.mail_message_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const search_action = async (query) => {\r\n      await useExecutionTimeDecorator(\r\n        uow,\r\n        new GetMailMessages(query),\r\n        search_time,\r\n        is_searching\r\n      );\r\n    };\r\n\r\n    // ACTION\r\n    const current_id = ref(0);\r\n\r\n    const selected_items = ref([]);\r\n    const handle_change_selected_items = (items) => (selected_items.value = items);\r\n\r\n    const { perform_action_on_items } =\r\n      //  Отправляем по 1 запросу, потому что js-file-download\r\n      //  глючит при одновременном скачивании > 1 файла\r\n      //  Скорее всего это глюк Chrominium, потому что Firefox\r\n      //  работает нормально.\r\n      usePerformActionMixin(selected_items, 1);\r\n\r\n    // FILES\r\n    const is_files_shown = ref(false);\r\n\r\n    const handle_download_file = async ({id, file, inline}) => {\r\n      const message = new DownloadMailMessageAttachment(\r\n        id,\r\n        file.id,\r\n        file.name,\r\n        file.size,\r\n        inline\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const handle_copy_link_to_file_into_clipboard = ({ id, file }) => {\r\n      const props = router.resolve({\r\n        name: \"DownloadMailMessageFilePage\",\r\n        params: {\r\n          message_id: id,\r\n          file_id: file.id,\r\n        },\r\n      });\r\n\r\n      navigator.clipboard\r\n        .writeText(window.location.origin + props.href)\r\n        .then(() => MessageBus.handle(new FileLinkCopied(), uow));\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\r\n        \"can_view_mail\",\r\n        \"can_view_mailbox\",\r\n        \"can_view_mailchannel\",\r\n      ]);\r\n\r\n      await Promise.all([useGetMailBoxes(uow), useGetMailChannels(uow)]);\r\n    });\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"subject\",\r\n        size: \"w200\",\r\n        grow: true,\r\n        align: \"left\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Тема\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"mailbox\",\r\n        size: \"w200\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Ящик\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"mailchannel\",\r\n        size: \"w200\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Канал\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"has_text\",\r\n        size: \"w30\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Тело сообщения в формате text?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"has_html\",\r\n        size: \"w30\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Тело сообщения в формате html?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"received_at\",\r\n        size: \"w200\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Дата (от)\",\r\n            rule: \"gte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n          {\r\n            placeholder: \"Дата (до)\",\r\n            rule: \"lte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    return {\r\n      // ACTION\r\n      current_id,\r\n      perform_action_on_items,\r\n      search_action,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n\r\n      // FILES\r\n      is_files_shown,\r\n      handle_download_file,\r\n      handle_copy_link_to_file_into_clipboard,\r\n\r\n      // SELECTION\r\n      selected_items,\r\n      handle_change_selected_items,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.page__searchstatus {\r\n  display: flex;\r\n  justify-content: center;\r\n  padding: 10px;\r\n}\r\n\r\n.page__searchrow {\r\n  display: flex;\r\n}\r\n\r\n.page__row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  cursor: pointer;\r\n}\r\n\r\n.page__row:nth-child(even) {\r\n  background-color: rgb(215, 242, 255);\r\n}\r\n\r\n.page__buttonrow {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.page__buttonrow_red {\r\n  color: red;\r\n}\r\n\r\n.page__attributerow {\r\n  width: 100%;\r\n}\r\n\r\n.page__filerow {\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__sortrow {\r\n  margin-left: 30px;\r\n}\r\n</style>\r\n","import { render } from \"./MailMessagesPage.vue?vue&type=template&id=f9d191fa&scoped=true\"\nimport script from \"./MailMessagesPage.vue?vue&type=script&lang=js\"\nexport * from \"./MailMessagesPage.vue?vue&type=script&lang=js\"\n\nimport \"./MailMessagesPage.vue?vue&type=style&index=0&id=f9d191fa&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f9d191fa\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Сервис\" size=\"middle\" />\r\n    <router-link class=\"page__item\" :to=\"{ name: 'PdfMergeToolPage' }\">\r\n      Объединить PDF файлы\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'ShareFilePage' }\">\r\n      Файлообменник\r\n    </router-link>\r\n    <router-link class=\"page__item\" :to=\"{ name: 'SelfTestingPage' }\">\r\n      Самоподготовка к тестированию\r\n    </router-link>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\";\r\nimport { useBeforeEnterPage } from \"../../logic/service_layer/use_modules\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\n\r\nexport default {\r\n  components: { HeadingComponent },\r\n  name: \"ServicePage\",\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n    onMounted(() => {\r\n      // Пытаемся автоматически зaлогинится\r\n      useBeforeEnterPage(uow, [\"can_view_service\"]);\r\n    });\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__item {\r\n  font-size: 24px;\r\n  padding-bottom: 15px;\r\n  text-decoration: none;\r\n}\r\n</style>","import { render } from \"./ServicePage.vue?vue&type=template&id=f758b34a&scoped=true\"\nimport script from \"./ServicePage.vue?vue&type=script&lang=js\"\nexport * from \"./ServicePage.vue?vue&type=script&lang=js\"\n\nimport \"./ServicePage.vue?vue&type=style&index=0&id=f758b34a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f758b34a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Объединить PDF файлы\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__listcontainer\">\r\n        <div class=\"page__buttonblock buttonblock\">\r\n          <text-button\r\n            v-if=\"is_all_uploaded && pdf_docs.length > 0\"\r\n            class=\"buttonblock__button\"\r\n            title=\"Объединить\"\r\n            @click=\"handle_download()\"\r\n          />\r\n          <text-button\r\n            v-if=\"is_all_uploaded && pdf_docs.length > 0\"\r\n            class=\"buttonblock__button buttonblock__button_important\"\r\n            title=\"Удалить все\"\r\n            @click=\"handle_delete_all()\"\r\n          />\r\n          <toggle-text-button\r\n            class=\"buttonblock__button\"\r\n            v-if=\"!to_be_editted\"\r\n            activeTitle=\"Удалить закладки\"\r\n            passiveTitle=\"Сохранить закладки\"\r\n            :isActive=\"keep_bookmarks\"\r\n            @click=\"keep_bookmarks = !keep_bookmarks\"\r\n          />\r\n          <toggle-text-button\r\n            class=\"buttonblock__button\"\r\n            v-if=\"!to_be_editted\"\r\n            activeTitle=\"Не добавлять имена файлов в закладки\"\r\n            passiveTitle=\"Добавить имена файлов в закладки\"\r\n            :isActive=\"add_filenames_as_bookmarks\"\r\n            @click=\"add_filenames_as_bookmarks = !add_filenames_as_bookmarks\"\r\n          />\r\n          <text-button\r\n            v-if=\"\r\n              is_all_uploaded &&\r\n              pdf_docs.length > 0 &&\r\n              is_same_page_count_and_not_edited\r\n            \"\r\n            class=\"buttonblock__button\"\r\n            title=\"Слить одинаковые файлы\"\r\n            @click=\"handle_merge_annotations()\"\r\n          />\r\n        </div>\r\n        <div class=\"page__headerblock headerblock\">\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w50\">\r\n            <form-text-field\r\n              class=\"headerblock__textfield\"\r\n              value=\"%\"\r\n              :parameters=\"{ align: 'center' }\"\r\n            />\r\n          </sized-div>\r\n\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w50\">\r\n            <form-text-field class=\"headerblock__textfield\" value=\"No.\" />\r\n          </sized-div>\r\n\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w100\" :grow=\"true\">\r\n            <form-text-field\r\n              class=\"headerblock__textfield\"\r\n              value=\"Наименование\"\r\n            />\r\n          </sized-div>\r\n          <sized-div\r\n            class=\"headerblock__sizedblock headerblock__sizedblock_select\"\r\n            size=\"w100\"\r\n          >\r\n            <form-text-field class=\"headerblock__textfield\" value=\"От (стр.)\" />\r\n          </sized-div>\r\n          <sized-div\r\n            class=\"headerblock__sizedblock headerblock__sizedblock_select\"\r\n            size=\"w100\"\r\n          >\r\n            <form-text-field class=\"headerblock__textfield\" value=\"До (стр.)\" />\r\n          </sized-div>\r\n          <sized-div\r\n            class=\"headerblock__sizedblock headerblock__sizedblock_select\"\r\n            size=\"w50\"\r\n          >\r\n            <form-text-field class=\"headerblock__textfield\" value=\"Вращ.\" />\r\n          </sized-div>\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w50\">\r\n            <form-text-field class=\"headerblock__textfield\" value=\"Вверх\" />\r\n          </sized-div>\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w50\">\r\n            <form-text-field class=\"headerblock__textfield\" value=\"Вниз\" />\r\n          </sized-div>\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w100\">\r\n            <form-text-field\r\n              class=\"headerblock__textfield\"\r\n              value=\"Кол-во стр.\"\r\n            />\r\n          </sized-div>\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w100\">\r\n            <form-text-field class=\"headerblock__textfield\" value=\"Размер\" />\r\n          </sized-div>\r\n          <sized-div class=\"headerblock__sizedblock\" size=\"w100\">\r\n            <form-text-field class=\"headerblock__textfield\" value=\"\" />\r\n          </sized-div>\r\n        </div>\r\n        <div class=\"page__documentblock\" v-for=\"doc in pdf_docs\" :key=\"doc.id\">\r\n          <pdf-document-row\r\n            class=\"page__documentrow\"\r\n            :order=\"doc.order\"\r\n            :page_count=\"doc.page_count\"\r\n            :page_to=\"doc.page_to\"\r\n            :page_from=\"doc.page_from\"\r\n            :angle=\"doc.angle\"\r\n            :name=\"doc.file.name\"\r\n            :progress=\"doc.file.progress\"\r\n            :size=\"doc.file.formatted_size()\"\r\n            :uploaded=\"doc.uploaded\"\r\n            @delete=\"handle_delete(doc.id)\"\r\n            @move:up=\"handle_move_up(doc.id)\"\r\n            @move:down=\"handle_move_down(doc.id)\"\r\n            @update:page_from=\"handle_update_page_from(doc, $event)\"\r\n            @update:page_to=\"handle_update_page_to(doc, $event)\"\r\n            @update:angle=\"handle_update_angle(doc, $event)\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"page__servicecontainer\">\r\n        <file-drop-zone\r\n          class=\"page__filedropzone\"\r\n          :class=\"{ page__filedropzone_dragging: is_drag_above_file_zone }\"\r\n          @add:file=\"handle_new_file_drop($event)\"\r\n          @update:dragging=\"is_drag_above_file_zone = $event\"\r\n        >\r\n          <span v-if=\"!is_drag_above_file_zone\" class=\"page__dropzonetitle\">\r\n            &lt; {{ max_file_size }} МБ</span\r\n          >\r\n        </file-drop-zone>\r\n        <div class=\"page__explanation\">\r\n          <p class=\"page__explanationblock\">\r\n            Данная страница предназначена для объединения PDF файлов. Доступен\r\n            выбор диапазона и вращения страниц.\r\n          </p>\r\n          <p class=\"page__explanationblock\">\r\n            При объединении можно сохранить существующие в документах закладки,\r\n            а также добавить закладки в начале каждого файла.\r\n          </p>\r\n          <p class=\"page__explanationblock page__explanationblock_important\">\r\n            При модификации файла (диапазон, вращение) функции работы с\r\n            закладками недоступны.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { onMounted, onBeforeUnmount, ref, computed } from \"vue\";\r\nimport { useBeforeEnterPage } from \"../../logic/service_layer/use_modules\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport FileDropZone from \"../../components/file/FileDropZone.vue\";\r\nimport TextButton from \"../../components/buttons/TextButton.vue\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\nimport SizedDiv from \"../../components/SizedDiv.vue\";\r\nimport ToggleTextButton from \"../../components/buttons/ToggleTextButton.vue\";\r\nimport {\r\n  GetPdfMergeFiles,\r\n  UploadPdfMergeFile,\r\n  UpdatePdfMergeFile,\r\n  DeletePdfMergeFile,\r\n  DeleteAllPdfMergeFiles,\r\n  DownloadPdfMergeResult,\r\n  DownloadPdfMixResult,\r\n  UpdateUploadProgress,\r\n} from \"../../logic/domain/command\";\r\n\r\nimport {\r\n  UploadFileTooBigError,\r\n  UploadFileWrongExtensionError,\r\n} from \"../../logic/domain/event\";\r\nimport PdfDocumentRow from \"../../components/PdfDocumentRow.vue\";\r\nimport { get_extension_of_file } from \"../../logic/service_layer/utils/filename\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    FileDropZone,\r\n    PdfDocumentRow,\r\n    TextButton,\r\n    FormTextField,\r\n    ToggleTextButton,\r\n    SizedDiv,\r\n  },\r\n  name: \"PdfMergeToolPage\",\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n    const max_file_size = 256; // MB\r\n    const keep_bookmarks = ref(true);\r\n    const add_filenames_as_bookmarks = ref(true);\r\n\r\n    // PDF FILE DOCUMENTS\r\n    const pdf_docs = computed(() => {\r\n      let items = uow.pdf_merge_file_repository\r\n        .values()\r\n        .map((obj) => obj.value);\r\n      items.sort((a, b) => a.order - b.order);\r\n      return items;\r\n    });\r\n\r\n    const max_order = computed(() => {\r\n      const orders = pdf_docs.value.map((obj) => obj.order);\r\n      if (orders.length === 0) return 0;\r\n      return Math.max(...orders);\r\n    });\r\n\r\n    const to_be_editted = computed(() => {\r\n      let result = false;\r\n      pdf_docs.value.forEach((e) => {\r\n        if (e.to_be_editted === true) result = true;\r\n      });\r\n      return result;\r\n    });\r\n\r\n    const is_all_uploaded = computed(\r\n      () => !pdf_docs.value.map((doc) => doc.uploaded).includes(false)\r\n    );\r\n\r\n    const is_same_page_count_and_not_edited = computed(() =>\r\n      pdf_docs.value.reduce(\r\n        (acc, doc) =>\r\n          acc &&\r\n          doc.page_count === pdf_docs.value[0].page_count &&\r\n          doc.page_from === 1 &&\r\n          doc.page_to === pdf_docs.value[0].page_count &&\r\n          doc.angle == 0,\r\n        true\r\n      )\r\n    );\r\n\r\n    // DRAGGING\r\n    const is_drag_above_file_zone = ref(false);\r\n\r\n    // DROP\r\n    const handle_new_file_drop = async (file) => {\r\n      let message = null;\r\n      if (file.size > max_file_size * 1024 * 1024) {\r\n        message = new UploadFileTooBigError(file.name);\r\n      } else if (get_extension_of_file(file.name).toLowerCase() !== \"pdf\") {\r\n        message = new UploadFileWrongExtensionError(file.name);\r\n      } else {\r\n        message = new UploadPdfMergeFile(uuidv4(), max_order.value + 1, file);\r\n      }\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    // DELETE\r\n    const handle_delete = async (id) => {\r\n      await MessageBus.handle(new DeletePdfMergeFile(id), uow);\r\n    };\r\n\r\n    const handle_delete_all = async () => {\r\n      await MessageBus.handle(new DeleteAllPdfMergeFiles(), uow);\r\n    };\r\n\r\n    // DOWNLOAD\r\n    const handle_download = async () => {\r\n      await MessageBus.handle(\r\n        new DownloadPdfMergeResult(\r\n          keep_bookmarks.value,\r\n          add_filenames_as_bookmarks.value\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_merge_annotations = async () => {\r\n      await MessageBus.handle(new DownloadPdfMixResult(), uow);\r\n    };\r\n\r\n    // TIMERS\r\n    const update_upload_progress = () => {\r\n      MessageBus.handle(new UpdateUploadProgress(), uow);\r\n    };\r\n\r\n    // MOVE\r\n    const swap = async (id_1, id_2) => {\r\n      const obj_1 = pdf_docs.value[id_1];\r\n      const obj_2 = pdf_docs.value[id_2];\r\n\r\n      const order_1 = obj_1.order;\r\n      const order_2 = obj_2.order;\r\n\r\n      await Promise.all([\r\n        MessageBus.handle(\r\n          new UpdatePdfMergeFile(\r\n            obj_1.id,\r\n            order_2,\r\n            obj_1.page_from,\r\n            obj_1.page_to,\r\n            obj_1.angle\r\n          ),\r\n          uow\r\n        ),\r\n        MessageBus.handle(\r\n          new UpdatePdfMergeFile(\r\n            obj_2.id,\r\n            order_1,\r\n            obj_2.page_from,\r\n            obj_2.page_to,\r\n            obj_2.angle\r\n          ),\r\n          uow\r\n        ),\r\n      ]);\r\n    };\r\n\r\n    const handle_move_up = async (id) => {\r\n      const idx = pdf_docs.value.findIndex((x) => x.id === id);\r\n      if (idx > 0) swap(idx, idx - 1);\r\n    };\r\n\r\n    const handle_move_down = async (id) => {\r\n      const idx = pdf_docs.value.findIndex((x) => x.id === id);\r\n      if (idx < pdf_docs.value.length - 1) swap(idx, idx + 1);\r\n    };\r\n\r\n    uow.upload_progress_timer.set_callback(update_upload_progress);\r\n    uow.upload_progress_timer.start();\r\n\r\n    onMounted(async () => {\r\n      useBeforeEnterPage(uow, [\"can_view_service\"]); // Пытаемся автоматически зaлогинится\r\n      // Получаем список документов с сервера\r\n      await MessageBus.handle(new GetPdfMergeFiles(), uow);\r\n    });\r\n\r\n    // PAGES & ANGLE\r\n    const handle_update_page_from = async (obj, value) => {\r\n      await MessageBus.handle(\r\n        new UpdatePdfMergeFile(\r\n          obj.id,\r\n          obj.order,\r\n          value,\r\n          obj.page_to,\r\n          obj.angle\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_update_page_to = async (obj, value) => {\r\n      await MessageBus.handle(\r\n        new UpdatePdfMergeFile(\r\n          obj.id,\r\n          obj.order,\r\n          obj.page_from,\r\n          value,\r\n          obj.angle\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    const handle_update_angle = async (obj, value) => {\r\n      await MessageBus.handle(\r\n        new UpdatePdfMergeFile(\r\n          obj.id,\r\n          obj.order,\r\n          obj.page_from,\r\n          obj.page_to,\r\n          value\r\n        ),\r\n        uow\r\n      );\r\n    };\r\n\r\n    onBeforeUnmount(async () => uow.upload_progress_timer.stop());\r\n\r\n    return {\r\n      max_file_size,\r\n      keep_bookmarks,\r\n      add_filenames_as_bookmarks,\r\n      handle_new_file_drop,\r\n      handle_delete,\r\n      handle_delete_all,\r\n      handle_download,\r\n      handle_move_up,\r\n      handle_move_down,\r\n      handle_update_page_from,\r\n      handle_update_page_to,\r\n      handle_update_angle,\r\n      is_drag_above_file_zone,\r\n      pdf_docs,\r\n      max_order,\r\n      to_be_editted,\r\n      is_all_uploaded,\r\n      is_same_page_count_and_not_edited,\r\n      handle_merge_annotations,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__listcontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n}\r\n\r\n.page__headerblock {\r\n  display: flex;\r\n  padding: 3px;\r\n}\r\n\r\n.headerblock__sizedblock {\r\n  font-weight: bold;\r\n  justify-content: center;\r\n}\r\n\r\n.headerblock__sizedblock_select {\r\n  margin-right: 10px;\r\n}\r\n\r\n.page__buttonblock {\r\n  padding: 5px;\r\n  display: flex;\r\n}\r\n\r\n.page__documentblock {\r\n  padding: 5px;\r\n}\r\n.page__documentblock:nth-child(even) {\r\n  background-color: rgb(215, 242, 255);\r\n}\r\n\r\n.page__servicecontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 300px;\r\n  max-width: 300px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__filedropzone {\r\n  height: 80px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 10px;\r\n}\r\n\r\n.page__filedropzone_dragging {\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    #606dbc,\r\n    #606dbc 10px,\r\n    #465298 10px,\r\n    #465298 20px\r\n  );\r\n}\r\n\r\n.page__dropzonetitle {\r\n  font-size: 24px;\r\n}\r\n\r\n.page__explanation,\r\n.page__explanationblock {\r\n  padding: 3px;\r\n}\r\n\r\n.buttonblock__button_important,\r\n.page__explanationblock_important {\r\n  color: red;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"pdfdocumentrow\">\r\n    <sized-div class=\"pdfdocumentrow__sizedblock\" size=\"w50\">\r\n      <form-text-field\r\n        class=\"pdfdocumentrow__textfield\"\r\n        :value=\"progress_str\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__sizedblock\" size=\"w50\">\r\n      <form-text-field\r\n        class=\"pdfdocumentrow__textfield\"\r\n        :value=\"order.toString()\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__sizedblock\" size=\"w100\" :grow=\"true\">\r\n      <form-text-field class=\"pdfdocumentrow__textfield\" :value=\"name\" />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__selectsizedblock\" size=\"w100\">\r\n      <form-select-input\r\n        class=\"pdfdocumentrow__selectinput\"\r\n        :parameters=\"{\r\n          options: page_select_options,\r\n        }\"\r\n        :value=\"page_from.toString()\"\r\n        @update=\"$emit('update:page_from', Number.parseInt($event))\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__selectsizedblock\" size=\"w100\">\r\n      <form-select-input\r\n        class=\"pdfdocumentrow__selectinput\"\r\n        :parameters=\"{\r\n          options: page_select_options,\r\n        }\"\r\n        :value=\"page_to.toString()\"\r\n        @update=\"$emit('update:page_to', Number.parseInt($event))\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__selectsizedblock\" size=\"w50\">\r\n      <form-select-input\r\n        class=\"pdfdocumentrow__selectinput\"\r\n        :parameters=\"{\r\n          options: angle_select_options,\r\n        }\"\r\n        :value=\"angle.toString()\"\r\n        @update=\"$emit('update:angle', Number.parseInt($event))\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__buttonsizedblock\" size=\"w50\">\r\n      <text-button\r\n        class=\"pdfdocumentrow__button pdfdocumentrow__button_arrow\"\r\n        title=\"&#9650;\"\r\n        @click=\"$emit('move:up')\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__buttonsizedblock\" size=\"w50\">\r\n      <text-button\r\n        class=\"pdfdocumentrow__button pdfdocumentrow__button_arrow\"\r\n        title=\"&#9660;\"\r\n        @click=\"$emit('move:down')\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__sizedblock\" size=\"w100\">\r\n      <form-text-field\r\n        class=\"pdfdocumentrow__textfield\"\r\n        :value=\"page_count.toString()\"\r\n      />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__sizedblock\" size=\"w100\">\r\n      <form-text-field class=\"pdfdocumentrow__textfield\" :value=\"size\" />\r\n    </sized-div>\r\n    <sized-div class=\"pdfdocumentrow__deleteblock\" size=\"w100\">\r\n      <text-button\r\n        v-if=\"uploaded\"\r\n        class=\"pdfdocumentrow__button\"\r\n        title=\"Удалить\"\r\n        @click=\"$emit('delete')\"\r\n      />\r\n    </sized-div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from \"vue\";\r\nimport SizedDiv from \"./SizedDiv.vue\";\r\nimport FormTextField from \"./fields/FormTextField.vue\";\r\nimport TextButton from \"./buttons/TextButton.vue\";\r\nimport FormSelectInput from \"./fields/FormSelectInput.vue\";\r\n\r\nexport default {\r\n  components: { SizedDiv, FormTextField, TextButton, FormSelectInput },\r\n  name: \"PdfDocumentRow\",\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    order: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    page_count: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    page_from: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    page_to: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    angle: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    progress: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    size: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    uploaded: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n  },\r\n  emits: [\r\n    \"delete\",\r\n    \"move:up\",\r\n    \"move:down\",\r\n    \"update:page_from\",\r\n    \"update:page_to\",\r\n    \"update:angle\",\r\n  ],\r\n  setup(props) {\r\n    const progress_str = computed(() =>\r\n      props.progress < 100 ? `${props.progress}%` : `\\u2713`\r\n    );\r\n\r\n    const angle_select_options = [\r\n      { name: \"0\", value: \"0\" },\r\n      { name: \"90\", value: \"90\" },\r\n      { name: \"180\", value: \"180\" },\r\n      { name: \"270\", value: \"270\" },\r\n    ];\r\n\r\n    const page_select_options = computed(() =>\r\n      [...Array(props.page_count).keys()].map((e) => {\r\n        const n = (e + 1).toString();\r\n        return { name: n, value: n };\r\n      })\r\n    );\r\n\r\n    return {\r\n      progress_str,\r\n      angle_select_options,\r\n      page_select_options,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.pdfdocumentrow {\r\n  display: flex;\r\n}\r\n\r\n.pdfdocumentrow__textfield {\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.pdfdocumentrow__selectsizedblock {\r\n  margin-right: 10px;\r\n}\r\n\r\n.pdfdocumentrow__selectinput {\r\n  flex-grow: 1;\r\n  /* margin-left: 2px;\r\n  margin-right: 2px; */\r\n}\r\n\r\n.pdfdocumentrow__deleteblock {\r\n  justify-content: center;\r\n}\r\n\r\n.pdfdocumentrow__buttonsizedblock {\r\n  justify-content: center;\r\n}\r\n\r\n.pdfdocumentrow__button_arrow {\r\n  color: lightsalmon;\r\n}\r\n</style>","import { render } from \"./PdfDocumentRow.vue?vue&type=template&id=4fb13056&scoped=true\"\nimport script from \"./PdfDocumentRow.vue?vue&type=script&lang=js\"\nexport * from \"./PdfDocumentRow.vue?vue&type=script&lang=js\"\n\nimport \"./PdfDocumentRow.vue?vue&type=style&index=0&id=4fb13056&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4fb13056\"]])\n\nexport default __exports__","import { render } from \"./PdfMergeToolPage.vue?vue&type=template&id=0b86a7bb&scoped=true\"\nimport script from \"./PdfMergeToolPage.vue?vue&type=script&lang=js\"\nexport * from \"./PdfMergeToolPage.vue?vue&type=script&lang=js\"\n\nimport \"./PdfMergeToolPage.vue?vue&type=style&index=0&id=0b86a7bb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0b86a7bb\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Файлообменник\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__servicecontainer\">\r\n        <document-page-download-progress-row\r\n          class=\"page__downloadprogress\"\r\n          :files=\"downloading_files\"\r\n          :full_format=\"false\"\r\n        />\r\n        <file-drop-zone\r\n          class=\"page__filedropzone\"\r\n          :class=\"{ page__filedropzone_dragging: is_drag_above_file_zone }\"\r\n          @add:file=\"handle_new_file_drop($event)\"\r\n          @update:dragging=\"is_drag_above_file_zone = $event\"\r\n        >\r\n          <span v-if=\"!is_drag_above_file_zone\" class=\"page__dropzonetitle\">\r\n            &lt; {{ max_file_size }} МБ</span\r\n          >\r\n        </file-drop-zone>\r\n        <file-list\r\n          class=\"page__filelist\"\r\n          :files=\"share_files\"\r\n          :can_be_dragged=\"false\"\r\n          :can_be_deleted=\"true\"\r\n          @download:file=\"handle_download(...$event)\"\r\n          @delete:file=\"handle_delete($event)\"\r\n          @copy_link_to:file=\"handle_copy_link_to_file_into_clipboard($event)\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { onMounted, onBeforeUnmount, ref, computed } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useBeforeEnterPage } from \"../../logic/service_layer/use_modules\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport FileDropZone from \"../../components/file/FileDropZone.vue\";\r\nimport FileList from \"../../components/file/FileList.vue\";\r\nimport {\r\n  GetShareFiles,\r\n  UploadShareFile,\r\n  DeleteShareFile,\r\n  DownloadShareFile,\r\n  UpdateUploadProgress,\r\n} from \"../../logic/domain/command\";\r\nimport { FileLinkCopied } from \"../../logic/domain/event\";\r\nimport DocumentPageDownloadProgressRow from \"../../components/document/DocumentPageDownloadProgressRow.vue\";\r\n\r\nimport { UploadFileTooBigError } from \"../../logic/domain/event\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    FileDropZone,\r\n    FileList,\r\n    DocumentPageDownloadProgressRow,\r\n  },\r\n  name: \"ShareFilePage\",\r\n  setup() {\r\n    const router = useRouter();\r\n    const uow = new VueUnitOfWork();\r\n    const max_file_size = 1024; // MB\r\n\r\n    // PDF FILE DOCUMENTS\r\n    const share_files = computed(() =>\r\n      uow.share_file_repository.values().map((obj) => obj.value)\r\n    );\r\n\r\n    // DRAGGING\r\n    const is_drag_above_file_zone = ref(false);\r\n\r\n    // DROP\r\n    const handle_new_file_drop = async (file) => {\r\n      let message = null;\r\n      if (file.size > max_file_size * 1024 * 1024) {\r\n        message = new UploadFileTooBigError(file.name);\r\n      } else {\r\n        message = new UploadShareFile(uuidv4(), file);\r\n      }\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    // DELETE\r\n    const handle_delete = async (id) => {\r\n      await MessageBus.handle(new DeleteShareFile(id), uow);\r\n    };\r\n\r\n    // DOWNLOAD\r\n    const downloading_files = computed(() =>\r\n      uow.download_progress.values().map((obj) => obj.value)\r\n    );\r\n\r\n    const handle_download = async (file, inline) => {\r\n      await MessageBus.handle(new DownloadShareFile(file.id, file.name, file.size, inline), uow);\r\n    };\r\n\r\n    const handle_copy_link_to_file_into_clipboard = (file) => {\r\n      const props = router.resolve({\r\n        name: \"DownloadShareFilePage\",\r\n        params: { file_id: file.id },\r\n      });\r\n\r\n      navigator.clipboard\r\n        .writeText(window.location.origin + props.href)\r\n        .then(() => MessageBus.handle(new FileLinkCopied(), uow));\r\n    };\r\n\r\n    // TIMERS\r\n    const update_upload_progress = () => {\r\n      MessageBus.handle(new UpdateUploadProgress(), uow);\r\n    };\r\n\r\n    uow.upload_progress_timer.set_callback(update_upload_progress);\r\n    uow.upload_progress_timer.start();\r\n\r\n    onMounted(async () => {\r\n      await useBeforeEnterPage(uow, [\"can_view_service\"]); // Пытаемся автоматически зaлогинится\r\n      // Получаем список документов с сервера\r\n      await MessageBus.handle(new GetShareFiles(), uow);\r\n    });\r\n\r\n    onBeforeUnmount(async () => uow.upload_progress_timer.stop());\r\n\r\n    return {\r\n      max_file_size,\r\n      handle_new_file_drop,\r\n      handle_delete,\r\n      handle_download,\r\n      handle_copy_link_to_file_into_clipboard,\r\n      is_drag_above_file_zone,\r\n      share_files,\r\n      downloading_files,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__servicecontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 500px;\r\n  max-width: 500px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__filedropzone {\r\n  height: 80px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 10px;\r\n}\r\n\r\n.page__filedropzone_dragging {\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    #606dbc,\r\n    #606dbc 10px,\r\n    #465298 10px,\r\n    #465298 20px\r\n  );\r\n}\r\n\r\n.page__dropzonetitle {\r\n  font-size: 24px;\r\n}\r\n\r\n</style>","import { render } from \"./ShareFilePage.vue?vue&type=template&id=41d90c57&scoped=true\"\nimport script from \"./ShareFilePage.vue?vue&type=script&lang=js\"\nexport * from \"./ShareFilePage.vue?vue&type=script&lang=js\"\n\nimport \"./ShareFilePage.vue?vue&type=style&index=0&id=41d90c57&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41d90c57\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Самоподготовка к тестированию\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__listcontainer\">\r\n        <div class=\"page__managecontainer\">\r\n          <btn-component\r\n            v-if=\"!is_test_active\"\r\n            caption=\"Начать тест\"\r\n            type=\"success\"\r\n            @click=\"handle_start_test()\"\r\n          />\r\n          <btn-component\r\n            v-else\r\n            caption=\"Завершить тест\"\r\n            type=\"danger\"\r\n            @click=\"handle_stop_test()\"\r\n          />\r\n          <input\r\n            v-if=\"!is_test_active\"\r\n            type=\"range\"\r\n            list=\"test_counts\"\r\n            :value=\"count_of_questions_in_test\"\r\n            min=\"0\"\r\n            :max=\"total_count_of_questions\"\r\n            @change=\"\r\n              handle_count_of_questions_changed($event.target.valueAsNumber)\r\n            \"\r\n          />\r\n          <datalist v-if=\"total_count_of_questions > 0\" id=\"test_counts\">\r\n            <option value=\"0\" label=\"0\" />\r\n            <option v-if=\"total_count_of_questions > 20\" value=\"20\" label=\"20\" />\r\n            <option\r\n              :value=\"total_count_of_questions\"\r\n              :label=\"total_count_of_questions\"\r\n            />\r\n          </datalist>\r\n          <form-text-field\r\n            :value=\"\r\n              'Тест из ' +\r\n                count_of_questions_in_test +\r\n                ' вопросов. Всего загружено вопросов: ' +\r\n                total_count_of_questions +\r\n                '. Прогресс (' +\r\n                active_question_id.toString() +\r\n                '/' +\r\n                count_of_questions_in_test.toString() +\r\n                '). Допущено ошибок ' + count_of_errors\r\n            \"\r\n            :parameters=\"{align: 'left'}\"\r\n          />\r\n        </div>\r\n        <div class=\"page__questioncontainer\">\r\n          <question-block\r\n            v-if=\"is_test_active && active_question !== null\"\r\n            :id=\"active_question.value.id\"\r\n            :question=\"active_question.value.question\"\r\n            :answers=\"active_question.value.answers\"\r\n            @user:replied=\"handle_user_replied($event)\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"page__servicecontainer\" v-if=\"!is_test_active\">\r\n        <json-file-drop-zone\r\n          class=\"page__docdropzone\"\r\n          :class=\"{ page__docdropzone_dragging: is_drag_above_drop_zone }\"\r\n          @update:dragging=\"is_drag_above_drop_zone = $event\"\r\n          @update:json=\"handle_new_questions_drop($event)\"\r\n          :default=\"[]\"\r\n        >\r\n          <span class=\"page__dropzonetitle\">Перетащи сюда вопросы (json)</span>\r\n        </json-file-drop-zone>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, watch } from \"vue\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport JsonFileDropZone from \"../../components/file/JsonFileDropZone.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\nimport QuestionBlock from \"../../components/QuestionBlock.vue\";\r\n\r\nimport { DropSelfTestingQuestions, AddSelfTestingQuestion } from \"../../logic/domain/command\";\r\nimport { SelfTestingRepliedSuccess, SelfTestingRepliedFail } from \"../../logic/domain/event\";\r\nimport { shuffleArray } from \"../../logic/service_layer/use_modules\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    JsonFileDropZone,\r\n    BtnComponent,\r\n    FormTextField,\r\n    QuestionBlock,\r\n  },\r\n  name: \"SelfTestingPage\",\r\n  setup() {\r\n\r\n    const uow = new VueUnitOfWork();\r\n    const questions = uow.self_testing_question_repository;\r\n\r\n    // TEST\r\n    const is_test_active = ref(false);\r\n    const total_count_of_questions = ref(0);\r\n    const count_of_questions_in_test = ref(0);\r\n    const active_question_id = ref(0);\r\n    const chosen_questions = ref([]);\r\n    const count_of_errors = ref(0);\r\n\r\n    watch(\r\n      () => active_question_id.value,\r\n      () => {\r\n        if (active_question_id.value >= count_of_questions_in_test.value) {\r\n          handle_stop_test();\r\n        }\r\n      }\r\n    );\r\n\r\n    const active_question = computed(() =>\r\n      chosen_questions.value.length === 0 ||\r\n      active_question_id.value >= count_of_questions_in_test.value\r\n        ? null\r\n        : questions.get(chosen_questions.value[active_question_id.value])\r\n    );\r\n\r\n    const handle_start_test = () => {\r\n      if (count_of_questions_in_test.value <= total_count_of_questions.value) {\r\n        const init_array = Array.from(\r\n          { length: total_count_of_questions.value },\r\n          (_, i) => i + 1\r\n        );\r\n\r\n        const shuffled_array = shuffleArray(init_array);\r\n        chosen_questions.value = shuffled_array.slice(\r\n          0,\r\n          count_of_questions_in_test.value\r\n        );\r\n\r\n        // Reset question counter\r\n        active_question_id.value = 0;\r\n        count_of_errors.value = 0;\r\n        // Activate test\r\n        is_test_active.value = true;\r\n      }\r\n    };\r\n\r\n    const handle_stop_test = () => {\r\n      is_test_active.value = false;\r\n    };\r\n\r\n    const handle_user_replied = (success) => {\r\n      if (success === true) {\r\n        MessageBus.handle(new SelfTestingRepliedSuccess(), uow);\r\n        active_question_id.value++;\r\n      } else {\r\n        MessageBus.handle(new SelfTestingRepliedFail(), uow);\r\n        count_of_errors.value++;\r\n      }\r\n    };\r\n\r\n    // DROP\r\n\r\n    const handle_new_questions_drop = (obj_array) => {\r\n      // Delete all questions\r\n      MessageBus.handle(new DropSelfTestingQuestions(), uow);\r\n\r\n      // Add new questions\r\n      obj_array.forEach((obj) => {\r\n        MessageBus.handle(\r\n          new AddSelfTestingQuestion(obj.question.id, obj.question.text, obj.answers),\r\n          uow\r\n        );\r\n      });\r\n\r\n      total_count_of_questions.value = obj_array.length;\r\n    };\r\n\r\n    const handle_count_of_questions_changed = (count) => {\r\n      count_of_questions_in_test.value = count;\r\n    };\r\n\r\n    // // DRAGGING\r\n    const is_drag_above_drop_zone = ref(false);\r\n\r\n    return {\r\n      is_test_active,\r\n      count_of_questions_in_test,\r\n      total_count_of_questions,\r\n      active_question_id,\r\n      active_question,\r\n      chosen_questions,\r\n      count_of_errors,\r\n      handle_start_test,\r\n      handle_stop_test,\r\n      handle_new_questions_drop,\r\n      handle_user_replied,\r\n      handle_count_of_questions_changed,\r\n      is_drag_above_drop_zone,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n  max-width: 1024px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__listcontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-grow: 1;\r\n  padding: 3px;\r\n}\r\n\r\n.page__servicecontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 300px;\r\n  max-width: 300px;\r\n  padding: 3px;\r\n}\r\n\r\n.page__docdropzone {\r\n  height: 200px;\r\n  border: 2px dashed grey;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 10px;\r\n}\r\n\r\n.page__docdropzone_dragging {\r\n  background: repeating-linear-gradient(\r\n    45deg,\r\n    #606dbc,\r\n    #606dbc 10px,\r\n    #465298 10px,\r\n    #465298 20px\r\n  );\r\n}\r\n\r\n.page__dropzonetitle {\r\n  font-size: 24px;\r\n  padding: 10px;\r\n  text-align:center;\r\n}\r\n\r\n.page__managecontainer {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 3px;\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"questionblock\">\r\n    <span class=\"questionblock__text\">{{ id }}) {{ question }}</span>\r\n    <div\r\n      class=\"questionblock__answers\"\r\n      v-for=\"answer in shuffled_answers\"\r\n      :key=\"answer.id\"\r\n    >\r\n      <div\r\n        class=\"questionblock__rowanswer\"\r\n        :class=\"{\r\n          questionblock__rowanswer_correct:\r\n            show_correct_answer && answer.is_correct,\r\n        }\"\r\n      >\r\n        <input\r\n          type=\"checkbox\"\r\n          @change=\"replies[answer.id] = !replies[answer.id]\"\r\n          :checked=\"replies[answer.id]\"\r\n        />{{ answer.text }}\r\n      </div>\r\n    </div>\r\n    <div class=\"questionblock__buttons\">\r\n      <btn-component\r\n        class=\"questionblock__button\"\r\n        caption=\"Ответить\"\r\n        type=\"primary\"\r\n        @click=\"handle_check_reply()\"\r\n      />\r\n      <btn-component\r\n        class=\"questionblock__button\"\r\n        :caption=\"\r\n          show_correct_answer === true ? 'Скрыть ответы' : 'Показать ответы'\r\n        \"\r\n        type=\"warning\"\r\n        @click=\"show_correct_answer = !show_correct_answer\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, watch, onMounted } from \"vue\";\r\nimport { shuffleArray } from \"../logic/service_layer/use_modules\";\r\nimport BtnComponent from \"./buttons/BtnComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    BtnComponent,\r\n  },\r\n  name: \"QuestionBlock\",\r\n  props: {\r\n    id: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    question: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    answers: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n  },\r\n  emits: [\"user:replied\"],\r\n\r\n  setup(props, { emit }) {\r\n    const show_correct_answer = ref(false);\r\n\r\n    const replies = ref({});\r\n\r\n    const shuffled_answers = computed(() => shuffleArray(props.answers))\r\n\r\n    const reset_replies = () => {\r\n      replies.value = {};\r\n      shuffled_answers.value.forEach((e) => {\r\n        replies.value[e.id] = false;\r\n      });\r\n    };\r\n\r\n    watch(\r\n      () => props.id,\r\n      () => {\r\n        show_correct_answer.value = false;\r\n        reset_replies();\r\n      }\r\n    );\r\n\r\n    const is_reply_ok = computed(() => {\r\n      let is_ok = true;\r\n      shuffled_answers.value.forEach((e) => {\r\n        if (e.is_correct !== replies.value[e.id]) is_ok = false;\r\n      });\r\n\r\n      return is_ok;\r\n    });\r\n\r\n    const handle_check_reply = () => {\r\n      emit(\"user:replied\", is_reply_ok.value);\r\n    };\r\n\r\n    onMounted(() => {\r\n      reset_replies();\r\n    });\r\n\r\n    return { shuffled_answers, show_correct_answer, replies, handle_check_reply };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.questionblock {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.questionblock__text {\r\n  padding: 3px;\r\n  font-size: 1.5em;\r\n}\r\n\r\n.questionblock__answers {\r\n  padding: 3px;\r\n}\r\n\r\n.questionblock__rowanswer_correct {\r\n  color: green;\r\n}\r\n\r\n.questionblock__buttons {\r\n  padding: 3px;\r\n}\r\n\r\n.questionblock__button{\r\n  margin: 3px;\r\n}\r\n</style>\r\n","import { render } from \"./QuestionBlock.vue?vue&type=template&id=7db06534\"\nimport script from \"./QuestionBlock.vue?vue&type=script&lang=js\"\nexport * from \"./QuestionBlock.vue?vue&type=script&lang=js\"\n\nimport \"./QuestionBlock.vue?vue&type=style&index=0&id=7db06534&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SelfTestingPage.vue?vue&type=template&id=47409a36&scoped=true\"\nimport script from \"./SelfTestingPage.vue?vue&type=script&lang=js\"\nexport * from \"./SelfTestingPage.vue?vue&type=script&lang=js\"\n\nimport \"./SelfTestingPage.vue?vue&type=style&index=0&id=47409a36&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-47409a36\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"message\">\r\n    <div class=\"message__text\">{{ text }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"MessagePage\",\r\n  props: {\r\n    text: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.message {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  margin-top: 200px;\r\n}\r\n\r\n.message__text {\r\n  font-size: 24px;\r\n}\r\n</style>\r\n","import { render } from \"./MessagePage.vue?vue&type=template&id=78023fef\"\nimport script from \"./MessagePage.vue?vue&type=script&lang=js\"\nexport * from \"./MessagePage.vue?vue&type=script&lang=js\"\n\nimport \"./MessagePage.vue?vue&type=style&index=0&id=78023fef&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component\r\n      class=\"page__heading\"\r\n      text=\"Поиск согласований документов\"\r\n      size=\"middle\"\r\n    />\r\n    <div class=\"page__container\">\r\n      <document-page-search-row\r\n        class=\"page__searchrow\"\r\n        :search_schema=\"search_schema\"\r\n        :required_space_for_link=\"true\"\r\n        @search:docs=\"handle_search_action($event)\"\r\n      />\r\n      <document-page-sort-row\r\n        class=\"page__sortrow\"\r\n        :search_schema=\"search_schema\"\r\n        :sort_asc=\"sort_asc\"\r\n        :sort_by=\"sort_by\"\r\n        @toggle:direction=\"sort_asc = !sort_asc\"\r\n        @sort:by=\"[sort_by, sort_rule] = $event\"\r\n      />\r\n      <document-search-status-row\r\n        class=\"page__searchstatus\"\r\n        :count=\"Math.max(search_count, items.length)\"\r\n        :time=\"search_time\"\r\n        :min_index=\"pagination_min_index\"\r\n        :max_index=\"pagination_max_index\"\r\n        :is_searching=\"is_searching\"\r\n      />\r\n      <document-pagination-row\r\n        class=\"page__paginationrow\"\r\n        v-if=\"items.length > 0\"\r\n        :total_count=\"Math.max(search_count, items.length)\"\r\n        :count_per_page=\"pagination_count_per_page\"\r\n        :current_page=\"pagination_current_page\"\r\n        :variants=\"pagination_variants\"\r\n        :is_intermediate_part_shown=\"is_intermediate_pages_shown\"\r\n        @set:page_range=\"handle_set_page_range($event.min, $event.max)\"\r\n        @select:page=\"pagination_current_page = $event\"\r\n        @set:count_per_page=\"pagination_count_per_page = $event\"\r\n        @show:pages=\"is_intermediate_pages_shown = true\"\r\n      />\r\n      <div class=\"page__listrow\" v-for=\"obj in items\" :key=\"obj.id\">\r\n        <document-attribute-row\r\n          class=\"page__attributerow\"\r\n          :id=\"obj.id\"\r\n          :search_schema=\"search_schema\"\r\n          :has_link=\"true\"\r\n          :link_route_obj=\"obj.link_to_single_page\"\r\n          :attributes=\"obj.attributes\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref, watch } from \"vue\";\r\nimport { GetManyDocumentsApprovals } from \"../../logic/domain/command\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  convertDateToDateTimeString,\r\n  useExecutionTimeDecorator,\r\n  useGetUsers,\r\n  useGetUserGroups,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport DocumentPageSearchRow from \"../../components/document/DocumentPageSearchRow.vue\";\r\nimport DocumentPageSortRow from \"../../components/document/DocumentPageSortRow.vue\";\r\nimport DocumentPaginationRow from \"../../components/document/DocumentPaginationRow.vue\";\r\nimport DocumentAttributeRow from \"../../components/document/DocumentAttributeRow.vue\";\r\nimport DocumentSearchStatusRow from \"../../components/document/DocumentSearchStatusRow.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    DocumentPageSearchRow,\r\n    DocumentAttributeRow,\r\n    DocumentPageSortRow,\r\n    DocumentPaginationRow,\r\n    DocumentSearchStatusRow,\r\n  },\r\n  name: \"DocumentApprovalSearchPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    // USER\r\n    const user = uow.user_repository.get_current();\r\n\r\n    const users = computed(() =>\r\n      uow.user_repository\r\n        .values()\r\n        .map((e) => e.value)\r\n        .filter((e) => e.is_active === true)\r\n    );\r\n\r\n    const user_options = computed(() =>\r\n      users.value\r\n        .map((e) => {\r\n          return {\r\n            name: make_full_name(e.last_name, e.first_name, e.username),\r\n            value: e.username,\r\n          };\r\n        })\r\n        .sort((a, b) => a.name.localeCompare(b.name))\r\n    );\r\n\r\n    // USERGROUP\r\n    const usergroup_options = computed(() => {\r\n      let arr = uow.usergroup_repository\r\n        .values()\r\n        .filter(\r\n          (obj) =>\r\n            !obj.value.is_private || obj.value.has_username(user.value.username)\r\n        )\r\n        .map((obj) => {\r\n          return {\r\n            name: obj.value.name,\r\n            value: obj.value.id.toString(),\r\n          };\r\n        });\r\n\r\n      arr.sort((a, b) => a.name.localeCompare(b.name));\r\n      return arr;\r\n    });\r\n\r\n    // ITEMS\r\n    const make_full_name = (surname, name, username) =>\r\n      surname + \" \" + name + \" (\" + username + \")\";\r\n\r\n    const convert_state = (x) => {\r\n      switch (x) {\r\n        case \"APPROVED\":\r\n          return \"Согласовано\";\r\n        case \"REJECTED\":\r\n          return \"Отклонено\";\r\n        case \"DELEGATED\":\r\n          return \"Делегировано\";\r\n        case \"NONE\":\r\n          return \"В работе\";\r\n      }\r\n    };\r\n\r\n    const convert_usergroup = (usergroup_id) => {\r\n      const group = uow.usergroup_repository.get(usergroup_id);\r\n      return group ? group.value.name : usergroup_id.toString();\r\n    };\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          USERGROUP: convert_usergroup(obj.document.usergroup_id),\r\n          STATE: convert_state(obj.state),\r\n          FROM_USER: make_full_name(\r\n            obj.from_last_name,\r\n            obj.from_first_name,\r\n            obj.from_username\r\n          ),\r\n          TO_USER: make_full_name(\r\n            obj.to_last_name,\r\n            obj.to_first_name,\r\n            obj.to_username\r\n          ),\r\n          DESCRIPTION: obj.document.raw_description,\r\n          UPDATED_AT: convertDateToDateTimeString(obj.updated_at),\r\n        },\r\n        link_to_single_page: {\r\n          name: \"DocumentPage\",\r\n          params: {\r\n            folder_id: obj.document.folder_id,\r\n            usergroup_id: obj.document.usergroup_id,\r\n            document_id: obj.document.id,\r\n          },\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const items = computed(() =>\r\n      uow.search_doc_approval_repository\r\n        .values()\r\n        .map((obj) => convert_model_to_item(obj.value))\r\n    );\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    // SEARCH\r\n    const current_id = ref(0);\r\n    const current_query = ref({});\r\n\r\n    const handle_search_action = async (query) => {\r\n      // Если запрос новый, то сбрасываем пагинацию\r\n      if (query !== current_query.value) reset_pagination();\r\n\r\n      current_query.value = query;\r\n      await search();\r\n    };\r\n\r\n    const search = async () => {\r\n      if (is_searching.value) return;\r\n\r\n      await useExecutionTimeDecorator(\r\n        uow,\r\n        new GetManyDocumentsApprovals(\r\n          current_query.value,\r\n          pagination_count_per_page.value * (pagination_current_page.value - 1),\r\n          pagination_count_per_page.value,\r\n          sort_by.value,\r\n          sort_asc.value\r\n        ),\r\n        search_time,\r\n        is_searching\r\n      );\r\n    };\r\n\r\n    const search_count = uow.search_doc_approval_repository.get_count(); // Ref\r\n\r\n    const search_schema = computed(() => [\r\n      {\r\n        name: \"USERGROUP\",\r\n        size: \"w200\",\r\n        fields: [\r\n          {\r\n            type: \"select\",\r\n            options: [{ name: \"Гр. пользователей ?\", value: \"\" }].concat(\r\n              usergroup_options.value\r\n            ),\r\n            default: \"\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"FROM_USER\",\r\n        size: \"w350\",\r\n        fields: [\r\n          {\r\n            type: \"select\",\r\n            options: [{ name: \"От кого ?\", value: \"\" }].concat(\r\n              user_options.value\r\n            ),\r\n            default: \"\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"TO_USER\",\r\n        size: \"w350\",\r\n        fields: [\r\n          {\r\n            type: \"select\",\r\n            options: [{ name: \"Кому ?\", value: \"\" }].concat(user_options.value),\r\n            default: \"\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"STATE\",\r\n        size: \"w150\",\r\n        fields: [\r\n          {\r\n            type: \"select\",\r\n            options: [\r\n              { name: \"Не выбрано\", value: \"\" },\r\n              { name: \"В работе\", value: \"NONE\" },\r\n              { name: \"Согласовано\", value: \"APPROVED\" },\r\n              { name: \"Отклонено\", value: \"REJECTED\" },\r\n              { name: \"Делегировано\", value: \"DELEGATED\" },\r\n            ],\r\n            default: \"\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"DESCRIPTION\",\r\n        size: \"w200\",\r\n        align: \"left\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"UPDATED_AT\",\r\n        size: \"w150\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Дата (от)\",\r\n            rule: \"gte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n          {\r\n            placeholder: \"Дата (до)\",\r\n            rule: \"lte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n\r\n    // SORTING\r\n    const sort_by = ref(\"UPDATED_AT\");\r\n    const sort_rule = ref(\"DEFAULT\");\r\n    const sort_asc = ref(false);\r\n\r\n    watch(sort_by, async () => await search());\r\n    watch(sort_asc, async () => await search());\r\n    watch(sort_rule, async () => await search());\r\n\r\n    // PAGINATION\r\n    const is_intermediate_pages_shown = ref(false);\r\n    const default_count_per_page = 20;\r\n    const default_current_page = 1;\r\n    const pagination_variants = ref([20, 50, 100]);\r\n\r\n    const pagination_count_per_page = ref(0);\r\n    const pagination_current_page = ref(0);\r\n    const pagination_min_index = ref(0);\r\n    const pagination_max_index = ref(0);\r\n\r\n    const handle_set_page_range = async (min, max) => {\r\n      pagination_min_index.value = min;\r\n      pagination_max_index.value = max;\r\n    };\r\n\r\n    const reset_pagination = () => {\r\n      pagination_count_per_page.value = default_count_per_page;\r\n      pagination_current_page.value = default_current_page;\r\n      pagination_min_index.value =\r\n        (default_current_page - 1) * default_count_per_page;\r\n      pagination_max_index.value =\r\n        default_current_page * default_count_per_page;\r\n    };\r\n\r\n    reset_pagination();\r\n\r\n    watch(pagination_count_per_page, async () => await search({}));\r\n    watch(pagination_current_page, async () => await search({}));\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_search_documentapproval\"]);\r\n      await Promise.all([useGetUsers(uow), useGetUserGroups(uow)]);\r\n    });\r\n\r\n    return {\r\n      //USER\r\n      user_options,\r\n\r\n      // USERGROUP\r\n      usergroup_options,\r\n\r\n      // ACTION\r\n      handle_search_action,\r\n      current_id,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      items,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n      search_count,\r\n      current_query,\r\n\r\n      // SORTING\r\n      sort_by,\r\n      sort_rule,\r\n      sort_asc,\r\n\r\n      // PAGINATION\r\n      is_intermediate_pages_shown,\r\n      handle_set_page_range,\r\n      pagination_variants,\r\n      pagination_count_per_page,\r\n      pagination_current_page,\r\n      pagination_min_index,\r\n      pagination_max_index,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__searchbutton {\r\n  margin-left: 25px;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: stretch;\r\n}\r\n\r\n.page__listrow:nth-child(even) {\r\n  background-color: rgb(215, 242, 255);\r\n}\r\n</style>\r\n","import { render } from \"./DocumentApprovalSearchPage.vue?vue&type=template&id=48a5e211&scoped=true\"\nimport script from \"./DocumentApprovalSearchPage.vue?vue&type=script&lang=js\"\nexport * from \"./DocumentApprovalSearchPage.vue?vue&type=script&lang=js\"\n\nimport \"./DocumentApprovalSearchPage.vue?vue&type=style&index=0&id=48a5e211&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-48a5e211\"]])\n\nexport default __exports__","<template>\r\n  <download-file-page :generate_message=\"make_message\" />\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useValidateIntOr404,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport { DownloadFileFromFolder } from \"../../logic/domain/command\";\r\nimport DownloadFilePage from \"./DownloadFilePage.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    DownloadFilePage,\r\n  },\r\n  name: \"DownloadFileFromFolderPage\",\r\n\r\n  setup() {\r\n    const route = useRoute();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const folder_id = useValidateIntOr404(route.params.folder_id);\r\n    const usergroup_id = useValidateIntOr404(route.params.usergroup_id);\r\n\r\n    const make_message = (name, size) =>\r\n      new DownloadFileFromFolder(folder_id, usergroup_id, route.params.file_id, name, size, true);\r\n\r\n    onMounted(\r\n      async () =>\r\n        await useBeforeEnterPage(\r\n          uow,\r\n          [\"can_view_file\"],\r\n          folder_id,\r\n          usergroup_id\r\n        )\r\n    );\r\n\r\n    return { make_message };\r\n  },\r\n};\r\n</script>","<template>\r\n  <div class=\"page\">\r\n    <document-page-download-progress-row\r\n      class=\"page__downloadprogress\"\r\n      :files=\"downloading_files\"\r\n      :full_format=\"true\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from \"vue-router\";\r\nimport { onMounted, computed } from \"vue\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { GetFileInfo } from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport DocumentPageDownloadProgressRow from \"../../components/document/DocumentPageDownloadProgressRow.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    DocumentPageDownloadProgressRow,\r\n  },\r\n  name: \"DownloadFilePage\",\r\n\r\n  props: {\r\n    generate_message: {\r\n      type: Function,\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  setup(props) {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const route = useRoute();\r\n    const file_id = route.params.file_id;\r\n\r\n    const downloading_files = computed(() =>\r\n      uow.download_progress.values().map((obj) => obj.value)\r\n    );\r\n\r\n    const handle_get_file_info = async () => {\r\n      const message = new GetFileInfo(file_id);\r\n      const result = await MessageBus.handle(message, uow);\r\n      return result[0]; // Первый результат\r\n    };\r\n\r\n    const handle_download_file = async (name, size) =>\r\n      await MessageBus.handle(props.generate_message(name, size), uow);\r\n\r\n    onMounted(async () => {\r\n      const file_info = await handle_get_file_info();\r\n      if (file_info) await handle_download_file(file_info.name, file_info.size);\r\n    });\r\n\r\n    return { downloading_files };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__downloadprogress {\r\n  margin-top: 20px;\r\n  min-height: 20px;\r\n}\r\n</style>\r\n","import { render } from \"./DownloadFilePage.vue?vue&type=template&id=330f0eb2&scoped=true\"\nimport script from \"./DownloadFilePage.vue?vue&type=script&lang=js\"\nexport * from \"./DownloadFilePage.vue?vue&type=script&lang=js\"\n\nimport \"./DownloadFilePage.vue?vue&type=style&index=0&id=330f0eb2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-330f0eb2\"]])\n\nexport default __exports__","import { render } from \"./DownloadFileFromFolderPage.vue?vue&type=template&id=0af6f3e1\"\nimport script from \"./DownloadFileFromFolderPage.vue?vue&type=script&lang=js\"\nexport * from \"./DownloadFileFromFolderPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <download-file-page :generate_message=\"make_message\" />\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport { useBeforeEnterPage } from \"../../logic/service_layer/use_modules\";\r\nimport { DownloadShareFile } from \"../../logic/domain/command\";\r\nimport DownloadFilePage from \"./DownloadFilePage.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    DownloadFilePage,\r\n  },\r\n  name: \"DownloadFileFromFolderPage\",\r\n\r\n  setup() {\r\n    const route = useRoute();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const make_message = (name, size) =>\r\n      new DownloadShareFile(route.params.file_id, name, size);\r\n\r\n    onMounted(async () => await useBeforeEnterPage(uow, [\"can_view_service\"]));\r\n    return { make_message };\r\n  },\r\n};\r\n</script>","import { render } from \"./DownloadShareFilePage.vue?vue&type=template&id=d4f62930\"\nimport script from \"./DownloadShareFilePage.vue?vue&type=script&lang=js\"\nexport * from \"./DownloadShareFilePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <download-file-page :generate_message=\"make_message\" />\r\n</template>\r\n\r\n<script>\r\nimport { onMounted } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  useValidateIntOr404,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport { DownloadMailMessageAttachment } from \"../../logic/domain/command\";\r\nimport DownloadFilePage from \"./DownloadFilePage.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    DownloadFilePage,\r\n  },\r\n  name: \"DownloadMailMessageFilePage\",\r\n\r\n  setup() {\r\n    const route = useRoute();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const message_id = useValidateIntOr404(route.params.message_id);\r\n\r\n    const make_message = (name, size) =>\r\n      new DownloadMailMessageAttachment(\r\n        message_id,\r\n        route.params.file_id,\r\n        name,\r\n        size\r\n      );\r\n\r\n    onMounted(async () => await useBeforeEnterPage(uow, [\"can_view_mail\"]));\r\n\r\n    return { make_message };\r\n  },\r\n};\r\n</script>","import { render } from \"./DownloadMailMessageFilePage.vue?vue&type=template&id=065914e2\"\nimport script from \"./DownloadMailMessageFilePage.vue?vue&type=script&lang=js\"\nexport * from \"./DownloadMailMessageFilePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Потоки\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <div class=\"page__editblock\">\r\n        <base-form\r\n          class=\"page__form\"\r\n          :attributes=\"current\"\r\n          :settings=\"form_pages\"\r\n          :is_edit_mode=\"true\"\r\n          :is_header_required=\"false\"\r\n          @update=\"handle_update_attribute($event.name, $event.value)\"\r\n        >\r\n        </base-form>\r\n\r\n        <div class=\"page__editrow\">\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"add_action()\"\r\n            caption=\"Добавить\"\r\n            type=\"primary\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_add && !current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"update_action()\"\r\n            caption=\"Сохранить\"\r\n            type=\"success\"\r\n            :disabled=\"!is_edit_block_valid\"\r\n            v-if=\"can_change && current_id\"\r\n          />\r\n          <btn-component\r\n            class=\"page__button\"\r\n            @click=\"delete_action()\"\r\n            caption=\"Удалить\"\r\n            type=\"danger\"\r\n            v-if=\"can_delete && current_id\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"name\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"false\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport {\r\n  GetFlows,\r\n    AddFlow,\r\n    UpdateFlow,\r\n    DeleteFlow,\r\n} from \"../../logic/domain/command\";\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  convertObject,\r\n  useBeforeEnterPage,\r\n  convertDateToDateString,\r\n  filterArrayOfObjectsByQuery,\r\n  validate_json,\r\n  useExecutionTimeDecorator,\r\n  useCurrentMixin,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport { FlowProcess } from \"../../logic/adapters/api_responses/models/flow_process/flow_process\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport BtnComponent from \"../../components/buttons/BtnComponent.vue\";\r\nimport BaseForm from \"../../components/forms/BaseForm.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    BtnComponent,\r\n    BaseForm,\r\n    SearchComponent,\r\n  },\r\n  name: \"FlowsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          username: obj.username,\r\n          trigger: obj.trigger,\r\n          process: obj.process,\r\n          is_active: obj.is_active === true ? \"Y\" : \"N\",\r\n          is_multiple: obj.is_multiple === true ? \"Y\" : \"N\",\r\n          created_at: convertDateToDateString(obj.created_at),\r\n          updated_at: convertDateToDateString(obj.updated_at),\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.flow_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    const can_add = uow.permission_repository.has(\"can_add_flow\");\r\n    const can_change = uow.permission_repository.has(\"can_change_flow\");\r\n    const can_delete = uow.permission_repository.has(\"can_delete_flow\");\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n\r\n    const search_action = async (query) => {\r\n      await useExecutionTimeDecorator(\r\n        uow,\r\n        new GetFlows(query),\r\n        search_time,\r\n        is_searching\r\n      );\r\n    };\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"username\",\r\n        size: \"w150\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Пользователь\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        size: \"w200\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"trigger\",\r\n        size: \"w200\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Триггер\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"is_active\",\r\n        size: \"w30\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Активен?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"is_multiple\",\r\n        size: \"w30\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Множественный?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"created_at\",\r\n        size: \"w150\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Создан (от)\",\r\n            rule: \"gte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            // converter: \"date_to_date_object\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n          {\r\n            placeholder: \"Создан (до)\",\r\n            rule: \"lte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"updated_at\",\r\n        size: \"w150\",\r\n        align: \"center\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Обновлен (от)\",\r\n            rule: \"gte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n          {\r\n            placeholder: \"Обновлен (до)\",\r\n            rule: \"lte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    // FORM\r\n    const init_obj = {\r\n      id: null,\r\n      name: \"\",\r\n      trigger: \"\",\r\n      is_multiple: false,\r\n      is_active: false,\r\n      message_if_fail: true,\r\n      process: \"\",\r\n    };\r\n\r\n    const to_repository_convertion = {\r\n      process: (x) => JSON.parse(x),\r\n    };\r\n\r\n    const from_repository_convertion = {\r\n      process: (x) => JSON.stringify(x, null, 3), // Каждый новый отступ - 3 пробела\r\n    };\r\n\r\n    const { current_id, current, handle_update_attribute } = useCurrentMixin(\r\n      init_obj,\r\n      uow.flow_repository,\r\n      from_repository_convertion\r\n    );\r\n\r\n    const is_process_valid = computed(() =>\r\n      validate_json(current.value.process, FlowProcess)\r\n    );\r\n\r\n    const is_edit_block_valid = computed(\r\n      () => is_process_valid.value && current.value.name.length > 0\r\n    );\r\n\r\n    const add_action = async () => {\r\n      const message = new AddFlow(\r\n        ...[\r\n          \"name\",\r\n          \"trigger\",\r\n          \"is_active\",\r\n          \"is_multiple\",\r\n          \"message_if_fail\",\r\n          \"process\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const update_action = async () => {\r\n      const message = new UpdateFlow(\r\n        ...[\r\n          \"id\",\r\n          \"name\",\r\n          \"trigger\",\r\n          \"is_active\",\r\n          \"is_multiple\",\r\n          \"message_if_fail\",\r\n          \"process\",\r\n        ].map((k) => convertObject(current.value, to_repository_convertion)[k])\r\n      );\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    const delete_action = async () => {\r\n      const message = new DeleteFlow(current_id.value);\r\n      await MessageBus.handle(message, uow);\r\n      current_id.value = null;\r\n    };\r\n\r\n    const form_pages = computed(() => [\r\n      {\r\n        size: \"w450\",\r\n        fields: [\r\n          {\r\n            type: \"FormTextField\",\r\n            bind: \"id\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Наименование:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            parameters: { height: 30 },\r\n            bind: \"name\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Имя тригера:\",\r\n          },\r\n          {\r\n            type: \"FormTextInput\",\r\n            parameters: { height: 30 },\r\n            bind: \"trigger\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Поток активен:\",\r\n          },\r\n          {\r\n            type: \"FormBooleanInput\",\r\n            parameters: { size: 20 },\r\n            bind: \"is_active\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Может иметь несколько экземпляров:\",\r\n          },\r\n          {\r\n            type: \"FormBooleanInput\",\r\n            parameters: { size: 20 },\r\n            bind: \"is_multiple\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Нужно ли оповещать при сбое\",\r\n          },\r\n          {\r\n            type: \"FormBooleanInput\",\r\n            parameters: { size: 20 },\r\n            bind: \"message_if_fail\",\r\n          },\r\n          {\r\n            type: \"FormTextField\",\r\n            value: \"Описание в формате JSON\",\r\n          },\r\n          {\r\n            type: \"FormMultilineTextInput\",\r\n            parameters: {\r\n              rows: 15,\r\n              resize: \"vertical\",\r\n              color: is_process_valid.value ? \"green\" : \"red\",\r\n            },\r\n            bind: \"process\",\r\n          },\r\n        ],\r\n      },\r\n    ]);\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_flow\"]);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      add_action,\r\n      update_action,\r\n      delete_action,\r\n\r\n      // PERMISSION\r\n      can_add,\r\n      can_change,\r\n      can_delete,\r\n\r\n      // EDIT\r\n      current_id,\r\n      current,\r\n      is_process_valid,\r\n      is_edit_block_valid,\r\n      handle_update_attribute,\r\n      form_pages,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__editblock {\r\n  width: 450px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 15px;\r\n  border-left: 1px solid black;\r\n}\r\n\r\n.page__button {\r\n  margin: 5px;\r\n}\r\n\r\n.page__editrow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./FlowsPage.vue?vue&type=template&id=50a187aa&scoped=true\"\nimport script from \"./FlowsPage.vue?vue&type=script&lang=js\"\nexport * from \"./FlowsPage.vue?vue&type=script&lang=js\"\n\nimport \"./FlowsPage.vue?vue&type=style&index=0&id=50a187aa&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50a187aa\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <div class=\"page__caption\">\r\n      <heading-component class=\"page__heading\" text=\"Поток\" size=\"middle\" />\r\n      <div\r\n        class=\"page__state\"\r\n        :class=\"{\r\n          page__state_running: flowitem_state === 'RUNNING',\r\n          page__state_finished_fail: flowitem_state === 'FINISHED_FAIL',\r\n          page__state_finished_success: flowitem_state === 'FINISHED_SUCCESS',\r\n        }\"\r\n      />\r\n      <text-button\r\n        class=\"page__restartbutton\"\r\n        title=\"Перезапустить\"\r\n        @click=\"handle_restart_flowitem()\"\r\n      />\r\n    </div>\r\n    <div class=\"page__container\">\r\n      <div class=\"page__infoblock\">\r\n        <div class=\"page__inforow\">\r\n          <form-text-field class=\"infoitem__label\" value=\"Наименование:\" />\r\n          <form-text-field class=\"infoitem__value\" :value=\"flowitem_name\" />\r\n        </div>\r\n        <div class=\"page__inforow\">\r\n          <form-text-field class=\"infoitem__label\" value=\"Триггер:\" />\r\n          <form-text-field class=\"infoitem__value\" :value=\"flowitem_trigger\" />\r\n        </div>\r\n        <div class=\"page__inforow\">\r\n          <form-text-field class=\"infoitem__label\" value=\"Время старта:\" />\r\n          <form-text-field\r\n            class=\"infoitem__value\"\r\n            :value=\"\r\n              flowitem_started_at === null\r\n                ? '-'\r\n                : convertDateToDateTimeString(flowitem_started_at)\r\n            \"\r\n          />\r\n        </div>\r\n        <div class=\"page__inforow\">\r\n          <form-text-field class=\"infoitem__label\" value=\"Время финиша:\" />\r\n          <form-text-field\r\n            class=\"infoitem__value\"\r\n            :value=\"\r\n              flowitem_finished_at === null\r\n                ? '-'\r\n                : convertDateToDateTimeString(flowitem_finished_at)\r\n            \"\r\n          />\r\n        </div>\r\n      </div>\r\n      <div class=\"page__stepblock stepblock\">\r\n        <flow-item-step\r\n          class=\"stepblock__item stepblock__item_trigger\"\r\n          name=\"input\"\r\n          :description=\"flowitem_name\"\r\n          :action=\"flowitem_trigger\"\r\n          :input=\"flowitem_input\"\r\n          :started_at=\"flowitem_started_at\"\r\n          :finished_at=\"flowitem_started_at\"\r\n          :success=\"true\"\r\n          ref=\"trigger_el\"\r\n          @updated=\"handle_updated()\"\r\n        />\r\n        <flow-item-step\r\n          class=\"stepblock__item stepblock__item_regular\"\r\n          v-for=\"(x, index) in steps\"\r\n          :key=\"x.name\"\r\n          :name=\"x.name\"\r\n          :variable_name=\"x.variable_name\"\r\n          :description=\"x.description\"\r\n          :action=\"x.action\"\r\n          :attributes=\"x.attributes\"\r\n          :input=\"x.input\"\r\n          :output=\"x.output\"\r\n          :started_at=\"x.started_at\"\r\n          :finished_at=\"x.finished_at\"\r\n          :success=\"x.success\"\r\n          :ref=\"\r\n            (el) => {\r\n              step_el_arr[index] = el;\r\n            }\r\n          \"\r\n          @updated=\"handle_updated()\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { MessageBus } from \"../../logic/service_layer/message_bus\";\r\nimport LeaderLine from \"leader-line-vue\";\r\nimport {\r\n  ref,\r\n  onMounted,\r\n  onBeforeUpdate,\r\n  onBeforeUnmount,\r\n  computed,\r\n  nextTick,\r\n} from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport {\r\n  useValidateIntOr404,\r\n  useBeforeEnterPage,\r\n  useGetFlowItem,\r\n  useGetFlowItemSteps,\r\n  convertDateToDateTimeString,\r\n} from \"../../logic/service_layer/use_modules\";\r\nimport { RestartFlowItem } from \"../../logic/domain/command\";\r\nimport FormTextField from \"../../components/fields/FormTextField.vue\";\r\nimport FlowItemStep from \"../../components/flow/FlowItemStep.vue\";\r\nimport TextButton from \"../../components/buttons/TextButton.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    FormTextField,\r\n    TextButton,\r\n    FlowItemStep,\r\n  },\r\n  name: \"FlowItemPage\",\r\n\r\n  setup() {\r\n    const route = useRoute();\r\n    const uow = new VueUnitOfWork();\r\n\r\n    // FLOW ITEM\r\n\r\n    const flowitem_id = useValidateIntOr404(route.params.flowitem_id);\r\n    const flowitem = uow.flow_item_repository.get_current(); // Ref\r\n\r\n    const flowitem_name = computed(() =>\r\n      flowitem.value === null ? \"-\" : flowitem.value.name\r\n    );\r\n\r\n    const flowitem_trigger = computed(() =>\r\n      flowitem.value === null ? \"-\" : flowitem.value.trigger\r\n    );\r\n\r\n    const flowitem_started_at = computed(() =>\r\n      flowitem.value === null ? null : flowitem.value.started_at\r\n    );\r\n\r\n    const flowitem_finished_at = computed(() =>\r\n      flowitem.value === null ? null : flowitem.value.finished_at\r\n    );\r\n\r\n    const flowitem_input = computed(() =>\r\n      flowitem.value === null ? {} : flowitem.value.raw_input\r\n    );\r\n\r\n    const flowitem_state = computed(() => {\r\n      if (flowitem.value === null) return \"-\";\r\n      if (flowitem.value.is_active) return \"RUNNING\";\r\n      return \"FINISHED_\" + (flowitem.value.success ? \"SUCCESS\" : \"FAIL\");\r\n    });\r\n\r\n    const process = computed(() =>\r\n      flowitem.value === null ? null : flowitem.value.raw_process\r\n    );\r\n\r\n    const process_steps = computed(() => {\r\n      return process.value === null ? null : process.value[\"steps\"];\r\n    });\r\n\r\n    const steps = computed(() => {\r\n      if (process_steps.value === null) return null;\r\n      return process_steps.value.map((x) => {\r\n        const name = x[\"name\"];\r\n        let input = {};\r\n        let output = {};\r\n        let started_at = null;\r\n        let finished_at = null;\r\n        let success = false;\r\n\r\n        if (\r\n          Object.prototype.hasOwnProperty.call(real_latest_steps.value, name)\r\n        ) {\r\n          input = real_latest_steps.value[name].input;\r\n          output = real_latest_steps.value[name].output;\r\n          started_at = real_latest_steps.value[name].started_at;\r\n          finished_at = real_latest_steps.value[name].finished_at;\r\n          success = real_latest_steps.value[name].success;\r\n        }\r\n\r\n        return {\r\n          name: name,\r\n          description: x[\"description\"],\r\n          action: x[\"action\"][\"name\"],\r\n          attributes: x[\"action\"][\"input\"],\r\n          input: input,\r\n          output: output,\r\n          started_at: started_at,\r\n          finished_at: finished_at,\r\n          success: success,\r\n        };\r\n      });\r\n    });\r\n\r\n    const handle_restart_flowitem = async () => {\r\n      const message = new RestartFlowItem(flowitem_id);\r\n      await MessageBus.handle(message, uow);\r\n    };\r\n\r\n    // STEPS\r\n\r\n    const real_latest_steps = computed(() => {\r\n      let result = {};\r\n      // Отбираем только последние шаги\r\n      uow.flow_item_step_repository.values().forEach((obj) => {\r\n        if (Object.prototype.hasOwnProperty.call(result, obj.value.name)) {\r\n          if (result[obj.value.name].started_at > obj.value.started_at) return;\r\n        }\r\n        result[obj.value.name] = obj.value;\r\n      });\r\n      return result;\r\n    });\r\n\r\n    // ОТРИСОВКА\r\n\r\n    const trigger_el = ref(null);\r\n    const step_el_arr = ref([]);\r\n\r\n    // Создаем объект с DOM элементами шагов\r\n    const make_dom_elem_obj = () => {\r\n      let obj = { trigger: trigger_el.value.$el };\r\n      step_el_arr.value.forEach((x) => (obj[x.name] = x.$el));\r\n      return obj;\r\n    };\r\n\r\n    // Массив линий\r\n    const lines_arr = ref([]);\r\n\r\n    // Функция отрисовки связей\r\n    const draw = () => {\r\n      // Сбрасываем массив линий\r\n      lines_arr.value = [];\r\n\r\n      // Элементы DOM дерева для компонентов шагов\r\n      const dom_steps = make_dom_elem_obj();\r\n\r\n      process_steps.value.forEach((step) => {\r\n        // console.log(step);\r\n\r\n        const name = step[\"name\"];\r\n        // console.log(name);\r\n        const endElem = dom_steps[name];\r\n\r\n        //  Объединяем шаги, которые должны обязательно быть закончены ДО\r\n        // и шаги, хотя бы один из которых должен быть закончен ДО\r\n        const must = (step[\"to_be_finished_before\"] || []).map((x) =>\r\n          Object.assign(x, { type: \"must\" })\r\n        );\r\n        const should = (step[\"at_least_one_to_be_finished_before\"] || []).map((x) =>\r\n          Object.assign(x, { type: \"should\" })\r\n        );\r\n        const combined_to_be_finished_before = [].concat(must).concat(should);\r\n\r\n        let line = null;\r\n\r\n        if (combined_to_be_finished_before) {\r\n          combined_to_be_finished_before.forEach((before) => {\r\n            const before_name = before[\"name\"];\r\n            const before_success = before[\"success\"];\r\n            const before_result_key = before[\"result_key\"];\r\n            const dash = before['type'] === 'should'\r\n\r\n            const startElem = dom_steps[before_name];\r\n            const position = before_success ? \"right\" : \"left\";\r\n            // Если\r\n            //  1. Предыдущий шаг завершен\r\n            //  2. success совпадает\r\n            //  3. result_key совпадает\r\n            // то линия\r\n            //   красная - fail\r\n            //   зеленая - success\r\n            // Если не завершен - серая\r\n            const color =\r\n              Object.prototype.hasOwnProperty.call(\r\n                real_latest_steps.value,\r\n                before_name\r\n              ) &&\r\n              real_latest_steps.value[before_name].success === before_success &&\r\n              real_latest_steps.value[before_name].result_key ===\r\n                before_result_key\r\n                ? before[\"success\"]\r\n                  ? \"green\"\r\n                  : \"red\"\r\n                : \"gray\";\r\n\r\n\r\n            line = LeaderLine.setLine(startElem, endElem, {\r\n              startPlug: \"disc\",\r\n              startSocket: position,\r\n              endSocket: position,\r\n              middleLabel: before_result_key,\r\n              color: color,\r\n              dash: dash\r\n            });\r\n          });\r\n        } else {\r\n          line = LeaderLine.setLine(dom_steps[\"trigger\"], endElem, {\r\n            startPlug: \"disc\",\r\n            startSocket: \"right\",\r\n            endSocket: \"right\",\r\n            color: \"green\",\r\n          });\r\n        }\r\n        lines_arr.value.push(line);\r\n      });\r\n    };\r\n\r\n    onMounted(async () => {\r\n      await useBeforeEnterPage(uow, [\"can_view_flowitem\"]); // Пытаемся автоматически зaлогинится\r\n      await Promise.all([\r\n        useGetFlowItem(uow, flowitem_id),\r\n        useGetFlowItemSteps(uow, flowitem_id),\r\n      ]);\r\n\r\n      // Рисуем все связи\r\n      draw();\r\n    });\r\n\r\n    //  Обнуляем ссылки на refs перед обновлением, чтобы реактивность нормально работала\r\n    onBeforeUpdate(() => {\r\n      step_el_arr.value = [];\r\n    });\r\n\r\n    // Уничтожаем линии перед выходом\r\n    onBeforeUnmount(() => {\r\n      lines_arr.value.forEach((line) => line.remove());\r\n    });\r\n\r\n    // Обрабатываем событие обновления компонента и выполняем\r\n    // перерисовку линий на следующем цикле отрисовки\r\n    const handle_updated = () =>\r\n      void nextTick(() => lines_arr.value.forEach((x) => x.position()));\r\n\r\n    return {\r\n      convertDateToDateTimeString,\r\n\r\n      // FLOW iTEM\r\n      flowitem,\r\n      flowitem_id,\r\n      flowitem_name,\r\n      flowitem_trigger,\r\n      flowitem_started_at,\r\n      flowitem_finished_at,\r\n      flowitem_state,\r\n      flowitem_input,\r\n      handle_restart_flowitem,\r\n\r\n      // STEPS\r\n      process,\r\n      process_steps,\r\n      steps,\r\n      real_latest_steps,\r\n\r\n      //  DRAW\r\n      trigger_el,\r\n      step_el_arr,\r\n      make_dom_elem_obj,\r\n      draw,\r\n      lines_arr,\r\n      handle_updated,\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__caption {\r\n  display: flex;\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n  align-items: flex-end;\r\n}\r\n\r\n.page__restartbutton {\r\n  margin-left: 10px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n.page__state {\r\n  margin-left: 10px;\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\n.page__state_running {\r\n  background: url(\"../../../public/pie-chart.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.page__state_finished_success {\r\n  background: url(\"../../../public/check.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.page__state_finished_fail {\r\n  background: url(\"../../../public/cancel.png\") top left/30px 30px no-repeat;\r\n}\r\n\r\n.page__infoblock {\r\n  width: 500px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-right: 15px;\r\n}\r\n\r\n.page__inforow {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.infoitem {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n  padding: 5px;\r\n}\r\n\r\n.infoitem__label {\r\n  min-width: 150px;\r\n  max-width: 150px;\r\n  font-weight: 500;\r\n}\r\n\r\n.infoitem__value {\r\n  flex-grow: 1;\r\n}\r\n\r\n.page__stepblock {\r\n  width: 800px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-left: 100px;\r\n  margin-right: 100px;\r\n}\r\n\r\n.stepblock__item {\r\n  padding: 10px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.stepblock__item_trigger {\r\n  background-color: burlywood;\r\n}\r\n\r\n.stepblock__item_regular {\r\n  background-color: lightblue;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"flowitemstep\">\r\n    <div class=\"flowitemstep__row flowitemstep__row_date\">\r\n      <div\r\n        class=\"flowitemstep__state\"\r\n        :class=\"{\r\n          flowitemstep__state_running: state === 'RUNNING',\r\n          flowitemstep__state_waiting: state === 'WAITING',\r\n          flowitemstep__state_finished_fail: state === 'FINISHED_FAIL',\r\n          flowitemstep__state_finished_success: state === 'FINISHED_SUCCESS',\r\n        }\"\r\n      />\r\n      <form-text-field\r\n        class=\"flowitemstep__date\"\r\n        :value=\"formatted_started_at\"\r\n      />\r\n      <div class=\"flowitemstep__freespace\" />\r\n      <form-text-field class=\"flowitemstep__name\" :value=\"name\" />\r\n      <form-text-field\r\n        v-if=\"variable_name\"\r\n        class=\"flowitemstep__name\"\r\n        :value=\"'[' + (variable_name || name) + ']'\"\r\n      />\r\n      <div class=\"flowitemstep__freespace\" />\r\n      <form-text-field\r\n        class=\"flowitemstep__date\"\r\n        :value=\"formatted_finished_at\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"flowitemstep__row\">\r\n      <form-text-field class=\"flowitemstep__action\" :value=\"action\" />\r\n      <form-text-field class=\"flowitemstep__description\" :value=\"description\" />\r\n    </div>\r\n\r\n    <div class=\"flowitemstep__row\" v-if=\"Object.keys(attributes).length !== 0\">\r\n      <form-text-field\r\n        class=\"flowitemstep__caption\"\r\n        value=\"Правила формирования входных данных:\"\r\n      />\r\n      <div\r\n        class=\"flowitemstep__arrow\"\r\n        v-bind:class=\"{\r\n          flowitemstep__arrow_selected: is_attributes_shown,\r\n        }\"\r\n        v-on:click=\"is_attributes_shown = !is_attributes_shown\"\r\n      >\r\n        {{ is_attributes_shown ? \"&#x25bc;\" : \"&#x25c6;\" }}\r\n      </div>\r\n    </div>\r\n\r\n    <div\r\n      class=\"flowitemstep__row\"\r\n      v-for=\"(attr_value, attr_key) in attributes\"\r\n      :key=\"attr_key\"\r\n    >\r\n      <form-text-field\r\n        v-if=\"is_attributes_shown\"\r\n        class=\"flowitemstep__label\"\r\n        :value=\"attr_key\"\r\n      />\r\n      <form-text-field\r\n        v-if=\"is_attributes_shown\"\r\n        class=\"flowitemstep__value\"\r\n        :value=\"attr_value\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"flowitemstep__row\" v-if=\"Object.keys(input).length !== 0\">\r\n      <form-text-field class=\"flowitemstep__caption\" value=\"Входные данные:\" />\r\n      <div\r\n        class=\"flowitemstep__arrow\"\r\n        v-bind:class=\"{\r\n          flowitemstep__arrow_selected: is_input_shown,\r\n        }\"\r\n        v-on:click=\"is_input_shown = !is_input_shown\"\r\n      >\r\n        {{ is_input_shown ? \"&#x25bc;\" : \"&#x25c6;\" }}\r\n      </div>\r\n    </div>\r\n\r\n    <textarea\r\n      v-if=\"is_input_shown\"\r\n      :value=\"formatted_input\"\r\n      rows=\"10\"\r\n      class=\"flowitemstep__textarea\"\r\n    />\r\n\r\n    <div class=\"flowitemstep__row\" v-if=\"Object.keys(output).length !== 0\">\r\n      <form-text-field class=\"flowitemstep__caption\" value=\"Выходные данные:\" />\r\n      <div\r\n        class=\"flowitemstep__arrow\"\r\n        v-bind:class=\"{\r\n          flowitemstep__arrow_selected: is_output_shown,\r\n        }\"\r\n        @click=\"is_output_shown = !is_output_shown\"\r\n      >\r\n        {{ is_output_shown ? \"&#x25bc;\" : \"&#x25c6;\" }}\r\n      </div>\r\n    </div>\r\n\r\n    <textarea\r\n      v-if=\"is_output_shown\"\r\n      :value=\"formatted_output\"\r\n      rows=\"10\"\r\n      class=\"flowitemstep__textarea\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, ref, watch } from \"vue\";\r\nimport FormTextField from \"../fields/FormTextField.vue\";\r\nimport { convertDateToDateTimeString } from \"../../logic/service_layer/use_modules\";\r\nexport default {\r\n  components: { FormTextField },\r\n  name: \"FlowItemStep\",\r\n  props: {\r\n    name: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    variable_name: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n    description: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    action: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    attributes: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    input: {\r\n      type: Object,\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    output: {\r\n      type: [Object, String],\r\n      required: false,\r\n      default: () => ({}),\r\n    },\r\n    success: {\r\n      type: Boolean,\r\n      required: true,\r\n    },\r\n    started_at: {\r\n      type: Date,\r\n      required: false,\r\n      default: null,\r\n    },\r\n    finished_at: {\r\n      type: Date,\r\n      required: false,\r\n      default: null,\r\n    },\r\n  },\r\n  events: [\"updated\"],\r\n\r\n  setup(props, { emit }) {\r\n    const formatted_input = computed(() =>\r\n      JSON.stringify(props.input, null, 3)\r\n    );\r\n\r\n    const formatted_output = computed(() =>\r\n      JSON.stringify(props.output, null, 3)\r\n    );\r\n\r\n    const formatted_started_at = computed(() =>\r\n      props.started_at === null\r\n        ? \"Не стартовал\"\r\n        : convertDateToDateTimeString(props.started_at)\r\n    );\r\n\r\n    const formatted_finished_at = computed(() =>\r\n      props.finished_at === null\r\n        ? \"Не финишировал\"\r\n        : convertDateToDateTimeString(props.finished_at)\r\n    );\r\n\r\n    const state = computed(() => {\r\n      if (props.started_at === null) return \"WAITING\";\r\n      if (props.finished_at === null) return \"RUNNING\";\r\n      if (props.success === true) return \"FINISHED_SUCCESS\";\r\n      return \"FINISHED_FAIL\";\r\n    });\r\n\r\n    const is_input_shown = ref(false);\r\n    const is_output_shown = ref(false);\r\n    const is_attributes_shown = ref(false);\r\n\r\n    const emit_updated = () => emit(\"updated\");\r\n    watch(is_input_shown, () => emit_updated());\r\n    watch(is_output_shown, () => emit_updated());\r\n    watch(is_attributes_shown, () => emit_updated());\r\n\r\n    return {\r\n      formatted_input,\r\n      formatted_output,\r\n      formatted_started_at,\r\n      formatted_finished_at,\r\n      state,\r\n      is_input_shown,\r\n      is_output_shown,\r\n      is_attributes_shown,\r\n      emit_updated,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.flowitemstep {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-start;\r\n  padding: 3px;\r\n}\r\n\r\n.flowitemstep__row {\r\n  display: flex;\r\n  width: 100%;\r\n}\r\n\r\n.flowitemstep__row_date {\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.flowitemstep__action {\r\n  font-weight: 500;\r\n  margin-right: 5px;\r\n  background-color: aquamarine;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n  padding: 5px;\r\n}\r\n\r\n.flowitemstep__description {\r\n  flex-grow: 1;\r\n  background-color: lightgoldenrodyellow;\r\n  border: 1px solid black;\r\n  border-radius: 5px;\r\n  padding: 5px;\r\n}\r\n\r\n.flowitemstep__label {\r\n  min-width: 150px;\r\n}\r\n\r\n.flowitemstep__caption {\r\n  font-weight: 500;\r\n}\r\n\r\n.flowitemstep__value {\r\n  flex-grow: 1;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.flowitemstep__textarea {\r\n  width: 100%;\r\n  min-height: 30px;\r\n  resize: vertical;\r\n}\r\n\r\n.flowitemstep__arrow {\r\n  margin-left: 5px;\r\n  display: block;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  color: green;\r\n  user-select: none;\r\n}\r\n\r\n.flowitemstep__arrow_selected {\r\n  color: red;\r\n}\r\n\r\n.flowitemstep__freespace {\r\n  flex-grow: 1;\r\n}\r\n\r\n.flowitemstep__state {\r\n  width: 20px;\r\n  height: 20px;\r\n  margin-right: 10px;\r\n}\r\n\r\n.flowitemstep__state_running {\r\n  background: url(\"../../../public/pie-chart.png\") top left/20px 20px no-repeat;\r\n}\r\n\r\n.flowitemstep__state_waiting {\r\n  background: url(\"../../../public/question.png\") top left/20px 20px no-repeat;\r\n}\r\n\r\n.flowitemstep__state_finished_success {\r\n  background: url(\"../../../public/check.png\") top left/20px 20px no-repeat;\r\n}\r\n\r\n.flowitemstep__state_finished_fail {\r\n  background: url(\"../../../public/cancel.png\") top left/20px 20px no-repeat;\r\n}\r\n</style>","import { render } from \"./FlowItemStep.vue?vue&type=template&id=cb691232\"\nimport script from \"./FlowItemStep.vue?vue&type=script&lang=js\"\nexport * from \"./FlowItemStep.vue?vue&type=script&lang=js\"\n\nimport \"./FlowItemStep.vue?vue&type=style&index=0&id=cb691232&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./FlowItemPage.vue?vue&type=template&id=0e74ad10&scoped=true\"\nimport script from \"./FlowItemPage.vue?vue&type=script&lang=js\"\nexport * from \"./FlowItemPage.vue?vue&type=script&lang=js\"\n\nimport \"./FlowItemPage.vue?vue&type=style&index=0&id=0e74ad10&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0e74ad10\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"page\">\r\n    <heading-component class=\"page__heading\" text=\"Экземпляры потоков\" size=\"middle\" />\r\n    <div class=\"page__container\">\r\n      <search-component\r\n        class=\"page__searchblock\"\r\n        :schema=\"search_schema\"\r\n        :model_objects=\"model_objects\"\r\n        :convert_obj_to_item=\"convert_model_to_item\"\r\n        :current_id=\"current_id\"\r\n        sort_by=\"started_at\"\r\n        :search_time=\"search_time\"\r\n        :is_searching=\"is_searching\"\r\n        :should_emit_search_event_on_any_keypress=\"false\"\r\n        :has_link=\"true\"\r\n        @choose=\"current_id = $event\"\r\n        @search=\"search_action($event)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed, onMounted, ref } from \"vue\";\r\nimport { GetManyFlowItems } from \"../../logic/domain/command\";\r\nimport { VueUnitOfWork } from \"../../logic/service_layer/uow\";\r\nimport {\r\n  useBeforeEnterPage,\r\n  convertDateToDateTimeString,\r\n  filterArrayOfObjectsByQuery,\r\n  useExecutionTimeDecorator,\r\n} from \"../../logic/service_layer/use_modules\";\r\n\r\nimport HeadingComponent from \"../../components/HeadingComponent.vue\";\r\nimport SearchComponent from \"../../components/SearchComponent.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    HeadingComponent,\r\n    SearchComponent,\r\n  },\r\n  name: \"FlowItemsPage\",\r\n\r\n  setup() {\r\n    const uow = new VueUnitOfWork();\r\n\r\n    const convert_model_to_item = (obj) => {\r\n      return {\r\n        id: obj.id,\r\n        attributes: {\r\n          id: obj.id.toString(),\r\n          name: obj.name,\r\n          username: obj.username,\r\n          is_active: obj.is_active === true ? \"Y\" : \"N\",\r\n          success: obj.success === true ? \"Y\" : \"N\",\r\n          started_at: convertDateToDateTimeString(obj.started_at),\r\n          finished_at: obj.finished_at\r\n            ? convertDateToDateTimeString(obj.finished_at)\r\n            : \"-\",\r\n        },\r\n        link_to_single_page: {\r\n          name: \"FlowItemPage\",\r\n          params: {\r\n            flowitem_id: obj.id,\r\n          },\r\n        },\r\n        actions: {},\r\n      };\r\n    };\r\n\r\n    const query_for_internal_search = ref({});\r\n    const model_objects = computed(() =>\r\n      filterArrayOfObjectsByQuery(\r\n        uow.flow_item_repository.values().map((obj) => obj.value),\r\n        query_for_internal_search.value\r\n      )\r\n    );\r\n\r\n    // STATUS\r\n    const search_time = ref(0);\r\n    const is_searching = ref(false);\r\n\r\n    const current_id = ref(0)\r\n\r\n\r\n    const search_action = async (query) => {\r\n      await useExecutionTimeDecorator(\r\n        uow,\r\n        new GetManyFlowItems(query),\r\n        search_time,\r\n        is_searching\r\n      );\r\n    };\r\n\r\n    const search_schema = [\r\n      {\r\n        name: \"id\",\r\n        size: \"w50\",\r\n        fields: [\r\n          {\r\n            placeholder: \"ID\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"username\",\r\n        size: \"w200\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Пользователь\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"name\",\r\n        size: \"w200\",\r\n        align: \"left\",\r\n        grow: true,\r\n        fields: [\r\n          {\r\n            placeholder: \"Наименование\",\r\n            rule: \"icontains\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"is_active\",\r\n        size: \"w30\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Активен?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"success\",\r\n        size: \"w30\",\r\n        fields: [\r\n          {\r\n            type: \"bool\",\r\n            placeholder: \"Успешно?\",\r\n            rule: \"exact\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"started_at\",\r\n        size: \"w150\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Старт (от)\",\r\n            rule: \"gte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n          {\r\n            placeholder: \"Старт (до)\",\r\n            rule: \"lte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        name: \"finished_at\",\r\n        size: \"w150\",\r\n        fields: [\r\n          {\r\n            placeholder: \"Финиш (от)\",\r\n            rule: \"gte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n          {\r\n            placeholder: \"Финиш (до)\",\r\n            rule: \"lte\",\r\n            re: \"^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$\",\r\n            converter: \"date_to_iso_string\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n\r\n    onMounted(async () => {\r\n      // Пытаемся автоматически зaлогинится\r\n      await useBeforeEnterPage(uow, [\"can_view_flow\"]);\r\n    });\r\n\r\n    return {\r\n      // ACTION\r\n      search_action,\r\n      current_id,\r\n\r\n      // SEARCH\r\n      search_schema,\r\n      model_objects,\r\n      convert_model_to_item,\r\n      search_time,\r\n      is_searching,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.page {\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding-left: 60px;\r\n  padding-right: 60px;\r\n}\r\n\r\n.page__heading {\r\n  padding-top: 60px;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.page__container {\r\n  display: flex;\r\n}\r\n\r\n\r\n.page__searchblock {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","import { render } from \"./FlowItemsPage.vue?vue&type=template&id=19efac15&scoped=true\"\nimport script from \"./FlowItemsPage.vue?vue&type=script&lang=js\"\nexport * from \"./FlowItemsPage.vue?vue&type=script&lang=js\"\n\nimport \"./FlowItemsPage.vue?vue&type=style&index=0&id=19efac15&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-19efac15\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\n// LOGIN\r\nimport LoginPage from '../views/LoginPage.vue'\r\n\r\n// APPLICATION\r\nimport SearchDocumentPage from '../views/SearchDocumentPage.vue'\r\nimport ApprovalsPage from '../views/ApprovalsPage.vue'\r\nimport DocumentPage from '../views/DocumentPage.vue'\r\nimport FoldersPage from '../views/FoldersPage.vue'\r\nimport CartPage from '../views/CartPage.vue'\r\n\r\n// PROFILE\r\nimport ProfilePage from '../views/ProfilePage.vue'\r\n\r\n// SETTINGS\r\nimport SettingsPage from '../views/settings/SettingsPage'\r\nimport UserSettingsPage from '../views/settings/UserSettingsPage'\r\nimport UserReplacementsPage from '../views/settings/UserReplacementsPage'\r\nimport UserFolderSettingsPage from '../views/settings/UserFolderSettingsPage'\r\nimport FolderSettingsPage from '../views/settings/FolderSettingsPage'\r\nimport PermissionSettingsPage from '../views/settings/PermissionSettingsPage'\r\nimport UserGroupSettingsPage from '../views/settings/UserGroupSettingsPage'\r\nimport UsersInUserGroupsSettingsPage from '../views/settings/UsersInUserGroupsSettingsPage'\r\nimport ServerSettingsPage from '../views/settings/ServerSettingsPage'\r\nimport CounterSettingsPage from '../views/settings/CounterSettingsPage'\r\n\r\n// SETTINGS - MAIL\r\nimport MailBoxSettingsPage from '../views/settings/MailBoxSettingsPage'\r\nimport MailChannelSettingsPage from '../views/settings/MailChannelSettingsPage'\r\nimport MailChannelsInMailBoxesSettingsPage from '../views/settings/MailChannelsInMailBoxesSettingsPage'\r\nimport MailMessagesPage from '../views/settings/MailMessagesPage'\r\n\r\n// SERVICE\r\nimport ServicePage from '../views/service/ServicePage'\r\nimport PdfMergeToolPage from '../views/service/PdfMergeToolPage'\r\nimport ShareFilePage from '../views/service/ShareFilePage'\r\nimport SelfTestingPage from '../views/service/SelfTestingPage'\r\nimport MessagePage from '../views/service/MessagePage'\r\nimport DocumentApprovalSearchPage from '../views/service/DocumentApprovalSearchPage'\r\n\r\n// DOWNLOAD\r\nimport DownloadFileFromFolderPage from '../views/download/DownloadFileFromFolderPage'\r\nimport DownloadShareFilePage from '../views/download/DownloadShareFilePage'\r\nimport DownloadMailMessageFilePage from '../views/download/DownloadMailMessageFilePage'\r\n\r\n\r\n// SETTINGS - FLOW\r\nimport FlowsPage from '../views/settings/FlowsPage'\r\nimport FlowItemPage from '../views/settings/FlowItemPage'\r\nimport FlowItemsPage from '../views/settings/FlowItemsPage'\r\n\r\n\r\nconst routes = [\r\n  {\r\n    path: '/folder/:folder_id/usergroup/:usergroup_id/file/:file_id',\r\n    name: 'DownloadFileFromFolderPage',\r\n    component: DownloadFileFromFolderPage\r\n  },\r\n  {\r\n    path: '/share/file/:file_id',\r\n    name: 'DownloadShareFilePage',\r\n    component: DownloadShareFilePage\r\n  },\r\n  {\r\n    path: '/mailmessage/:message_id/file/:file_id',\r\n    name: 'DownloadMailMessageFilePage',\r\n    component: DownloadMailMessageFilePage\r\n  },\r\n  {\r\n    path: '/folder/:folder_id/usergroup/:usergroup_id',\r\n    name: 'SearchDocumentPage',\r\n    component: SearchDocumentPage\r\n  },\r\n  {\r\n    path: '/folder/:folder_id/usergroup/:usergroup_id/document/:document_id',\r\n    name: 'DocumentPage',\r\n    component: DocumentPage,\r\n    meta: { transition: 'slide-right' },\r\n  },\r\n  {\r\n    path: '/login',\r\n    name: 'LoginPage',\r\n    component: LoginPage\r\n  },\r\n  {\r\n    path: '/',\r\n    name: 'FoldersPage',\r\n    component: FoldersPage\r\n  },\r\n  {\r\n    path: '/approvals',\r\n    name: 'ApprovalsPage',\r\n    component: ApprovalsPage\r\n  },\r\n  {\r\n    path: '/profile',\r\n    name: 'ProfilePage',\r\n    component: ProfilePage\r\n  },\r\n  {\r\n    path: '/cart',\r\n    name: 'CartPage',\r\n    component: CartPage\r\n  },\r\n  {\r\n    path: '/settings',\r\n    name: 'SettingsPage',\r\n    component: SettingsPage\r\n  },\r\n  {\r\n    path: '/settings/users',\r\n    name: 'UserSettingsPage',\r\n    component: UserSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/user-replacements',\r\n    name: 'UserReplacementsPage',\r\n    component: UserReplacementsPage\r\n  },\r\n  {\r\n    path: '/settings/folders',\r\n    name: 'FolderSettingsPage',\r\n    component: FolderSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/roles',\r\n    name: 'UserFolderSettingsPage',\r\n    component: UserFolderSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/permissions',\r\n    name: 'PermissionSettingsPage',\r\n    component: PermissionSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/usergroups',\r\n    name: 'UserGroupSettingsPage',\r\n    component: UserGroupSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/users-in-usergroups',\r\n    name: 'UsersInUserGroupsSettingsPage',\r\n    component: UsersInUserGroupsSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/flows',\r\n    name: 'FlowsPage',\r\n    component: FlowsPage\r\n  },\r\n  {\r\n    path: '/settings/flowitems',\r\n    name: 'FlowItemsPage',\r\n    component: FlowItemsPage\r\n  },\r\n  {\r\n    path: '/settings/flowitems/:flowitem_id',\r\n    name: 'FlowItemPage',\r\n    component: FlowItemPage\r\n  },\r\n  {\r\n    path: '/settings/server-settings',\r\n    name: 'ServerSettingsPage',\r\n    component: ServerSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/counters',\r\n    name: 'CounterSettingsPage',\r\n    component: CounterSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/mailboxes',\r\n    name: 'MailBoxSettingsPage',\r\n    component: MailBoxSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/mailchannels',\r\n    name: 'MailChannelSettingsPage',\r\n    component: MailChannelSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/mailboxes-in-mailchannels',\r\n    name: 'MailChannelsInMailBoxesSettingsPage',\r\n    component: MailChannelsInMailBoxesSettingsPage\r\n  },\r\n  {\r\n    path: '/settings/mailmessages',\r\n    name: 'MailMessagesPage',\r\n    component: MailMessagesPage\r\n  },\r\n  {\r\n    path: '/service',\r\n    name: 'ServicePage',\r\n    component: ServicePage\r\n  },\r\n  {\r\n    path: '/service/pdfmergetool',\r\n    name: 'PdfMergeToolPage',\r\n    component: PdfMergeToolPage\r\n  },\r\n  {\r\n    path: '/service/sharefiletool',\r\n    name: 'ShareFilePage',\r\n    component: ShareFilePage\r\n  },\r\n  {\r\n    path: '/service/selftesting',\r\n    name: 'SelfTestingPage',\r\n    component: SelfTestingPage\r\n  },\r\n  {\r\n    path: '/service/document-approvals-search',\r\n    name: 'DocumentApprovalSearchPage',\r\n    component: DocumentApprovalSearchPage\r\n  },\r\n  {\r\n    path: '/:pathMatch(.*)*',\r\n    name: 'PageNotFound',\r\n    component: MessagePage,\r\n    props: {text: \"Страница не найдена\"}\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import Ajv from \"ajv\";\r\nimport AjvErrors from \"ajv-errors\";\r\n\r\nimport { ref, computed, watch } from \"vue\";\r\nimport { useRoute } from \"vue-router\";\r\nimport {\r\n  LoginWithToken,\r\n  GetInfo,\r\n  GetFolders,\r\n  GetRoles,\r\n  GetUserFolderSettings,\r\n  GetUsers,\r\n  GetUserReplacements,\r\n  GetOnBehalfUsers,\r\n  GetUserGroups,\r\n  GetPermissions,\r\n  GetUserPermissionsForFolder,\r\n  GetUserSearchSchema,\r\n  GetSpareFiles,\r\n  GetFlowItem,\r\n  GetFlowItemSteps,\r\n  GetDocument,\r\n  ValidateDocument,\r\n  GetWaitingDocumentApprovals,\r\n  GetDocumentApprovals,\r\n  GetDocumentApprovalSpareFiles,\r\n  GetDocumentApprovalFlow,\r\n  GetCart,\r\n  GetServerSettings,\r\n  GetMailBoxes,\r\n  GetMailChannels,\r\n  GetCounters,\r\n  // CONTEXT\r\n  GetDocumentAttributesContext,\r\n  GetDocumentPreviousAttributeContext,\r\n  GetUserEmailContext,\r\n} from \"../domain/command\";\r\nimport { AccessPagePermissionCheckFail } from \"../domain/event\";\r\nimport { MessageBus } from \"./message_bus\";\r\nimport router from \"../../router\";\r\n\r\nconst deepObjectCopy = (obj) => {\r\n  return JSON.parse(JSON.stringify(obj));\r\n};\r\n\r\nconst filterArrayOfObjects = (\r\n  arrOfObjects,\r\n  queryObject,\r\n  caseSensitive = true\r\n) => {\r\n  return arrOfObjects.filter((obj) => {\r\n    let to_be_taken = true;\r\n\r\n    Object.keys(queryObject).forEach((key) => {\r\n      let value = obj[key];\r\n\r\n      if (value === undefined) {\r\n        to_be_taken = false;\r\n        return;\r\n      }\r\n\r\n      // Если значение NULL\r\n      if (value === null) {\r\n        // Если запрос пустой, значение попадает в выборку\r\n        // в противном случае, нет\r\n        if (queryObject[key]) to_be_taken = false;\r\n        return;\r\n      }\r\n\r\n      let needle = queryObject[key];\r\n\r\n      if (!caseSensitive) {\r\n        value = value.toLowerCase();\r\n        needle = needle.toLowerCase();\r\n      }\r\n\r\n      if (!String.prototype.includes.call(value, needle)) to_be_taken = false;\r\n    });\r\n\r\n    return to_be_taken;\r\n  });\r\n};\r\n\r\nconst filterArrayOfObjectsByQuery = (arrOfObjects, queryObject) => {\r\n  return arrOfObjects.filter((obj) => {\r\n    let to_be_taken = true;\r\n\r\n    // Перебираем все ключи query\r\n    // Ключ A__B__C__X из нескольких частей, разделенных '__'\r\n    // А - property объекта\r\n    // B, C, D ... - наменование вложенных ключей, если свойство объекта - это объект\r\n    // X - правила сравнения exact | iexact | contains | icontains | gt | gte | lt | lte\r\n    Object.keys(queryObject).forEach((key) => {\r\n      if (!to_be_taken) return;\r\n\r\n      //  Что ищем\r\n      const needle = queryObject[key];\r\n      if (!(needle || needle === 0)) return;\r\n\r\n      // Разбиваем ключ на части\r\n      let key_names = key.split(\"__\");\r\n      const rule = key_names.length <= 1 ? \"exact\" : key_names.pop();\r\n\r\n      // Получаем значение\r\n      let haystack = obj;\r\n      key_names.forEach((x) => (haystack = haystack[x]));\r\n\r\n      // Если значение, по которому нужно искать, отсутствует\r\n      // пропускаем данный объект\r\n      if (!(haystack || haystack === 0)) {\r\n        to_be_taken = false;\r\n        return;\r\n      }\r\n\r\n      switch (rule) {\r\n        case \"exact\":\r\n          to_be_taken = haystack == needle;\r\n          break;\r\n\r\n        case \"iexact\":\r\n          to_be_taken = haystack.toLowerCase() == needle.toLowerCase();\r\n          break;\r\n\r\n        case \"contains\":\r\n          to_be_taken = String.prototype.includes.call(haystack, needle);\r\n          break;\r\n\r\n        case \"icontains\":\r\n          to_be_taken = String.prototype.includes.call(\r\n            haystack.toLowerCase(),\r\n            needle.toLowerCase()\r\n          );\r\n          break;\r\n\r\n        case \"gt\":\r\n          to_be_taken = haystack > needle;\r\n          break;\r\n\r\n        case \"gte\":\r\n          to_be_taken = haystack >= needle;\r\n          break;\r\n\r\n        case \"lt\":\r\n          to_be_taken = haystack < needle;\r\n          break;\r\n\r\n        case \"lte\":\r\n          to_be_taken = haystack <= needle;\r\n          break;\r\n\r\n        default:\r\n          console.log(\"Wrong comparison rule \" + rule.toString() + \"!\");\r\n          to_be_taken = false;\r\n      }\r\n    });\r\n\r\n    return to_be_taken;\r\n  });\r\n};\r\n\r\nconst useBeforeEnterPage = async (\r\n  uow,\r\n  required_permissions,\r\n  folder_id = null,\r\n  usergroup_id = null\r\n) => {\r\n\r\n  const route = useRoute();\r\n\r\n  const auto_login_action = async (uow) => {\r\n    if (\r\n      !uow.user_repository.is_authenticated() &&\r\n      uow.token_repository.get_auth_token()\r\n    ) {\r\n      await MessageBus.handle(new LoginWithToken(), uow);\r\n    }\r\n  };\r\n\r\n  await auto_login_action(uow);\r\n  // Проверяем разрешения\r\n  if (folder_id !== null && usergroup_id !== null) {\r\n    await MessageBus.handle(\r\n      new GetUserPermissionsForFolder(folder_id, usergroup_id),\r\n      uow\r\n    );\r\n  }\r\n\r\n  required_permissions.forEach((e) => {\r\n    if (\r\n      uow.permission_repository.has(e).value !== true &&\r\n      uow.permission_repository.has_for_folder(folder_id, e).value !== true\r\n    ) {\r\n      router.push({\r\n        name: \"LoginPage\",\r\n        query: { url: encodeURIComponent(route.fullPath) },\r\n      });\r\n      // TODO\r\n      MessageBus.handle(new AccessPagePermissionCheckFail(), uow);\r\n    }\r\n  });\r\n};\r\n\r\nconst useGetInfo = async (uow) => {\r\n  const message = new GetInfo();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetFolders = async (uow) => {\r\n  const message = new GetFolders();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetPermissions = async (uow) => {\r\n  const message = new GetPermissions();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetRoles = async (uow) => {\r\n  const message = new GetRoles();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetUserFolderSettings = async (uow) => {\r\n  const message = new GetUserFolderSettings();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetUsers = async (uow) => {\r\n  const message = new GetUsers();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetUserReplacements = async (uow) => {\r\n  const message = new GetUserReplacements();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetOnBehalfUsers = async (uow) => {\r\n  const message = new GetOnBehalfUsers();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetUserGroups = async (uow) => {\r\n  const message = new GetUserGroups();\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetUserSearchSchema = async (uow, folder_id, usergroup_id) => {\r\n  const message = new GetUserSearchSchema(folder_id, usergroup_id);\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetSpareFiles = async (uow, folder_id, usergroup_id) => {\r\n  const message = new GetSpareFiles(folder_id, usergroup_id);\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetFlowItem = async (uow, flowitem_id) => {\r\n  const message = new GetFlowItem(flowitem_id);\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetFlowItemSteps = async (uow, flowitem_id) => {\r\n  const message = new GetFlowItemSteps(flowitem_id);\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetDocument = async (uow, folder_id, usergroup_id, doc_id) => {\r\n  const message = new GetDocument(folder_id, usergroup_id, doc_id);\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useValidateDocument = async (uow, folder_id, usergroup_id, doc_id) => {\r\n  const message = new ValidateDocument(folder_id, usergroup_id, doc_id);\r\n  await MessageBus.handle(message, uow);\r\n};\r\n\r\nconst useGetDocumentsWaitingApproval = async (uow) => {\r\n  await MessageBus.handle(new GetWaitingDocumentApprovals(), uow);\r\n};\r\n\r\nconst useGetDocumentApprovalsWithSpareFiles = async (\r\n  uow,\r\n  folder_id,\r\n  usergroup_id,\r\n  doc_id\r\n) => {\r\n  await Promise.all([\r\n    MessageBus.handle(\r\n      new GetDocumentApprovals(folder_id, usergroup_id, doc_id),\r\n      uow\r\n    ),\r\n\r\n    MessageBus.handle(\r\n      new GetDocumentApprovalSpareFiles(folder_id, usergroup_id, doc_id),\r\n      uow\r\n    ),\r\n  ]);\r\n};\r\n\r\nconst useGetDocumentApprovalFlow = async (\r\n  uow,\r\n  folder_id,\r\n  usergroup_id,\r\n  doc_id\r\n) => {\r\n  await MessageBus.handle(\r\n    new GetDocumentApprovalFlow(folder_id, usergroup_id, doc_id),\r\n    uow\r\n  );\r\n};\r\n\r\nconst useGetCart = async (uow) => {\r\n  await MessageBus.handle(new GetCart(), uow);\r\n};\r\n\r\nconst useGetServerSettings = async (uow) => {\r\n  await MessageBus.handle(new GetServerSettings(), uow);\r\n};\r\n\r\nconst useGetMailBoxes = async (uow) => {\r\n  await MessageBus.handle(new GetMailBoxes(), uow);\r\n};\r\n\r\nconst useGetMailChannels = async (uow) => {\r\n  await MessageBus.handle(new GetMailChannels(), uow);\r\n};\r\n\r\nconst useGetCounters = async (uow) => {\r\n  await MessageBus.handle(new GetCounters(), uow);\r\n};\r\n\r\n// CONTEXT\r\n\r\nconst useGetContext = async (uow, uid, settings, ...props) => {\r\n  const context_map = {\r\n    DOCUMENT_ATTRIBUTES: useGetDocumentAttributesContext,\r\n    PREVIOUS_DOCUMENTS_ATTRIBUTE: useGetDocumentPreviousContext,\r\n    USERS_EMAILS: useGetUserEmailContext,\r\n  };\r\n\r\n  uow.context_repository.reset(uid);\r\n  await Promise.all(\r\n    settings.map((e) => {\r\n      const func = context_map[e[\"type\"]];\r\n      return func(uow, uid, e[\"name\"], e[\"parameters\"] || {}, ...props);\r\n    })\r\n  );\r\n};\r\n\r\nconst useGetDocumentAttributesContext = (\r\n  uow,\r\n  ctx_id,\r\n  ctx_name,\r\n  parameters,\r\n  folder_id,\r\n  usergroup_id,\r\n  document_id\r\n) => {\r\n  MessageBus.handle(\r\n    new GetDocumentAttributesContext(\r\n      ctx_id,\r\n      ctx_name,\r\n      folder_id,\r\n      document_id,\r\n      parameters[\"is_raw_attribute\"]\r\n    ),\r\n    uow\r\n  );\r\n};\r\n\r\nconst useGetDocumentPreviousContext = async (\r\n  uow,\r\n  ctx_id,\r\n  ctx_name,\r\n  parameters,\r\n  folder_id,\r\n  usergroup_id,\r\n  document_id\r\n) => {\r\n  await MessageBus.handle(\r\n    new GetDocumentPreviousAttributeContext(\r\n      ctx_id,\r\n      ctx_name,\r\n      folder_id,\r\n      usergroup_id,\r\n      document_id,\r\n      parameters[\"attribute_name\"],\r\n      parameters[\"is_raw_attribute\"],\r\n      parameters[\"count\"]\r\n    ),\r\n    uow\r\n  );\r\n};\r\n\r\nconst useGetUserEmailContext = (uow, ctx_id, ctx_name) => {\r\n  MessageBus.handle(new GetUserEmailContext(ctx_id, ctx_name), uow);\r\n};\r\n\r\nconst use404 = () => {\r\n  router.push({ name: \"PageNotFound\" });\r\n};\r\n\r\nconst useValidateIntOr404 = (value) => {\r\n  const num = Number.parseInt(value, 10);\r\n  if (isNaN(num)) use404();\r\n  return num;\r\n};\r\n\r\nconst convertStringToDate = (value, rule) => {\r\n  const parts = value.split(\".\");\r\n  let date = NaN;\r\n\r\n  try {\r\n    // Для <, <= берем конец дня\r\n    if (rule === null || rule === \"lt\" || rule === \"lte\") {\r\n      date = new Date(\r\n        parseInt(parts[2], 10),\r\n        parseInt(parts[1], 10) - 1,\r\n        parseInt(parts[0], 10),\r\n        23,\r\n        59,\r\n        59\r\n      );\r\n    }\r\n\r\n    // Для >, >= берем начало дня\r\n    if (rule === \"gt\" || rule === \"gte\") {\r\n      date = new Date(\r\n        parseInt(parts[2], 10),\r\n        parseInt(parts[1], 10) - 1,\r\n        parseInt(parts[0], 10)\r\n      );\r\n    }\r\n\r\n    return date;\r\n  } catch (e) {\r\n    return NaN;\r\n  }\r\n};\r\n\r\nconst useDataEncode = (value, rule = null, converter = null) => {\r\n  if (!converter) return value;\r\n\r\n  const converters = {\r\n    date_to_timestamp: convertDateToTimestamp,\r\n    date_to_iso_string: convertDateToIsoString,\r\n    date_to_date_object: convertDateToDateObject,\r\n  };\r\n\r\n  const converter_func = Object.prototype.hasOwnProperty.call(\r\n    converters,\r\n    converter\r\n  )\r\n    ? converters[converter]\r\n    : null;\r\n\r\n  return converter_func ? converter_func(value, rule) : \"\";\r\n};\r\n\r\n// MIXINS\r\n\r\n// init_obj - Объект для инициализации\r\n// repository - Репозиторий, из которого нужно брать объекты\r\n// from_repository_convertion - Функция конвертации из объекта для отображения в объект репозитория\r\nconst useCurrentMixin = (init_obj, repository, from_repository_convertion) => {\r\n  const current_id = ref(null);\r\n  const current = ref(convertObject(init_obj, from_repository_convertion));\r\n\r\n  const handle_update_attribute = (name, value) =>\r\n    (current.value[name] = value);\r\n\r\n  watch(current_id, (newValue) => {\r\n    if (newValue === null) return;\r\n    // console.log(newValue);\r\n    const obj = repository.get(newValue).value;\r\n    // console.log(obj);\r\n    current.value = convertObject(obj.to_dict, from_repository_convertion);\r\n  });\r\n\r\n  return {\r\n    current_id,\r\n    current,\r\n    handle_update_attribute,\r\n  };\r\n};\r\n\r\n// all_items - Must be Ref\r\n// filtered_items - Must be Ref\r\nconst useSelectionMixin = (all_items, items_seen_on_page) => {\r\n  // Объект состояния выделения элементов\r\n  // key: str|int - ID элемента\r\n  // value: bool - true выделен, false не выделен\r\n  const selected_item_ids = ref({});\r\n\r\n  // Количество выделенных элементов\r\n  const count_of_selected_items = computed(\r\n    () =>\r\n      Object.values(selected_item_ids.value).filter((x) => x === true).length\r\n  );\r\n\r\n  // Метод для выделения элемента по ID\r\n  const handle_select_item = (id) => {\r\n    if (id in selected_item_ids.value)\r\n      selected_item_ids.value[id] = !selected_item_ids.value[id];\r\n    else selected_item_ids.value[id] = true;\r\n  };\r\n\r\n  // Метод для снятия выделения\r\n  const reset_selection = () => {\r\n    is_all_selected.value = false;\r\n    selected_item_ids.value = {};\r\n  };\r\n\r\n  // При изменении списка элементов, выделение снимается\r\n  watch(\r\n    () => all_items.value,\r\n    () => reset_selection()\r\n  );\r\n\r\n  const is_all_selected = ref(false);\r\n\r\n  // Метод для выделения или снятия выделения всех элементов\r\n  const handle_select_all_items = () => {\r\n    if (is_all_selected.value === true) {\r\n      reset_selection();\r\n      is_all_selected.value = false;\r\n    } else {\r\n      is_all_selected.value = true;\r\n      items_seen_on_page.value.forEach(\r\n        (item) => (selected_item_ids.value[item.id] = true)\r\n      );\r\n    }\r\n  };\r\n\r\n  const selected_items = computed(() =>\r\n    items_seen_on_page.value.filter(\r\n      (item) =>\r\n        item.id in selected_item_ids.value &&\r\n        selected_item_ids.value[item.id] === true\r\n    )\r\n  );\r\n\r\n  return {\r\n    selected_item_ids,\r\n    selected_items,\r\n    count_of_selected_items,\r\n    is_all_selected,\r\n    handle_select_all_items,\r\n    handle_select_item,\r\n    reset_selection,\r\n  };\r\n};\r\n\r\n// items: array of Object - Массив объектов, от которых нужно взять срез\r\n// variants: array of int - Массив вариантов кол-ва результатов на странице\r\n// count: int - Начальное кол-во результатов на странице. Должно быть равно одному из variants\r\nconst usePaginationMixin = (\r\n  items, // Ref\r\n  variants = [20, 100, 500, 1000],\r\n  count = 100\r\n) => {\r\n  const pagination_variants = ref(variants);\r\n  const pagination_count_per_page = ref(count);\r\n  const pagination_current_page = ref(1);\r\n\r\n  const pagination_min_index = ref(0);\r\n  const pagination_max_index = ref(100);\r\n\r\n  const handle_set_page_range = (min, max) => {\r\n    pagination_min_index.value = min;\r\n    pagination_max_index.value = max;\r\n  };\r\n\r\n  const paginated_items = computed(() =>\r\n    items.value.slice(\r\n      pagination_min_index.value,\r\n      pagination_max_index.value + 1\r\n    )\r\n  );\r\n\r\n  return {\r\n    pagination_variants,\r\n    pagination_count_per_page,\r\n    pagination_current_page,\r\n    pagination_min_index,\r\n    pagination_max_index,\r\n    paginated_items,\r\n    handle_set_page_range,\r\n  };\r\n};\r\n\r\n// promises: array of Promises - Массив промисов, которые необходимо выполнить\r\n// chunk_size: int - Кол-во Promise, выполняемых за один раз\r\n// progress: Ref(int) - Прогресс выполнения\r\nconst usePromiseExecuteMixin = async (\r\n  promises,\r\n  chunk_size,\r\n  progress = null\r\n) => {\r\n  if (progress !== null) progress.value = 0;\r\n  let promises_executed = 0;\r\n\r\n  let start = 0;\r\n\r\n  while (start < promises.length) {\r\n    await Promise.all(\r\n      promises.slice(start, start + chunk_size).map(async (f) => {\r\n        // console.log(\"PROMISE\", f);\r\n        await f();\r\n        promises_executed++;\r\n        // console.log(\"EXECUTED:\", promises_executed);\r\n\r\n        if (progress !== null)\r\n          progress.value = Math.round(\r\n            (promises_executed / promises.length) * 100\r\n          );\r\n      })\r\n    );\r\n\r\n    start += chunk_size;\r\n  }\r\n};\r\n\r\n// items: array of Object - Массив объектов, у которых есть свойство actions c действиями,\r\n//                          которые нужно выполнить\r\n// simultaneous_process_count: int - Количество одновременно выполняемых действий\r\nconst usePerformActionMixin = (\r\n  items, // Ref\r\n  simultaneous_process_count\r\n) => {\r\n  const action_progress = ref(100);\r\n\r\n  const perform_action_on_items = async (action_name) => {\r\n    const actions = items.value\r\n      .filter((item) => item.actions[action_name])\r\n      .map((item) => item.actions[action_name]);\r\n\r\n    await usePromiseExecuteMixin(\r\n      actions,\r\n      simultaneous_process_count,\r\n      action_progress\r\n    );\r\n  };\r\n\r\n  return {\r\n    action_progress,\r\n    perform_action_on_items,\r\n  };\r\n};\r\n\r\n// DECORATORS\r\n\r\n// uow: - Unit of Work\r\n// cmd: - Команда, которую нужно отправить в шину для выполнения асинхронно\r\n// in_progress: Ref(bool) - Команда находится в процессе выполнения\r\n// execution_time: Ref(Number) - Время выполнения команды\r\nconst useExecutionTimeDecorator = async (\r\n  uow,\r\n  cmd,\r\n  execution_time,\r\n  in_progress = null\r\n) => {\r\n  if (in_progress !== null) in_progress.value = true;\r\n\r\n  const t0 = performance.now();\r\n  await MessageBus.handle(cmd, uow);\r\n  execution_time.value = Math.round(performance.now() - t0) / 1000;\r\n\r\n  if (in_progress !== null) in_progress.value = false;\r\n};\r\n\r\n// FUNCTIONS\r\n\r\nconst convertObject = (obj, convert_functions, exclude_keys = []) => {\r\n  let result = {};\r\n  // Преобразуем объекты, выбрасывая ненужные ключи\r\n  Object.keys(obj)\r\n    .filter((key) => !exclude_keys.includes(key))\r\n    .forEach(\r\n      (key) =>\r\n        (result[key] = Object.prototype.hasOwnProperty.call(\r\n          convert_functions,\r\n          key\r\n        )\r\n          ? convert_functions[key](obj[key])\r\n          : obj[key])\r\n    );\r\n  // Добавляем ключи, которых не было в исходном объекте\r\n  Object.keys(convert_functions)\r\n    .filter((key) => !Object.prototype.hasOwnProperty.call(obj, key))\r\n    .forEach((key) => (result[key] = convert_functions[key]()));\r\n  return result;\r\n};\r\n\r\nconst convertDateToDateObject = (value, rule) =>\r\n  convertStringToDate(value, rule);\r\n\r\nconst convertDateToTimestamp = (value, rule) => {\r\n  const date = convertStringToDate(value, rule);\r\n  return isNaN(date) ? \"\" : Math.floor(date.getTime() / 1000);\r\n};\r\n\r\nconst convertDateToIsoString = (value, rule) => {\r\n  const date = convertStringToDate(value, rule);\r\n  return isNaN(date) ? \"\" : date.toISOString();\r\n};\r\n\r\nconst convertDateToDateString = (date) => {\r\n  return [\r\n    date.getDate().toString().padStart(2, \"0\"),\r\n    (date.getMonth() + 1).toString().padStart(2, \"0\"),\r\n    date.getFullYear().toString(),\r\n  ].join(\".\");\r\n};\r\n\r\nconst convertDateToDateTimeString = (date) => {\r\n  return date.toLocaleString(\"ru-RU\");\r\n};\r\n\r\nconst useGetSortFunction = (name) => {\r\n  const sort_default = (a, b) => {\r\n    if (a === b) return 0;\r\n    return a > b ? 1 : -1;\r\n  };\r\n\r\n  const sort_numbers = (a, b) => {\r\n    return a - b;\r\n  };\r\n\r\n  const sort_strings = (a, b) => {\r\n    return a.localeCompare(b);\r\n  };\r\n\r\n  const sort_change_order_number = (a, b) => {\r\n    try {\r\n      const [id_a, year_a] = a.split(\"-\", 2);\r\n      const [id_b, year_b] = b.split(\"-\", 2);\r\n\r\n      // console.log(id_a, year_a, \"<>\", id_b, year_b)\r\n\r\n      const compare_years = Number.parseInt(year_a) - Number.parseInt(year_b);\r\n      if (compare_years !== 0) {\r\n        return compare_years;\r\n      }\r\n\r\n      const compare_ids = Number.parseInt(id_a) - Number.parseInt(id_b);\r\n      return compare_ids;\r\n    } catch (e) {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  if (name === null || name === undefined) name = \"DEFAULT\";\r\n\r\n  const rules = {\r\n    DEFAULT: sort_default,\r\n    INTEGER: sort_numbers,\r\n    STRING: sort_strings,\r\n    BOOL: sort_default,\r\n    DATE: sort_default,\r\n    CHANGE_ORDER_NUMBER: sort_change_order_number,\r\n  };\r\n\r\n  if (!Object.prototype.hasOwnProperty.call(rules, name)) name = \"DEFAULT\";\r\n\r\n  return rules[name];\r\n};\r\n\r\nconst shuffleArray = (array) => {\r\n  var m = array.length,\r\n    t,\r\n    i;\r\n\r\n  while (m) {\r\n    i = Math.floor(Math.random() * m--);\r\n\r\n    t = array[m];\r\n    array[m] = array[i];\r\n    array[i] = t;\r\n  }\r\n\r\n  return array;\r\n};\r\n\r\nconst generate_states_obj_from_approvals = (approvals) => {\r\n  if (approvals.length === 0) return {};\r\n\r\n  let approval_by_id = {};\r\n  approvals.forEach((x) => {\r\n    approval_by_id[x.id] = x;\r\n  });\r\n\r\n  let approval_state_by_username = {};\r\n\r\n  // Делаем копию, чтобы сортировка не затрагивала массив,\r\n  // который был передан в функцию\r\n  const approvals_copy = approvals.map((x) => x);\r\n\r\n  approvals_copy\r\n    .sort((a, b) => a.updated_at - b.updated_at)\r\n    .map((approval) => {\r\n      const state = approval.state;\r\n      approval_state_by_username[approval.to_username] = state;\r\n\r\n      //  Заменяем статусы для делегирований без возврата\r\n      while (approval.delegated_from) {\r\n        approval = approval_by_id[approval.delegated_from];\r\n        approval_state_by_username[approval.to_username] = state;\r\n      }\r\n    });\r\n\r\n  return approval_state_by_username;\r\n};\r\n\r\nconst validate_json = (text, schema_obj = null) => {\r\n  let obj = null;\r\n  try {\r\n    obj = JSON.parse(text);\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n\r\n  if (schema_obj === null) return true;\r\n\r\n  const ajv = new Ajv({ allErrors: true, allowUnionTypes: true });\r\n  AjvErrors(ajv);\r\n\r\n  const validate = ajv.compile(schema_obj);\r\n  validate(obj);\r\n\r\n  if (validate.errors !== null) {\r\n    validate.errors.forEach((err) => console.log(err.message));\r\n    return false;\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport {\r\n  deepObjectCopy,\r\n  useBeforeEnterPage,\r\n  useGetInfo,\r\n  useGetFolders,\r\n  useGetPermissions,\r\n  useGetRoles,\r\n  useGetUserFolderSettings,\r\n  useGetUsers,\r\n  useGetUserReplacements,\r\n  useGetOnBehalfUsers,\r\n  useGetUserGroups,\r\n  useGetUserSearchSchema,\r\n  useGetSpareFiles,\r\n  useGetFlowItem,\r\n  useGetFlowItemSteps,\r\n  useGetDocument,\r\n  useValidateDocument,\r\n  useGetDocumentsWaitingApproval,\r\n  useGetDocumentApprovalsWithSpareFiles,\r\n  useGetDocumentApprovalFlow,\r\n  useGetCart,\r\n  useGetServerSettings,\r\n  useGetMailBoxes,\r\n  useGetMailChannels,\r\n  useGetCounters,\r\n  use404,\r\n  useValidateIntOr404,\r\n  useDataEncode,\r\n  useGetSortFunction,\r\n  // CONTEXT\r\n  useGetContext,\r\n  // MIXINS\r\n  useCurrentMixin,\r\n  useSelectionMixin,\r\n  usePaginationMixin,\r\n  usePromiseExecuteMixin,\r\n  usePerformActionMixin,\r\n  // DECORATORS\r\n  useExecutionTimeDecorator,\r\n  // FUNCTIONS\r\n  convertObject,\r\n  convertDateToDateString,\r\n  convertDateToDateTimeString,\r\n  convertDateToDateObject,\r\n  shuffleArray,\r\n  generate_states_obj_from_approvals,\r\n  // VALIDATION\r\n  validate_json,\r\n  // FILTERS\r\n  filterArrayOfObjects,\r\n  filterArrayOfObjectsByQuery,\r\n};\r\n","import { render } from \"./NavigationComponent.vue?vue&type=template&id=24c82cc2\"\nimport script from \"./NavigationComponent.vue?vue&type=script&lang=js\"\nexport * from \"./NavigationComponent.vue?vue&type=script&lang=js\"\n\nimport \"./NavigationComponent.vue?vue&type=style&index=0&id=24c82cc2&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./BasePage.vue?vue&type=template&id=ab6bb786\"\nimport script from \"./BasePage.vue?vue&type=script&lang=js\"\nexport * from \"./BasePage.vue?vue&type=script&lang=js\"\n\nimport \"./BasePage.vue?vue&type=style&index=0&id=ab6bb786&lang=css\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=0ae48cc8\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\NOSKOV\\\\030_DEV\\\\web_services\\\\skotch3\\\\src\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// Стили для уведомлений\r\nimport \"noty/lib/noty.css\";\r\nimport \"noty/lib/themes/relax.css\";\r\n\r\nimport { createApp } from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\n\r\nimport CKEditor from '@mayasabha/ckeditor4-vue3';\r\n\r\ncreateApp(App)\r\n  .use(router)\r\n  .use(CKEditor)\r\n  .mount(\".app\");\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkvue_project\"] = self[\"webpackChunkvue_project\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2985); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["evaluate_pattern","pattern","attributes","escape_regex_symbols","arr","matchAll","RegExp","result","forEach","e","part_to_be_replaced","expression","Object","keys","key","change_with","replace","evaluated_expression","eval","console","log","escapeRegExp","s","indexOf","User","constructor","username","email","first_name","last_name","patronomic","position","department","is_active","access_group_regex","role","role_inside_group","role_outside_group","on_behalf","this","_username","_email","_first_name","_last_name","_patronomic","_position","_department","_is_active","_access_group_regex","_role","_role_inside_group","_role_outside_group","_on_behalf","reset","to_dict","value","UserGroup","id","name","slug","is_private","_id","_name","_slug","_is_private","_users","users","add_user","user","push","has_username","map","x","includes","Document","folder_id","usergroup_id","is_created_first_time","union","created_at","Date","updated_at","toLowerCase","date","isNaN","getTime","getDate","getMonth","getFullYear","n","join","_folder_id","_usergroup_id","_union","_raw_attributes","_attributes","_description","_description_pattern","_files","_errors","_is_saved","_is_deleted","_is_created_first_time","_is_blocked","_created_at","_updated_at","_approvals","_errors_container_id","uuidv4","_started_checks_count","_finished_checks_count","_is_once_validated","_clones","raw_attributes","errors","set_attribute","_decode_attribute","get_raw_attribute","prototype","hasOwnProperty","call","get_attribute","add_file","remove_file","get_file","files","values","add_approval","approvals","add_error","container_id","reset_errors","_is_validation_in_progress","errors_container_id","is_saved","save","modify","is_deleted","delete","recover","raw_description","description","undefined","description_pattern","is_blocked","start_validation","count","stop_validation","is_validation_in_progress","is_once_validated","add_clone","doc","clones","Folder","_storage_path","_master_usergroup_slug","_access_group","_version","_search_schema","_form_schema","_max_file_size","_validation_constraints","_user_search_schema","_filename_pattern","_is_empty_search_allowed","_is_list_container_required","_is_doc_container_required","_doc_container_parsers","_is_necessary_validate","_default_sort_attribute","_default_sort_order","_default_mode","_group_by","_strict_validation","_action_buttons","_search_action_buttons","_approval_rules","String","replaceBadSymbols","replacement","padStartBeforeSeparator","length","symbol","separator","pos","zeroCount","padStart","padStartBeforeNonDigitSymbol","match","storage_path","master_usergroup_slug","access_group","settings","version","search_schema","form_schema","user_search_schema","validation_constraints","is_necessary_validate","max_file_size","is_empty_search_allowed","is_list_container_required","is_doc_container_required","default_sort_attribute","default_sort_order","default_mode","group_by","doc_container_parsers","get_filename_pattern","set_filename_pattern","strict_validation_for_permission","permission","strict_validation","action_buttons","search_action_buttons","approval_rules","obj","validation_schema","_validation_schema","filename_pattern","sort_by","asc","mode","BaseFile","total_size","_uploaded_size","_total_size","rename","size","set_total_size","_formatBytes","bytes","decimals","k","dm","sizes","i","Math","floor","parseFloat","pow","toFixed","formatted_size","progress","uploaded","set_size_complete","set_size","UserFolderSetting","usergroup_slug","_usergroup_slug","_user_folder_settings_id","PdfDocument","order","page_count","page_from","page_to","angle","file","_order","_page_count","_page_from","_page_to","_angle","_file","_uploaded","to_be_editted","Flow","trigger","is_multiple","message_if_fail","process","_trigger","_is_multiple","_message_if_fail","_process","FlowItem","success","input","started_at","finished_at","_success","_input","_started_at","_finished_at","raw_input","JSON","stringify","raw_process","FlowItemStep","flowitem_id","result_key","action","output","_flowitem_id","_result_key","_action","_output","DocumentApproval","state","from_username","from_first_name","from_last_name","to_username","to_first_name","to_last_name","delegated_from","_state","_from_username","_from_first_name","_from_last_name","_to_username","_to_first_name","_to_last_name","_delegated_from","_document","_active_approvals_count_of_document","document","active_approvals_count_of_document","ApprovalFlow","steps","_steps","validate_index","index","flush_empty_steps","filter","add_step","delete_step","splice","add_username_to_step","delete_username_from_step","ServerSetting","_value","_has_modified","has_modified","MailBox","out_protocol","out_encryption","out_port","out_server","in_protocol","in_encryption","in_port","in_server","password","_out_protocol","_out_encryption","_out_port","_out_server","_in_protocol","_in_encryption","_in_port","_in_server","_password","_mail_channels","mail_channels","add_mail_channel","MailChannel","folder","_folder","_settings","MailMessage","subject","address_from","address_to","address_cc","address_bcc","received_at","mailbox","mailchannel","has_text","has_html","_subject","_address_from","_address_to","_address_cc","_address_bcc","_received_at","_mailbox","_mailchannel","_has_text","_has_html","_attachments","add_attachment","attachments","Counter","increment","_increment","_createBlock","_component_base_page","class","_createElementBlock","_createVNode","_component_navigation_component","$setup","links","show_usergroup","can_change_usergroup","_component_router_view","Component","route","_Transition","meta","transitionName","_resolveDynamicComponent","path","_createElementVNode","title","_Fragment","_renderList","$props","item","route_name","_component_router_link","to","_component_form_select_input","parameters","toString","onUpdate","$event","_toDisplayString","_hoisted_6","onClick","_hoisted_7","_hoisted_9","Command","Notify","level","text","super","NotifyApiError","code","LoginWithCredentials","LoginWithToken","Logout","GetInfo","GetUsers","SetUser","DeleteUser","GetUserReplacements","AddUserReplacement","DeleteUserReplacement","GetUserReplacementsOfUser","AddUserReplacementToUser","username_to_be_replaced","replaced_with_username","DeleteUserReplacementFromUser","GetOnBehalfUsers","SetOnBehalfUser","DeleteOnBehalfUser","GetFolders","AddFolder","DeleteFolder","UpdateFolder","GetManyDocuments","query_obj","offset","limit","sort_asc","sort_rule","query","GetDocument","document_id","GetWaitingDocumentApprovals","UploadFileToFolder","file_id","DownloadFileFromFolder","inline","DownloadManyDocumentsFilesAsArchive","document_ids","DownloadDocumentFilesAsArchive","GetFileInfo","DeleteFileFromFolder","UpdateFileFromFolder","filename","GetRoles","AddRole","DeleteRole","GetUserFolderSettings","AddUserFolderSettings","UpdateUserFolderSettings","DeleteUserFolderSettings","AddPermission","perm","DeletePermission","GetUserPermissions","GetUserPermissionsForFolder","GetUserSearchSchema","SetUserSearchSchema","DeleteUserSearchSchema","SetDocumentAttribute","to_be_decoded","SaveDocumentsInFolder","SaveManyDocuments","docs","MarkDocumentAsDeleted","MarkDocumentAsNotDeleted","DeleteManyDocuments","AttachFileToDocument","DetachFileFromDocument","FlushFileContainer","AddDocument","union_id","mark_as_modified","AddDocumentModel","DuplicateDocumentToUsergroup","source_usergroup_id","target_usergroup_id","DuplicateManyDocumentsToUsergroup","ValidateDocument","ValidateDocumentAgainstConstraint","error_message","ValidateDocumentAgainstAttributeRegexValidationConstraint","ValidateDocumentAgainstAttributeTogetherRegexValidationConstraint","ValidateDocumentAgainstUniqueTogetherConstraint","ValidateDocumentAgainstAttributeHasPreviousValueConstraint","ValidateDocumentAgainstHasFileConstraint","ValidateDocumentAgainstHasApprovalConstraint","ValidateDocumentAgainstSingleUnionConstraint","ValidateDocumentAgainstFilenamePatternConstraint","AttachFilesToDocumentUsingPattern","AllocateFilesToDocumentsUsingPattern","GetSpareFiles","UpdateUploadProgress","file_ids","DownloadExcelFile","aoa","DownloadJsonFile","data","GetPdfMergeFiles","UploadPdfMergeFile","PushDocumentButton","PerformActionOnDocuments","handler","UpdatePdfMergeFile","DeletePdfMergeFile","DeleteAllPdfMergeFiles","DownloadPdfMergeResult","keep_bookmarks","add_filenames_as_bookmarks","DownloadPdfMixResult","GetShareFiles","UploadShareFile","DeleteShareFile","DownloadShareFile","GetUserGroups","AddUserGroup","UpdateUserGroup","DeleteUserGroup","AddUserToUserGroup","DeleteUserFromUserGroup","SetCurrentUserGroup","usergroup","GetFlows","AddFlow","UpdateFlow","DeleteFlow","GetFlowItem","GetManyFlowItems","RestartFlowItem","GetFlowItemSteps","DropSelfTestingQuestions","AddSelfTestingQuestion","question_text","answers","question","GetManyDocumentsApprovals","GetDocumentApprovals","AddDocumentApproval","UpdateDocumentApproval","approval_id","comments","DeleteDocumentApproval","DelegateDocumentApproval","with_return","GetDocumentApprovalSpareFiles","UploadDocumentApprovalFile","DeleteDocumentApprovalFile","EmptyCart","GetCart","AddDocumentToCart","AddManyDocumentsToCart","RemoveDocumentFromCart","CreateDocumentApprovalFlow","AddDocumentApprovalFlowStep","DeleteDocumentApprovalFlowStep","AttachUserToDocumentApprovalFlowStep","DeleteUserFromDocumentApprovalFlowStep","AbstractDocumentApprovalFlowCommand","GetDocumentApprovalFlow","StartDocumentApprovalFlow","StopDocumentApprovalFlow","SetDocumentApprovalFlow","GetServerSettings","UpdateServerSetting","GetMailBoxes","AddMailBox","UpdateMailBox","DeleteMailBox","GetMailChannels","AddMailChannel","UpdateMailChannel","DeleteMailChannel","AddMailChannelToMailBox","mailbox_id","mailchannel_id","DeleteMailChannelFromMailBox","FetchMailChannel","GetMailMessages","DeleteMailMessage","AbstractDownloadMailMessage","format","DownloadMailMessageInTextFormat","DownloadMailMessageInHtmlFormat","DownloadMailMessageInRawFormat","DownloadMailMessageAttachment","message_id","GetDocumentAttributesContext","ctx_id","ctx_name","is_raw_attribute","GetDocumentPreviousAttributeContext","attribute_name","GetUserEmailContext","GetCounters","AddCounter","UpdateCounter","DeleteCounter","Event","ApiError","AccessPagePermissionCheckFail","UserLoginSuccess","UserLogoutSuccess","UsersUpdateSuccess","UsersDeleteSuccess","UserReplacementAddSuccess","UserReplacementDeleteSuccess","OnBehalfUserChangeSuccess","OnBehalfUserDeleteSuccess","FoldersAddSuccess","FoldersUpdateSuccess","FoldersDeleteSuccess","UploadFileError","UploadEmptyFileError","UploadFileTooBigError","UploadFileWrongExtensionError","UploadFileWrongFilenameError","UploadFileSuccess","SaveManyDocumentsSuccess","DeleteManyDocumentsSuccess","DocumentAttributesChanged","DuplicateDocumentToUsergroupSuccess","DuplicateManyDocumentsToUsergroupSuccess","DocumentFilesAreUploading","FileUpdatedSuccess","FileDeletedSuccess","FileAttachedToDocument","FileDetachedFromDocument","DocumentButtonPushed","FilesAllocated","AddRoleSuccess","DeleteRoleSuccess","AddUserFolderSettingsSuccess","UpdateUserFolderSettingsSuccess","DeleteUserFolderSettingsSuccess","SetUserSearchSchemaSuccess","AddPermissionSuccess","DeletePermissionSuccess","DocumentLinkCopied","FileLinkCopied","AddUserGroupSuccess","UpdateUserGroupSuccess","DeleteUserGroupSuccess","DocumentAddedToCartSuccess","DocumentRemovedFromCartSuccess","ManyDocumentsAddedToCartSuccess","AddFlowSuccess","UpdateFlowSuccess","DeleteFlowSuccess","RestartFlowItemSuccess","SelfTestingRepliedSuccess","SelfTestingRepliedFail","DocumentApprovalAddedSuccess","DocumentApprovalUpdatedSuccess","DocumentApprovalDeletedSuccess","DocumentApprovalDelegatedSuccess","EmptyApprovalFlowSaved","ApprovalFlowStarted","ApprovalFlowStopped","ApprovalFlowUploadError","ServerSettingUpdatedSuccess","MailBoxAddedSuccess","MailBoxUpdatedSuccess","MailBoxDeletedSuccess","MailChannelAddedSuccess","MailChannelUpdatedSuccess","MailChannelDeletedSuccess","MailChannelFetchedSuccess","MailMessageDeletedSuccess","CounterAddedSuccess","CounterUpdatedSuccess","CounterDeletedSuccess","NotImplementedError","Error","DataClass","_data","_validate_using_schema","schema","ajv","Ajv","allErrors","allowUnionTypes","AjvErrors","validate","compile","err","Info","type","properties","approval_actions_count","approval_orders_count","required","additionalProperties","Single","auth_token","List","items","AttributeRegexValidationConstraint","enum","field","case_insensitive","AttributeTogetherRegexValidationConstraint","subject_field","subject_pattern","object_field","object_pattern","UniqueTogetherConstraint","fields","AttributeHasPreviousValueConstraint","field_to_be_checked","allowed_values","HasFileConstraint","min_count","max_count","HasApprovalConstraint","usernames","SingleUnionConstraint","FilenameMatchPatternConstraint","DocumentAttributesContext","const","PreviousDocumentsAttributeContext","UsersEmailsContext","Type","Parameters","is_disabled","default","minimum","FormDateInput","oneOf","bind","FormEmailToAddressField","TO","CC","BCC","Context","ADDRESS","KNOWN_EMAILS","FormEmailToAddressInput","bind_context","height","FormHtmlField","FormHtmlInput","align","font_weight","FormTextField","placeholder","secure","color","FormTextInput","ATTRIBUTES","FormHiddenInput","options","FormSelectInput","FormFilteredSelectInput","FormFields","FolderSettings","grow","rule","re","converter","context","pages","read_mode","edit_mode","button_active_name","button_passive_name","order_by","aggregate_function","caption","allowed_usernames","required_approvals","all","anyOf","can_approve","can_reject","can_delegate_with_return","can_delegate_without_return","is_for_folder","permissions","PermissionSingle","SearchSchemaSingle","user_id","patternProperties","FileList","UserSingle","created_by","FileSingle","DocumentSingle","SearchList","started_by","finished_by","FinishedBeforeItem","DivisionByZeroAction","$schema","IfAction","condition","CreateVariableAction","SendEmailAction","combination_pattern","body","html_body","SendEmailUserCreatedAction","SendEmailDocumentCreatedOrUpdatedAction","doc_id","SendEmailDocumentApprovalCreatedAction","SendEmailDocumentApprovalUpdatedAction","SendEmailDocumentApprovalDeletedAction","SendEmailDocumentApprovalFlowStartedAction","approval_flow_id","SendEmailDocumentApprovalFlowStoppedAction","SendEmailDocumentApprovalFlowExecutedAction","SendEmailDocumentCreatedFromMailMessageAction","DispatchEmailsAction","GetUserByIdAction","GetUserByUsernameAction","GetUsergroupByIdAction","GetFolderByIdAction","GetDocumentByIdAction","GetDocumentByApprovalAction","UpdateDocumentAttributesAction","UpdateDocumentFilesAction","GetMailBoxByIdAction","GetMailChannelByIdAction","FetchMailMessagesAction","SendMailMessageAction","text_body","save_storage_path","save_filename","FetchMailChannelAction","FetchAllMailChannelsAction","CreateDocumentFromMailMessageAction","mail_id","ExtractHtmlPortionAction","html","tag","FetchCounter","counter_name","ConfirmCounter","CopyDocumentToUsergroupAction","FlowProcess001","maximum","start_condition","not","variable_name","to_be_finished_before","at_least_one_to_be_finished_before","FlowProcess","flow","FlowSingle","CheckMandatoryAttributeProcessor","DatetimeToTimestampAttributeProcessor","SetIfNoneAttributeProcessor","SimpleParser","regex","flags","row_count","post_processors","attribute","processor","MailChannelSettings","store_to","parser","raw","mailchannels","MailChannelSingle","Request","Response","NegativeResponse","EmptyPositiveResponse","PositiveFileResponse","LoginCredentialsRequest","LoginCredentialsResponse","LoginTokenRequest","LoginTokenResponse","GetInfoRequest","GetInfoResponse","GetUsersRequest","GetUsersResponse","UserList","SetUserRequest","SetUserResponse","DeleteUserRequest","DeleteUserResponse","GetUserReplacementsRequest","GetUserReplacementsResponse","AddUserReplacementRequest","AddUserReplacementResponse","DeleteUserReplacementRequest","DeleteUserReplacementResponse","GetUserReplacementsOfUserRequest","GetUserReplacementsOfUserResponse","AddUserReplacementToUserRequest","AddUserReplacementToUserResponse","DeleteUserReplacementFromUserRequest","DeleteUserReplacementFromUserResponse","GetOnBehalfUsersRequest","GetOnBehalfUsersResponse","SetOnBehalfUserRequest","SetOnBehalfUserResponse","DeleteOnBehalfUserRequest","DeleteOnBehalfUserResponse","GetUserGroupsRequest","GetUserGroupsResponse","UserGroupList","AddUserGroupRequest","AddUserGroupResponse","UserGroupSingle","SetUserGroupRequest","SetUserGroupResponse","DeleteUserGroupRequest","DeleteUserGroupResponse","AddUserToUserGroupRequest","AddUserToUserGroupResponse","DeleteUserFromUserGroupRequest","DeleteUserFromUserGroupResponse","GetFoldersRequest","GetFoldersResponse","FolderList","AddFolderRequest","AddFolderResponse","FolderSingle","UpdateFolderRequest","UpdateFolderResponse","DeleteFolderRequest","DeleteFolderResponse","UploadFileToFolderRequest","original_file","UploadFileToFolderResponse","DownloadFileFromFolderRequest","DownloadFileFromFolderResponse","DownloadManyDocumentsFilesAsArchiveRequest","DownloadManyDocumentsFilesAsArchiveResponse","DownloadDocumentFilesAsArchiveRequest","DownloadDocumentFilesAsArchiveResponse","DeleteFileFromFolderRequest","DeleteFileFromFolderResponse","UpdateFileFromFolderRequest","UpdateFileFromFolderResponse","GetFileInfoRequest","GetFileInfoResponse","GetRolesRequest","GetRolesResponse","RoleList","AddRoleRequest","AddRoleResponse","RoleSingle","DeleteRoleRequest","DeleteRoleResponse","GetUserFolderSettingsRequest","GetUserFolderSettingsResponse","UserFolderSettingList","AddUserFolderSettingsRequest","AddUserFolderSettingsResponse","UserFolderSettingSingle","UpdateUserFolderSettingsRequest","UpdateUserFolderSettingsResponse","DeleteUserFolderSettingsRequest","DeleteUserFolderSettingsResponse","GetPermissionsRequest","GetPermissionsResponse","PermissionList","AddPermissionRequest","AddPermissionResponse","DeletePermissionRequest","DeletePermissionResponse","GetUserPermissionsRequest","GetUserPermissionsResponse","GetUserPermissionsForFolderRequest","GetUserPermissionsForFolderResponse","GetUserSearchSchemaRequest","GetUserSearchSchemaResponse","SetUserSearchSchemaRequest","SetUserSearchSchemaResponse","DeleteUserSearchSchemaRequest","DeleteUserSearchSchemaResponse","GetDocumentRequest","GetDocumentResponse","GetPreviousDocumentsRequest","GetPreviousDocumentsResponse","DocumentList","PushDocumentButtonRequest","PushDocumentButtonResponse","GetManyDocumentsRequest","GetManyDocumentsResponse","documents","SaveManyDocumentsRequest","SaveManyDocumentsResponse","DeleteManyDocumentsRequest","ids","DeleteManyDocumentsResponse","DuplicateDocumentToUsergroupRequest","DuplicateDocumentToUsergroupResponse","DuplicateManyDocumentsToUsergroupRequest","DuplicateManyDocumentsToUsergroupResponse","GetSpareFilesRequest","GetSpareFilesResponse","GetUploadProgressRequest","GetUploadProgressResponse","loaded","GetPdfMergeFilesRequest","GetPdfMergeFilesResponse","PdfMergeFileList","UploadPdfMergeFileRequest","UploadPdfMergeFileResponse","PdfMergeFileSingle","UpdatePdfMergeFileRequest","UpdatePdfMergeFileResponse","DeletePdfMergeFileRequest","DeletePdfMergeFileResponse","DownloadPdfMergeResultRequest","DownloadPdfMergeResultResponse","DownloadPdfMixResultRequest","DownloadPdfMixResultResponse","GetShareFilesRequest","GetShareFilesResponse","UploadShareFileRequest","UploadShareFileResponse","DownloadShareFileRequest","DownloadShareFileResponse","DeleteShareFileRequest","DeleteShareFileResponse","GetFlowsRequest","GetFlowsResponse","FlowList","AddFlowRequest","AddFlowResponse","UpdateFlowRequest","UpdateFlowResponse","DeleteFlowRequest","DeleteFlowResponse","GetFlowItemRequest","GetFlowItemResponse","FlowItemSingle","RestartFlowItemRequest","RestartFlowItemResponse","GetManyFlowItemsRequest","GetManyFlowItemsResponse","FlowItemList","GetFlowItemStepsRequest","GetFlowItemStepsResponse","FlowItemStepList","GetManyDocumentsApprovalsRequest","GetManyDocumentsApprovalsResponse","DocumentApprovalSearchList","GetDocumentApprovalsRequest","GetDocumentApprovalsResponse","DocumentApprovalList","AddDocumentApprovalRequest","AddDocumentApprovalResponse","DocumentApprovalSingle","UpdateDocumentApprovalRequest","UpdateDocumentApprovalResponse","DeleteDocumentApprovalRequest","DeleteDocumentApprovalResponse","DelegateDocumentApprovalRequest","DelegateDocumentApprovalResponse","GetDocumentApprovalSpareFilesRequest","GetDocumentApprovalSpareFilesResponse","UploadDocumentApprovalFileRequest","UploadDocumentApprovalFileResponse","DeleteDocumentApprovalFileRequest","DeleteDocumentApprovalFileResponse","GetWaitingDocumentApprovalsRequest","GetWaitingDocumentApprovalsResponse","EmptyCartRequest","EmptyCartResponse","GetCartDocumentsRequest","GetCartDocumentsResponse","AddDocumentToCartRequest","AddDocumentToCartResponse","AddManyDocumentsToCartRequest","AddManyDocumentsToCartResponse","RemoveDocumentFromCartRequest","RemoveDocumentFromCartResponse","AbstractDocumentApprovalFlowRequest","AbstractDocumentApprovalFlowResponse","ApprovalFlowSingle","GetDocumentApprovalFlowRequest","GetDocumentApprovalFlowResponse","SetDocumentApprovalFlowRequest","minItems","SetDocumentApprovalFlowResponse","StartDocumentApprovalFlowRequest","StartDocumentApprovalFlowResponse","StopDocumentApprovalFlowRequest","StopDocumentApprovalFlowResponse","GetServerSettingsRequest","GetServerSettingsResponse","ServerSettingList","UpdateServerSettingRequest","UpdateServerSettingResponse","ServerSettingSingle","GetMailBoxesRequest","GetMailBoxesResponse","MailBoxList","AddMailBoxRequest","AddMailBoxResponse","MailBoxSingle","UpdateMailBoxRequest","UpdateMailBoxResponse","DeleteMailBoxRequest","DeleteMailBoxResponse","GetMailChannelsRequest","GetMailChannelsResponse","MailChannelList","AddMailChannelRequest","AddMailChannelResponse","UpdateMailChannelRequest","UpdateMailChannelResponse","DeleteMailChannelRequest","DeleteMailChannelResponse","AddMailChannelToMailBoxRequest","AddMailChannelToMailBoxResponse","DeleteMailChannelFromMailBoxRequest","DeleteMailChannelFromMailBoxResponse","FetchMailChannelRequest","FetchMailChannelResponse","GetMailMessagesRequest","GetMailMessagesResponse","MailMessageList","DeleteMailMessageRequest","DeleteMailMessageResponse","DownloadMailMessageRequest","DownloadMailMessageResponse","DownloadMailMessageAttachmentRequest","DownloadMailMessageAttachmentResponse","GetCountersRequest","GetCountersResponse","CounterList","AddCounterRequest","AddCounterResponse","CounterSingle","UpdateCounterRequest","UpdateCounterResponse","DeleteCounterRequest","DeleteCounterResponse","DownloadTransmittalCoverSheetRequest","template","DownloadTransmittalCoverSheetResponse","AbstractApi","request","REQUEST_HANDLERS","func","_auth_token","set_auth_token","token","WrongResponseError","WrongErrorType","notify","event","uow","actions","notificator","warning","info","error","notify_api_error","push_message","get_info","async","response","api","info_repository","set_approval_actions_count","set_approval_orders_count","convert_user_response_obj_to_model","login_with_credentials","user_repository","reset_keeping_refs","token_repository","set_current","permission_repository","login_with_token","logout","get_users","set","set_user","delete_user","get_user_replacements","current_user","get_current","user_replacement_repository","add_user_replacement","delete_user_replacement","get_user_replacements_of_user","add_user_replacement_to_user","delete_user_replacement_from_user","get_on_behalf_users","set_on_behalf_users","set_on_behalf_user","delete_on_behalf_user","get_user_email_context","attrs","trim","context_repository","set_user_group_into_repository","group","usergroup_repository","get_user_groups","add_user_group","update_user_group","delete_user_group","add_user_to_user_group","delete_user_from_user_group","set_current_user_group","actual_group","folder_repository","folder_ref","doc_repository","get_permissions","role_permissions_repository","set_variants","add_permission","delete_permission","get_user_permissions","add","get_user_permissions_for_folder","reset_for_folder","add_for_folder","get_roles","user_folder_settings_repository","set_role_variants","add_role","delete_role","convert_folder_response_obj_to_model","sort_rules","get_folders","add_folder","update_folder","delete_folder","convert_user_folder_settings_to_model","get_user_folder_settings","add_user_folder_settings","set_user_folder_settings","delete_user_folder_settings","get_user_search_schema","set_user_search_schema","delete_user_search_schema","convert_doc_response_obj_to_model","base_files","f","base_file","get_document","get","get_many_documents","structuredClone","set_count","set_document_attribute","save_documents_in_folder","doc_ids","pure_keys","to_be_deleted","to_be_created","handle_function","attach_files_ids","every","save_many_documents","mark_as_saved","mark_document_as_deleted","file_in_folder_repository","mark_as_deleted","mark_document_as_not_deleted","mark_as_not_deleted","delete_many_documents","add_document","now_timestamp","now","add_document_model","file_common_repository","duplicate_document_to_usergroup","original_doc","copied_doc","duplicate_many_documents_to_usergroup","get_document_attributes_context","is_raw","get_document_previous_attribute_context","get_id_by_slug","get_extension_of_file","split","pop","js_download_file","mime","bom","is_pdf","is_html","blobData","blob","Blob","window","navigator","msSaveBlob","blobURL","URL","createObjectURL","webkitURL","tempLink","createElement","style","display","href","innerText","download","setAttribute","addEventListener","preventDefault","new_window","open","onload","head","appendChild","click","setTimeout","removeChild","revokeObjectURL","push_document_button","handler_1882_dlenc_transmittal","perform_action_on_documents","handlers","convert_approval_response_obj_to_model","approval","get_many_documents_approvals","search_doc_approval_repository","get_document_approvals","doc_approval_repository","add_document_approval","update_document_approval","non_attached_document_approval_files","doc_approval_file_repository","waiting_doc_approval_repository","delete_document_approval","delegate_document_approval","get_document_approval_spare_files","upload_document_approval_file","upload_progress_timer","remove","delete_document_approval_file","get_waiting_document_approvals","convert_approval_flow_response_obj_to_model","create_document_approval_flow","dt","doc_approval_flow_repository","add_document_approval_flow_step","delete_document_approval_flow_step","attach_user_to_document_approval_flow_step","delete_user_from_document_approval_flow_step","get_document_approval_flow","set_document_approval_flow","start_document_approval_flow","stop_document_approval_flow","empty_cart","cart_repository","reset_keeping_refs_for_docs","get_cart_documents","set_doc","add_document_to_cart","add_many_documents_to_cart","remove_document_from_cart","delete_doc","convert_server_setting_response_obj_to_model","get_server_settings","model","server_setting_repository","update_server_setting","convert_mailbox_response_obj_to_model","channel","convert_mail_channel_response_obj_to_model","get_mailboxes","mailbox_repository","add_mailbox","update_mailbox","delete_mailbox","get_mail_channels","mail_channel_repository","update_mail_channel","delete_mail_channel","add_mail_channel_to_mailbox","delete_mail_channel_from_mailbox","fetch_mail_channel","convert_mail_message_response_obj_to_model","mail","get_mail_messages","mail_message_repository","delete_mail_message","download_mail_message","download_progress","set_size_method","download_mail_message_attachment","upload_file_to_folder","download_file_from_folder","download_many_documents_files_as_archive","download_document_files_as_archive","get_file_info","delete_file_from_folder","delete_file_func","file_in_repository","update_file_from_folder","flush_file_container","get_spare_files","update_upload_progress","download_excel_file","s2ab","buf","ArrayBuffer","view","Uint8Array","charCodeAt","ws","XLSX","wb","SheetNames","Sheets","wbout","bookType","download_json_file","attach_file_to_document","detach_file_from_document","attach_files_to_document_using_pattern","regexp","base_files_ids","allocate_files_to_documents_using_pattern","get_pdf_merge_files","pdf_merge_file_repository","pdf_doc","upload_pdf_merge_file","update_pdf_merge_file","delete_pdf_merge_file","delete_all_pdf_merge_files","download_pdf_merge_result","download_pdf_mix_result","get_share_files","share_file_repository","upload_share_file","delete_share_file","download_share_file","drop_self_testing_questions","self_testing_question_repository","add_self_testing_question","convert_counter_response_obj_to_model","get_counters","counter_repository","counter","add_counter","update_counter","delete_counter","convert_flow_response_obj_to_model","get_flows","flow_repository","add_flow","update_flow","delete_flow","convert_flow_item_response_obj_to_model","get_many_flow_items","flow_item_repository","get_flow_item","convert_flow_item_step_response_obj_to_model","get_flow_item_steps","flow_item_step_repository","restart_flow_item","reset_document_validation_errors","validate_document_against_constraints","get_is_necessary_validate","constraints","get_validation_constraints","attribute_regex_validation","attribute_together_regex_validation","has_file","has_approval","unique_together","attribute_has_previous_value","single_union","filename_match_pattern","handler_command","validate_document_against_unique_together_constraint","push_error","_LIMIT","is_all_required_attrs_filled","count_of_docs_with_same_attrs","are_same","validate_document_against_has_previous_value_constraint","value_to_be_checked","value_index","validate_document_against_has_file_constraint","Number","isInteger","add_error_easy","validate_document_against_attribute_regex_validation_constraint","attr","get_nested_attribute_from_document","validate_document_against_attribute_together_regex_validation_constraint","subject_regexp","object_regexp","subject_attr","object_attr","validate_document_against_single_union_constraint","union_id_already_assigned","union_ids_obj","union_ids","set_union","validate_document_against_filename_pattern_constraint","wrong_filenames","validate_document_against_has_approval_constraint","sort","a","b","approvals_by_id","state_by_username","usernames_who_approved","difference","attr_name","attr_names","doc_attr_key","shift","nested_key","handle_api_error","handle_access_perm_fail_error","user_login_success","MessageBus","user_logout_success","users_get_success","users_update_success","users_delete_success","user_replacement_add_success","user_replacement_delete_success","on_behalf_user_change_success","on_behalf_user_delete_success","folders_add_success","folders_update_success","folders_delete_success","handle_upload_file_error","handle_upload_empty_file_error","handle_upload_file_too_big_error","handle_upload_file_wrong_extension_error","handle_upload_file_wrong_filename_error","handle_upload_file_success","handle_save_many_documents_success","handle_delete_many_documents_success","handle_document_attributes_changed","handle_duplicate_document_to_usergroup_success","handle_duplicate_many_documents_to_usergroup_success","handle_document_files_are_uploading","handle_file_updated_success","handle_file_deleted_success","handle_file_attached_to_document","handle_file_detached_from_document","handle_files_allocated","handle_document_button_pushed","handle_add_role_success","handle_delete_role_success","handle_add_user_folder_settings_success","handle_set_user_folder_settings_success","handle_delete_user_folder_settings_success","handle_set_user_search_schema_success","handle_add_permission_success","handle_delete_permission_success","handle_document_link_copied","handle_file_link_copied","handle_add_user_group_success","handle_update_user_group_success","handle_delete_user_group_success","handle_user_group_has_not_been_assigned","handle_document_added_to_cart_success","handle_document_removed_from_cart_success","handle_many_documents_added_to_cart_success","handle_add_flow_success","handle_update_flow_success","handle_delete_flow_success","handle_restart_flow_item_success","handle_self_testing_replied_success","handle_self_testing_replied_fail","handle_document_approval_added_success","handle_document_approval_updated_success","handle_document_approval_deleted_success","handle_document_approval_delegated_success","handle_empty_approval_flow_saved","handle_approval_flow_upload_error","handle_approval_flow_started","handle_approval_flow_stopped","handle_server_setting_updated_success","handle_mailbox_added_success","handle_mailbox_updated_success","handle_mailbox_deleted_success","handle_mail_channel_added_success","handle_mail_channel_updated_success","handle_mail_channel_deleted_success","handle_mail_channel_fetched_success","handle_mail_message_deleted_success","handle_counter_added_success","handle_counter_updated_success","handle_counter_deleted_success","COMMAND_HANDLERS","GetPermissions","EVENT_HANDLERS","UsersGetSuccess","UserGroupHasNotBeenAssigned","message","quenue","current_message","new_messages","handle_command","concat","handle_event","promises","Promise","command_result","events","collect_new_messages","AbstractBaseRepository","_deep_copy","parse","_create_name","Array","isArray","_set","_get","_delete","_add_key","_remove_key","_keys","_values","_pure_keys","_keys_box","_values_box","_pure_keys_box","_set_box","_get_box","_delete_box","_add_box_key","_remove_box_key","VueBaseRepository","_properties","inject","_reset","add_key","ref","empty","isRef","box_id","_keys_name","FlatMixin","VueFlatRepository","assign","BoxMixin","VueBoxRepository","CurrentMixin","is_current_settled","AuthenticatedMixin","is_authenticated","RoleMixin","get_role","set_role","get_role_inside_group","set_role_inside_group","get_role_outside_group","set_role_outside_group","ActiveMixin","get_isactive","set_isactive","OnBehalfMixin","VueUserRepository","SlugMixin","find","VueUserGroupRepository","VueTokenMixin","get_auth_token","Cookies","_cookie_default","VueResetMixin","VueTokenRepository","keep_auth_token_days_count","expires","parseInt","sameSite","VueFolderMixin","get_validation_schema","get_strict_validation","VueFolderRepository","CountMixin","get_count","is_count_settled","VueDocMixin","get_union","mark_all_as_saved","is_doc_has_not_file","error_text","has_errors","validation_progress","count_of_validated_docs","reduce","round","VueDocRepository","VueFileMixin","get_name","VueFileBoxRepository","VueFileFlatRepository","_variants","get_role_variants","VueSettingsMixin","VueUserFolderSettingsRepository","PermissionMixin","remove_for_folder","has","has_for_folder","VuePermissionRepository","VariantMixin","get_variants","VueRolePermissionsRepository","VueFlatCurrentRepository","HttpApiError","HttpApi","api_url","perform_request","method","query_without_empty_fields","FormData","append","content_type","headers","response_type","set_download_size_method","set_user_group","get_previous_documents","download_transmittal_cover_sheet","get_upload_progress","positive_response_class","set_upload_size_method","http_call","url","search","URLSearchParams","resolve","reject","xhr","XMLHttpRequest","responseType","setRequestHeader","onprogress","onerror","status","getResponseHeader","content_length","content_disposition","libmime","send","regex_en","match_en","exec","regex_ru","match_ru","decodeURI","groups","json_data","AbstractApiProvider","HttpApiProvider","location","origin","AbstractNotificator","NotyNotificator","Noty","show","do","layout","theme","timeout","progressBar","AbstractTimer","period","_callback","_timer","setInterval","_period","clearInterval","UploadProgressTimer","_ids","start","stop","WaitSecondsTimer","_decrease_seconds","_seconds","reactive","VueFolderSettings","ApprovalMixin","get_approval_actions_count","get_approval_orders_count","VueInfoRepository","doc_box_name","doc_values","get_doc","VueCartRepository","VueCountableFlatRepository","AbstractUnitOfWork","messages","VueUnitOfWork","wait_seconds_timer","folder_settings","_component_heading_component","_component_form_text_input","onKeyup","autocomplete","_component_btn_component","disabled","_hoisted_1","props","Boolean","__exports__","onInput","_ctx","target","emits","setup","emit","default_value","computed","components","BtnComponent","HeadingComponent","credentials","router","useRouter","useRoute","login_action","decodeURIComponent","logout_action","_component_document_page_download_progress_row","_component_document_page_buttons_row","is_edit_mode","is_files_shown","is_folder_saved","can_add_doc","can_change_doc","can_view_file","can_add_file","can_delete_file","can_delete_doc","is_tuning_mode","is_group_by_mode","group_by_settings","_cache","button","_component_text_button","_component_document_page_search_row","is_clean_required","is_selection_required","is_all_selected","required_space_for_link","search_by_user","_component_document_page_sort_row","_component_document_pagination_row","total_count","max","count_per_page","current_page","variants","is_intermediate_part_shown","min","_component_form_text_field","_component_document_row","is_selected","is_dragging","has_link","link_route_obj","page__servicecontainer_alone","_component_json_file_drop_zone","page__docdropzone_dragging","parsers","_component_file_drop_zone","page__filedropzone_dragging","_hoisted_10","_component_file_list","can_be_dragged","can_be_deleted","onDrop","onDragover","onDragenter","_component_document_buttons_row","_component_document_attribute_row","is_highlighted","_component_document_files_row","_component_document_errors_row","documentattributerow_modified","_component_sized_div","_component_form_boolean_input","block","_component_form_date_input","_renderSlot","hint","date_str","toISOString","slice","handle_update_date","evt","valueAsNumber","checked","onChange","SizedDiv","FormBooleanInput","get_bool_attribute","textbutton_disabled","TextButton","_component_file_block","draggable","onDragstart","onDragend","_hoisted_2","_component_toggle_text_button","fileblock__renamebutton_red","activeTitle","passiveTitle","isActive","ToggleTextButton","can_be_renamed","progress_str","watch","newValue","handle_drag_start","dataTransfer","setData","is_uploaded","ext","basename","substring","is_rename_active","handle_click_on_rename_button","FileBlock","DocumentAttributeRow","DocumentButtonsRow","DocumentFilesRow","DocumentErrorsRow","handle_drop","getData","handle_click_attributerow","group_by_active_title","group_by_passive_title","_component_tuning_item","option","selected","handle_choose_value","str_index","onMousedown","filtered_options","toUpperCase","handle_click_on_target","_component_icon_button","icon_on","icon_off","IconButton","size_variants","prev_size","idx","next_size","TuningItem","should_emit_search_event_on_any_keypress","get_query_key","encoded_query","property","is_pattern_valid","useDataEncode","get_initial_value","reset_query","regexp_str","str","emit_search_event","get_component_name","get_query_item","get_query_value","set_query_value","get_parameters","boolean_input_parameters","select_input_parameters","text_input_parameters","_component_arrow_switch","is_checked","ArrowSwitch","getSortNameAndFunction","block_name","sort_rule_name","onDragleave","get_extension","get_base_name","default_json_parser","parser_1868_amm_transmittal","transmittal","last_modified_unix_timestamp","lastModified","workbook","arrayBuffer","result_json_data","sheet_name","ws_json_data","header","TRANSMITTAL","DATE","parser_1882_dlenc_transmittal","parse_date","str_date","parts","year","month","day","mydate","ws_trm","ws_list","ws_trm_json_data","ws_list_json_data","TRM","ISSUED_DATE","DUE_DATE","row_1","row_2","transform_row","CODE","SHEET_NAME","REVISION","STATUS","LANGUAGE","KIND","allowed_parsers","json_default","drop_parsers","handleDrop","parser_name","oldValue","full_format","_hoisted_3","page","max_count_of_pages","count_before","count_after","from","ceil","num","has_intermediate_part","pages_before","pages_after","onMounted","DocumentRow","DocumentPageButtonsRow","DocumentPageSearchRow","DocumentPageSortRow","JsonFileDropZone","FileDropZone","DocumentPageDownloadProgressRow","DocumentPaginationRow","useValidateIntOr404","params","generate_doc_link","folder_name","is_empty_request_allowed","folder_default_mode","can_view_doc","is_search_clean_required","search_query","handle_update_doc_attribute","search_results","handle_save_documents","mark_selected_documents_as_deleted","selected_document_ids_flat_array","handle_new_docs_drop","obj_array","add_empty_document","init_obj","duplicate_selected_documents","init_doc","spare_files","downloading_files","handle_new_file_drop","handle_download_file","handle_flush_file_container","handle_delete_file","handle_allocate_files","handle_copy_link_to_file_into_clipboard","clipboard","writeText","then","handle_download_files_in_archive","selected_documents","is_uploaded_file_dragging","is_drag_above_file_zone","is_drag_above_doc_zone","is_empty_request","search_status","is_searching","search_count","search_time","pagination_min_doc_index","pagination_max_doc_index","selected_document_count","is_first_search_completed","get_documents_action","without_limits","reset_pagination","t0","performance","pagination_count_per_page","pagination_current_page","t1","default_count_per_page","default_current_page","pagination_variants","is_intermediate_pages_shown","handle_set_page_range","default_sort_rule","sorted_results","grouped_results","aggregate_functions","MAX","make_key_from_fields","field_value","aggregate_value","handle_tuning_change_field","findIndex","handle_tuning_delete_field","handle_save_user_search_schema","handle_delete_user_search_schema","set_callback","handle_download_excel_file","names","descriptions","rows","handle_download_json_file","doc_copy","selected_document_ids","entries","handle_select_document","reset_selection","handle_select_all_documents","handle_add_to_cart","validate_documents","once_validated","is_action_button_shown","button_obj","handle_push_action_button","useBeforeEnterPage","useGetFolders","useGetUserGroups","useGetUserSearchSchema","useGetSpareFiles","onBeforeUnmount","_component_form_filtered_select_input","from_user","to_user","placeholdert","listrow__error_exist","route_obj","generate_doc_route_obj","convert_doc_approval_to_item","add_to_cart","approve","delegate_approval_with_return","approval_action_username","delegate_approval_without_return","download_files_as_archive","doc_approvals","filter_objs","objs","filterArrayOfObjects","localeCompare","selected_item_ids","selected_item_count","handle_select_approval","handle_select_all_approvals","user_options","is_approval_action_username_chosen","action_progress","perform_action_on_selected_items","actions_executed","action_name","useGetDocumentsWaitingApproval","useGetUsers","_component_document_attribute_block","cloned_doc","contenteditable","innerHTML","onPaste","_component_approval_row","_component_approval_flow","states","can_be_modified","onSave","onStart","onStop","_component_base_form","onClose","documentattributeblock_modified","get_str_attribute","str_default_value","handle_delete_action","convertDateToDateTimeString","approvalflow__button_gray","_component_approval_flow_step_item","step","_component_approval_flow_step","onAttach","_hoisted_11","onDelete","validator","handle_delete","ApprovalFlowStepItem","ApprovalFlowStep","created_date_info","updated_date_info","action_username","is_action_username_chosen","non_attached_usernames","is_drag_above_json_file_zone","find_user_description","modify_step","arr_of_usernames","handle_add_user","handle_attach_user_to_step","handle_delete_user_from_step","handle_save","handle_drop_json_file","step_arr","width","srcdoc","resize","address","cc","bcc","convert","formemailaddressinput__button_inactive","row","designation","full_email","_hoisted_8","domain","addresses","known_emails","address_decode_str","address_decode","address_encode","obj_with_all_NA_addresses","NA","variant_idx","variant_count","current_variant","goto_previous_letter","goto_next_letter","use_the_letter_as_current","get_row_title","validate_email","test","add_email","modified_current_variant","next_designation","change_designation","search_field_parameters","filtered_current_variant","sorted_current_variant","cmp","_component_ckeditor","config","onNamespaceloaded","body_html","height_in_px","editor_config","fullPage","allowedContent","extraPlugins","resize_enabled","autoGrow_minHeight","autoGrow_maxHeight","toolbar","colorButton_colors","removePlugins","onNamespaceLoaded","CKEDITOR","plugins","addExternal","evaluated_value","FormMultilineTextInput","is_header_required","page_index","page_settings","form_width","page_name","page_fields","make_field_context","DocumentAttributeBlock","ApprovalRow","BaseForm","route_full_path","fullPath","form_pages","usergroup_name","copy_list_usergroups","copy_list_usergroup_id","handle_copy_list_change_usergroup","set_seconds_before_button_copy_to_usergroup_activated","handle_save_document","useValidateDocument","handle_rename_file","file_ids_are_being_renamed","are_files_saved","handle_rename_file_activated","handle_copy_link_to_document_into_clipboard","handle_copy_link_to_document_file_into_clipboard","is_drag_above_doc_file_zone","is_drag_above_approval_file_zone","approval_max_file_size","uploading_files","handle_document_approval_file_drop","handle_document_approval_filename_wrong","handle_delete_document_approval_file","document_approval_files","handle_download_all_files","doc_max_file_size","handle_document_file_drop","text_comments","approvals_before_last_update","approvals_after_last_update","approval_ids_can_be_deleted","approvals_to_be_closed_ids","to_be_closed","handle_paste","stopPropagation","clipboardData","insert_text_in_editable","getSelection","sel","getRangeAt","rangeCount","range","deleteContents","insertNode","createTextNode","selection","createRange","DOM_elem_with_text","getElementById","textContent","handle_add_document_approval","useGetDocument","handle_delete_document_approval","useGetDocumentApprovalsWithSpareFiles","handle_delegate_document_approval","handle_approve_document","handle_update_document_approval","handle_reject_document","approval_to_be_closed_id","useGetDocumentApprovalFlow","approval_rules_filename","approval_filename_pattern","approval_rules_can_approve","approval_rules_can_reject","approval_rules_can_delegate_with_return","approval_rules_can_delegate_without_return","is_user_included_rights_list","list","has_right_to_approve","has_right_to_reject","has_right_to_delegate_with_return","has_right_to_delegate_without_return","approval_flow","approval_flow_states","generate_states_obj_from_approvals","handle_create_approval_flow","handle_add_approval_flow_step","handle_delete_approval_flow_step","handle_attach_user_to_approval_flow_step","handle_delete_user_from_approval_flow_step","handle_save_approval_flow","handle_start_approval_flow","handle_stop_approval_flow","form_uid","is_form_opened","form_context","ctx","calculate_strict_permission","perm_name","can_view_approval","can_add_approval","can_change_approval","can_delete_approval","can_delegate_approval","can_view_approvalflow","can_change_approvalflow","useGetContext","APPROVED_after_last_update_usernames","is_action_button_disabled","handle_push_document_button","set_seconds_before_button_activated","COPY_TO_USERGROUP_ACTION","get_text_of_action_button","get_seconds_before_button_activated","get_seconds_before_button_copy_to_usergroup_activated","_component_folder_tree_node","tree","expand_all","keysWithoutTarget","is_opened","hasTargetKey","hasNonTargetKeys","FolderTreeNode","current_group","folders","insert_into","array_of_keys","folder_tree","is_all_expanded","remove_from_cart","seconds_before_document_copy_is_allowed","decrease_seconds_before_document_copy","convert_doc_to_item","create_approval_flow","add_approval_flow_step","delete_approval_flow_step","approval_flow_step_index","attach_user_to_approval_flow_step","approval_flow_step_username","delete_user_from_approval_flow_step","save_approval_flow","start_approval_flow","stop_approval_flow","filtered_items","selected_items","count_of_selected_items","handle_select_all_items","handle_select_item","useSelectionMixin","perform_action_on_items","usePerformActionMixin","handle_copy_documents_to_usergroup","doc_lists","temp","ApprovalFlowModel","useGetCart","user_replacements","replacement_username","is_replacement_username_chosen","handle_add_user_replacement","handle_delete_user_replacement","behalf_users","behalf_users_options","behalf_username","handle_change_on_behalf_user","useGetUserReplacements","useGetOnBehalfUsers","_component_search_component","model_objects","convert_obj_to_item","current_id","onChoose","onSearch","_component_document_search_status_row","time","min_index","max_index","searchcomponent__row_selected","link_to_single_page","count_of_selected","DocumentSearchStatusRow","Function","var_sort_by","var_sort_asc","var_sort_rule","var_sort_func","useGetSortFunction","pagination_min_index","pagination_max_index","paginated_items","usePaginationMixin","SearchComponent","convert_model_to_item","query_for_internal_search","filterArrayOfObjectsByQuery","can_change","can_delete","search_action","to_repository_convertion","from_repository_convertion","current","handle_update_attribute","useCurrentMixin","is_edit_block_valid","update_action","convertObject","delete_action","role_variants","role_options","useGetRoles","_component_user_item","can_add","onAdd","UserItem","current_username","handle_get","current_user_replacements","filter_users","condition_func","users_included_in_replacements","query_right","users_excluded_from_replacements","query_left","handle_add","add_action","useGetUserFolderSettings","is_settings_valid","validate_json","_hoisted_5","permission_names","role_perms","new_role","group_id","actual_group_usernames","users_included_to_group","users_excluded_from_group","useGetServerSettings","useGetCounters","encryption_options","useGetMailBoxes","can_fetch","fetch_action","useGetMailChannels","_component_group_item","GroupItem","actual_group_ids","items_included_to_group","items_excluded_from_group","onSelect","download_in_text_format","download_in_html_format","download_in_raw_format","useExecutionTimeDecorator","handle_change_selected_items","_component_pdf_document_row","angle_select_options","page_select_options","PdfDocumentRow","pdf_docs","max_order","orders","is_all_uploaded","is_same_page_count_and_not_edited","acc","handle_delete_all","handle_download","handle_merge_annotations","swap","id_1","id_2","obj_1","obj_2","order_1","order_2","handle_move_up","handle_move_down","handle_update_page_from","handle_update_page_to","handle_update_angle","share_files","label","_component_question_block","_hoisted_12","answer","is_correct","show_correct_answer","replies","shuffled_answers","shuffleArray","reset_replies","is_reply_ok","is_ok","handle_check_reply","QuestionBlock","questions","is_test_active","total_count_of_questions","count_of_questions_in_test","active_question_id","chosen_questions","count_of_errors","handle_stop_test","active_question","handle_start_test","init_array","_","shuffled_array","handle_user_replied","handle_new_questions_drop","handle_count_of_questions_changed","is_drag_above_drop_zone","make_full_name","usergroup_options","surname","convert_state","convert_usergroup","USERGROUP","STATE","FROM_USER","TO_USER","DESCRIPTION","UPDATED_AT","current_query","handle_search_action","_component_download_file_page","generate_message","handle_get_file_info","file_info","DownloadFilePage","make_message","convertDateToDateString","is_process_valid","_component_flow_item_step","onUpdated","el","_hoisted_4","attr_value","attr_key","formatted_input","formatted_output","formatted_started_at","formatted_finished_at","is_input_shown","is_output_shown","is_attributes_shown","emit_updated","flowitem","flowitem_name","flowitem_trigger","flowitem_started_at","flowitem_finished_at","flowitem_input","flowitem_state","process_steps","real_latest_steps","handle_restart_flowitem","trigger_el","step_el_arr","make_dom_elem_obj","$el","lines_arr","draw","dom_steps","endElem","must","should","combined_to_be_finished_before","line","before","before_name","before_success","before_result_key","dash","startElem","LeaderLine","startPlug","startSocket","endSocket","middleLabel","useGetFlowItem","useGetFlowItemSteps","onBeforeUpdate","handle_updated","nextTick","routes","component","DownloadFileFromFolderPage","DownloadShareFilePage","DownloadMailMessageFilePage","SearchDocumentPage","DocumentPage","transition","LoginPage","FoldersPage","ApprovalsPage","ProfilePage","CartPage","SettingsPage","UserSettingsPage","UserReplacementsPage","FolderSettingsPage","UserFolderSettingsPage","PermissionSettingsPage","UserGroupSettingsPage","UsersInUserGroupsSettingsPage","FlowsPage","FlowItemsPage","FlowItemPage","ServerSettingsPage","CounterSettingsPage","MailBoxSettingsPage","MailChannelSettingsPage","MailChannelsInMailBoxesSettingsPage","MailMessagesPage","ServicePage","PdfMergeToolPage","ShareFilePage","SelfTestingPage","DocumentApprovalSearchPage","MessagePage","createRouter","history","createWebHistory","arrOfObjects","queryObject","caseSensitive","to_be_taken","needle","key_names","haystack","required_permissions","auto_login_action","encodeURIComponent","useGetInfo","uid","context_map","DOCUMENT_ATTRIBUTES","useGetDocumentAttributesContext","PREVIOUS_DOCUMENTS_ATTRIBUTE","useGetDocumentPreviousContext","USERS_EMAILS","useGetUserEmailContext","use404","convertStringToDate","NaN","converters","date_to_timestamp","convertDateToTimestamp","date_to_iso_string","convertDateToIsoString","date_to_date_object","convertDateToDateObject","converter_func","repository","all_items","items_seen_on_page","usePromiseExecuteMixin","chunk_size","promises_executed","simultaneous_process_count","cmd","execution_time","in_progress","convert_functions","exclude_keys","toLocaleString","sort_default","sort_numbers","sort_strings","sort_change_order_number","id_a","year_a","id_b","year_b","compare_years","compare_ids","rules","DEFAULT","INTEGER","STRING","BOOL","CHANGE_ORDER_NUMBER","array","t","m","random","approval_by_id","approval_state_by_username","approvals_copy","schema_obj","handle_change_current","cart_obj_count","cart_obj_count_increased_flag","cart_obj_count_decreased_flag","handle_empty_cart","handle_delete_on_behalf_user","NavigationComponent","can_view_settings","navigation_links","pages_with_usergroup_selection","BasePage","provide","render","createApp","App","use","CKEditor","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","r","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","prop","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}